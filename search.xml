<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>memtis source code</title>
      <link href="/2023/12/15/memtis-source-code/"/>
      <url>/2023/12/15/memtis-source-code/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Tiered Memory Management for Virtual Machines</title>
      <link href="/2023/12/07/vTMM/"/>
      <url>/2023/12/07/vTMM/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>(EuroSys), 2023</li><li>vTMM: Tiered Memory Management for Virtual Machines</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Sai Sha, Chuandong Li, Yingwei Luo, Xiaolin Wang, ç»ˆäºè¯»åˆ°åŒ—äº¬å¤§å­¦çš„äº†</li><li>Zhenlin Wang, Michigan Technological University</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>å†…å­˜è™šæ‹ŸåŒ–çš„æŠ€æœ¯ä¸€ç›´åœ¨å‘å±•ï¼Œé‚£ä¹ˆä»¥ä¸‹ç½—åˆ—äº†å‡ ç§æ¯”è¾ƒå…¸å‹çš„å†…å­˜è™šæ‹ŸåŒ–æ–¹å¼ã€‚</p><h3 id="2-1-å¤šæ¬¡åœ°å€è½¬æ¢"><a href="#2-1-å¤šæ¬¡åœ°å€è½¬æ¢" class="headerlink" title="2.1 å¤šæ¬¡åœ°å€è½¬æ¢"></a>2.1 å¤šæ¬¡åœ°å€è½¬æ¢</h3><p>å†…å­˜è½¯ä»¶è™šæ‹ŸåŒ–ï¼š<br>è™šæ‹Ÿæœºçš„è™šæ‹Ÿåœ°å€ï¼ˆGuest Virtual Address, GVAï¼‰<br>è™šæ‹Ÿæœºçš„ç‰©ç†åœ°å€ï¼ˆGuest Physical Address, GPAï¼‰<br>Host è™šæ‹Ÿåœ°å€ï¼ˆHost Virtual Addressï¼‰<br>Host çš„ç‰©ç†åœ°å€ï¼ˆHost Physical Address, HPAï¼‰</p><p>è™šæ‹Ÿåˆ°ç‰©ç†éƒ½æ˜¯ä¼ ç»Ÿçš„é¡µè¡¨å®Œæˆåœ°å€è½¬æ¢ã€‚è™šæ‹Ÿæœºå’Œç‰©ç†æœºçš„è½¬æ¢VMMéœ€è¦ intercept ï¼ˆæˆªè·ï¼‰è™šæ‹Ÿæœºçš„å†…å­˜è®¿é—®æŒ‡ä»¤ï¼ŒVMMå®šä¹‰çš„æ˜ å°„è¡¨æ˜¯kvm_memory_slotçš„æ•°æ®ç»“æ„ï¼Œéœ€è¦ç»è¿‡å¤šæ¬¡åœ°å€è½¬æ¢ã€‚</p><h3 id="2-2-å½±å­é¡µè¡¨"><a href="#2-2-å½±å­é¡µè¡¨" class="headerlink" title="2.2 å½±å­é¡µè¡¨"></a>2.2 å½±å­é¡µè¡¨</h3><p>é€šè¿‡å½±å­é¡µè¡¨ï¼Œåˆ™å¯ä»¥å®ç°å®¢æˆ·æœºè™šæ‹Ÿåœ°å€åˆ°å®¿ä¸»æœºç‰©ç†åœ°å€çš„ç›´æ¥è½¬æ¢ã€‚å¿…é¡»ä¸º Guest çš„ç³»ç»Ÿé¡µè¡¨è®¾è®¡ä¸€å¥—å¯¹åº”çš„å½±å­é¡µè¡¨ï¼Œç„¶åå°†å½±å­é¡µè¡¨è£…å…¥ Host çš„ MMU ä¸­ï¼Œè¿™æ ·å½“ Guest è®¿é—® Host å†…å­˜æ—¶ï¼Œå°±å¯ä»¥æ ¹æ® MMU ä¸­çš„å½±å­é¡µè¡¨æ˜ å°„å…³ç³»ï¼Œå®Œæˆ GVA åˆ° HPA çš„ç›´æ¥æ˜ å°„ã€‚è€Œç»´æŠ¤è¿™å¥—å½±å­é¡µè¡¨çš„å·¥ä½œåˆ™ç”± VMM æ¥å®Œæˆã€‚ç”±äº Guest ä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè¿™å°±æ„å‘³ç€ VMM è¦ä¸º Guest ä¸­çš„æ¯ä¸ªè¿›ç¨‹é¡µè¡¨éƒ½ç»´æŠ¤ä¸€å¥— å¯¹åº”çš„å½±å­é¡µè¡¨ï¼Œå½“ Guest è¿›ç¨‹è®¿é—®å†…å­˜æ—¶ï¼Œæ‰å°†è¯¥è¿›ç¨‹çš„å½±å­é¡µè¡¨è£…å…¥ Host çš„ MMU ä¸­ï¼Œå®Œæˆåœ°å€è½¬æ¢ã€‚è¿™ç§æ–¹å¼è™½ç„¶å‡å°‘äº†åœ°å€è½¬æ¢çš„æ¬¡æ•°ï¼Œä½†æœ¬è´¨ä¸Šè¿˜æ˜¯çº¯è½¯ä»¶å®ç°çš„ï¼Œæ•ˆç‡è¿˜æ˜¯ä¸é«˜ï¼Œè€Œä¸” VMM æ‰¿æ‹… äº†å¤ªå¤šå½±å­é¡µè¡¨çš„ç»´æŠ¤å·¥ä½œã€‚</p><h3 id="2-3-EPT"><a href="#2-3-EPT" class="headerlink" title="2.3 EPT"></a>2.3 EPT</h3><p>EPT(Extended Page Table) åœ¨åŸæœ‰ CR3 é¡µè¡¨åœ°å€æ˜ å°„çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥äº† EPT é¡µè¡¨æ¥å®ç°å¦ä¸€å±‚æ˜ å°„ï¼Œè¿™æ ·ï¼ŒGVA-&gt;GPA-&gt;HPA çš„ä¸¤æ¬¡åœ°å€è½¬æ¢éƒ½ç”±ç¡¬ä»¶æ¥å®Œæˆã€‚CPU é¦–å…ˆä¼šè®¿é—® Guest ä¸­çš„ CR3 é¡µè¡¨æ¥å®Œæˆ GVA åˆ° GPA çš„è½¬æ¢ï¼Œå¦‚æœ GPA ä¸ä¸ºç©ºï¼Œåˆ™ CPU æ¥ç€é€šè¿‡ EPT é¡µè¡¨æ¥å®ç° GPA åˆ°HPA çš„è½¬æ¢ï¼ˆå®é™…ä¸Šï¼ŒCPU ä¼šé¦–å…ˆæŸ¥çœ‹ç¡¬ä»¶ EPT TLB æˆ–è€…ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„è½¬æ¢ï¼Œæ‰ä¼šè¿›ä¸€æ­¥æŸ¥çœ‹ EPT é¡µè¡¨ï¼‰ï¼Œå¦‚æœ HPA ä¸ºç©ºå‘¢ï¼Œåˆ™ CPU ä¼šæŠ›å‡º EPT Violation å¼‚å¸¸ç”± VMM æ¥å¤„ç†ã€‚</p><p>å½“VMä¸­çš„GuestOSåœ¨æ‰§è¡Œå†…å­˜è®¿é—®æ“ä½œæ—¶ï¼Œä¼šé€šè¿‡EPT-page-structureå°†linear-addresså…ˆè½¬æ¢æˆguest-physical-address,ç„¶åå†å°†guest-physical-addressè½¬æ¢æˆå®é™…çš„ç‰©ç†åœ°å€physical-addressï¼›å¾—åˆ°äº†æœ€ç»ˆçš„å®é™…ç‰©ç†åœ°å€ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/direct/1c30ff693cf54e42adb9a0c59db030e8.png"></p><p>PMLæ˜¯ä¸ªè®°å½•è„é¡µGPAçš„logï¼Œä¼šæœ‰ä¸€å—buffä¸“é—¨å­˜ï¼Œè¿™ä¸ªçš„è®¾è®¡å’Œç¡¬ä»¶çš„è®¾è®¡æœ‰å…³ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>åˆ†å±‚å†…å­˜åœ¨è™šæ‹Ÿæœºåº”ç”¨ä¸­çš„æ€§èƒ½æå‡ã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/direct/0d64837bec664b199ea625e0c343a989.png" alt="motivation"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/direct/1a5b60a538304935bd2f31f799cfa995.png"></p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>é¦–å…ˆæ˜¯é‡‡æ ·æ–¹é¢ï¼Œå¹¶ä¸å»é‡‡æ ·æ•´ä¸ªé¡µè¡¨ï¼Œç”šè‡³GPTæ¯”EPTè¦å°ä¹Ÿä¸å»é‡‡æ ·ï¼Œç›´æ¥åœ¨PMLè„é¡µé¢çš„èŒƒå›´é‡Œé‡‡æ ·ã€‚æœ‰ä¸€ä¸ªæ—¶é—´çª—å£ï¼Œä¸Šæ¬¡PMLè®°å½•çš„åœ°å€ä¸‹æ¬¡å°±è¢«è®¿é—®ã€‚å› ä¸ºè®¿é—®åéœ€è¦åˆ·æ–°ADä½ï¼Œè¿™ä¸ªä¹Ÿæ¯”è¾ƒè€—æ—¶é—´ï¼Œäºæ˜¯ä¹æœ‰ä¸€ä¸ªå¤šçº§åˆ—è¡¨ï¼Œåœ¨åˆ—è¡¨è¶Šé å‰è·å¾—ADä½åˆ·æ–°å…æ­»é‡‘ç‰Œè¶Šå¤šã€‚å½“ç„¶è¯¦ç»†ç®—æ³•è®¾ç½®è¿˜æ˜¯çœ‹è®ºæ–‡ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/direct/c4735ac9101d461e9da762cb5b580a86.png"><br>åœ¨åŒºåˆ†é¡µé¢å†·çƒ­æ–¹é¢ï¼Œç”±äºè¯»å†™é€ æˆçš„å»¶è¿Ÿä¸åŒï¼Œäºæ˜¯ä¸Šä¸€æ­¥é‡‡æ ·åˆ°çš„è¯»å†™æ¬¡æ•°åœ¨è¿™é‡ŒåŠ æƒä¹‹åå»è¡¨ç¤ºé¡µé¢çš„å†·çƒ­ã€‚æ¡¶æ’åºç”±äºæ—¶é—´å¤æ‚åº¦ä½ï¼Œç”¨äºç­›é€‰å‡ºè¦è¿›è¡Œè¿ç§»çš„é¡µé¢ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/direct/b2269c8c7ab04dc18953bb7b0c072505.png"><br>è¿ç§»æ¶‰åŠåˆ°è„é¡µé‚£ä¹ˆå¦‚ä½•å»ä¿æŠ¤ä¸€è‡´æ€§ï¼Œåœ¨è¿™é‡Œä½œè€…è¿˜å¯¹æ¯”äº†ä»¥å¾€çš„è¿ç§»æ–¹æ³•ï¼Œè¯´æ˜åœ¨è™šæ‹Ÿæœºé‡Œä¸å¤ªåˆé€‚ä»¥å¾€çš„æ–¹å¼ã€‚è¿™é‡Œæ˜¯å¤åˆ¶çš„æ–¹æ³•ï¼Œä¸è¿‡ç”±äºè¿™äº›é¡µé¢ä¼šåœ¨PMLé‡Œä¹Ÿæœ‰å­˜ï¼Œæ‰€ä»¥åˆ©ç”¨èµ·æ¥ä¿æŒä¸€è‡´æ€§ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/direct/f28cf860d41a40e3ad10ee5160fde179.png"><br>é™¤æ­¤ä¹‹å¤–ï¼Œå½“ä¸€å°ç‰©ç†æœºè¿è¡Œå¤šå°è™šæ‹Ÿæœºæ—¶ï¼Œæ¯å°æœºå™¨ç›¸æ¯”è¾ƒå…¶å®æœ€çƒ­çš„é¡µé¢çƒ­åº¦ä¹Ÿæœ‰å·®åˆ«ã€‚åŒæ—¶ï¼Œå¿«é€Ÿå†…å­˜å±‚èµ„æºç´§å¼ ï¼Œäºæ˜¯å»ºç«‹å†…å­˜æ± ï¼Œå¯¹å¿«é€Ÿçš„å†…å­˜èµ„æºè¿›è¡Œæœ‰æ•ˆè°ƒåº¦ã€‚è¿™é‡Œæœ‰ä¸ªéš¾ç‚¹ï¼Œè™šæ‹Ÿæœºçš„å†…å­˜èµ„æºæŒ‰ç†è¯´éƒ½å¾—éš”ç¦»å¼€ï¼Œæ€ä¹ˆå»åŠ¨æ€è°ƒåº¦çš„å‘¢ï¼Ÿ</p><h2 id="6-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#6-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="6. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>6. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>ä¸»è¦é—®é¢˜è¿˜æ˜¯è¿™æ ·çš„ç‰©ç†æœºä¼šæœ‰è¿è¡Œå¤šå°‘è™šæ‹Ÿæœºï¼Œä»¥åŠä»–çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> Virtual Machines </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DAMON</title>
      <link href="/2023/11/22/DAMO/"/>
      <url>/2023/11/22/DAMO/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªé‡‡æ ·æ–¹å¼æ˜¯ä¸€ä¸ªåŒºåŸŸå†…é€‰ä¸€ä¸ªé¡µé¢ï¼Œç§°ä¸ºæ ·æœ¬é¡µ</p><p>é¦–å…ˆæ˜¯éƒ½å¾—åœ¨rootç”¨æˆ·æˆ–è€…sudoä¸‹è¿è¡Œï¼Œå¦åˆ™ä¼šæœ‰éš¾ä»¥ä¸‹æ‰‹çš„bugã€‚damo start â€“helpä¹‹ç±»çš„æ–¹å¼å¯ä»¥è·å¾—æ‰€æä¾›å‘½ä»¤çš„ä»‹ç»ã€‚</p><p>ç”»å›¾ç›¸å…³å‘½ä»¤éœ€è¦å®‰è£…gnuplotå‘½ä»¤å¦‚<code>sudo apt install gnuplot-x11</code></p><h2 id="ç”¨äºè®°å½•è®¿é—®ç›‘æ§ç»“æœå¹¶å¯è§†åŒ–è¿™äº›ç»“æœ"><a href="#ç”¨äºè®°å½•è®¿é—®ç›‘æ§ç»“æœå¹¶å¯è§†åŒ–è¿™äº›ç»“æœ" class="headerlink" title="ç”¨äºè®°å½•è®¿é—®ç›‘æ§ç»“æœå¹¶å¯è§†åŒ–è¿™äº›ç»“æœ"></a>ç”¨äºè®°å½•è®¿é—®ç›‘æ§ç»“æœå¹¶å¯è§†åŒ–è¿™äº›ç»“æœ</h2><h3 id="record"><a href="#record" class="headerlink" title="record"></a>record</h3><p><code>sudo damo record $(pidof pr)</code><br>å¾—åˆ°damon.dataæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸åŒæ—¶é—´ä¸åŒåŒºåŸŸçš„è®¿é—®é¢‘ç‡ã€‚ä¼šç»Ÿè®¡è®¿é—®äº‹ä»¶å’Œå·¥ä½œè´Ÿè½½å¤§å°çš„æƒ…å†µã€‚ä¼šåœ¨å·¥ä½œè´Ÿè½½åœæ­¢æ—¶è‡ªåŠ¨åœæ­¢ã€‚ä½†æ˜¯éœ€è¦é¢å¤–çš„ä»£ç å»å¯è§†åŒ–ã€‚</p><p>ä½†æ˜¯è¿˜æ˜¯å¤ªç²—ç²’åº¦äº† <span class="github-emoji"><span>ğŸ˜•</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f615.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> é€šè¿‡ <code>damo record --help</code>å¯ä»¥è·å¾—æ›´å¤šçš„é€‰é¡¹è®¾ç½®ï¼Œnice</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">damo record <span class="token parameter variable">--help</span>positional arguments:  <span class="token operator">&lt;</span>command, pid, special keywords, or kdamonds json spec<span class="token operator">&gt;</span>                        the implicit monitoring requestsoptional arguments:  -h, <span class="token parameter variable">--help</span>            show this <span class="token builtin class-name">help</span> message and <span class="token builtin class-name">exit</span>  <span class="token parameter variable">-s</span> <span class="token operator">&lt;</span>microseconds<span class="token operator">&gt;</span>, <span class="token parameter variable">--sample</span> <span class="token operator">&lt;</span>microseconds<span class="token operator">&gt;</span>                        sampling interval <span class="token punctuation">(</span>us <span class="token number">1,000</span>,000<span class="token punctuation">)</span>                        é‡‡æ ·é—´éš”æ˜¯æœ‰ç”¨ä¸”éœ€è¦çš„ã€‚åªä¼šæ£€æŸ¥è¿™ä¸ªåŒºåŸŸçš„ä¸€ä¸ªæ ·æœ¬é¡µé¢ã€‚  <span class="token parameter variable">-a</span> <span class="token operator">&lt;</span>microseconds<span class="token operator">&gt;</span>, <span class="token parameter variable">--aggr</span> <span class="token operator">&lt;</span>microseconds<span class="token operator">&gt;</span>                        aggregate interval <span class="token punctuation">(</span>us<span class="token punctuation">)</span>è¿™ä¸ªæ˜¯é‡‡æ ·ä¹‹åèšåˆç”¨ï¼Œå¤šæ¬¡é‡‡æ ·é—´éš”çš„å€¼æ”¾åœ¨ä¸€ä¸ªæ—¶é—´æ®µå»èšåˆæ˜¾ç¤ºï¼Œè¿™æ ·é…åˆé‡‡æ ·é—´éš”ä½¿ç”¨å›¾ç‰‡å°±ä¸ä¼šé‚£ä¹ˆé»‘äº†ã€‚  <span class="token parameter variable">-u</span> <span class="token operator">&lt;</span>microseconds<span class="token operator">&gt;</span>, <span class="token parameter variable">--updr</span> <span class="token operator">&lt;</span>microseconds<span class="token operator">&gt;</span>                        regions update interval <span class="token punctuation">(</span>us<span class="token punctuation">)</span>é‡‡æ ·æ—¶å°†ç›‘æ§ç›®æ ‡åŒºåŸŸåˆ’åˆ†ä¸ºå¤šä¸ªå­åŒºåŸŸï¼Œå­åŒºåŸŸç”±è®¿é—®é¢‘ç‡ç›¸ä¼¼çš„ç›¸é‚»é¡µé¢ç»„æˆã€‚æ¯ä¸ªå­åŒºåŸŸå¤§å°æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯ç¨‹åºè¿è¡Œä¸­ï¼ŒåŸå…ˆæ»¡è¶³æ¡ä»¶çš„å­åŒºåŸŸå¯èƒ½å˜äº†ï¼Œæ­¤æ—¶éœ€è¦æ›´æ–°å­åŒºåŸŸã€‚  <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span><span class="token comment"># regions&gt;, --minr &lt;# regions&gt;</span>                        minimal number of regions  <span class="token parameter variable">-m</span> <span class="token operator">&lt;</span><span class="token comment"># regions&gt;, --maxr &lt;# regions&gt;</span>                        maximum number of regions  <span class="token parameter variable">--monitoring_nr_regions_range</span> <span class="token operator">&lt;</span>min<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>max<span class="token operator">&gt;</span>                        min/max number of monitoring regions                        è¿™ä¸ªæŒ‡æ¯æ¬¡é‡‡æ ·ä¼šæœ‰å¤šå°‘ä¸ªç›‘æ§åŒºåŸŸï¼Œå¢å¤šç›‘æ§åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸçš„å¤§å°è‡ªç„¶å°±å°äº†ã€‚è€Œä¸”è¿™ä¸ªå·¥å…·å¦‚æœä½ ä¸€ä¸ªåœ°æ–¹è®¿é—®é¢‘ç‡ç›¸ä¼¼ï¼Œå°±ä¼šæŠŠé‡‡æ ·ç²’åº¦æ‰©å¤§çš„ã€‚åŒºåŸŸå¤šå½“ç„¶å¼€é”€å°±å¤šã€‚  <span class="token parameter variable">--damos_sz_region</span> <span class="token operator">&lt;</span>min<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>max<span class="token operator">&gt;</span>                        min/max size of damos target regions <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>                        æŒ‡å®šé‡‡æ ·åŒºåŸŸçš„å¤§å°ç²’åº¦ï¼Œå“‡å¡ï¼Œ4096å°±æ˜¯4KBï¼Œ8129å°±æ˜¯ä¸¤ä¸ªé¡µé¢å’Œèµ·æ¥ç›‘æ§ã€‚  <span class="token parameter variable">-o</span> <span class="token operator">&lt;</span>file path<span class="token operator">&gt;</span>, <span class="token parameter variable">--out</span> <span class="token operator">&lt;</span>file path<span class="token operator">&gt;</span>                        output <span class="token function">file</span> path   ç›®å‰æ²¡å•¥ç”¨çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¿ç•™åœ¨è¿™å‡ ä»‹ç»   <span class="token parameter variable">--ops</span> <span class="token punctuation">{</span>vaddr,paddr,fvaddr<span class="token punctuation">}</span>                        monitoring operations <span class="token builtin class-name">set</span>  <span class="token parameter variable">--target_pid</span> <span class="token operator">&lt;</span>pid<span class="token operator">&gt;</span>    pid of monitoring target process  <span class="token parameter variable">-r</span> <span class="token string">"&lt;start&gt;-&lt;end&gt; ..."</span>, <span class="token parameter variable">--regions</span> <span class="token string">"&lt;start&gt;-&lt;end&gt; ..."</span>                        monitoring target address regions                        è¿™æ˜¯æŒ‡åœ°å€åŒºåŸŸï¼Œä¸€èˆ¬ä¹Ÿä¸çŸ¥é“è¿™ä¸ªè¿›ç¨‹åœ¨å“ªä¸ªåœ°å€å•Šï¼Ÿ  <span class="token parameter variable">--numa_node</span> <span class="token operator">&lt;</span>node id<span class="token operator">&gt;</span>                        <span class="token keyword">if</span> target is <span class="token string">'paddr'</span>, limit it to the numa <span class="token function">node</span>  <span class="token parameter variable">--damos_action</span> <span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>                        damos action to apply to the target regions  <span class="token parameter variable">--monitoring_intervals</span> <span class="token operator">&lt;</span>sample<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>aggr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>update<span class="token operator">&gt;</span>                        monitoring intervals <span class="token punctuation">(</span>us<span class="token punctuation">)</span>                        ç»„åˆçš„é‡‡æ ·é—´éš”ç”¨ä¸åˆ°è¿™ä¹ˆå¤æ‚çš„                      <span class="token parameter variable">--damos_access_rate</span> <span class="token operator">&lt;</span>min<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>max<span class="token operator">&gt;</span>                        min/max access rate of damos target regions <span class="token punctuation">(</span>percent<span class="token punctuation">)</span>  <span class="token parameter variable">--damos_age</span> <span class="token operator">&lt;</span>min<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>max<span class="token operator">&gt;</span>                        min/max age of damos target regions <span class="token punctuation">(</span>microseconds<span class="token punctuation">)</span>  <span class="token parameter variable">--damos_apply_interval</span> <span class="token operator">&lt;</span>microseconds<span class="token operator">&gt;</span>                        the apply interval <span class="token keyword">for</span> the schemeåº”ç”¨éš”ç¦»ï¼Ÿï¼Ÿï¼Ÿ  <span class="token parameter variable">--damos_quotas</span> <span class="token operator">&lt;</span>time <span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>size <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>reset interval <span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>size priority weight <span class="token punctuation">(</span>permil<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>access rate priority weight<span class="token operator">&gt;</span> <span class="token punctuation">(</span>permil<span class="token punctuation">)</span> <span class="token operator">&lt;</span>age priority weight<span class="token operator">&gt;</span> <span class="token punctuation">(</span>permil<span class="token punctuation">)</span>                        damos quotasç»™damoçš„èµ„æºä½¿ç”¨é…é¢ï¼Ÿ  <span class="token parameter variable">--damos_wmarks</span> <span class="token operator">&lt;</span>metric <span class="token punctuation">(</span>none<span class="token operator">|</span>free_mem_rate<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>interval <span class="token punctuation">(</span>us<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>high mark <span class="token punctuation">(</span>permil<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>mid mark <span class="token punctuation">(</span>permil<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>low mark <span class="token punctuation">(</span>permil<span class="token punctuation">)</span><span class="token operator">&gt;</span>                        damos watermarks  <span class="token parameter variable">--damos_filter</span> <span class="token operator">&lt;</span>filter argument<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>filter argument<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.<span class="token punctuation">]</span>                        damos filter <span class="token punctuation">(</span>type, matching, and optional arguments                        çœ‹æ¥å°±æ˜¯è¿‡æ»¤æŸäº›åœ°å€å’¯ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªè¿‡æ»¤å™¨  <span class="token parameter variable">--kdamonds</span> <span class="token operator">&lt;</span>json string or file<span class="token operator">&gt;</span>                        json <span class="token function">format</span> kdamonds specification to run DAMON <span class="token keyword">for</span>  <span class="token parameter variable">--damon_interface</span> <span class="token punctuation">{</span>sysfs,debugfs,auto<span class="token punctuation">}</span>                        underlying DAMON interface to use <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span> DEPRECATED<span class="token punctuation">)</span>                        ï¼ï¼ï¼æ€è€ƒæŠ¥é”™çš„åŸå› ï¼Œæœ‰ç‚¹æ„æ€  <span class="token parameter variable">--debug_damon</span>         Print debugging log  <span class="token parameter variable">--output_type</span> <span class="token punctuation">{</span>json_compressed,json,perf_script,perf_data<span class="token punctuation">}</span>                        output file's <span class="token builtin class-name">type</span>  <span class="token parameter variable">--output_permission</span> OUTPUT_PERMISSION                        permission of the output <span class="token function">file</span>  <span class="token parameter variable">--perf_path</span> PERF_PATH                        path of perf tool  <span class="token parameter variable">--include_child_tasks</span>                        record accesses of child processes                        å°†å­è¿›ç¨‹ä¹Ÿä¸€èµ·ç›‘æ§<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡ŒæŒ‡å®šçš„ç›‘æ§ç¨‹åºæœ‰3ç§æ–¹å¼ï¼Œé¦–å…ˆåœ¨å‘½ä»¤åé¢ä½¿ç”¨command æ¯”å¦‚â€sleep 5â€; ç¬¬äºŒç§æ–¹å¼è·å–pidï¼ˆæ¯”è¾ƒå¥½å¥‡MPIç¨‹åºé‚£ä¹ˆå¤šè¿›ç¨‹ä¼šæ€æ ·ï¼‰; ç¬¬ä¸‰ç§æ–¹å¼æŒ‡å®šçš„ç‰©ç†åœ°å€ï¼ˆç›‘è§†ç›®æ ‡åŒºåŸŸé»˜è®¤ä¸º /proc/iomem æ–‡ä»¶ä¸­æŒ‡å®šçš„æœ€å¤§â€œSystem RAMâ€åŒºåŸŸã€‚ï¼‰ã€‚</p></blockquote><h3 id="report"><a href="#report" class="headerlink" title="report"></a>report</h3><h4 id="heats"><a href="#heats" class="headerlink" title="heats"></a>heats</h4><p><code>sudo damo report heats --heatmap å›¾ç‰‡å</code><br>å¥½çš„è¿™ä¸ªç›´æ¥å°†å¯è§†åŒ–çš„éƒ½å±•ç¤ºäº†ï¼Œå®Œå…¨OKäº†ï¼ŒIt supports pdf, png, jpeg, and svg.å¦‚æœéœ€è¦æŒ‡å®šåŒºåŸŸï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨â€“resolç»„åˆæ¥åšã€‚<code>--time_ range &lt;time&gt; &lt;time&gt;</code>å’Œ<code>--address_ range &lt;address&gt; &lt;address&gt;</code>éƒ½å¯ä»¥æŒ‡å®šæ›´ç»†èŠ‚çš„èŒƒå›´ã€‚å¦‚æœæƒ³è¦æ˜¾ç¤ºç»å¯¹åœ°å€å’Œæ—¶é—´ä½œä¸ºæ¨ªçºµåæ ‡ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>--abs_time</code>å’Œ<code>--abs_addr</code>.è®¾ç½®å›¾ç‰‡ä¸»é¢˜é¢œè‰²æœ‰3ç§å¯é€‰grayã€flameã€emotion<code>--stdout_heatmap_color</code>. <code>-i</code> é€‰æ‹©æŒ‡å®šæ–‡ä»¶åã€‚</p><p><code>sudo damo report heats --resol 2 4</code><br>â€“resolæ˜¯æŒ‡åˆ†è¾¨ç‡ï¼Œå…·ä½“æ¥è¯´åé¢æ ¹çš„ä¸¤ä¸ªå‚æ•°è¡¨ç¤º<strong>è¾“å‡ºæ—¶é—´æ®µåªæœ‰2æ®µï¼Œè¾“å‡ºåœ°å€èŒƒå›´æœ‰4ä¸ª</strong>ï¼Œä¼šæŒ‰ç…§æ€»çš„æ—¶é—´å’Œåœ°å€èŒƒå›´å¤§æ¦‚å¹³å‡åˆ†çš„äºšå­ã€‚<br><strong>è¾“å‡ºä¾æ¬¡è¡¨ç¤ºä»¥çº³ç§’ä¸ºå•ä½çš„æ—¶é—´ã€ä»¥å­—èŠ‚ä¸ºå•ä½çš„åœ°å€ã€è§‚å¯Ÿåˆ°çš„è®¿é—®é¢‘ç‡</strong>ã€‚<br><strong>è¿™ä¸ªå‘½ä»¤è¾“å‡ºçš„æ•°æ®å¯ä»¥æ”¯æŒç”»çƒ­å›¾</strong>ã€‚</p><p><code>sudo damo report heats --heatmap stdout</code><br><strong>éœ€è¦å’Œdamon.dataåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹</strong>å°±èƒ½ç›´æ¥è¿è¡Œ(x-axis) what memory region (y-axis) is how frequently accessed (color)</p><h4 id="wssï¼ˆworking-set-sizeï¼‰"><a href="#wssï¼ˆworking-set-sizeï¼‰" class="headerlink" title="wssï¼ˆworking set sizeï¼‰"></a>wssï¼ˆworking set sizeï¼‰</h4><p><code>sudo damo report wss --range 0 101 1</code><br>the distribution of the working set size.è¿™ä¸ªæ˜¯ç»ˆç«¯æ‰“å°å‡ºæ¥çš„å›¾åƒï¼Œä¸å¤ªè¡Œã€‚è€Œä¸”è¿™ä¸ªç»Ÿè®¡å›¾æ¨ªçºµåæ ‡ä¹Ÿä¸å¤ªæ¸…æ¥šã€‚</p><p><code>sudo damo report wss --range 0 101 1 --sortby time --plot å›¾ç‰‡å</code><br>how the working set size has changed by time.è¿™ä¸ªæ˜¯æ›²çº¿å›¾ï¼Œç»Ÿè®¡çš„ä¿¡æ¯å’Œæ ·å¼ä¸Šæ²¡æˆ‘è‡ªå·±åšçš„å¥½ï¼Œå¯èƒ½è¿™ä¸ªå¼€é”€å°ä¸€äº›ã€‚</p><h4 id="raw"><a href="#raw" class="headerlink" title="raw"></a>raw</h4><p><code>sudo damo report raw &gt;&gt; pr.txt</code><br>å¯ä»¥å°†ã€‚dataè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„å†…å®¹è¯»å‡ºæ¥ï¼Œç©ºç™½è¡Œéš”å¼€æ¯ä¸€æ¬¡çš„é‡‡æ ·ã€‚æ¯æ¬¡é‡‡æ ·çš„å†…å®¹åŒ…æ‹¬<strong>é‡‡æ ·å¼€å§‹ã€ç»“æŸã€æŒç»­æ—¶é—´ã€æ­¤æ¬¡ç›‘æ§åŒºåŸŸçš„æ•°é‡ã€æ¯ä¸ªç›‘æ§åŒºåŸŸçš„èµ·å§‹åœ°å€ã€åœ°å€é•¿åº¦ã€è®¿é—®é¢‘ç‡ã€age</strong>.</p><h2 id="ç”¨äºå¿«ç…§å’Œå¯è§†åŒ–-DAMON-çš„ç›‘æ§ç»“æœå’Œè¿è¡ŒçŠ¶æ€"><a href="#ç”¨äºå¿«ç…§å’Œå¯è§†åŒ–-DAMON-çš„ç›‘æ§ç»“æœå’Œè¿è¡ŒçŠ¶æ€" class="headerlink" title="ç”¨äºå¿«ç…§å’Œå¯è§†åŒ– DAMON çš„ç›‘æ§ç»“æœå’Œè¿è¡ŒçŠ¶æ€"></a>ç”¨äºå¿«ç…§å’Œå¯è§†åŒ– DAMON çš„ç›‘æ§ç»“æœå’Œè¿è¡ŒçŠ¶æ€</h2><h3 id="show"><a href="#show" class="headerlink" title="show"></a>show</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># damo start æˆ‘çš„workload</span><span class="token comment"># damo show</span><span class="token number">0</span>   addr <span class="token punctuation">[</span><span class="token number">4.000</span> GiB   , <span class="token number">16.245</span> GiB <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.245</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">7</span> m <span class="token number">32.100</span> s<span class="token number">1</span>   addr <span class="token punctuation">[</span><span class="token number">16.245</span> GiB  , <span class="token number">28.529</span> GiB <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.284</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">12</span> m <span class="token number">40.500</span> s<span class="token number">2</span>   addr <span class="token punctuation">[</span><span class="token number">28.529</span> GiB  , <span class="token number">40.800</span> GiB <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.271</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">15</span> m <span class="token number">10.100</span> s<span class="token number">3</span>   addr <span class="token punctuation">[</span><span class="token number">40.800</span> GiB  , <span class="token number">52.866</span> GiB <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.066</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">15</span> m <span class="token number">58.600</span> s<span class="token number">4</span>   addr <span class="token punctuation">[</span><span class="token number">52.866</span> GiB  , <span class="token number">65.121</span> GiB <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.255</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">16</span> m <span class="token number">15.900</span> s<span class="token number">5</span>   addr <span class="token punctuation">[</span><span class="token number">65.121</span> GiB  , <span class="token number">77.312</span> GiB <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.191</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">16</span> m <span class="token number">22.400</span> s<span class="token number">6</span>   addr <span class="token punctuation">[</span><span class="token number">77.312</span> GiB  , <span class="token number">89.537</span> GiB <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.225</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">16</span> m <span class="token number">24.200</span> s<span class="token number">7</span>   addr <span class="token punctuation">[</span><span class="token number">89.537</span> GiB  , <span class="token number">101.824</span> GiB<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">12.287</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">16</span> m <span class="token number">25</span> s<span class="token number">8</span>   addr <span class="token punctuation">[</span><span class="token number">101.824</span> GiB , <span class="token number">126.938</span> GiB<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">25.114</span> GiB <span class="token punctuation">)</span> access <span class="token number">0</span> %   age <span class="token number">16</span> m <span class="token number">25.300</span> stotal size: <span class="token number">122.938</span> GiB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¯ä¸ªRegionä¿¡æ¯åŒ…å«è¯¥Regionçš„ç›‘æ§ç»“æœï¼ŒåŒ…æ‹¬å†…å­˜Regionçš„èµ·å§‹åœ°å€ã€ç»“æŸåœ°å€ã€nr_accessesã€ageç­‰ï¼Œæ¯ä¸ªå¿«ç…§çš„Regionæ•°é‡å–å†³äºDAMONå‚æ•°min_nr_regionså’Œmax_nr_regionsï¼Œå®é™…æƒ…å†µç›‘æ§ç›®æ ‡åœ°å€ç©ºé—´çš„æ•°æ®è®¿é—®æ¨¡å¼ã€‚</p><h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><h2 id="è¿è¡Œæ§åˆ¶æŒ‡ä»¤"><a href="#è¿è¡Œæ§åˆ¶æŒ‡ä»¤" class="headerlink" title="è¿è¡Œæ§åˆ¶æŒ‡ä»¤"></a>è¿è¡Œæ§åˆ¶æŒ‡ä»¤</h2><h3 id="start"><a href="#start" class="headerlink" title="start"></a>start</h3><p>è¿™å°±æ˜¯æ€ä¹ˆè·‘éƒ½ä¼šè¢«æŠ¥é”™çš„ï¼ï¼ï¼</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æ¯”å¦‚è¿™é‡Œå¸Œæœ›éš”5så°±æœ‰å¿«ç…§</span><span class="token function">sudo</span> damo start <span class="token parameter variable">--target_pid</span> <span class="token variable"><span class="token variable">$(</span>pidof masim<span class="token variable">)</span></span><span class="token keyword">while</span> <span class="token builtin class-name">:</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">sudo</span> damo show<span class="token punctuation">;</span> <span class="token function">sleep</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç›¸å…³æŠ¥é”™ä½†ä¸é™äºï¼š</p><pre class="line-numbers language-none"><code class="language-none">could not turn DAMON on (cannot apply kdmonds from args (DAMON debugfs doesn't support online staging))vaddr region install failed (staging updates failed (DAMON debugfs doesn't support online staging))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¯•äº†è¯•<code>sudo mount -t debugfs none /sys/kernel/debug</code>ä¹Ÿæ²¡ç”¨</p><h3 id="ç‰©ç†åœ°å€å’Œè™šæ‹Ÿåœ°å€çš„æŸ¥è¯¢"><a href="#ç‰©ç†åœ°å€å’Œè™šæ‹Ÿåœ°å€çš„æŸ¥è¯¢" class="headerlink" title="ç‰©ç†åœ°å€å’Œè™šæ‹Ÿåœ°å€çš„æŸ¥è¯¢"></a>ç‰©ç†åœ°å€å’Œè™šæ‹Ÿåœ°å€çš„æŸ¥è¯¢</h3><p>damoä½¿ç”¨çš„æ˜¯å°†16è¿›åˆ¶åœ°å€å˜æˆ10è¿›åˆ¶åçš„åœ°å€ï¼Œæ— è®ºæ˜¯ä½œå›¾è¿˜æ˜¯è¾“å…¥åœ°å€èŒƒå›´ã€‚</p><p><code>sudo cat /proc/iomem</code>å¯ä»¥å¾—åˆ°ç‰©ç†åœ°å€çš„èŒƒå›´ï¼Œå¯¹äºç‰©ç†é‡‡æ ·damoåªæ¥å—æ•´ä¸ªSystem RAMåŒºåŸŸçš„åœ°å€ï¼Œå°±æ˜¯è¯´ä½ ä¸èƒ½æŠŠä¸€ä¸ªSystem RAMçš„åœ°å€æ‹†å¼€ç»™ä»–ã€‚è¿™ä¸ªåœ°å€çš„DRAMä¸€èˆ¬å‡ºç°åœ¨æ¯”è¾ƒé åçš„ä½ç½®ï¼Œå¯ä»¥æ ¹æ®<code>free -h</code>æˆ–è€…<code>numactl -H</code>ç®—ä¸€ç®—å¤§å°å¯¹ä¸å¯¹ã€‚</p><pre class="line-numbers language-none"><code class="language-none">00000000-00000fff : Reserved00001000-0008efff : System RAM0008f000-0008ffff : Reserved00090000-0009ffff : System RAM000a0000-000fffff : Reserved  000a0000-000bffff : PCI Bus 0000:00  000c8000-000cffff : PCI Bus 0000:00  000f0000-000fffff : System ROM00100000-46cc501f : System RAM46cc5020-46cf6a5f : System RAM46cf6a60-46cf701f : System RAM46cf7020-46d29c5f : System RAM46d29c60-46d2a01f : System RAM46d2a020-46d5cc5f : System RAM46d5cc60-46d5d01f : System RAM46d5d020-46d6505f : System RAM46d65060-49e76fff : System RAM49e77000-4ae76fff : ACPI Non-volatile Storage4ae77000-4b2cefff : System RAM4b2cf000-4b54dfff : ACPI Tables4b54e000-4bd93fff : System RAM4bd94000-4be99fff : Reserved4be9a000-4cdfffff : System RAM4ce00000-4cffffff : Reserved4d000000-5eefdfff : System RAM5eefe000-6e3fefff : Reserved  69569020-6956906f : APEI ERST  69569078-6956907f : APEI ERST  69569080-6956b01f : APEI ERST6e3ff000-6f3fefff : ACPI Non-volatile Storage6f3ff000-6f7fefff : ACPI Tables6f7ff000-6f7fffff : System RAM6f800000-8fffffff : Reserved  80000000-8fffffff : PCI MMCONFIG 0000 [bus 00-ff]90000000-9b7fffff : PCI Bus 0000:00  90000000-900fffff : PCI Bus 0000:04    90000000-9003ffff : 0000:04:00.0    90040000-9007ffff : 0000:04:00.1  91000000-91ffffff : PCI Bus 0000:02    91000000-91ffffff : PCI Bus 0000:03      91000000-91ffffff : 0000:03:00.0        91000000-912fffff : efifb  92000000-928fffff : PCI Bus 0000:02    92000000-928fffff : PCI Bus 0000:03      92000000-927fffff : 0000:03:00.0      92808000-9280bfff : 0000:03:00.0  92900000-929fffff : PCI Bus 0000:04    92900000-9290ffff : 0000:04:00.1      92900000-9290ffff : tg3    92910000-9291ffff : 0000:04:00.1      92910000-9291ffff : tg3    92920000-9292ffff : 0000:04:00.1      92920000-9292ffff : tg3    92930000-9293ffff : 0000:04:00.0      92930000-9293ffff : tg3    92940000-9294ffff : 0000:04:00.0      92940000-9294ffff : tg3    92950000-9295ffff : 0000:04:00.0      92950000-9295ffff : tg3  92a00000-92afffff : 0000:00:02.4  92b00000-92b7ffff : 0000:00:17.0    92b00000-92b7ffff : ahci  92b80000-92bfffff : 0000:00:11.5    92b80000-92bfffff : ahci  92c80000-92cfffff : 0000:00:02.1  92d00000-92d7ffff : 0000:00:02.1  92dc0000-92ddffff : 0000:00:02.4  92de0000-92deffff : 0000:00:14.0    92de0000-92deffff : xhci-hcd  92df0000-92df3fff : 0000:00:02.4  92df4000-92df7fff : 0000:00:1f.2  92df8000-92df9fff : 0000:00:17.0    92df8000-92df9fff : ahci  92dfa000-92dfbfff : 0000:00:11.5    92dfa000-92dfbfff : ahci  92dfc000-92dfdfff : 0000:00:02.0  92dfe000-92dfe0ff : 0000:00:1f.4  92dff000-92dfffff : 0000:00:16.4  92e00000-92e00fff : 0000:00:16.1  92e01000-92e01fff : 0000:00:16.0  92e02000-92e02fff : 0000:00:14.2    92e02000-92e02fff : Intel PCH thermal driver  92e04000-92e040ff : 0000:00:17.0    92e04000-92e040ff : ahci  92e05000-92e050ff : 0000:00:11.5    92e05000-92e050ff : ahci  9b7fc000-9b7fcfff : dmar99b800000-a63fffff : PCI Bus 0000:16  9b800000-9b9fffff : PCI Bus 0000:17    9b800000-9b8fffff : 0000:17:00.0      9b800000-9b8fffff : megasas: LSI    9b900000-9b9fffff : 0000:17:00.0  9ba00000-9bafffff : PCI Bus 0000:17    9ba00000-9bafffff : 0000:17:00.0  a63fc000-a63fcfff : dmar5a6400000-b0ffffff : PCI Bus 0000:30  b0ffc000-b0ffcfff : dmar6b1000000-bbbfffff : PCI Bus 0000:4a  bbbfc000-bbbfcfff : dmar7bbc00000-c5ffffff : PCI Bus 0000:64  c5ffc000-c5ffcfff : dmar8c6800000-d0ffffff : PCI Bus 0000:80  c6800000-c68fffff : 0000:80:02.4  c6980000-c69fffff : 0000:80:02.1  c6a00000-c6a7ffff : 0000:80:02.1  c6a80000-c6a9ffff : 0000:80:02.4  c6aa0000-c6aa3fff : 0000:80:02.4  c6aa4000-c6aa5fff : 0000:80:02.0  d0ffc000-d0ffcfff : dmar0d1000000-dbbfffff : PCI Bus 0000:97  dbbfc000-dbbfcfff : dmar1dbc00000-e67fffff : PCI Bus 0000:b0  e67fc000-e67fcfff : dmar2e6800000-f13fffff : PCI Bus 0000:c9  f13fc000-f13fcfff : dmar3f1400000-fb7fffff : PCI Bus 0000:e2  fb7fc000-fb7fcfff : dmar4fd000000-fdabffff : pnp 00:04fdad0000-fdadffff : pnp 00:04fdb00000-fdffffff : pnp 00:04fe000000-fe010fff : Reserved  fe000000-fe00ffff : pnp 00:04  fe010000-fe010fff : PCI Bus 0000:00    fe010000-fe010fff : 0000:00:1f.5fe011000-fe01ffff : pnp 00:04fe036000-fe03bfff : pnp 00:04fe03d000-fe3fffff : pnp 00:04fe410000-fe7fffff : pnp 00:04fec00000-fecfffff : PNP0003:00  fec00000-fec003ff : IOAPIC 0fed00000-fed003ff : HPET 0  fed00000-fed003ff : PNP0103:00ff000000-ffffffff : pnp 00:01100,000,000-207fffffff : System RAM-------------------------------------------  b6be00000-b6cc025c6 : Kernel code  b6ce00000-b6d321fff : Kernel rodata  b6d400000-b6d761d3f : Kernel data  b6da4e000-b6dffffff : Kernel bss2080000000-11c7fffffff : Persistent Memory  2080000000-22781fffff : namespace0.0  2280000000-9e7fffffff : dax0.0    2,280,000,000-9,e7f,fff,fff : System RAM (kmem) -------------------------------  9e80000000-9e801fffff : namespace1.0  9e80200000-11c7fffffff : dax1.01ffc00000000-1fffffffffff : Reserved  1ffffff84000-1ffffff84fff : ndbus0  1ffffff85000-1ffffff85fff : ndbus0  1ffffff86000-1ffffff86fff : ndbus0  1ffffff87000-1ffffff87fff : ndbus0  1ffffff94000-1ffffff94fff : ndbus0  1ffffff95000-1ffffff95fff : ndbus0  1ffffff96000-1ffffff96fff : ndbus0  1ffffff97000-1ffffff97fff : ndbus0200000000000-20ffffffffff : PCI Bus 0000:00210000000000-21ffffffffff : PCI Bus 0000:16  21fffff00000-21fffff1ffff : 0000:16:02.0220000000000-22ffffffffff : PCI Bus 0000:30230000000000-23ffffffffff : PCI Bus 0000:4a240000000000-24ffffffffff : PCI Bus 0000:64250000000000-25ffffffffff : PCI Bus 0000:80260000000000-26ffffffffff : PCI Bus 0000:97270000000000-27ffffffffff : PCI Bus 0000:b0280000000000-28ffffffffff : PCI Bus 0000:c9290000000000-29ffffffffff : PCI Bus 0000:e2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦å¤–æœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°è™šæ‹Ÿåœ°å€ï¼Œé€šè¿‡æŸ¥æ‰¾æ–‡ä»¶Documentation/x86/x86_64/mm.rst</p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PTE </tag>
            
            <tag> é‡‡æ · </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå†…æ ¸å¸¸ç”¨å†…æ ¸è°ƒä¼˜</title>
      <link href="/2023/11/19/Linux%E5%86%85%E6%A0%B8%E5%B8%B8%E7%94%A8%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E4%B8%8E%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7/"/>
      <url>/2023/11/19/Linux%E5%86%85%E6%A0%B8%E5%B8%B8%E7%94%A8%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E4%B8%8E%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="0-ç›¸å…³ç†è®º"><a href="#0-ç›¸å…³ç†è®º" class="headerlink" title="0.ç›¸å…³ç†è®º"></a>0.ç›¸å…³ç†è®º</h2><ul><li>80%ç»“æœç”±20%åŸå› å¼•èµ·</li><li>å…ˆæ‰¾æœ¨æ¡¶çŸ­æ¿å†ä¼˜åŒ–</li><li>é‡‡æ ·-&gt;åˆ†æç“¶é¢ˆå’Œçƒ­ç‚¹-&gt;å®šä½é—®é¢˜-&gt;ä¼˜åŒ–-&gt;æµ‹è¯•</li></ul><h2 id="1-å†…æ ¸è‡ªå¸¦ç»Ÿè®¡ä¿¡æ¯"><a href="#1-å†…æ ¸è‡ªå¸¦ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="1.å†…æ ¸è‡ªå¸¦ç»Ÿè®¡ä¿¡æ¯"></a>1.å†…æ ¸è‡ªå¸¦ç»Ÿè®¡ä¿¡æ¯</h2><h3 id="1-1-procæ–‡ä»¶ç³»ç»Ÿ"><a href="#1-1-procæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="1.1 procæ–‡ä»¶ç³»ç»Ÿ"></a>1.1 procæ–‡ä»¶ç³»ç»Ÿ</h3><p>è®©ç”¨æˆ·å’Œå†…æ ¸å†…éƒ¨æ•°æ®ç»“æ„äº¤äº’ï¼Œå¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨å†…å­˜ä¸”ä¸å ç”¨ç£ç›˜ï¼Œæ–‡ä»¶æœ¬èº«æ˜¾ç¤º0å­—èŠ‚ï¼Œä½†æŸ¥çœ‹å°±ä¼šè¿”å›å¤§é‡ä¿¡æ¯ã€‚psã€topç­‰shellå‘½ä»¤å°±æ˜¯ä»procæ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–ä¿¡æ¯çš„ã€‚</p><ul><li><code>/proc/pagetypeinfo</code> è¿™æ˜¯URLé“¾è¡¨ä¸Šæœ‰å¤šå°‘æ´»è·ƒå’Œä¸æ´»è·ƒé¡µé¢çš„ç»Ÿè®¡</li><li><code>/proc/zoneinfo</code> zoneç»“æ„ä½“çš„ç›¸å…³ä¿¡æ¯ï¼ŒæŒ‰ç…§nodeæ¥æ˜¾ç¤ºçš„ï¼Œä¼šæ˜¾ç¤ºä¼™ä¼´ç³»ç»Ÿç®¡ç†çš„é¡µé¢æ•°é‡ã€å„ç§æ°´ä½çº¿é¡µé¢çš„æ•°é‡ç­‰</li><li><code>/proc/slabinfo</code> slabåˆ†é…çš„å°çš„å†…å­˜çš„ä¿¡æ¯</li><li><code>/proc/cpuinfo</code> processerå¦‚æœæ˜¯7åˆ™æ˜¯æŒ‡æœ‰8ä¸ªæ ¸å¿ƒ</li><li><code>/proc/[pid]/maps</code> æˆ–è€… <code>pmap pid</code> å‘½ä»¤æ¥æŸ¥çœ‹è¿›ç¨‹ç”¨æˆ·æ€è™šæ‹Ÿå†…å­˜ç©ºé—´çš„å®é™…åˆ†å¸ƒ</li><li><code>/proc/iomem</code> å‘½ä»¤æ¥æŸ¥çœ‹è¿›ç¨‹å†…æ ¸æ€è™šæ‹Ÿå†…å­˜ç©ºé—´çš„çš„å®é™…åˆ†å¸ƒï¼Œè¿˜èƒ½æŸ¥çœ‹å†…å­˜çš„ç‰©ç†åœ°å€ï¼Œä¸ç”¨sudoç«Ÿç„¶åœ°å€å…¨æ˜¯0</li><li><code>/proc/buddyinfo</code>å‘½ä»¤æ¥æŸ¥çœ‹NUMAèŠ‚ç‚¹ä¸­ä¸åŒå†…å­˜åŒºåŸŸzoneçš„ä¼™ä¼´ç³»ç»Ÿå½“å‰çŠ¶æ€ï¼Œè¿ç§»ç±»å‹ï¼Œé“¾è¡¨æˆå‘˜æ•°é‡</li><li><code>/proc/meminfo</code>æ˜¾ç¤ºçš„æ˜¯å½“å‰æ—¶åˆ»ç‰©ç†é¡µçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬LRUçš„ã€slabçš„ã€hugepageçš„ç­‰ç­‰ï¼Œ<code>meminfo_proc_show</code>å‡½æ•°å®ç°</li><li><code>proc/[pid]/status | grep -E 'Name|Pid|Vm*|Rss*|Vm*|Hu*'</code>æ˜¯è¿›ç¨‹å’Œå†…å­˜ç›¸å…³çš„ä¿¡æ¯ã€‚æ•°æ®ç»“æ„<code>mm_struct</code>æˆå‘˜<code>rss_stat</code>ä¼šè®°å½•è¿›ç¨‹å†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚ï¼ˆVmRSSè¿›ç¨‹ä½¿ç”¨çš„æœ€å¤§ç‰©ç†å†…å­˜ã€RssAnonè¿›ç¨‹ä½¿ç”¨çš„åŒ¿åé¡µã€RssFileã€RssShmemå…±äº«é¡µã€VmPTEé¡µè¡¨å¤§å°ã€VmSwapäº¤æ¢åŒºå¤§å°ç­‰ï¼‰</li><li><code>proc/mounts</code>å·²åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨</li><li><code>proc/modules</code>å·²åŠ è½½çš„æ¨¡å—</li><li><code>proc/cmdline</code>ç³»ç»Ÿå¯åŠ¨æ—¶è¾“å…¥çš„å†…æ ¸å‘½ä»¤è¡Œå‚æ•°</li><li><code>proc/kmsg</code>å†…æ ¸æ—¥å¿—ä¿¡æ¯</li></ul><p>å†™ä¸€ä¸ªå†…æ ¸æ¨¡å—åœ¨/procåˆ›å»ºbenshushuç›®å½•ï¼Œé€šè¿‡readèŠ‚ç‚¹è¯»å–å†…æ ¸æ¨¡å—æŸä¸ªå…¨å±€å˜é‡å€¼ã€‚é€šè¿‡writeä¿®æ”¹æŸä¸ªå…¨å±€å˜é‡å€¼</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//procfsçš„å¸¸ç”¨APIåœ¨fs/proc/internal.hæ–‡ä»¶ä¸­æœ‰å®šä¹‰</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/module.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/proc_fs.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/uaccess.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/init.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NODE</span> <span class="token string">"benshushu/my_proc"</span></span><span class="token keyword">static</span> <span class="token keyword">int</span> param <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">proc_dir_entry</span> <span class="token operator">*</span>my_proc<span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">proc_dir_entry</span> <span class="token operator">*</span>my_root<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KS</span> <span class="token expression"><span class="token number">32</span></span></span><span class="token keyword">static</span> <span class="token keyword">char</span> kstring<span class="token punctuation">[</span>KS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">/* should be less sloppy about overflows :) */</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span><span class="token function">my_read</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> lbuf<span class="token punctuation">,</span> <span class="token class-name">loff_t</span> <span class="token operator">*</span>ppos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> nbytes <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> <span class="token string">"%d\n"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">simple_read_from_buffer</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> lbuf<span class="token punctuation">,</span> ppos<span class="token punctuation">,</span> kstring<span class="token punctuation">,</span> nbytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span> <span class="token function">my_write</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> lbuf<span class="token punctuation">,</span><span class="token class-name">loff_t</span> <span class="token operator">*</span>ppos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">ssize_t</span> rc<span class="token punctuation">;</span>rc <span class="token operator">=</span> <span class="token function">simple_write_to_buffer</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> lbuf<span class="token punctuation">,</span> ppos<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> lbuf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sscanf</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"param has been set to %d\n"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> rc<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//æ–‡ä»¶å‡½æ•°æ“ä½œé›†</span><span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">file_operations</span> my_proc_fops <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> THIS_MODULE<span class="token punctuation">,</span><span class="token punctuation">.</span>read <span class="token operator">=</span> my_read<span class="token punctuation">,</span><span class="token punctuation">.</span>write <span class="token operator">=</span> my_write<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">int</span> __init <span class="token function">my_init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//proc_mkdiråœ¨çˆ¶ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªbenshushuçš„ç›®å½•ï¼Œè¿™é‡Œçˆ¶ç›®å½•NULLé‚£å°±æ˜¯æŒ‡åœ¨/procæ ¹ç›®å½•ä¸‹åˆ›å»ºäº†</span>my_root <span class="token operator">=</span> <span class="token function">proc_mkdir</span><span class="token punctuation">(</span><span class="token string">"benshushu"</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IS_ERR</span><span class="token punctuation">(</span>my_root<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">pr_err</span><span class="token punctuation">(</span><span class="token string">"I failed to make benshushu dir\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token comment">//proc_createåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶èŠ‚ç‚¹ï¼Œåç§°æ˜¯NODEå®å®šä¹‰ï¼ŒèŠ‚ç‚¹è®¿é—®æƒé™0(UGOæ¨¡å¼)ï¼Œçˆ¶è¿›ç¨‹çš„proc_dir_entryå¯¹è±¡NULLï¼Œmy_proc_fopsæŒ‡å‘æ–‡ä»¶çš„æ“ä½œå‡½æ•°ã€‚</span>my_proc <span class="token operator">=</span> <span class="token function">proc_create</span><span class="token punctuation">(</span>NODE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>my_proc_fops<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IS_ERR</span><span class="token punctuation">(</span>my_proc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">pr_err</span><span class="token punctuation">(</span><span class="token string">"I failed to make %s\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"I created %s\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">void</span> __exit <span class="token function">my_exit</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>my_proc<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">proc_remove</span><span class="token punctuation">(</span>my_proc<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">proc_remove</span><span class="token punctuation">(</span>my_root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"Removed %s\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">module_init</span><span class="token punctuation">(</span>my_init<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">module_exit</span><span class="token punctuation">(</span>my_exit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_LICENSE</span><span class="token punctuation">(</span><span class="token string">"GPL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Makefile" data-language="Makefile"><code class="language-Makefile">BASEINCLUDE ?= /lib/modules/`uname -r`/buildproc-test-objs := proc_test.o obj-m:=   proc-test.oall : $(MAKE) -C $(BASEINCLUDE) M=$(PWD) modules;clean:$(MAKE) -C $(BASEINCLUDE) M=$(PWD) clean;rm -f *.ko;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-sysæ–‡ä»¶ç³»ç»Ÿ"><a href="#1-2-sysæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="1.2 sysæ–‡ä»¶ç³»ç»Ÿ"></a>1.2 sysæ–‡ä»¶ç³»ç»Ÿ</h3><p>å­ç³»ç»Ÿã€è®¾å¤‡é©±åŠ¨ç¨‹åºå°†sysfsä½œä¸ºä¸ç”¨æˆ·ç©ºé—´äº¤äº’çš„æ¥å£ã€‚<br>åŠŸèƒ½å’Œä¸Šä¸€ä¸ªä¸€æ ·ï¼Œsysfsçš„APIåˆæœ‰æ‰€ä¸åŒã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/module.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/proc_fs.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/uaccess.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/init.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/device.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/platform_device.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/sysfs.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NODE</span> <span class="token string">"benshushu/my_sysfs"</span></span><span class="token keyword">static</span> <span class="token keyword">int</span> param <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">proc_dir_entry</span> <span class="token operator">*</span>my_sysfs<span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">proc_dir_entry</span> <span class="token operator">*</span>my_root<span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">platform_device</span> <span class="token operator">*</span>my_device<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KS</span> <span class="token expression"><span class="token number">32</span></span></span><span class="token keyword">static</span> <span class="token keyword">char</span> kstring<span class="token punctuation">[</span>KS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">/* should be less sloppy about overflows :) */</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span><span class="token function">my_read</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> lbuf<span class="token punctuation">,</span> <span class="token class-name">loff_t</span> <span class="token operator">*</span>ppos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> nbytes <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> <span class="token string">"%d\n"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">simple_read_from_buffer</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> lbuf<span class="token punctuation">,</span> ppos<span class="token punctuation">,</span> kstring<span class="token punctuation">,</span> nbytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span> <span class="token function">my_write</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> lbuf<span class="token punctuation">,</span><span class="token class-name">loff_t</span> <span class="token operator">*</span>ppos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">ssize_t</span> rc<span class="token punctuation">;</span>rc <span class="token operator">=</span> <span class="token function">simple_write_to_buffer</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> lbuf<span class="token punctuation">,</span> ppos<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> lbuf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sscanf</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"param has been set to %d\n"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> rc<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//æ–‡ä»¶çš„æ“ä½œé›†</span><span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">file_operations</span> my_proc_fops <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> THIS_MODULE<span class="token punctuation">,</span><span class="token punctuation">.</span>read <span class="token operator">=</span> my_read<span class="token punctuation">,</span><span class="token punctuation">.</span>write <span class="token operator">=</span> my_write<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span> <span class="token function">data_show</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">device</span> <span class="token operator">*</span>d<span class="token punctuation">,</span><span class="token keyword">struct</span> <span class="token class-name">device_attribute</span> <span class="token operator">*</span>attr<span class="token punctuation">,</span>  <span class="token keyword">char</span> <span class="token operator">*</span>buf<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token string">"%d\n"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span> <span class="token function">data_store</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">device</span> <span class="token operator">*</span>d<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">device_attribute</span> <span class="token operator">*</span>attr<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> count<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">sscanf</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">dev_dbg</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token string">": write %d into data\n"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">strnlen</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token function">DEVICE_ATTR_RW</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”¨äºæè¿°æ–‡ä»¶å±æ€§çš„æ•°æ®ç»“æ„</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">attribute</span> <span class="token operator">*</span>ben_sysfs_entries<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&amp;</span>dev_attr_data<span class="token punctuation">.</span>attr<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//ä¸€ç»„å±æ€§ç±»å‹ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„å®šä¹‰åœ¨include/linux/sysfs.h</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">attribute_group</span> mydevice_attr_group <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"benshushu"</span><span class="token punctuation">,</span><span class="token punctuation">.</span>attrs <span class="token operator">=</span> ben_sysfs_entries<span class="token punctuation">,</span> <span class="token comment">//attributeæ•°æ®ç»“æ„</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">int</span> __init <span class="token function">my_init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> ret<span class="token punctuation">;</span>my_root <span class="token operator">=</span> <span class="token function">proc_mkdir</span><span class="token punctuation">(</span><span class="token string">"benshushu"</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>my_sysfs <span class="token operator">=</span> <span class="token function">proc_create</span><span class="token punctuation">(</span>NODE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>my_proc_fops<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IS_ERR</span><span class="token punctuation">(</span>my_sysfs<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">pr_err</span><span class="token punctuation">(</span><span class="token string">"I failed to make %s\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">PTR_ERR</span><span class="token punctuation">(</span>my_sysfs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"I created %s on procfs\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//kobject_create_and_add()ç”Ÿæˆkobjectæ•°æ®ç»“æ„ï¼Œæ³¨å†Œåˆ°sysfsæ–‡ä»¶ç³»ç»Ÿï¼Œå‚æ•°ä¸ºï¼šæ–‡ä»¶åã€çˆ¶ç›®å½•çš„kobject</span>my_device <span class="token operator">=</span> <span class="token function">platform_device_register_simple</span><span class="token punctuation">(</span><span class="token string">"benshushu"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IS_ERR</span><span class="token punctuation">(</span>my_device<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"platfrom device register fail\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ret <span class="token operator">=</span> <span class="token function">PTR_ERR</span><span class="token punctuation">(</span>my_device<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">goto</span> proc_fail<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token comment">//ï¼ˆå±æ€§é›†åˆï¼Œä¸€ç»„å±æ€§ç±»å‹ï¼‰</span>ret <span class="token operator">=</span> <span class="token function">sysfs_create_group</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_device<span class="token operator">-&gt;</span>dev<span class="token punctuation">.</span>kobj<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mydevice_attr_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"create sysfs group fail\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">goto</span> register_fail<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"create sysfs node done\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>register_fail<span class="token operator">:</span><span class="token function">platform_device_unregister</span><span class="token punctuation">(</span>my_device<span class="token punctuation">)</span><span class="token punctuation">;</span>proc_fail<span class="token operator">:</span><span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">void</span> __exit <span class="token function">my_exit</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>my_sysfs<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">proc_remove</span><span class="token punctuation">(</span>my_sysfs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">proc_remove</span><span class="token punctuation">(</span>my_root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"Removed %s\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">sysfs_remove_group</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>my_device<span class="token operator">-&gt;</span>dev<span class="token punctuation">.</span>kobj<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mydevice_attr_group<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">platform_device_unregister</span><span class="token punctuation">(</span>my_device<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">module_init</span><span class="token punctuation">(</span>my_init<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">module_exit</span><span class="token punctuation">(</span>my_exit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_LICENSE</span><span class="token punctuation">(</span><span class="token string">"GPL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Makefile" data-language="Makefile"><code class="language-Makefile">BASEINCLUDE ?= /lib/modules/`uname -r`/buildsysfs-test-objs := sysfs_test.o obj-m:=   sysfs-test.oall : $(MAKE) -C $(BASEINCLUDE) M=$(PWD) modules;clean:$(MAKE) -C $(BASEINCLUDE) M=$(PWD) clean;rm -f *.ko;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3-debugfsæ–‡ä»¶ç³»ç»Ÿ"><a href="#1-3-debugfsæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="1.3 debugfsæ–‡ä»¶ç³»ç»Ÿ"></a>1.3 debugfsæ–‡ä»¶ç³»ç»Ÿ</h3><p>è°ƒè¯•å†…æ ¸çš„å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨è¿è¡Œä¸­ä¿®æ”¹æŸäº›å†…æ ¸æ•°æ®ï¼Œå°†å…³å¿ƒçš„æ•°æ®æ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´ã€‚<code>mount -t debugfs none /sys/kernel/debug</code></p><p>ç›¸å…³APIå®šä¹‰åœ¨<code>include/linux/debuggfs.h</code>ä¸­</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/module.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/proc_fs.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/uaccess.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/init.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/debugfs.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NODE</span> <span class="token string">"benshushu"</span></span><span class="token keyword">static</span> <span class="token keyword">int</span> param <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">dentry</span> <span class="token operator">*</span>debugfs_dir<span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KS</span> <span class="token expression"><span class="token number">32</span></span></span><span class="token keyword">static</span> <span class="token keyword">char</span> kstring<span class="token punctuation">[</span>KS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">/* should be less sloppy about overflows :) */</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span><span class="token function">my_read</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> lbuf<span class="token punctuation">,</span> <span class="token class-name">loff_t</span> <span class="token operator">*</span>ppos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> nbytes <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> <span class="token string">"%d\n"</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">simple_read_from_buffer</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> lbuf<span class="token punctuation">,</span> ppos<span class="token punctuation">,</span> kstring<span class="token punctuation">,</span> nbytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span> <span class="token function">my_write</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> lbuf<span class="token punctuation">,</span><span class="token class-name">loff_t</span> <span class="token operator">*</span>ppos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">ssize_t</span> rc<span class="token punctuation">;</span>rc <span class="token operator">=</span> <span class="token function">simple_write_to_buffer</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> lbuf<span class="token punctuation">,</span> ppos<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> lbuf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sscanf</span><span class="token punctuation">(</span>kstring<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//pr_info("param has been set to %d\n", param);</span><span class="token keyword">return</span> rc<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">file_operations</span> mydebugfs_ops <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> THIS_MODULE<span class="token punctuation">,</span><span class="token punctuation">.</span>read <span class="token operator">=</span> my_read<span class="token punctuation">,</span><span class="token punctuation">.</span>write <span class="token operator">=</span> my_write<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">int</span> __init <span class="token function">my_init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">struct</span> <span class="token class-name">dentry</span> <span class="token operator">*</span>debug_file<span class="token punctuation">;</span>debugfs_dir <span class="token operator">=</span> <span class="token function">debugfs_create_dir</span><span class="token punctuation">(</span>NODE<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IS_ERR</span><span class="token punctuation">(</span>debugfs_dir<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"create debugfs dir fail\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">-</span>EFAULT<span class="token punctuation">;</span><span class="token punctuation">}</span>debug_file <span class="token operator">=</span> <span class="token function">debugfs_create_file</span><span class="token punctuation">(</span><span class="token string">"my_debug"</span><span class="token punctuation">,</span> <span class="token number">0444</span><span class="token punctuation">,</span>debugfs_dir<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>mydebugfs_ops<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IS_ERR</span><span class="token punctuation">(</span>debug_file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"create debugfs file fail\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">debugfs_remove_recursive</span><span class="token punctuation">(</span>debugfs_dir<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">-</span>EFAULT<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"I created %s on debugfs\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">void</span> __exit <span class="token function">my_exit</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>debugfs_dir<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">debugfs_remove_recursive</span><span class="token punctuation">(</span>debugfs_dir<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"Removed %s\n"</span><span class="token punctuation">,</span> NODE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">module_init</span><span class="token punctuation">(</span>my_init<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">module_exit</span><span class="token punctuation">(</span>my_exit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_LICENSE</span><span class="token punctuation">(</span><span class="token string">"GPL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Makefile" data-language="Makefile"><code class="language-Makefile">BASEINCLUDE ?= /lib/modules/`uname -r`/builddebugfs-test-objs := debugfs_test.o obj-m:=   debugfs-test.oall : $(MAKE) -C $(BASEINCLUDE) M=$(PWD) modules;clean:$(MAKE) -C $(BASEINCLUDE) M=$(PWD) clean;rm -f *.ko;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä¿¡æ¯å·¥å…·"><a href="#2-æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä¿¡æ¯å·¥å…·" class="headerlink" title="2.æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä¿¡æ¯å·¥å…·"></a>2.æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä¿¡æ¯å·¥å…·</h2><h3 id="2-1-top"><a href="#2-1-top" class="headerlink" title="2.1 top"></a>2.1 top</h3><p>å‰å‡ è¡Œæ˜¯<code>free -h</code>çš„ä¿¡æ¯ï¼Œè¿˜æœ‰äº›å¯ä»¥äº¤äº’çš„å‘½ä»¤ï¼Œæ¯”å¦‚<code>f</code>æ˜¯æ˜¾ç¤ºéšè—çš„ç»Ÿè®¡ä¿¡æ¯æ¯”å¦‚ç¼ºé¡µç­‰ï¼Œ<code>M</code>æ˜¯æŒ‰ç…§ä½¿ç”¨å†…å­˜æ’åº<br>topæ˜¾ç¤ºçš„æ’åºæ˜¯:</p><ul><li>PRè¿›ç¨‹ä¼˜å…ˆçº§</li><li>NI niceå€¼</li><li>VIRTè¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡</li><li>RESè¿›ç¨‹ä½¿ç”¨çš„æ²¡æœ‰è¢«æ¢å‡ºçš„ç‰©ç†å†…å­˜å¤§å°</li><li>SHRå…±äº«å†…å­˜å¤§å°</li><li>Sè¿›ç¨‹çŠ¶æ€ï¼ˆDä¸å¯ä¸­æ–­ç¡çœ ï¼ŒRè¿è¡Œï¼ŒSç¡çœ ï¼ŒTè·Ÿè¸ª/åœæ­¢ï¼ŒZåƒµå°¸ï¼‰</li><li>%MEMè¿›ç¨‹ä½¿ç”¨ç‰©ç†å†…å­˜ç™¾åˆ†æ¯”</li><li>%CPUä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨çš„CPUæ—¶é—´å ç”¨ç™¾åˆ†æ¯”</li><li>TIME+ è¿›ç¨‹ä½¿ç”¨CPUçš„æ—¶é—´æ€»è®¡ï¼Œå•ä½10ms</li><li>CMOMANDå‘½ä»¤åæˆ–è€…å‘½ä»¤è¡Œ</li></ul><h3 id="2-2-vmstat"><a href="#2-2-vmstat" class="headerlink" title="2.2 vmstat"></a>2.2 vmstat</h3><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ—¶é—´é—´éš”ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é‡‡æ ·æ¬¡æ•°ã€‚<br><code>-S M</code>æŒ‡æŒ‰ç…§å…†å­—èŠ‚æ¥æ˜¾ç¤ºã€‚</p><ul><li>ræ­£åœ¨æ‰§è¡Œå’Œç­‰å¾…çš„è¿›ç¨‹æ•°</li><li>bé˜»å¡çš„è¿›ç¨‹</li><li><a href="https://farseerfc.me/zhs/in-defence-of-swap.html">swpd</a>é€šå¸¸è€Œè¨€ï¼Œæœ€ä¼˜å†…å­˜ç®¡ç†æ‰€éœ€çš„æœ€å°äº¤æ¢ç©ºé—´å–å†³äºç¨‹åºå›ºå®šåœ¨å†…å­˜ä¸­è€Œåˆå¾ˆå°‘è®¿é—®åˆ°çš„åŒ¿åé¡µé¢çš„æ•°é‡ï¼Œ ä»¥åŠå›æ”¶è¿™äº›åŒ¿åé¡µé¢æ¢æ¥çš„ä»·å€¼ã€‚åè€…å¤§ä½“ä¸Šæ¥è¯´æ˜¯é—®å“ªäº›é¡µé¢ä¸å†ä¼šå› ä¸ºè¦ä¿ç•™è¿™äº›å¾ˆå°‘è®¿é—®çš„åŒ¿åé¡µé¢è€Œ è¢«å›æ”¶æ‰è…¾å‡ºç©ºé—´ã€‚</li><li>freeç©ºé—²ç‰©ç†å†…å­˜</li><li>buffç”¨äºç£ç›˜ç¼“å­˜çš„å¤§å°</li><li>cacheç”¨äºé¡µé¢ç¼“å­˜çš„å†…å­˜å¤§å°</li><li>siä»ç£ç›˜æ¢å…¥çš„å†…å­˜å¤§å°ï¼Œsoäº¤æ¢åˆ°ç£ç›˜çš„å†…å­˜å¤§å°ã€‚é¡µçš„æ¢å…¥æ¢å‡º</li><li>ç£ç›˜è¯»å†™å—æ•°é‡biboä»å—è®¾å¤‡</li><li>æ¯ç§’ä¸­æ–­æ¬¡æ•°ç®—ä¸ç®—å¤ªå¤§in</li><li>cs <strong>æ¯ç§’ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°æ•°ç™¾åˆ°ä¸€ä¸‡ä»¥å†…</strong>éƒ½æ˜¯æ­£å¸¸çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬è°ƒç”¨ç³»ç»Ÿå‡½æ•°ï¼Œå°±è¦è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ï¼Œä¹Ÿè¦è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™ä¸ªå€¼è¦è¶Šå°è¶Šå¥½ï¼Œå¤ªå¤§äº†ï¼Œè¦è€ƒè™‘è°ƒä½çº¿ç¨‹æˆ–è€…è¿›ç¨‹çš„æ•°ç›®,ä¾‹å¦‚<strong>åœ¨apacheå’Œnginxè¿™ç§webæœåŠ¡å™¨ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬åšæ€§èƒ½æµ‹è¯•æ—¶ä¼šè¿›è¡Œå‡ åƒå¹¶å‘ç”šè‡³å‡ ä¸‡å¹¶å‘çš„æµ‹è¯•</strong>ï¼Œé€‰æ‹©webæœåŠ¡å™¨çš„è¿›ç¨‹å¯ä»¥ç”±è¿›ç¨‹æˆ–è€…çº¿ç¨‹çš„å³°å€¼ä¸€ç›´ä¸‹è°ƒï¼Œå‹æµ‹ï¼Œç›´åˆ°csåˆ°ä¸€ä¸ªæ¯”è¾ƒå°çš„å€¼ï¼Œè¿™ä¸ªè¿›ç¨‹å’Œçº¿ç¨‹æ•°å°±æ˜¯æ¯”è¾ƒåˆé€‚çš„å€¼äº†ã€‚<strong>ç³»ç»Ÿè°ƒç”¨ä¹Ÿæ˜¯ï¼Œæ¯æ¬¡è°ƒç”¨ç³»ç»Ÿå‡½æ•°ï¼Œæˆ‘ä»¬çš„ä»£ç å°±ä¼šè¿›å…¥å†…æ ¸ç©ºé—´ï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™ä¸ªæ˜¯å¾ˆè€—èµ„æº</strong>ï¼Œä¹Ÿè¦å°½é‡é¿å…é¢‘ç¹è°ƒç”¨ç³»ç»Ÿå‡½æ•°ã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°è¿‡å¤šè¡¨ç¤ºä½ çš„CPUå¤§éƒ¨åˆ†æµªè´¹åœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¯¼è‡´CPUå¹²æ­£ç»äº‹çš„æ—¶é—´å°‘äº†ï¼ŒCPUæ²¡æœ‰å……åˆ†åˆ©ç”¨ï¼Œæ˜¯ä¸å¯å–çš„ã€‚<a href="https://www.cnblogs.com/emars/p/13787492.html">ä¸‹å›¾æ¥è‡ªè¿™ç¯‡ï¼Œå¾ˆè¯¦ç»†çš„æ‰¾ç“¶é¢ˆ</a> <strong>çº¿ç¨‹æ•°ä¸è¦è¶…è¿‡ç‰©ç†æœºçš„2-3å€</strong>ã€‚</li><li>å†…æ ¸ç³»ç»Ÿè¿›ç¨‹syå’Œç”¨æˆ·è¿›ç¨‹usæ‰§è¡Œæ—¶é—´ç™¾åˆ†æ¯”</li><li>waæ˜¯CPUçš„I/Oç­‰å¾…æ—¶é—´ç™¾åˆ†æ¯”</li><li>idç©ºé—²CPUç™¾åˆ†æ¯”</li></ul><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/68d632bf8f0743cbbe0b5c3978dfb54b.png"></p><p><a href="https://linux.die.net/man/8/vmstat">manæ‰‹å†Œ</a></p><h3 id="2-3-iostat"><a href="#2-3-iostat" class="headerlink" title="2.3 iostat"></a>2.3 iostat</h3><ul><li>iowait CPU ç­‰å¾…ç£ç›˜ IO æ“ä½œçš„æ—¶é—´</li><li>rrqm/sï¼šæ¯ç§’åˆå¹¶çš„è¯»è¯·æ±‚æ•°ã€‚è¿™è¡¨ç¤ºç£ç›˜åœ¨è¯»å–æ•°æ®æ—¶æ˜¯å¦è¿›è¡Œäº†è¯·æ±‚çš„åˆå¹¶æ“ä½œã€‚è¾ƒé«˜çš„å€¼å¯èƒ½è¡¨ç¤ºç£ç›˜æ­£åœ¨ä¼˜åŒ–è¯»å–æ€§èƒ½ã€‚</li><li>wrqm/sï¼šæ¯ç§’åˆå¹¶çš„å†™è¯·æ±‚æ•°ã€‚ç±»ä¼¼äºrrqm/sï¼Œè¿™è¡¨ç¤ºç£ç›˜åœ¨å†™å…¥æ•°æ®æ—¶æ˜¯å¦è¿›è¡Œäº†è¯·æ±‚çš„åˆå¹¶æ“ä½œã€‚</li><li>r/sï¼šæ¯ç§’å®Œæˆçš„è¯»è¯·æ±‚æ•°ã€‚è¿™è¡¨ç¤ºç£ç›˜æ¯ç§’å®é™…æ‰§è¡Œçš„ç‹¬ç«‹çš„è¯»å–æ“ä½œæ•°é‡ã€‚</li><li>w/sï¼šæ¯ç§’å®Œæˆçš„å†™è¯·æ±‚æ•°ã€‚è¿™è¡¨ç¤ºç£ç›˜æ¯ç§’å®é™…æ‰§è¡Œçš„ç‹¬ç«‹çš„å†™å…¥æ“ä½œæ•°é‡ã€‚</li><li>rkB/sï¼šæ¯ç§’è¯»å–çš„æ•°æ®é‡ï¼ˆä»¥KBä¸ºå•ä½ï¼‰ã€‚è¡¨ç¤ºä»ç£ç›˜è¯»å–çš„æ•°æ®é‡ã€‚</li><li>wkB/sï¼šæ¯ç§’å†™å…¥çš„æ•°æ®é‡ï¼ˆä»¥KBä¸ºå•ä½ï¼‰ã€‚è¡¨ç¤ºå‘ç£ç›˜å†™å…¥çš„æ•°æ®é‡ã€‚</li><li>avgrq-szï¼šå¹³å‡è¯·æ±‚å¤§å°ï¼ˆä»¥æ‰‡åŒºä¸ºå•ä½ï¼‰ã€‚è¡¨ç¤ºå¹³å‡æ¯ä¸ªI/Oè¯·æ±‚çš„å¤§å°ã€‚</li><li>avgqu-szï¼šå¹³å‡I/Oé˜Ÿåˆ—é•¿åº¦ã€‚è¡¨ç¤ºç­‰å¾…ç£ç›˜æœåŠ¡çš„è¯·æ±‚çš„å¹³å‡æ•°é‡ã€‚</li><li>awaitï¼šå¹³å‡æ¯ä¸ªI/Oè¯·æ±‚çš„ç­‰å¾…æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚è¾ƒä½çš„å€¼é€šå¸¸è¡¨ç¤ºæ›´å¥½çš„æ€§èƒ½ã€‚</li><li>svctmï¼šå¹³å‡æ¯ä¸ªI/Oè¯·æ±‚çš„æœåŠ¡æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚è¿™è¡¨ç¤ºç£ç›˜å®é™…æ‰§è¡Œè¯·æ±‚æ‰€éœ€çš„æ—¶é—´ã€‚</li><li>%utilï¼šç£ç›˜åˆ©ç”¨ç‡ã€‚è¡¨ç¤ºç£ç›˜çš„è´Ÿè½½ç¨‹åº¦ï¼Œè¾ƒé«˜çš„å€¼è¡¨ç¤ºç£ç›˜æ­£åœ¨é¥±å’Œã€‚<br><a href="https://www.cnblogs.com/happy-king/p/9234122.html#:~:text=delta%20%28ruse+wuse%29/delta%20%28io%29%20=%20await%20=%2078.21%20=%3E,=78.21%20*%20delta%20%28io%29/s%20=%2078.21*28.57%20=%202232.8%EF%BC%8C%E8%A1%A8%E6%98%8E%E6%AF%8F%E7%A7%92%E5%86%85%E7%9A%84I/O%E8%AF%B7%E6%B1%82%E6%80%BB%E5%85%B1%E9%9C%80%E8%A6%81%E7%AD%89%E5%BE%852232.8ms%E3%80%82">iowaitè¿‡é«˜çš„æŸ¥æ‰¾å’Œè§£å†³æ–¹æ¡ˆ</a></li></ul><h2 id="3-printkè¾“å‡ºå‡½æ•°å’ŒåŠ¨æ€è¾“å‡º"><a href="#3-printkè¾“å‡ºå‡½æ•°å’ŒåŠ¨æ€è¾“å‡º" class="headerlink" title="3. printkè¾“å‡ºå‡½æ•°å’ŒåŠ¨æ€è¾“å‡º"></a>3. printkè¾“å‡ºå‡½æ•°å’ŒåŠ¨æ€è¾“å‡º</h2><h3 id="3-1-printkæœ€ç®€å•æœ‰æ•ˆçš„è°ƒè¯•æ–¹æ³•"><a href="#3-1-printkæœ€ç®€å•æœ‰æ•ˆçš„è°ƒè¯•æ–¹æ³•" class="headerlink" title="3.1 printkæœ€ç®€å•æœ‰æ•ˆçš„è°ƒè¯•æ–¹æ³•"></a>3.1 printkæœ€ç®€å•æœ‰æ•ˆçš„è°ƒè¯•æ–¹æ³•</h3><p>åœ¨Linuxå†…æ ¸ä¸­ï¼Œ<code>printk</code>å‡½æ•°å¯ä»¥ä½¿ç”¨ä¸åŒçš„ä¼˜å…ˆçº§æ¥è®°å½•æ—¥å¿—æ¶ˆæ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„<code>printk</code>ä¼˜å…ˆçº§ï¼š</p><ol><li><strong>KERN_EMERG</strong>ï¼šç´§æ€¥æƒ…å†µã€‚ç”¨äºè®°å½•æœ€ç´§æ€¥çš„ç³»ç»Ÿæ¶ˆæ¯ï¼Œé€šå¸¸è¡¨ç¤ºç³»ç»Ÿå´©æºƒæˆ–æ— æ³•ç»§ç»­è¿è¡Œçš„æƒ…å†µã€‚è¿™ä¸ªä¼˜å…ˆçº§çš„æ¶ˆæ¯é€šå¸¸ä¼šå¯¼è‡´ç³»ç»Ÿå®•æœºã€‚</li><li><strong>KERN_ALERT</strong>ï¼šè­¦æŠ¥ã€‚ç”¨äºè®°å½•éœ€è¦ç«‹å³é‡‡å–è¡ŒåŠ¨çš„æƒ…å†µï¼Œé€šå¸¸è¡¨ç¤ºä¸¥é‡çš„ç³»ç»Ÿé—®é¢˜ï¼Œä½†ä¸ä¸€å®šå¯¼è‡´å®•æœºã€‚</li><li><strong>KERN_CRIT</strong>ï¼šå…³é”®ã€‚ç”¨äºè®°å½•ä¸¥é‡çš„ç³»ç»Ÿé—®é¢˜ï¼Œä½†æ²¡æœ‰å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚è¿™å¯ä»¥æ˜¯ä¸€ä¸ªéœ€è¦ç´§æ€¥å…³æ³¨çš„é—®é¢˜ã€‚</li><li><strong>KERN_ERR</strong>ï¼šé”™è¯¯ã€‚ç”¨äºè®°å½•é”™è¯¯æ¶ˆæ¯ï¼Œè¡¨ç¤ºç³»ç»Ÿé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œä½†ä»ç„¶å¯ä»¥ç»§ç»­è¿è¡Œã€‚</li><li><strong>KERN_WARNING</strong>ï¼šè­¦å‘Šã€‚ç”¨äºè®°å½•è­¦å‘Šæ¶ˆæ¯ï¼Œè¡¨ç¤ºå¯èƒ½å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä½†ç³»ç»Ÿä»åœ¨æ­£å¸¸è¿è¡Œã€‚</li><li><strong>KERN_NOTICE</strong>ï¼šé€šçŸ¥ã€‚ç”¨äºè®°å½•ä¸€èˆ¬ä¿¡æ¯ï¼Œé€šå¸¸è¡¨ç¤ºç³»ç»Ÿä¸­å‘ç”Ÿçš„ä¸€äº›é‡è¦äº‹ä»¶ã€‚</li><li><strong>KERN_INFO</strong>ï¼šä¿¡æ¯ã€‚ç”¨äºè®°å½•æ™®é€šä¿¡æ¯ï¼Œé€šå¸¸ç”¨äºè°ƒè¯•å’Œè·Ÿè¸ªç³»ç»Ÿè¡Œä¸ºã€‚</li><li><strong>KERN_DEBUG</strong>ï¼šè°ƒè¯•ã€‚ç”¨äºè®°å½•è°ƒè¯•ä¿¡æ¯ï¼Œé€šå¸¸åªåœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µä½¿ç”¨ã€‚</li></ol><p>è¿™äº›ä¼˜å…ˆçº§å¯ä»¥ä¸<code>printk</code>å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">printk</span><span class="token punctuation">(</span>KERN_ERR <span class="token string">"This is an error message.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>KERN_ERR</code>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯å°†è¢«è®°å½•åˆ°ç³»ç»Ÿæ—¥å¿—ä¸­ã€‚</p><p>å¯¹äºæ–°é©±åŠ¨ç¨‹åºï¼Œå»ºè®®ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ‰“å°API,è¿™äº›APIåœ¨å…¶åç§°ä¸­åµŒå…¥äº†æ—¥å¿—çº§åˆ«ã€‚è¿™äº›æ‰“å°è¾…åŠ©å‡½æ•°åŒ…æ‹¬<code>pr_emergã€pr_alertã€pr_critã€pr_errã€pr_warningã€pr_warnã€pr_noticeã€pr_infoã€pr_debugæˆ–pr_dbg</code>ã€‚<br>é™¤äº†æ¯”ç­‰æ•ˆçš„printk()è°ƒç”¨æ›´ç®€æ´å¤–ï¼Œå®ƒä»¬è¿˜å¯ä»¥é€šè¿‡pr_fmt()å® å¯¹æ ¼å¼å­—ç¬¦ä¸²ä½¿ç”¨<br>é€šç”¨å®šä¹‰ï¼Œä¾‹å¦‚ï¼Œåœ¨æºæ–‡ä»¶çš„é¡¶éƒ¨(åœ¨ä»»ä½•#include æŒ‡ä»¤ä¹‹å‰)å®šä¹‰å®ƒ:</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">pr_fmt</span><span class="token expression"><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span> </span><span class="token string">"%s:%s: "</span> <span class="token expression">fmt<span class="token punctuation">,</span> KBUILD_MODNAME<span class="token punctuation">,</span> <span class="token constant">__func__</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™å°†åœ¨è¯¥æ–‡ä»¶ä¸­çš„æ¯ä¸ª<code>pr_*</code>æ¶ˆæ¯å‰åŠ ä¸Šäº§ç”Ÿè¯¥æ¶ˆæ¯çš„æ¨¡å—å’Œå‡½æ•°åç§°ã€‚å†…æ ¸å¾—æ˜¯ç”¨DEBUGç¼–è¯‘çš„ï¼Œå¦åˆ™å®ƒä»¬è¢«æ›¿æ¢ä¸ºç©ºè¯­å¥ã€‚</p><h3 id="3-2åŠ¨æ€è¾“å‡º"><a href="#3-2åŠ¨æ€è¾“å‡º" class="headerlink" title="3.2åŠ¨æ€è¾“å‡º"></a>3.2åŠ¨æ€è¾“å‡º</h3><p>ç”±ç³»ç»Ÿç»´æŠ¤è€…åŠ¨æ€åœ°æ‰“å¼€å’Œå…³é—­æŒ‡å®šçš„printkè¾“å‡ºã€‚é…ç½®å†…æ ¸æ—¶æ‰“å¼€<code>CONFIG_DYNAMIC_DEBUG</code>å®ï¼ŒæŒ‚è½½<code>debugfs</code>æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>åŠ¨æ€è¾“å‡ºè¯­å¥ç”±<code>pr_debug()/dev_dbg()</code>è¿™äº›å‡½æ•°å®šä¹‰ã€‚</p><p>å…·ä½“æ¥è¯´åŠ¨æ€è¾“å‡ºä¼šåœ¨debugfsæ–‡ä»¶ç³»ç»Ÿçš„controlæ–‡ä»¶èŠ‚ç‚¹è¢«è®°å½•ï¼Œè¾“å‡ºåŒ…æ‹¬æ–‡ä»¶è·¯å¾„åã€è¾“å‡ºè¯­å¥æ‰€åœ¨è¡Œå·ã€æ¨¡å—åï¼ˆå‡½æ•°åï¼‰ã€å°†è¦è¾“å‡ºçš„è¯­å¥ã€‚<code>cat /sys/kernel/debug/dynamic_debug/control</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#æ‰“å¼€svcsock.cæ–‡ä»¶ä¸­çš„æ‰€æœ‰åŠ¨æ€è¾“å‡ºè¯­å¥</span><span class="token builtin class-name">echo</span> <span class="token string">'file svcsock.c +p'</span> <span class="token operator">&gt;</span> /sys/kernel/debug/dynamic_debug/control<span class="token comment">#æ‰“å¼€usbcoreæ¨¡å—ä¸­çš„æ‰€æœ‰åŠ¨æ€è¾“å‡ºè¯­å¥</span><span class="token builtin class-name">echo</span> <span class="token string">'module usbcore +p'</span> <span class="token operator">&gt;</span> /sys/kernel/debug/dynamic_debug/control<span class="token comment">#æ‰“å¼€svc_process()å‡½æ•°ä¸­çš„æ‰€æœ‰åŠ¨æ€è¾“å‡ºè¯­å¥</span><span class="token builtin class-name">echo</span> <span class="token string">'func svc_process +p'</span> <span class="token operator">&gt;</span> /sys/kernel/debug/dynamic_debug/control<span class="token comment">#å…³é—­svc_process()å‡½æ•°ä¸­çš„æ‰€æœ‰åŠ¨æ€è¾“å‡ºè¯­å¥</span><span class="token builtin class-name">echo</span> <span class="token string">'func svc_process -p'</span> <span class="token operator">&gt;</span> /sys/kernel/debug/dynamic_debug/control<span class="token comment">#æ‰“å¼€æ–‡ä»¶è·¯å¾„ä¸­åŒ…å«usbçš„æ–‡ä»¶é‡Œçš„æ‰€æœ‰åŠ¨æ€è¾“å‡ºè¯­å¥</span><span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">'*usb* +p'</span> <span class="token operator">&gt;</span> /sys/kernel/debug/dynamic_debug/control<span class="token comment">#æ‰“å¼€ç³»ç»Ÿæ‰€æœ‰çš„åŠ¨æ€è¾“å‡ºè¯­å¥</span><span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">'+p'</span> <span class="token operator">&gt;</span> / sys/kernel/debug/dynamic_debug/control<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>pæ‰“å¼€å…³é—­åŠ¨æ€è¾“å‡ºè¯­å¥</li><li>lè¾“å‡ºè¡Œå·</li><li>fè¾“å‡ºå‡½æ•°å</li><li>mè¾“å‡ºæ¨¡å—å</li><li>tè¾“å‡ºçº¿ç¨‹ID</li></ul><p>å¯¹äºé‚£äº›å¼€æœºå°±å·²ç»å®Œæˆè¿è¡Œçš„ä»£ç ï¼Œè°ƒè¯•æ–¹å¼æ˜¯åœ¨qemuå¯åŠ¨æ—¶åŠ å…¥å‘½ä»¤ï¼Œæ¯”å¦‚SMP topologyçš„åŠ¨æ€è¾“å‡ºè¯­å¥æ‰“å¼€æ–¹å¼åœ¨qemuå¯åŠ¨å‘½ä»¤åŠ ä¸Š<code>topology.dyndbg=+plft</code>è¿™æ ·è¾“å…¥<code>dmesg | grep 'cluster' </code>å°±èƒ½çœ‹è§è¾“å‡ºã€‚</p><h2 id="cppcheck"><a href="#cppcheck" class="headerlink" title="cppcheck"></a>cppcheck</h2><p>è¿™æ˜¯ä¸€ä¸ªç”¨äºé™æ€æ£€æŸ¥ä»£ç é”™è¯¯çš„å·¥å…·ï¼Œå¯ä»¥é¿å…è¶Šç•Œè®¿é—®ç­‰ä¸€äº›é—®é¢˜ï¼Œå‡å°‘åæœŸåœ¨å†…æ ¸è°ƒè¯•çš„æˆæœ¬ã€‚åœ¨æ”¹æ”¹å†…æ ¸çš„æ—¶å€™<a href="https://cppcheck.sourceforge.io/">ç”¨èµ·æ¥</a>ï¼<a href="https://cppcheck.sourceforge.io/manual.pdf">æ“ä½œæ‰‹å†Œ</a></p><h2 id="ftrace"><a href="#ftrace" class="headerlink" title="ftrace"></a>ftrace</h2><p>ä½¿ç”¨set_ftrace_pid</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># cd /sys/kernel/debug/tracing/</span><span class="token comment"># cat set_ftrace_pid</span>no pid<span class="token comment"># echo 3111 &gt; set_ftrace_pid //è·Ÿè¸ªPIDä¸º3111çš„è¿›ç¨‹</span><span class="token comment"># cat set_ftrace_pid</span><span class="token number">3111</span><span class="token comment"># echo function &gt; current_tracer</span><span class="token comment"># echo 1 &gt; tracing_on</span><span class="token comment"># usleep 1</span><span class="token comment"># echo 0 &gt; tracing_on</span><span class="token comment"># cat trace</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>fraceè¿˜æ”¯æŒç§æ›´ä¸ºç›´è§‚çš„è·Ÿè¸ªå™¨ï¼Œåä¸ºfunction_gaph,ä½¿ç”¨æ–¹æ³•å’Œfunctionè·Ÿè¸ªå™¨ç±»ä¼¼ã€‚</p><p><strong>åŠ¨æ€ftrace</strong>ï¼š<br>åªè¦åœ¨é…ç½®å†…æ ¸æ—¶æ‰“å¼€CONFIG_DYNAMIC_FTRACEé€‰é¡¹ï¼Œå°±å¯ä»¥æ”¯æŒåŠ¨æ€ftraceåŠŸèƒ½ã€‚set_ftrace_filterå’Œset_ftrace_notraceè¿™ä¸¤ä¸ªæ–‡ä»¶å¯ä»¥é…å¯¹ä½¿ç”¨ï¼Œå…¶ä¸­ï¼Œå‰è€…è®¾ç½®è¦è·Ÿè¸ªçš„å‡½æ•°ï¼Œåè€…æŒ‡å®šä¸è¦è·Ÿè¸ªçš„å‡½æ•°ã€‚å¦‚æœå‡½æ•°å¤ªå¤š,éœ€è¦è®¾ç½®è·Ÿè¸ªå‡½æ•°çš„è¿‡æ»¤å™¨,è¿‡æ»¤å™¨è¿˜æ”¯æŒé€šé…ç¬¦ã€‚available_filter_functionsæ–‡ä»¶å¯ä»¥åˆ—å‡ºå½“å‰ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰å‡½æ•°ï¼Œå‡å¦‚ç°åœ¨æˆ‘ä»¬åªæƒ³å…³æ³¨sys_nanosleep()å’Œhrtimer_interrupt()è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</p><pre class="line-numbers language-none"><code class="language-none"># cd /sys/kernel/debug/tracing/# echo sys_nanosleep hrtimer_interrupt &gt; set_ftrace_filter# echo function &gt; current_tracer# echo 1 &gt; tracing_on# usleep 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹Ÿå¯ä»¥å°†è¦è·Ÿè¸ªçš„äº‹ä»¶æ·»åŠ åˆ°ç›¸åº”æ–‡ä»¶ï¼Œå·®ä¸å¤šçš„æ–¹å¼ã€‚ä¾‹å­åœ¨samples/trace_eventsç›®å½•é‡Œé¢ã€‚</p><p><strong>kernelsharkå›¾å½¢åŒ–å·¥å…·</strong><br><code>sudo apt-get install trace-cmd kernelshark</code><br>åˆ†æftraceæ•°æ®ç”¨</p><h2 id="kdump"><a href="#kdump" class="headerlink" title="kdump"></a>kdump</h2><p>å†…æ ¸è½¬å‚¨å·¥å…·ã€‚kdumpæ ¸å¿ƒå®ç°åŸºäºkexec, kexec çš„å…¨ç§°æ˜¯kernel execution,éå¸¸ç±»ä¼¼äºLinuxå†…æ ¸ä¸­çš„execç³»ç»Ÿè°ƒç”¨ã€‚kexecå¯ä»¥å¿«é€Ÿå¯åŠ¨æ–°çš„å†…æ ¸ï¼Œå¹¶ä¸”è·³è¿‡BIOSæˆ–bootloaderç­‰å¼•å¯¼ç¨‹åºçš„åˆå§‹åŒ–é˜¶æ®µã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥è®©ç³»ç»Ÿä¸Šå´©æºƒæ—¶å¿«é€Ÿåˆ‡æ¢åˆ°å¤‡ä»½çš„å†…æ ¸ï¼Œè¿™æ ·ç¬¬ä¸€ä¸ªå†…æ ¸çš„å†…å­˜å°±å¾—åˆ°äº†ä¿ç•™ã€‚åœ¨ç¬¬äºŒä¸ªå†…æ ¸ä¸­ï¼Œå¯ä»¥å¯¹ç¬¬ä¸€ä¸ªå†…æ ¸äº§ç”Ÿçš„å´©æºƒæ•°æ®è¿›è¡Œç»§ç»­åˆ†æã€‚</p><p>kdumpä¼šåœ¨å†…å­˜ä¸­ä¿ç•™ä¸€å—åŒºåŸŸï¼Œè¿™å—åŒºåŸŸç”¨æ¥å­˜æ”¾æ•è·å†…æ ¸ã€‚å½“ç”Ÿäº§å†…æ ¸åœ¨è¿è¡Œè¿‡ç¨‹ä¸­é‡åˆ°å´©æºƒç­‰æƒ…å†µæ—¶ï¼Œkdumpä¼šé€šè¿‡kexecæœºåˆ¶è‡ªåŠ¨å¯åŠ¨åˆ°æ•è·å†…æ ¸ï¼Œè¿™æ—¶ä¼šç»•è¿‡BIOS,ä»¥å…ç ´åç¬¬ä¸€ä¸ªå†…æ ¸çš„å†…å­˜ï¼Œç„¶åæŠŠç”Ÿäº§å†…æ ¸çš„å®Œæ•´ä¿¡æ¯(åŒ…æ‹¬CPUå¯„å­˜å™¨ã€æ ˆæ•°æ®ç­‰)è½¬å‚¨åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚æ¥ç€ï¼Œä½¿ç”¨crashå·¥å…·åˆ†æè¿™ä¸ªè½¬å‚¨æ–‡ä»¶ï¼Œå°±å¯ä»¥å¿«é€Ÿå®šä½å®•æœºé—®é¢˜äº†ã€‚</p><p>kdump+crashå·¥å…·çš„é€‚ç”¨èŒƒå›´ï¼šä¸»è¦ç”¨æ¥åˆ†æç³»ç»Ÿå®•æœºé»‘å±ã€æ— å“åº”(unresponsive)ç­‰é—®é¢˜ï¼Œæ¯”å¦‚SSHã€ä¸²å£ã€é¼ æ ‡é”®ç›˜æ— å“åº”ç­‰ã€‚æœ‰ä¸€ç±»å®•æœºæƒ…å†µkdumpæ— èƒ½ä¸ºåŠ›ï¼Œæ¯”å¦‚å› ç¡¬ä»¶é”™è¯¯å¯¼è‡´CPUå´©æºƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç³»ç»Ÿä¸èƒ½æ­£å¸¸åœ°çƒ­é‡å¯ï¼Œåªèƒ½é€šè¿‡é‡æ–°å…³é—­å’Œå¼€å¯ç”µæºæ‰èƒ½å¯åŠ¨ï¼Œè¿™ç§æƒ…å†µä¸‹kdumpå°±ä¸é€‚ç”¨äº†ã€‚å› ä¸ºkdumpéœ€è¦åœ¨ç³»ç»Ÿå´©æºƒçš„æ—¶å€™å¿«é€Ÿå¯åŠ¨åˆ°æ•è·å†…æ ¸ï¼Œä½†å‰ææ¡ä»¶å°±æ˜¯ç³»ç»Ÿèƒ½çƒ­å¯åŠ¨ï¼Œå¹¶ä¸”å†…å­˜ä¸­çš„å†…å®¹ä¸ä¼šä¸¢å¤±ã€‚</p><h2 id="å¸¸è§çš„Linuxæ€§èƒ½æµ‹è¯•å·¥å…·"><a href="#å¸¸è§çš„Linuxæ€§èƒ½æµ‹è¯•å·¥å…·" class="headerlink" title="å¸¸è§çš„Linuxæ€§èƒ½æµ‹è¯•å·¥å…·"></a>å¸¸è§çš„Linuxæ€§èƒ½æµ‹è¯•å·¥å…·</h2><table><thead><tr><th>å·¥å…·</th><th>æè¿°</th></tr></thead><tbody><tr><td>kernel-selftests</td><td>å†…æ ¸æºä»£ç ç›®å½•è‡ªå¸¦çš„æµ‹è¯•ç¨‹åº</td></tr><tr><td>perf-bench</td><td>perfå·¥å…·è‡ªå¸¦çš„æµ‹è¯•ç¨‹åºï¼ŒåŒ…å«å¯¹å†…å­˜ã€è°ƒåº¦ç­‰çš„æµ‹è¯•</td></tr><tr><td>phoronix-test-suit</td><td>ç»¼åˆæ€§èƒ½æµ‹è¯•ç¨‹åº</td></tr><tr><td>sysbench</td><td>ç»¼åˆæ€§èƒ½æµ‹è¯•å¥—ä»¶ï¼ŒåŒ…å«å¯¹CPUã€å†…å­˜ã€å¤šçº¿ç¨‹ç­‰çš„æµ‹è¯•</td></tr><tr><td>unixbench</td><td>ç»¼åˆæ€§èƒ½æµ‹è¯•å¥—ä»¶ï¼ŒUNIXç³»ç»Ÿçš„ä¸€å¥—ä¼ ç»Ÿçš„æµ‹è¯•ç¨‹åº</td></tr><tr><td>pmbench</td><td>ç”¨æ¥æµ‹è¯•å†…å­˜æ€§èƒ½çš„å·¥å…·</td></tr><tr><td>iozone</td><td>ç”¨æ¥æµ‹è¯•æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½çš„å·¥å…·</td></tr><tr><td>AIM7</td><td>ä¸€å¥—æ¥è‡ªUNIXç³»ç»Ÿçš„æµ‹è¯•ç³»ç»Ÿåº•å±‚æ€§èƒ½çš„å·¥å…·</td></tr><tr><td>iperf</td><td>ç”¨æ¥æµ‹è¯•ç½‘ç»œæ€§èƒ½çš„å·¥å…·</td></tr><tr><td>linpack</td><td>ç”¨æ¥æµ‹è¯•CPUçš„æµ®ç‚¹è¿ç®—çš„æ€§èƒ½</td></tr><tr><td>vm-scalability</td><td>ç”¨æ¥æµ‹è¯•Linuxå†…æ ¸å†…å­˜ç®¡ç†æ¨¡å—çš„æ‰©å±•æ€§</td></tr><tr><td>glbenchmark</td><td>ç”¨æ¥æµ‹è¯•GPUæ€§èƒ½</td></tr><tr><td>GFXbenchmark</td><td>ç”¨æ¥æµ‹è¯•GPUæ€§èƒ½</td></tr><tr><td>DBENCH</td><td>ç”¨æ¥æµ‹è¯•I/Oæ€§èƒ½</td></tr></tbody></table><p>å†…å®¹æ¥è‡ªã€Šå¥”è·‘å§Linuxå†…æ ¸åŸºç¡€ç¯‡ã€‹è¿™äº›å·¥å…·è®°å½•åœ¨è¿™é‡Œï¼Œæœ‰ä¸€éƒ¨åˆ†ä¹Ÿæ²¡ç”¨è¿‡ã€‚</p><h2 id="Over-View"><a href="#Over-View" class="headerlink" title="Over View"></a>Over View</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/cd67339d6b6a477e9587e4c5a3f43707.png"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/fbbab3ca9a084f5aa0986216daf20f38.png"></p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> proc </tag>
            
            <tag> tools </tag>
            
            <tag> memoey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸å†…å­˜ç®¡ç†ç›¸å…³çš„è¿›ç¨‹å’Œæ–‡ä»¶çŸ¥è¯†</title>
      <link href="/2023/11/17/Linux%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%90%8E%E5%8F%B0%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/"/>
      <url>/2023/11/17/Linux%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%90%8E%E5%8F%B0%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>æ–‡ä»¶å¯ä»¥çœ‹åšç›¸å¯¹ç£ç›˜ç­‰å­˜å‚¨è®¾å¤‡çš„åœ°å€ç©ºé—´ã€‚å†…å­˜è®¾å¤‡æŠ½è±¡ä½œåšè¿›ç¨‹åœ°å€ç©ºé—´ã€‚</p><p>æ–‡ä»¶å¯ä»¥çœ‹åšçº¿æ€§å­—èŠ‚æ•°ç»„ï¼Œæ¯å­—èŠ‚å¯ä»¥è¯»å–å†™å…¥ã€‚ï¼ˆå½“ç„¶æ˜¯è¢«æ©ç›–äº†çš„ï¼‰</p><p>ç›®å½•è®°å½•æ–‡ä»¶çš„ä½ç½®ï¼Œç›®å½•åŒ…æ‹¬æ–‡ä»¶æˆ–è€…å…¶ä»–å­ç›®å½•ï¼Œç›®å½•æœ¬èº«ä¹Ÿæ˜¯æ–‡ä»¶ã€‚</p><p>æ–‡ä»¶ç³»ç»Ÿçš„é‡è¦ä»»åŠ¡å°±æ˜¯åˆ†é…å’Œç´¢å¼•æ•°æ®å—ã€‚</p><p>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå°±æ˜¯ä¸ºäº†å°†å„ç§æ–‡ä»¶ç³»ç»Ÿç»Ÿä¸€ ç„¶åæŠ½è±¡æˆä¸€ä¸ªé€šç”¨çš„å±‚ ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/57d7f3138355481fabd774aa88d22ba9.png"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/fe5bb756987a4b1ca6fcf7fb398991a9.jpeg"></p><hr><p>å†…æ ¸çº¿ç¨‹å’Œåå°å®ˆæŠ¤è¿›ç¨‹è¢«å¹¿æ³›ç”¨åœ¨åˆ†å±‚å†…å­˜çš„ä¸€äº›åˆ›æ–°ç­–ç•¥ä¸Šï¼Œé‚£ä¹ˆè¿™äº›åˆ›å»ºçš„ä¸€èˆ¬æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</p><h2 id="å†…æ ¸çº¿ç¨‹"><a href="#å†…æ ¸çº¿ç¨‹" class="headerlink" title="å†…æ ¸çº¿ç¨‹"></a>å†…æ ¸çº¿ç¨‹</h2><p>å†…æ ¸çº¿ç¨‹å…¶å®æ˜¯è¿è¡Œåœ¨å†…æ ¸åœ°å€ç©ºé—´ä¸­çš„è¿›ç¨‹ï¼Œæ²¡æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œå…±äº«å†…æ ¸çš„åœ°å€ç©ºé—´ã€‚Linuxå†…æ ¸å…¶å®æ²¡æœ‰ä¸“é—¨çš„çº¿ç¨‹ï¼Œçº¿ç¨‹éƒ½å½“ä½œæ™®é€šçš„è¿›ç¨‹ã€‚<code>task_struct-&gt;mm == NULL</code></p><p>Linuxå†…æ ¸æœ‰å¤šä¸ªå‡½æ•°æ¥å£åˆ›å»ºå†…æ ¸çº¿ç¨‹ï¼Œ<code>kthread_create()</code>æ–°åˆ›å»ºçš„ä¸èƒ½è¿è¡Œï¼Œè¿˜éœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>wake_up_process</code>å”¤é†’è¿›ç¨‹åŠ å…¥å°±ç»ªé˜Ÿåˆ—ã€‚<code>kthread_run()</code>åˆ›å»ºçš„é©¬ä¸Šå°±èƒ½ç›´æ¥è¿è¡Œã€‚</p><p>ä¸‹é¢è¿™ä¸ªæ¨¡å—ï¼Œæ¯ä¸ªCPUä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œè¾“å‡ºå½“å‰CPUçŠ¶æ€ï¼Œä»¥åŠå½“å‰è¿›ç¨‹çš„ä¼˜å…ˆçº§ç­‰ä¿¡æ¯ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/module.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/init.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/module.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/kthread.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/delay.h&gt;</span></span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">task_struct</span> <span class="token operator">*</span>tsk<span class="token punctuation">[</span>NR_CPUS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show_reg</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> spsr<span class="token punctuation">,</span> sp<span class="token punctuation">,</span> el<span class="token punctuation">;</span><span class="token keyword">asm</span><span class="token punctuation">(</span><span class="token string">"mrs %0, spsr_el1"</span> <span class="token operator">:</span> <span class="token string">"=r"</span> <span class="token punctuation">(</span>spsr<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">:</span> <span class="token string">"cc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">asm</span><span class="token punctuation">(</span><span class="token string">"mov %0, sp"</span> <span class="token operator">:</span> <span class="token string">"=r"</span> <span class="token punctuation">(</span>sp<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">:</span> <span class="token string">"cc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">asm</span><span class="token punctuation">(</span><span class="token string">"mrs %0, CurrentEL"</span> <span class="token operator">:</span> <span class="token string">"=r"</span> <span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">:</span> <span class="token string">"cc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"spsr:0x%x, sp:0x%x, el=%d\n"</span><span class="token punctuation">,</span> spsr<span class="token punctuation">,</span> sp<span class="token punctuation">,</span> el <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show_prio</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">struct</span> <span class="token class-name">task_struct</span> <span class="token operator">*</span>task <span class="token operator">=</span> current<span class="token punctuation">;</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"%s pid:%d, nice:%d prio:%d static_prio:%d normal_prio:%d\n"</span><span class="token punctuation">,</span>task<span class="token operator">-&gt;</span>comm<span class="token punctuation">,</span> task<span class="token operator">-&gt;</span>pid<span class="token punctuation">,</span><span class="token function">PRIO_TO_NICE</span><span class="token punctuation">(</span>task<span class="token operator">-&gt;</span>static_prio<span class="token punctuation">)</span><span class="token punctuation">,</span>task<span class="token operator">-&gt;</span>prio<span class="token punctuation">,</span> task<span class="token operator">-&gt;</span>static_prio<span class="token punctuation">,</span>task<span class="token operator">-&gt;</span>normal_prio<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">print_cpu</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">preempt_disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"%s cpu=%d.\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">,</span> <span class="token function">smp_processor_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">preempt_enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">thread_fun</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">do</span> <span class="token punctuation">{</span><span class="token function">print_cpu</span><span class="token punctuation">(</span><span class="token string">"SLEEP in Thread Function "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">msleep_interruptible</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">print_cpu</span><span class="token punctuation">(</span><span class="token string">"msleep over in Thread Function"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">print_cpu</span><span class="token punctuation">(</span><span class="token string">"running"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">show_reg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">show_prio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">kthread_should_stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//å…¥å£</span><span class="token keyword">static</span> <span class="token keyword">int</span> __init <span class="token function">my_init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token function">print_cpu</span><span class="token punctuation">(</span><span class="token string">"Loading module"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">for_each_online_cpu</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>tsk<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">kthread_create</span><span class="token punctuation">(</span>thread_fun<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"kdemo/%d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tsk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"Failed to generate a kernel thread\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">kthread_bind</span><span class="token punctuation">(</span>tsk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"About to wake up and run the thread for cpu=%d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">wake_up_process</span><span class="token punctuation">(</span>tsk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">"Staring thread for cpu %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">print_cpu</span><span class="token punctuation">(</span><span class="token string">"on"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">void</span> __exit <span class="token function">my_exit</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> i<span class="token punctuation">;</span><span class="token function">for_each_online_cpu</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">pr_info</span><span class="token punctuation">(</span><span class="token string">" Kill Thread %d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">kthread_stop</span><span class="token punctuation">(</span>tsk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">print_cpu</span><span class="token punctuation">(</span><span class="token string">"Kill was done on "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">module_init</span><span class="token punctuation">(</span>my_init<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">module_exit</span><span class="token punctuation">(</span>my_exit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_AUTHOR</span><span class="token punctuation">(</span><span class="token string">"Ben ShuShu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_LICENSE</span><span class="token punctuation">(</span><span class="token string">"GPL v2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-Makefile" data-language="Makefile"><code class="language-Makefile">BASEINCLUDE ?= /lib/modules/`uname -r`/buildkthread_test-objs := kthread.oobj-m:=   kthread_test.oall :$(MAKE) -C $(BASEINCLUDE) M=$(PWD) modules;clean:$(MAKE) -C $(BASEINCLUDE) M=$(PWD) clean;rm -f *.ko;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åå°å®ˆæŠ¤è¿›ç¨‹"><a href="#åå°å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="åå°å®ˆæŠ¤è¿›ç¨‹"></a>åå°å®ˆæŠ¤è¿›ç¨‹</h2><p>åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œæ¯éš”5sæŸ¥çœ‹å½“å‰å†…æ ¸çš„æ—¥å¿—ä¸­æ˜¯å¦æœ‰Oopsé”™è¯¯ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fcntl.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/stat.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/klog.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FALLBACK_KLOG_BUF_SHIFT</span> <span class="token expression"><span class="token number">17</span>  </span><span class="token comment">/* CONFIG_LOG_BUF_SHIFT in kernel */</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FALLBACK_KLOG_BUF_LEN</span>   <span class="token expression"><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> FALLBACK_KLOG_BUF_SHIFT<span class="token punctuation">)</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_CLOSE</span>         <span class="token expression"><span class="token number">0</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_OPEN</span>          <span class="token expression"><span class="token number">1</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_READ</span>          <span class="token expression"><span class="token number">2</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_READ_ALL</span>      <span class="token expression"><span class="token number">3</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_READ_CLEAR</span>    <span class="token expression"><span class="token number">4</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_CLEAR</span>         <span class="token expression"><span class="token number">5</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_CONSOLE_OFF</span>   <span class="token expression"><span class="token number">6</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_CONSOLE_ON</span>    <span class="token expression"><span class="token number">7</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_CONSOLE_LEVEL</span> <span class="token expression"><span class="token number">8</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_SIZE_UNREAD</span>   <span class="token expression"><span class="token number">9</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">KLOG_SIZE_BUFFER</span>   <span class="token expression"><span class="token number">10</span></span></span><span class="token comment">/* we use 'Linux version' string instead of Oops in this lab */</span><span class="token comment">//#define OOPS_LOG  "Oops" </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">OOPS_LOG</span>  <span class="token string">"Linux version"</span> </span><span class="token keyword">int</span> <span class="token function">save_kernel_log</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>buffer<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">char</span> path<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token class-name">time_t</span> t<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">tm</span> <span class="token operator">*</span>tm<span class="token punctuation">;</span><span class="token keyword">int</span> fd<span class="token punctuation">;</span>t <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tm <span class="token operator">=</span> <span class="token function">localtime</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">snprintf</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token string">"/mnt/%d.%d.%d.%d.%d.%d.log"</span><span class="token punctuation">,</span> tm<span class="token operator">-&gt;</span>tm_year<span class="token operator">+</span><span class="token number">1900</span><span class="token punctuation">,</span>tm<span class="token operator">-&gt;</span>tm_mon<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> tm<span class="token operator">-&gt;</span>tm_mday<span class="token punctuation">,</span> tm<span class="token operator">-&gt;</span>tm_hour<span class="token punctuation">,</span>tm<span class="token operator">-&gt;</span>tm_min<span class="token punctuation">,</span> tm<span class="token operator">-&gt;</span>tm_sec<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>        fd <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> O_WRONLY<span class="token operator">|</span>O_CREAT<span class="token punctuation">,</span> <span class="token number">0644</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>fd <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"open error\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">check_kernel_log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">char</span> <span class="token operator">*</span>buffer<span class="token punctuation">;</span><span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">;</span><span class="token class-name">ssize_t</span> klog_size<span class="token punctuation">;</span><span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> size<span class="token punctuation">;</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"start kernel log\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>klog_size <span class="token operator">=</span> <span class="token function">klogctl</span><span class="token punctuation">(</span>KLOG_SIZE_BUFFER<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>klog_size <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>klog_size <span class="token operator">=</span> FALLBACK_KLOG_BUF_LEN<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"kernel log size: %d\n"</span><span class="token punctuation">,</span> klog_size<span class="token punctuation">)</span><span class="token punctuation">;</span>buffer <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span>klog_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>buffer<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>size <span class="token operator">=</span> <span class="token function">klogctl</span><span class="token punctuation">(</span>KLOG_READ_ALL<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> klog_size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"klogctl read error\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">goto</span> done<span class="token punctuation">;</span><span class="token punctuation">}</span>buffer<span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">/* check if oops in klog */</span>p <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span>OOPS_LOG<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"we found '%s' on kernel log\n"</span><span class="token punctuation">,</span> OOPS_LOG<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">save_kernel_log</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span> done<span class="token operator">:</span><span class="token function">free</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">daemon</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"daemon error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">check_kernel_log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åå°å®ˆæŠ¤è¿›ç¨‹ </tag>
            
            <tag> å†…æ ¸çº¿ç¨‹ </tag>
            
            <tag> æ–‡ä»¶ç³»ç»Ÿ </tag>
            
            <tag> è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Quantitative Approach for Adopting Disaggregated Memory in HPC Systems</title>
      <link href="/2023/11/14/A-Quantitative-Approach-for-Adopting-Disaggregated-Memory-in-HPC-Systems/"/>
      <url>/2023/11/14/A-Quantitative-Approach-for-Adopting-Disaggregated-Memory-in-HPC-Systems/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>The International Conference for High Performance Computing, Networking, Storage and Analysis, (SC), 2023</li><li>A Quantitative Approach for Adopting Disaggregated Memory in HPC Systems</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Jacob Wahlgren, Gabin Schieffer, Ivy Peng, KTHç‘å…¸çš‡å®¶ç†å·¥å­¦é™¢</li><li>Maya Gokhale, åŠ³ä¼¦æ–¯åˆ©å¼—è«å°”å›½å®¶å®éªŒå®¤ï¼ˆLLNL, ç¾å›½èƒ½æºéƒ¨æ‰€å±å›½å®¶ç ”ç©¶æœºæ„ï¼‰</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><h3 id="2-1å†…å­˜åˆ†è§£"><a href="#2-1å†…å­˜åˆ†è§£" class="headerlink" title="2.1å†…å­˜åˆ†è§£"></a>2.1å†…å­˜åˆ†è§£</h3><p>æœ€è¿‘çš„ç ”ç©¶å‘ç°ï¼Œå¤§é‡èŠ‚ç‚¹å†…å­˜ä»æœªå¾—åˆ°åˆ©ç”¨[24]. åœ¨HPCç¯å¢ƒä¸­ï¼Œèµ„æºåˆ†é…æ›´åŠ ç²—ç²’åº¦ï¼Œå› ä¸ºä½œä¸šé€šå¸¸ä¸å…±äº«èŠ‚ç‚¹ã€‚åŠ ä¸Šæ¯ä¸ªèŠ‚ç‚¹çš„é«˜å†…å­˜å®¹é‡ï¼Œè¿™æ„å‘³ç€å†…å­˜é€šå¸¸æ˜¯æœªå……åˆ†åˆ©ç”¨çš„èµ„æºã€‚æœ€è¿‘å¯¹é¢†å…ˆè®¾æ–½çš„ç ”ç©¶å‘ç°ï¼Œåªæœ‰ä¸åˆ°15%çš„ä½œä¸šä½¿ç”¨è¶…è¿‡75%çš„èŠ‚ç‚¹å†…å­˜ï¼Œå¹¶ä¸”50%çš„æ—¶é—´ä½¿ç”¨çš„å†…å­˜ä¸è¶³æ€»å†…å­˜çš„12%[8,33,36,37]ã€‚å¦ä¸€æ–¹é¢ï¼Œä½œä¸šä¸ç”¨ä½¿ç”¨å¤šäºé…ç½®çš„ç‰¹å®šæ•°é‡çš„å†…å­˜èµ„æºï¼Œå°±ä¼šOOMã€‚ï¼ˆå¾ˆå°‘é‡çš„ä½œä¸šéœ€è¦å¤§å†…å­˜ï¼Œè€Œä¸”éœ€è¦å¤§å†…å­˜çš„å’Œæ—¶é—´æ˜¯çŸ­çŸ­æš‚çš„ã€‚ï¼‰</p><p>ä½¿ç”¨å†…å­˜åˆ†è§£æ¥æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œå…¶æƒ³æ³•æ˜¯é€šè¿‡è¿œç¨‹å†…å­˜æ± æŒ‰éœ€æä¾›ä¸€éƒ¨åˆ†å†…å­˜èµ„æºã€‚åœ¨åŸºäºå†…å­˜æ± çš„ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å›ºå®šçš„æœ¬åœ°å†…å­˜å’Œå¯å˜æ•°é‡çš„ç»“æ„è¿æ¥è¿œç¨‹å†…å­˜ï¼Œå®é™…ä¸Šæ˜¯å¤šå±‚å†…å­˜ç³»ç»Ÿçš„ä¸€ç§å½¢å¼[14]ã€‚ä¹‹å‰çš„å·¥ä½œå·²ç»æ¢ç´¢ä½¿ç”¨èŠ‚ç‚¹æœ¬åœ°æŒä¹…å†…å­˜ï¼ˆä¾‹å¦‚è‹±ç‰¹å°”å‚²è…¾DC PMï¼‰ä½œä¸ºç¬¬äºŒå†…å­˜å±‚[12,38]ã€‚ç”±äºOptaneå·²åœäº§ï¼Œå¹¶ä¸”éšç€ç¼“å­˜ä¸€è‡´æ€§äº’è¿åè®®ï¼ˆå³Compute Express Linkï¼ˆCXLï¼‰3ç±»è®¾å¤‡ï¼‰çš„æœ€æ–°è¿›å±•ï¼Œ<span class="label primary">å†…å­˜æ± æˆä¸ºå®ç°ç¬¬äºŒå±‚çš„æ–°å…´é€‰é¡¹</span>[44]ã€‚</p><p>è™½ç„¶åˆ†è§£å†…å­˜æ˜¯ä¸€ç§å¤šå±‚å†…å­˜ï¼Œä½†å®ƒä¸ä¼ ç»Ÿçš„éå‡åŒ€å†…å­˜è®¿é—®ï¼ˆNUMAï¼‰ç³»ç»Ÿä¸åŒï¼Œåè€…æ˜¯å¯¹ç§°çš„ï¼Œæ¯ä¸ªNUMAåŸŸåŒ…å«ç›¸åŒçš„è®¡ç®—å’Œå†…å­˜èµ„æºï¼Œä¼˜åŒ–é‡ç‚¹æ˜¯å°†è®¡ç®—è½¬ç§»åˆ°ä¸è®¿é—®å†…å­˜é¡µä½äºåŒä¸€åŸŸçš„coreä¸Šã€‚ç›¸åï¼Œåˆ†å±‚å†…å­˜ç³»ç»Ÿå¯èƒ½æ˜¯ä¸å¯¹ç§°çš„ï¼Œå…¶ä¸­æŸäº›å±‚æ— éœ€CPUï¼Œå¹¶ä¸”ä¼˜åŒ–é‡ç‚¹æ˜¯å°†çƒ­é¡µæ”¾ç½®åœ¨æ›´å¿«çš„å±‚ä¸­[24]ã€‚</p><p>é€šè¿‡å…±äº«å†…å­˜æ± å¹²æ‰°å¯èƒ½ä¼šå¯¼è‡´ä¸€é¡¹ä½œä¸šç”±äºå…¶ä»–èŠ‚ç‚¹ä¸Šçš„ä½œä¸šè€Œå¯¼è‡´ä¸å¯é¢„æµ‹çš„æ€§èƒ½ä¸‹é™ã€‚ä¾‹å¦‚ï¼Œæ€§èƒ½å˜åŒ–çš„åŸå› ä¹‹ä¸€æ˜¯ä¸åŒèŠ‚ç‚¹ä¸Šä¸ç›¸å…³çš„ä½œä¸šç«äº‰è®¡ç®—èŠ‚ç‚¹å’Œå†…å­˜æ± ä¹‹é—´çš„é“¾è·¯å¸¦å®½ã€‚å¯¹å¤šå±‚å†…å­˜çš„è¯¯è§£åŒ…æ‹¬å†…å­˜å¸¦å®½ä½äºåŒæ„å†…å­˜ã€‚äº‹å®ä¸Šï¼Œä»ç¡¬ä»¶è§’åº¦æ¥çœ‹ï¼Œ<span class="label primary">æ·»åŠ é¢å¤–çš„å†…å­˜å±‚ï¼ˆé€šé“ï¼‰å¯ä»¥å¢åŠ èšåˆå¸¦å®½</span>ã€‚å¦ä¸€ä¸ªè¯¯è§£æ˜¯å…±äº«å†…å­˜æ± åº”ç”¨ç¨‹åºæ€§èƒ½æ€»æ˜¯ä¼šä¸‹é™ã€‚åˆ†å¸ƒå¼å†…å­˜HPCåº”ç”¨ç¨‹åºå¯ä»¥é€‰æ‹©é€šè¿‡æ‰©å±•åˆ°æ›´å¤šè®¡ç®—èŠ‚ç‚¹æ¥æœ€å¤§é™åº¦åœ°å‡å°‘å¯¹æ± åŒ–å†…å­˜å±‚çš„æš´éœ²ã€‚</p><div class="note info">å…¶å®æœ‰ä¸ªå¤§å‰æï¼ŒHPCæœ¬è´¨è¿˜æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œä½†æ˜¯ç”±äºè®¡ç®—è§„æ¨¡å˜å¤§å¯¹å†…å­˜éœ€æ±‚ä¹Ÿå°±å¤§äº†ï¼Œäºæ˜¯ä¼šåœ¨å¤§å†…å­˜é‡Œè®¨è®ºHPCï¼Œè€Œä½¿ç”¨çš„å¾ˆå¤šæ–¹æ³•æ˜¯åå‘äºä»¥å‰HPCçš„æ¯”å¦‚æ•°æ®ç»“æ„ã€å¯¹è±¡çº§ç²’åº¦ã€Rooflineï¼Œè¿™äº›ç¬”è€…æ„Ÿè§‰åœ¨çº¯åšå†…å­˜é‚£æ¡çº¿å¥½åƒè€ƒè™‘çš„æ¯”è¾ƒå°‘ï¼Œè€Œæ¶‰åŠåˆ°HPCå°±è®¨è®ºéå¸¸é¢‘ç¹äº†ã€‚</div><h3 id="2-2-Rooflineæ¨¡å‹"><a href="#2-2-Rooflineæ¨¡å‹" class="headerlink" title="2.2 Rooflineæ¨¡å‹"></a>2.2 Rooflineæ¨¡å‹</h3><p>Rooflineæ¨¡å‹[51]è¢«æå‡ºæ¥å¯¹å…·æœ‰ç®—æœ¯å¼ºåº¦ğ¼çš„ç¨‹åºå¯è¾¾åˆ°çš„å³°å€¼æ€§èƒ½ğ‘ƒè¿›è¡Œå»ºæ¨¡ã€‚Xè½´ä¸ºç®—æœ¯å¼ºåº¦ğ¼ï¼ˆArithmetic Intensityï¼‰å®šä¹‰ä¸ºä»ä¸»å†…å­˜ä¼ è¾“çš„æ¯ä¸ªå­—èŠ‚çš„æµ®ç‚¹è¿ç®—æ•°é‡<strong>Flops/Bytes</strong>, è¿™ä¸ªå€¼è¶Šé«˜ï¼Œä»£è¡¨è¿ç®—çš„éœ€æ±‚è¶Šé«˜ï¼ˆæ¯æ¯”ç‰¹æµ®ç‚¹è¿ç®—ï¼‰ã€‚Yè½´æ˜¯<strong>Flop/s</strong> = Minï¼ˆpeak Flopså³°å€¼è®¡ç®—èƒ½åŠ›ğ¹ï¼Œ ğ¼ * peak bandwidthå³°å€¼å†…å­˜å¸¦å®½ğµï¼ˆB/sï¼‰ï¼‰</p><p>Rooflineæ¨¡å‹å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ä»¥æ¨¡æ‹Ÿå…¶ä»–é™åˆ¶å› ç´ ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è°ƒæ•´å­˜å‚¨å™¨å¸¦å®½çš„æ–œç‡ä»¥åŒ…æ‹¬å­˜å‚¨å™¨å¹²æ‰°çš„å½±å“ã€‚å›¾5ä¸­çš„è™šçº¿è¡¨ç¤ºå¦‚æœå‘åŸºå‡†ç³»ç»Ÿæ·»åŠ é¢å¤–çš„å†…å­˜å±‚ï¼Œåˆ™æ€»å†…å­˜å¸¦å®½ä¼šå¢åŠ ã€‚ä¸ºäº†è¿›è¡Œç»†ç²’åº¦æµ‹é‡ï¼Œæˆ‘ä»¬å°†åˆ†æå™¨è®¾ç½®ä¸ºé‡åŒ–æ¯ç§’æµ®ç‚¹æ•°çš„ååé‡å’Œæ¯ç§’å­—èŠ‚æ•°çš„å†…å­˜è®¿é—®é‡ã€‚å›¾5æŠ¥å‘Šäº†è¡¨2ä¸­è¯„ä¼°çš„åº”ç”¨ç¨‹åºä¸­æ¯ä¸ªé˜¶æ®µçš„æµ‹é‡ç®—æœ¯å¼ºåº¦å’Œè·å¾—çš„ååé‡ã€‚å¦‚å›¾5æ‰€ç¤ºï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºé€šå¸¸è‡³å°‘åŒ…å«ä¸¤ä¸ªé˜¶æ®µï¼Œå…¶ä¸­ç¬¬ä¸€é˜¶æ®µï¼ˆè¡¨ç¤ºä¸ºp1ï¼‰è¡¨ç¤ºåˆå§‹åŒ–é˜¶æ®µã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/7429c10833e141138561ba6fdbe89610.png"></p><p>è¿™ä¸ªæ›²çº¿å…¶å®ååº”çš„æ˜¯å½“å‰çš„çŸ­æ¿ã€‚å…ˆåˆ†æçº¿æ¡</p><ul><li>åœ¨æ›²çº¿ä¸Šå‡æœŸï¼Œpeak Flopsè®¡ç®—èƒ½åŠ›ğ¹æ˜¯å¤§çš„å€¼ï¼Œä¸æ˜¯çŸ­æ¿ã€‚åªè¦ç¨‹åºæ¯æ¯”ç‰¹å«çš„è®¡ç®—é‡å¤§ï¼Œå¸¦å®½å³°å€¼ä¸€å®šï¼Œè®¡ç®—ååé‡å°±èƒ½æŒç»­å¢åŠ ã€‚</li><li>æ›²çº¿å¹³ç¼“åè¯´æ˜è®¡ç®—èƒ½åŠ›ğ¹æˆä¸ºäº†çŸ­æ¿ï¼Œåº”è¯¥è€ƒè™‘å°†ä»»åŠ¡åˆ†ç»™å…¶ä»–è®¡ç®—èŠ‚ç‚¹ä¹‹ç±»çš„æ“ä½œäº†ã€‚</li><li>å¯¹äºè™šçº¿ï¼Œå¦‚æœç¨‹åºåŒ…å«çš„æ¯æ¯”ç‰¹æµ®ç‚¹è®¡ç®—é‡ä¸€å®šï¼Œå¢åŠ å¸¦å®½çš„æ“ä½œä¹Ÿå¯ä»¥æé«˜ç¨‹åºååé‡ã€‚</li><li>æ›²çº¿å¹³ç¼“åä¼šæ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œå†å¢åŠ ååé‡æˆ–è€…ç¨‹åºåŒ…å«çš„æ¯æ¯”ç‰¹æµ®ç‚¹è®¡ç®—é‡éƒ½æ— æµäºäº‹ã€‚</li></ul><p>å¯¹äºå›¾ä¸­çš„ç‚¹ï¼Œworkloadçš„ç‰¹å¾è¡¨ç°å¦‚ä¸‹ï¼š</p><ul><li>å‰ææ˜¯CPUçš„è®¡ç®—èµ„æºæ˜¯æ²¡åŠæ³•æ± åŒ–çš„ï¼Œä½†æ˜¯å†…å­˜å¯ä»¥æ± åŒ–ï¼Œä½ å°±å¯é€‰æ‹©æ›´å¤šçš„é€šé“ï¼Œå¢åŠ èšåˆå¸¦å®½ã€‚</li><li>åœ¨æ–œçº¿èŒƒå›´å†…ï¼Œå¯¹äºæ²¡æœ‰é è¿‘å±‹æªçš„ç¨‹åºï¼Œæ˜¯ç”±äºæ²¡æœ‰è·å¾—è¶³å¤Ÿçš„å¸¦å®½ã€‚å› ä¸ºè¿™æ—¶è®¡ç®—èƒ½åŠ›å¹¶ä¸æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆï¼Œå¦‚æœèƒ½è¾¾åˆ°å³°å€¼çš„å¸¦å®½ï¼Œååé‡è¿˜èƒ½æå‡ã€‚</li><li>å¯¹äºæ¨ªçº¿èŒƒå›´ä¸‹çš„ç¨‹åºï¼Œè®¡ç®—èƒ½åŠ›æˆä¸ºç“¶é¢ˆåä¸”ä¸æƒ³åŠ å…¥æ–°çš„è®¡ç®—èŠ‚ç‚¹ï¼Œé‚£æœ€å¥½çš„æƒ…å†µæ˜¯miné‡Œä¸¤ä¸ªè€…ç›¸ç­‰ï¼Œè¿™æ˜¯è¿™ä¸ªç¨‹åºæ‰€éœ€å¸¦å®½æœ€å¤§å€¼äº†ã€‚<br>ï¼ˆä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç†æƒ³æ¨¡å‹ï¼Œä»–è¿˜æœ‰å¾ˆå¤šå…¶ä»–å› ç´ æ²¡æœ‰è€ƒè™‘è¿›å»ï¼Œæ¯”å¦‚HPCåœ¨åŒæ­¥ç‚¹çš„é€šä¿¡å¼€é”€ä¹‹ç±»çš„ï¼‰</li></ul><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>å¦‚ä½•åœ¨HPCç¯å¢ƒä¸­ä½¿ç”¨å†…å­˜æ± ã€‚äº‘ç¯å¢ƒçš„å†…å­˜æ± å¤§å¤šå’Œè™šæ‹ŸåŒ–æœ‰å…³HPCä¸éœ€è¦ï¼Œä¸”äº‘æä¾›å•†çš„ç›®çš„æ˜¯æœåŠ¡è´¨é‡å’Œæˆæœ¬ï¼ŒHPCè®¡ç®—æ€§èƒ½æ˜¯é¦–è¦ç›®æ ‡ã€‚è¿™ä½¿å¾—ä½¿ç”¨å†…å­˜æ± ä¹Ÿå¾—æ»¡è¶³</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ä¸€äº›ç°æœ‰çš„å·¥ä½œä¾§é‡äºäº†è§£æ€§èƒ½ä¸‹é™æˆ–ä¼˜åŒ–åˆ†è§£å†…å­˜ä¸Šçš„æ•°æ®æ”¾ç½®[18,24,30,39,48]ã€‚ç„¶è€Œï¼Œæœ¬æ–‡å¹¶æ²¡æœ‰æä¾›æ•°æ®æ”¾ç½®çš„å…¶ä»–ä¼˜åŒ–å·¥ä½œï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€ä¸ª<span class="label primary">é€šç”¨æ¡†æ¶æ¥ç ”ç©¶åº”ç”¨ç¨‹åºçš„å†…å­˜è¡Œä¸ºå¹¶ç¡®å®šä¼˜åŒ–ä¼˜å…ˆçº§å’Œé™åˆ¶</span>ï¼Œä»¥åŠå½±å“éƒ¨ç½²é€‰é¡¹ã€‚ç§»æ¤å·¥ä½œé‡ä½ï¼Œå› ä¸ºæ¶æ„å˜åŒ–å¯¼è‡´ç¨‹åºé‡å†™ä¹‹ç±»çš„å¼€é”€ã€‚æ€§èƒ½å˜åŒ–ä½ã€‚è®¡ç®—è®¾æ–½æ”¶ç›Šï¼šå¯æŒç»­æ€§ã€ç»„ä»¶å•ç‹¬å‡çº§ã€ä½æˆæœ¬ã€‚</p><h2 id="5-å®éªŒå¹³å°"><a href="#5-å®éªŒå¹³å°" class="headerlink" title="5. å®éªŒå¹³å°"></a>5. å®éªŒå¹³å°</h2><p>æˆ‘ä»¬ä¸ºå›¾2ä¸­çš„å†…å­˜æ± é…ç½®äº†ä¸€ä¸ªä»¿çœŸå¹³å°ã€‚è¯¥æ–¹æ³•ä½¿ç”¨åŒæ’æ§½ç³»ç»Ÿä¸­çš„æ’æ§½äº’è¿æ¥ä»¿çœŸä¸€è‡´çš„åˆ†è§£å†…å­˜ç³»ç»Ÿã€‚[24,30,53]ä¸­ä½¿ç”¨äº†ç±»ä¼¼çš„æ–¹æ³•ã€‚é»˜è®¤çš„é¦–æ¬¡æ¥è§¦é¡µé¢åˆ†é…ç­–ç•¥å°†åˆ†é…åˆ†é…åˆ°æœ¬åœ°NUMAèŠ‚ç‚¹ä¸Šï¼Œç›´åˆ°æ»¡ä¸ºæ­¢ï¼Œç„¶åå†æº¢å‡ºåˆ°å…¶ä»–NUMAèŠ‚ç‚¹ï¼ˆè¿œç¨‹å†…å­˜ï¼‰ã€‚</p><p>è¯¥ä»¿çœŸå¹³å°ä½¿ç”¨å…·æœ‰ä¸¤ä¸ªæ’æ§½å’Œæ¯ä¸ªæ’æ§½ä¸€ä¸ªNUMAèŠ‚ç‚¹çš„Intel Xeonæµ‹è¯•å°ã€‚å¦‚å›¾3æ‰€ç¤ºï¼Œä¸€ä¸ªsocketä»£è¡¨ä¸€ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªsocketä¸Šçš„å†…å­˜ä»£è¡¨ä¸€ä¸ªå†…å­˜æ± ã€‚ç¬¬äºŒä¸ªsocketä¸Šçš„æ ¸å¿ƒæœªä½¿ç”¨ã€‚å®ƒä»¬ä¹‹é—´çš„UPIäº’è¿ä»£è¡¨è¿œç¨‹é“¾è·¯ã€‚Socketå†…å¸¦å®½ä¸º73GB/sï¼Œå»¶è¿Ÿä¸º111nsï¼Œsocketé—´å¸¦å®½ä¸º34GB/sï¼Œå»¶è¿Ÿä¸º202nsã€‚ Linuxå†…æ ¸ç‰ˆæœ¬æ˜¯5.14ã€‚ä¸ºäº†è·å¾—ä¸€è‡´çš„ç»“æœï¼Œæˆ‘ä»¬ç¦ç”¨NUMAå¹³è¡¡å’Œé€æ˜å¤§é¡µé¢ï¼ˆTHPï¼‰ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/2385095697584c9383e915b8ec52e02c.png" alt="å›¾3"></p><h2 id="6-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#6-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="6. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>6. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>æˆ‘ä»¬é‡‡ç”¨äº†ä¸‰å±‚è‡ªä¸Šè€Œä¸‹çš„æ–¹æ³•:</p><ul><li>åœ¨ç¬¬ä¸€å±‚ï¼Œæˆ‘ä»¬ç¡®å®šäº†åº”ç”¨ç¨‹åºå¯¹å†…å­˜ç³»ç»Ÿçš„å†…åœ¨è¦æ±‚ï¼Œä¸ç¡®åˆ‡çš„ç³»ç»Ÿæ¶æ„æ— å…³ã€‚è¿™äº›å†…åœ¨è¦æ±‚åŒ…æ‹¬ç®—æœ¯å¼ºåº¦ã€å†…å­˜å®¹é‡ä½¿ç”¨ã€å¸¦å®½ä½¿ç”¨å’Œè®¿é—®æ¨¡å¼ã€‚</li><li>ç¬¬äºŒå±‚å°†åº”ç”¨éœ€æ±‚æ‰©å±•åˆ°ä¸€èˆ¬å¤šå±‚å†…å­˜ç³»ç»Ÿï¼Œå¹¶åˆ©ç”¨å†…å­˜rooflineæ¨¡å‹ã€‚ </li><li>æœ€åä¸€ä¸ªå±‚æ¬¡æ˜¯åœ¨å›¾2æ‰€ç¤ºçš„é«˜æ€§èƒ½è®¡ç®—æ¶æ„ä¸Šï¼Œç ”ç©¶ä¸‹å±‚ç”±å†…å­˜æ± æ”¯æŒæ—¶çš„ç‰¹å®šå†…å­˜å¹²æ‰°æŒ‘æˆ˜ã€‚</li></ul><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/e77b0cd0f54b49b3aa03a5be7577ff32.png" alt="å›¾2"><br>å›¾4å±•ç¤ºäº†å®éªŒå·¥ä½œæµç¨‹ï¼Œå…¶ä¸­æ¯ä¸ªæ‰§è¡Œå±‚æ¬¡éƒ½æ”¶é›†äº†å‰–æä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯åˆ†åˆ«è¿›è¡Œå¯è§†åŒ–æ˜¾ç¤ºã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/42372e86afbe44e3858ce05ec18a507d.png" alt="A step-by-step overview of the profiling workflow with example commands."><br>ä½¿ç”¨ç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨æ•è·éœ€è¦çš„æŒ‡æ ‡ï¼Œæ¯”å¦‚å†…å­˜è®¿é—®ã€‚å¦‚æœæ¶æ„æ”¹å˜æˆ–è€…å¤šå±‚å­˜å‚¨å™¨æ”¹å˜ï¼Œåªéœ€è¦æ”¹å˜é€‰å®šçš„æ€§èƒ½äº‹ä»¶ã€‚</p><h3 id="6-1å·¥ä½œè´Ÿè½½ç‰¹å¾-å®¹é‡å¸¦å®½å¼¹æ€§"><a href="#6-1å·¥ä½œè´Ÿè½½ç‰¹å¾-å®¹é‡å¸¦å®½å¼¹æ€§" class="headerlink" title="6.1å·¥ä½œè´Ÿè½½ç‰¹å¾-å®¹é‡å¸¦å®½å¼¹æ€§"></a>6.1å·¥ä½œè´Ÿè½½ç‰¹å¾-å®¹é‡å¸¦å®½å¼¹æ€§</h3><p>æ„Ÿå…´è¶£çš„æ˜¯<span class="label primary">è¯†åˆ«å¹¶æŠ½è±¡å‡ºåº”ç”¨ç¨‹åºåœ¨ä¸åŒå†…å­˜é…ç½®çš„ç³»ç»Ÿä¸Šæ‰§è¡Œæ—¶ä»èƒ½ä¿æŒçš„ç‰¹æ€§</span>ã€‚è¡¨2æ€»ç»“äº†æœ¬æ–‡ä½¿ç”¨çš„è¯„ä¼°åº”ç”¨ç¨‹åºå’Œè¾“å…¥é—®é¢˜åˆ—è¡¨ã€‚identifying and abstracting  the properties that persist even when the application is executed on  systems with different memory configurations.</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/e1a92a68adf249a5bf48e61fb000b334.png" alt="ç”¨äºåˆ†æçš„workloads"></p><p>åœ¨éƒ¨ç½²é«˜æ€§èƒ½è®¡ç®—åº”ç”¨ç¨‹åºæ—¶ï¼Œå®¹é‡å’Œå¸¦å®½æ˜¯ä¸å†…å­˜ç›¸å…³çš„ä¸¤ä¸ªä¸»è¦è€ƒè™‘å› ç´ ã€‚åœ¨å…¸å‹çš„å†³ç­–æµç¨‹ä¸­ï¼Œç”¨æˆ·éœ€è¦ä¼°ç®—ä½œä¸šçš„æ€»å†…å­˜å ç”¨å’Œæ¯ä¸ªèŠ‚ç‚¹çš„å³°å€¼å†…å­˜ä½¿ç”¨é‡ï¼Œç„¶åå°†å…¶ä¸æ¯ä¸ªè®¡ç®—èŠ‚ç‚¹çš„å†…å­˜å®¹é‡è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šæ‰€éœ€çš„æœ€å°èŠ‚ç‚¹æ•°ã€‚</p><p><span class="label info">å½“å†…å­˜å¸¦å®½æˆä¸ºé™åˆ¶å› ç´ æ—¶ï¼Œç”¨æˆ·å¯èƒ½ä¼šå†³å®šè¿›ä¸€æ­¥å¢åŠ èŠ‚ç‚¹æ•°é‡ï¼Œä»¥è·å¾—æ›´é«˜çš„æ€»å†…å­˜å¸¦å®½</span>ã€‚æˆ‘ä»¬æå‡ºäº†å†…å­˜å¸¦å®½-å®¹é‡ç¼©æ”¾æ›²çº¿ï¼ˆå¦‚å›¾6æ‰€ç¤ºï¼‰ï¼Œä»¥å¸®åŠ©ç”¨æˆ·<span class="label primary">é‡åŒ–å®¹é‡å’Œå¸¦å®½ä½¿ç”¨ä¹‹é—´çš„å…³ç³»</span>ã€‚è¯¥æ›²çº¿æ˜¯åˆ©ç”¨æˆ‘ä»¬çš„å‰–æå™¨ä¸­çš„å†…å­˜è®¿é—®é‡‡æ ·å»ºç«‹çš„ã€‚åœ¨æŒ‰é¡µé¢æµ‹é‡å¹¶æ±‡æ€»å†…å­˜è®¿é—®æ¬¡æ•°åï¼Œæˆ‘ä»¬å°†é¡µé¢æŒ‰è®¿é—®æ¬¡æ•°é™åºæ’åºã€‚ç„¶åï¼Œæˆ‘ä»¬å»ºç«‹<strong>è®¿é—®é‡çš„ç´¯ç§¯åˆ†å¸ƒ</strong>ï¼Œä¸å†…å­˜å ç”¨ç™¾åˆ†æ¯”è¿›è¡Œæ¯”è¾ƒã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½ä½¿ç”¨3ä¸ªå¤§å°å˜åŒ–çº¦ä¸º2å€çš„è¾“å…¥é—®é¢˜è¿›è¡Œæµ‹è¯•ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/fc92947cae88430d82c45ee935b3a692.png"><br>è¿™ç§ç¼©æ”¾æ›²çº¿åˆ†ææ˜¯ä¸€ä¸ªç®€æ´çš„å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©HPCç”¨æˆ·ç»Ÿä¸€å†…å­˜éœ€æ±‚çš„ä¸¤ä¸ªç»´åº¦ï¼Œå³å¸¦å®½å’Œå®¹é‡ï¼Œå¹¶ä¼°è®¡æ›´å¤§è§„æ¨¡é—®é¢˜çš„éœ€æ±‚ã€‚</p><ul><li>HPLå’ŒHypreåœ¨æ•´ä¸ªå†…å­˜å ç”¨ç©ºé—´ä¸­è¡¨ç°å‡ºç›¸å¯¹å‡åŒ€çš„å†…å­˜è®¿é—®ã€‚ï¼ˆéšç€è¢«è®¿é—®çš„å†…å­˜é€æ¸å¢åŠ ï¼Œè®¿é—®é‡ä¹Ÿæ˜¯å¹³ç¼“å¢åŠ çš„ï¼‰è¿™ç§ç‰¹æ€§ä¸ä¼ ç»Ÿçš„æ•°å€¼ä»£ç ä¸€è‡´ï¼Œå‡ ä¹æ‰€æœ‰çš„ä¸»å­˜å¯¹è±¡éƒ½è¢«è®¿é—®æ¥è¿›è¡Œè®¡ç®—ã€‚</li><li>BFSå’ŒXSBenchåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€å°éƒ¨åˆ†å†…å­˜å ç”¨è¢«ä¸»åŠ¨è®¿é—®ã€‚æˆ‘ä»¬æ£€æŸ¥æºä»£ç å‘ç°BFSåˆ†é…äº†å¤§çš„å›¾ç»“æ„ï¼Œè€Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åªä¼šè®¿é—®é‚»æ¥æ•°æ®ã€‚ç±»ä¼¼åœ°ï¼ŒXSBenchåˆ†é…å¤§å‹ç½‘æ ¼ç»“æ„ï¼Œè€Œä»…æŸ¥æ‰¾é‡‡æ ·ç‚¹ã€‚</li><li>NekRSã€HPLã€Hypreå’ŒXSBenchè¿™å››ä¸ªåº”ç”¨ç¨‹åºå¯¹äº1Ã—ã€2Ã—å’Œ4Ã—è¾“å…¥é—®é¢˜å…·æœ‰é‡å çš„ç¼©æ”¾æ›²çº¿ï¼Œè¯´æ˜è¾“å…¥çš„é—®é¢˜è§„æ¨¡ä¸å½±å“ä»–ä»¬çš„è¡¨ç°æ¨¡å¼ã€‚</li><li>å½“è¾“å…¥é—®é¢˜å¢åŠ æ—¶ï¼ŒBFSçš„ç¼©æ”¾æ›²çº¿å‘xè½´å·¦ä¾§ç§»åŠ¨ï¼Œè¡¨æ˜è®¿é—®åˆ†å¸ƒå˜å¾—æ›´åŠ å€¾æ–œï¼Œå…·æœ‰æ›´å¤šè®¿é—®çš„é¡µé¢ç™¾åˆ†æ¯”æ›´å°‘ã€‚</li><li>SuperLUçš„å˜åŒ–è¡¨æ˜çƒ­ç‚¹é¡µçš„åˆ†å¸ƒä»åæ–œåˆ†å¸ƒè½¬å‘æ›´å‡åŒ€çš„åˆ†å¸ƒã€‚</li></ul><p>ï¼ˆäº‹å®ä¸Šè¿™ä¸ªå’Œå¸¦å®½çš„å…³ç³»æ˜¯æŒ‡è®¿é—®é‡ï¼Œè¿˜æœ‰äº›ç‰µå¼ºå•Šã€‚ï¼‰</p><h3 id="6-2å·¥ä½œè´Ÿè½½ç‰¹å¾-é¢„å–"><a href="#6-2å·¥ä½œè´Ÿè½½ç‰¹å¾-é¢„å–" class="headerlink" title="6.2å·¥ä½œè´Ÿè½½ç‰¹å¾-é¢„å–"></a>6.2å·¥ä½œè´Ÿè½½ç‰¹å¾-é¢„å–</h3><p>é¢„å–çš„é€‚ç”¨æ€§æ˜¯ç”±åº”ç”¨ç¨‹åºçš„ç®—æ³•å’Œè®¿é—®æ¨¡å¼å†³å®šçš„ã€‚åº”ç”¨ç¨‹åºåœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šæ‰§è¡Œï¼Œé¢„å–çš„é€‚ç”¨æ€§ä¹Ÿå¾—ä»¥ä¿ç•™ã€‚åœ¨åˆ†è§£å†…å­˜çš„æƒ…å†µä¸‹ï¼Œé¢„å–æ©ç›–æ›´é«˜çš„è®¿é—®å»¶è¿Ÿã€‚è¿™é‡Œä¸»è¦è®¨è®ºå¯¹äºHPCæ¥è¯´æ˜¯å¦å¼€å¯é¢„å–ï¼Œå› ä¸ºåœ¨åŒæ ·å†…å­˜åˆ†è§£çš„äº‘ç¯å¢ƒä¸­é¢„å–æ˜¯æŸå®³æ€§èƒ½çš„ã€‚</p><p>é‡åŒ–é¢„å–çš„é€‚ç”¨æ€§ä½¿ç”¨ä¹‹å‰æå‡ºçš„ä¸¤ä¸ªæŒ‡æ ‡ï¼Œå³å‡†ç¡®ç‡å’Œè¦†ç›–ç‡[29]. 1.å‡†ç¡®åº¦è¡¡é‡çš„æ˜¯ç¨‹åºå®é™…è®¿é—®çš„é¢„å–ç¼“å­˜è¡Œçš„æ¯”ç‡ã€‚2.è¦†ç›–ç‡è¡¡é‡åœ¨æŒ‰éœ€è®¿é—®ä¹‹å‰é¢„å–çš„ç¼“å­˜è¡Œè®¿é—®çš„æ¯”ç‡ã€‚</p><p>åˆ†æåŸºäºL2é«˜é€Ÿç¼“å­˜ï¼Œcoreç¡¬ä»¶é¢„æ£€å™¨ä½äºL2é«˜é€Ÿç¼“å­˜ï¼ŒLLCæ˜¯ç‹¬å çš„L3é«˜é€Ÿç¼“å­˜ã€‚ä½œè€…çš„æµ‹é‡ç»“æœå°±è¯´æ˜é¢„å–æœ‰å¥½å¤„ï¼Œä½†æ˜¯ä¼šå¢åŠ æµé‡ï¼Œä¸è¿‡ä»ç„¶æœ‰å¥½å¤„ã€‚</p><h3 id="6-3å¤šå±‚å†…å­˜-åˆ†å±‚è®¿é—®"><a href="#6-3å¤šå±‚å†…å­˜-åˆ†å±‚è®¿é—®" class="headerlink" title="6.3å¤šå±‚å†…å­˜-åˆ†å±‚è®¿é—®"></a>6.3å¤šå±‚å†…å­˜-åˆ†å±‚è®¿é—®</h3><p>é‡åŒ–æ¯å±‚å†…å­˜å®¹é‡ã€å¸¦å®½å’Œè®¿é—®çš„æ¯”ç‡ã€‚æŸ±çŠ¶å›¾å›¾æ˜¯è¿œç«¯è®¿é—®çš„å†…å­˜å æ€»å†…å­˜è®¿é—®çš„ç™¾åˆ†æ¯”ã€‚å‡åŒ€çš„è™šçº¿æ˜¯è¿œç«¯å’Œè¿‘ç«¯å®¹é‡å æ¯”ã€‚ä¸å‡åŒ€çš„è™šçº¿æ˜¯ä¸€ä¸ªå›ºå®šå€¼ï¼Œå› ä¸ºå¸¦å®½å³°å€¼å’Œç¡¬ä»¶ç›¸å…³ï¼Œ $R_{BW}^{remort}$ æ˜¯å†…å­˜è®¿é—®ç“¶é¢ˆçš„è½¬æŠ˜ç‚¹ã€‚</p><ul><li>å…¶ä¸­ $R_{access}^{remort}$ å€¼ä½äº $R_{BW}^{remort}$ è¡¨ç¤ºå†…å­˜è®¿é—®ç“¶é¢ˆå—åˆ°å¿«é€Ÿå±‚å¸¦å®½çš„é™åˆ¶ã€‚ç†æƒ³æƒ…å†µåº”è¯¥æ˜¯ä¸¤å±‚çš„è¿™ä¸¤ä¸ªæ¯”æ˜¯ä¸€æ ·çš„ï¼Œæ‰èƒ½å……åˆ†åˆ©ç”¨æµé‡ã€‚</li><li>å¦‚æœ $R_{access}^{remort}$ å€¼é«˜äº $R_{BW}^{remort}$ ï¼Œåˆ™è¡¨ç¤ºå¯¹è¾ƒæ…¢å±‚çš„å†…å­˜è®¿é—®è¿‡å¤šï¼Œå¯¼è‡´è¾ƒæ…¢å±‚æˆä¸ºå†…å­˜é™åˆ¶è®¿é—®æ€§èƒ½ã€‚</li></ul><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/59098ca6575a41439361eb768ae89495.png"></p><p>é€šè¿‡åˆ©ç”¨åˆ†æå™¨ä¸­çš„ä¸¤ä¸ªå‚è€ƒç‚¹å’Œå†…å­˜è®¿é—®æŒ‡æ ‡ï¼Œå¯ä»¥è¯†åˆ«å¤šå±‚å†…å­˜çš„ä¼˜åŒ–æœºä¼šå¹¶ç¡®å®šä¼˜å…ˆçº§ã€‚</p><ul><li>å›¾9aä¸¤æ¡å‚è€ƒçº¿å¾ˆæ¥è¿‘ï¼Œå¤§å¤šæ•°åº”ç”¨ç¨‹åºï¼ˆHPLå’ŒXS Benché™¤å¤–ï¼‰çš„è¿œç¨‹å†…å­˜è®¿é—®æ¯”ç‡æ¥è¿‘ä¸¤æ¡ä¼˜åŒ–å‚è€ƒçº¿ï¼Œè¡¨æ˜ä¼˜åŒ–ç©ºé—´å¾ˆå°ï¼Œç”¨æˆ·ä¸åº”è¯¥èŠ±è´¹ç²¾åŠ›è¿›è¡Œä¼˜åŒ–æ•°æ®æ”¾ç½®ã€‚</li><li>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå›¾9cæä¾›äº†ä¸¤æ¡å‚è€ƒçº¿çš„å¤§é‡ä¼˜åŒ–æœºä¼šã€‚ä¾‹å¦‚ï¼Œæ ¹æ®å®¹é‡æ¯”ï¼ŒHPLã€NekRSå’ŒBFSéƒ½è¡¨ç°å‡ºé«˜äºğ‘…ğ¶ğ‘ğ‘ï¼ˆä»¥çº¢è‰²è™šçº¿è¡¨ç¤ºï¼‰ä¹‹ä¸Šçš„è¿‡åº¦è®¿é—®ã€‚å¦‚æœçƒ­åº¦åˆ†å¸ƒå‡åŒ€åº”è¯¥æ˜¯æ›´æŒ‰ç…§å®¹é‡æ¯”æ¥è®¿é—®çš„ï¼Œè¿™è¡¨æ˜åœ¨PMçš„é‚£éƒ¨åˆ†æ›´çƒ­ã€‚</li><li>å›¾9cå‡ ä¹æ‰€æœ‰åº”ç”¨ç¨‹åºçš„ç¬¬äºŒé˜¶æ®µ (p2) éƒ½å¤§å¤§é«˜äºå¸¦å®½æ¯” (ğ‘…ğµğ‘Š) å‚è€ƒå€¼ã€‚ï¼ˆè¿™ä¹Ÿå¯ä»¥ç†è§£ï¼Œé¦–å…ˆä½ è¿œç«¯å±‚æœ¬èº«è®¿é—®å°±å¤šäº†ï¼Œå†åŠ ä¸Šä½ å¸¦å®½æœ¬æ¥æ¯”åˆ«äººä½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæŒ‡æ ‡ä¸Šåç¦»çš„æ›´åŠ é¥è¿œäº†ï¼‰è™½ç„¶è¿™è¡¨æ˜è¿˜æœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ï¼Œä½†ä¹Ÿå¯èƒ½æ„å‘³ç€å†…å­˜å±‚çš„è®¾è®¡ä¸å¹³è¡¡ã€‚</li><li>XSBenchåœ¨æ‰€æœ‰åº”ç”¨ç¨‹åºä¸­è„±é¢–è€Œå‡ºï¼Œå› ä¸ºæ‰€æœ‰é…ç½®ä¸­çš„è¿œç¨‹è®¿é—®æ¯”ç‡éƒ½å¾ˆä½ï¼ˆä½äº6%ï¼‰ã€‚è¿™æ„å‘³ç€è¿œç¨‹å­˜å‚¨å™¨çš„é¢å¤–å¸¦å®½æ²¡æœ‰è¢«åˆ©ç”¨ã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°XSBenchçš„é¢„å–è¦†ç›–ç‡&lt;1%ï¼Œåº”ç”¨ç¨‹åºå¯¹å†…å­˜å»¶è¿Ÿçš„å¢åŠ é«˜åº¦æ•æ„Ÿã€‚å› æ­¤ï¼Œé€šè¿‡æœ€å°åŒ–è¿œç¨‹å†…å­˜æš´éœ²æ¥å‡å°‘å»¶è¿Ÿæ¯”å¢åŠ èšåˆå†…å­˜å¸¦å®½æ›´é‡è¦ã€‚ï¼ˆä½œè€…è¿™ä¸ªè§£é‡Šç¬”è€…ä¸å¤ªè®¤å¯å•Šã€‚å‰é¢è¯´XSBenchæ˜¯å¤§å‹ç½‘ç»œç»“æ„åªæœ‰ä¸€å°éƒ¨åˆ†è¢«è®¿é—®ï¼Œé‚£è¯´æ˜é‚£éƒ¨åˆ†éƒ½è¢«åˆ†é…å»æœ¬åœ°äº†å‘€ï¼‰</li></ul><h3 id="6-4å¤šå±‚å†…å­˜-è®¿é—®çš„é˜¶æ®µæ€§å˜åŒ–"><a href="#6-4å¤šå±‚å†…å­˜-è®¿é—®çš„é˜¶æ®µæ€§å˜åŒ–" class="headerlink" title="6.4å¤šå±‚å†…å­˜-è®¿é—®çš„é˜¶æ®µæ€§å˜åŒ–"></a>6.4å¤šå±‚å†…å­˜-è®¿é—®çš„é˜¶æ®µæ€§å˜åŒ–</h3><p>é«˜æ€§èƒ½è®¡ç®—åº”ç”¨é€šå¸¸ç”±å¤šä¸ªé˜¶æ®µç»„æˆã€‚å¦‚å›¾5å’Œå›¾9æ‰€ç¤ºï¼Œåº”ç”¨ç¨‹åºä¸­å„é˜¶æ®µçš„è¿ç®—å¼ºåº¦å’Œå†…å­˜è®¿é—®æ¨¡å¼å¯èƒ½æˆªç„¶ä¸åŒã€‚ä¸€ä¸ªcoreçš„æ•°æ®æ”¾ç½®æ–¹æ¡ˆå¯èƒ½ä¼šæŸå®³å…¶ä»–coreã€‚è¿™ç§å…¨å±€ä¼˜åŒ–æ˜¯ä¸€ä¸ªNPå®Œå…¨èƒŒåŒ…é—®é¢˜ã€‚ </p><ul><li>é™æ€è§£å†³æ–¹æ¡ˆåˆ©ç”¨ç¦»çº¿å‰–ææ¥ä¿®æ”¹åˆ†é…ä½ç½®ï¼Œå°†å†…å­˜å˜é‡ç›´æ¥æ”¾ç½®åœ¨åˆé€‚çš„å†…å­˜å±‚ä¸Šã€‚éœ€è¦å¤§é‡çš„ç§»æ¤å·¥ä½œï¼Œé€šå¸¸æ— æ³•é€‚åº”æ–°çš„è¾“å…¥é—®é¢˜æˆ–ç³»ç»Ÿæ¶æ„ã€‚</li><li>åŠ¨æ€è§£å†³æ–¹æ¡ˆåˆ™é€šè¿‡è¿è¡Œæ—¶æ£€æµ‹è®¿é—®æ¨¡å¼ï¼Œå°†æ€§èƒ½å…³é”®çš„å†…å­˜é¡µè¿ç§»åˆ°å¿«é€Ÿå±‚ã€‚æ–¹æ³•å¯¹ç”¨æˆ·é€æ˜ã€‚ä½†æ˜¯ï¼Œé«˜æ€§èƒ½è®¡ç®—ç»ˆç«¯ç”¨æˆ·é€šå¸¸æ— æ³•æ¥å—æ€§èƒ½å˜åŒ–å’Œä¸ç¡®å®šæ€§èƒ½ã€‚æ­¤å¤–ï¼Œåœ¨é«˜ç«¯HPCç¡¬ä»¶ä¸Šï¼Œåº”ç”¨ç¨‹åºä¸­çš„å„ä¸ªé˜¶æ®µé€šå¸¸æ—¶é—´å¾ˆçŸ­ï¼Œè€Œè¿è¡Œæ—¶è§£å†³æ–¹æ¡ˆéœ€è¦æ—¶é—´æ¥é€‚åº”ã€‚</li></ul><h3 id="6-5å¯¹å†…å­˜æ± çš„å¹²æ‰°-å¹²æ‰°æ•æ„Ÿåº¦"><a href="#6-5å¯¹å†…å­˜æ± çš„å¹²æ‰°-å¹²æ‰°æ•æ„Ÿåº¦" class="headerlink" title="6.5å¯¹å†…å­˜æ± çš„å¹²æ‰°-å¹²æ‰°æ•æ„Ÿåº¦"></a>6.5å¯¹å†…å­˜æ± çš„å¹²æ‰°-å¹²æ‰°æ•æ„Ÿåº¦</h3><p>ç”±äºå¤šä¸ªèŠ‚ç‚¹å¯èƒ½å…±äº«å†…å­˜æ± ï¼Œå› æ­¤ä¸€ä¸ªç‹¬ç‰¹çš„æŒ‘æˆ˜æ˜¯æ¥è‡ªå…¶ä»–èŠ‚ç‚¹ä¸Šå…±åŒè¿è¡Œçš„ä½œä¸šçš„å†…å­˜å¹²æ‰°ã€‚æˆ‘ä»¬ä½¿ç”¨LBenchæ¥é‡åŒ–è¡¨2ä¸­çš„åº”ç”¨ç¨‹åºçš„å†…å­˜å¹²æ‰°çš„å½±å“ï¼Œä¸»è¦ç”¨äºæ³¨å…¥é“¾è·¯çš„æ‹¥å¡ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/dcfdd670c5e442c5aaa9ca7de6c174d0.png"></p><p>ä»è¿™é‡Œæ¥çœ‹å¤šå¤šå°‘å°‘éƒ½ä¼šæœ‰å½±å“ã€‚åº”ç”¨ç¨‹åºå¯¹å†…å­˜æ± å†…å­˜å¹²æ‰°çš„æ•æ„Ÿåº¦ç”±å…¶è¿œç¨‹å†…å­˜è®¿é—®å¼•èµ·ï¼Œå¹¶ä¸å…¶è¿ç®—å¼ºåº¦æˆåæ¯”ã€‚åº”ç”¨ç¨‹åºç”¨æˆ·éœ€è¦é‡åŒ–åº”ç”¨ç¨‹åºåœ¨ç›®æ ‡åˆ†è§£å†…å­˜ç³»ç»Ÿä¸Šå¯¹å†…å­˜å¹²æ‰°çš„æ•æ„Ÿåº¦ï¼Œä»¥ç¡®å®šå…¶åœ¨ç³»ç»Ÿä¸Šçš„éƒ¨ç½²é…ç½®ã€‚<strong>å¯¹äºå†…å­˜å¹²æ‰°æ•æ„Ÿåº¦è¾ƒä½çš„åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥é…ç½®ä½œä¸šéƒ¨ç½²ï¼Œå……åˆ†åˆ©ç”¨å†…å­˜æ± çš„æ›´å¤šå®¹é‡ï¼Œå‡å°‘æ”¯æŒä½œä¸šæ‰€éœ€çš„è®¡ç®—èŠ‚ç‚¹æ•°é‡ã€‚å¯¹äºé«˜åº¦æ•æ„Ÿçš„åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©éƒ¨ç½²å…·æœ‰æ›´å¤šè®¡ç®—èŠ‚ç‚¹çš„ä½œä¸šï¼Œä»¥å‡å°‘è¿œç¨‹å†…å­˜è®¿é—®ï¼Œç”šè‡³å®Œå…¨é¿å…è¿œç¨‹å†…å­˜ï¼Œä»è€Œæ»¡è¶³å…¶æ€§èƒ½è¦æ±‚ã€‚</strong>æˆ‘ä»¬çš„é‡åŒ–æ–¹æ³•ä¸ºé«˜æ€§èƒ½è®¡ç®—ç»ˆç«¯ç”¨æˆ·æä¾›äº†ä¸€ä¸ªåšå‡ºæ˜æ™ºå†³ç­–å’Œæƒè¡¡çš„å·¥å…·ï¼Œæé«˜äº†ç”¨æˆ·å¯¹æ–°ç³»ç»Ÿæ¶æ„çš„ä¿¡å¿ƒã€‚</p><h3 id="6-5å¯¹å†…å­˜æ± çš„å¹²æ‰°-åº”ç”¨ç¨‹åºé€ æˆçš„å†…å­˜å¹²æ‰°"><a href="#6-5å¯¹å†…å­˜æ± çš„å¹²æ‰°-åº”ç”¨ç¨‹åºé€ æˆçš„å†…å­˜å¹²æ‰°" class="headerlink" title="6.5å¯¹å†…å­˜æ± çš„å¹²æ‰°-åº”ç”¨ç¨‹åºé€ æˆçš„å†…å­˜å¹²æ‰°"></a>6.5å¯¹å†…å­˜æ± çš„å¹²æ‰°-åº”ç”¨ç¨‹åºé€ æˆçš„å†…å­˜å¹²æ‰°</h3><p>æˆ‘ä»¬é€šè¿‡ä¸é—²ç½®ç³»ç»Ÿç›¸æ¯”ï¼Œé€šè¿‡ä¸LBENCEå…±åŒè¿è¡Œåº”ç”¨ç¨‹åºå¹¶è®¡ç®—ç›¸å¯¹æ”¾ç¼“çš„åº”ç”¨ç¨‹åºæ¥é‡åŒ–åº”ç”¨ç¨‹åºç³»ç»Ÿä¸Šåº”ç”¨ç¨‹åºçš„å¹²æ‰°ç³»æ•°ã€‚å›¾11çš„å³é¢æ¿æŠ¥å‘Šäº†50ï¼…å†…å­˜æ± è®¾ç½®çš„åº”ç”¨ç¨‹åºçš„æµ‹é‡å¹²æ‰°ç³»æ•°ã€‚ç»“æœè¡¨æ˜ï¼ŒNEKRå’ŒHypreå¯ä»¥å°†æœ€å¤§çš„å†…å­˜å¹²æ‰°å¼•å…¥å…¶ä»–å…±åŒè¿è¡Œçš„ä½œä¸šï¼Œè€ŒHPLå’ŒXSBenchå¼•å…¥äº†æœ€ä½çš„å¹²æ‰°ã€‚å›¾11ä¸­çš„ä¼ æ’­çªå‡ºäº†ç”±å·¥ä½œé‡å¼•èµ·çš„å¹²æ‰°ç³»æ•°çš„å·®å¼‚ã€‚ä¾‹å¦‚ï¼Œåœ¨HYPREä¸­ï¼Œè®¡ç®—é˜¶æ®µä¼šå¯¼è‡´é«˜å¹²æ‰°ç³»æ•°ï¼Œè€Œåˆå§‹åŒ–é˜¶æ®µä¼šå¯¼è‡´ä½å¹²æ‰°ç³»æ•°ã€‚</p><h2 id="7-å…·ä½“å®ç°æ–¹å¼"><a href="#7-å…·ä½“å®ç°æ–¹å¼" class="headerlink" title="7. å…·ä½“å®ç°æ–¹å¼"></a>7. å…·ä½“å®ç°æ–¹å¼</h2><p>ç¬¬ä¸€å±‚çº§çš„åˆ†æä¸­ï¼Œä½¿ç”¨ç¡¬ä»¶è®¡æ•°å™¨æ”¶é›†æ¯ç§’æµ®ç‚¹æ•°è®¡ç®—çš„æ¬¡æ•°ã€åŠ è½½çš„å­—èŠ‚æ•°<code>OFFCORE_RESPONSE:L3_MISS</code>ï¼Œä½¿ç”¨Rooflineæ¨¡å‹è®¡ç®—ã€‚å†…å­˜ä½¿ç”¨é‡é€šè¿‡<code>procfs</code>ä¸­çš„<code>numa_maps</code>æ–‡ä»¶é‡‡æ ·è¿›è¡Œæµ‹é‡ï¼Œåœ¨ç”¨æˆ·æ€æ¥åšå°±ç›¸å½“äº<code>cat /proc/[pid]/numa_maps</code>è¿›ç¨‹çš„NUMAå†…å­˜ç­–ç•¥å’Œåˆ†é…çš„ä¿¡æ¯ã€‚å†…å­˜è®¿é—®æ¨¡å¼1.åŸºäºç²¾ç¡®äº‹ä»¶çš„é‡‡æ ·ï¼ˆPEBSï¼‰å¯ä»¥è®°å½•ç¼ºå¤±çš„è™šæ‹Ÿåœ°å€ã€‚2.ç¡¬ä»¶è®¡æ•°å™¨å’Œé¢„å–ç›¸å…³çš„éƒ¨åˆ†ã€‚</p><p>ç¬¬äºŒå±‚çš„åˆ†æä¸­è€ƒè™‘1.è¿œç¨‹å®¹é‡æ¯”ç‡ï¼ˆè¿œç¨‹å®¹é‡/æ€»å®¹é‡ï¼‰ä½œè€…æ„æ€æ˜¯<code>numa_maps</code>æ–‡ä»¶ä¹Ÿæœ‰2.è¿œç¨‹è®¿é—®æ¯”ç‡ï¼ˆè®¿é—®ä¸‹ä¸€å±‚å†…å­˜æ•°/æ€»è®¿é—®æ•°ï¼‰è®¿é—®æ•°æ˜¯é€šè¿‡écoreäº‹ä»¶<code>LOCAL_DRAM</code>å’Œ<code>REMOTE_DRAM</code>é‡‡æ ·å¾—åˆ°çš„ã€‚</p><p>ç¬¬ä¸‰å±‚å¹²æ‰°æ•æ„Ÿåº¦å†³å®šäº†ç”±äºè¿œç¨‹å†…å­˜å¹²æ‰°è€Œå¯¼è‡´çš„æ€§èƒ½ä¸‹é™ï¼Œè€Œå¼•èµ·çš„å¹²æ‰°å†³å®šäº†åº”ç”¨ç¨‹åºå¯¹å…¶ä»–åº”ç”¨ç¨‹åºé€ æˆçš„å¹²æ‰°ç¨‹åº¦ã€‚ä½¿ç”¨Intel PCMä¸­çš„UPIè®¡æ•°å™¨sktXtrafficæµ‹é‡ç³»ç»Ÿçº§åˆ«çš„æ³¨å…¥æµé‡ã€‚<span class="github-emoji"><span>ğŸ‘</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å¼€å‘äº†ä¸€ä¸ªåä¸ºLBenchçš„åŸºå‡†æµ‹è¯•ï¼Œç”¨äºæ³¨å…¥å’Œé‡åŒ–å†…å­˜æ± é“¾æ¥ä¸Šçš„å¹²æ‰°ã€‚è¯¥åŸºå‡†æµ‹è¯•åœ¨å†…å­˜æ± ä¸Šåˆ†é…ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶åœ¨è¯¥æ•°ç»„ä¸Šæ‰§è¡Œç±»ä¼¼äº Empirical Roofline Toolkit[51]çš„ç®€å•æ•°å€¼å†…æ ¸ã€‚æˆ‘ä»¬å°†å¹²æ‰°çº§åˆ«ï¼ˆè¡¨ç¤ºä¸ºğ¿ğ‘œğ¼ï¼‰å®šä¹‰ä¸ºç”Ÿæˆçš„é“¾è·¯æµé‡ä¸å³°å€¼é“¾è·¯æµé‡ç›¸æ¯”çš„ç™¾åˆ†æ¯”ã€‚ğ¿ğ‘œğ¼é€šè¿‡æ”¹å˜å†…æ ¸ä¸­æ¯ä¸ªæ•°ç»„å…ƒç´ çš„æµ®ç‚¹è¿ç®—æ•°é‡æ¥é…ç½®ã€‚</p><p>è®¨è®ºé¢„å–æ”¶ç›Šæ—¶ä½¿ç”¨çš„ç¡¬ä»¶è®¡æ•°å™¨ï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d9a1181add3d47e4b7a0e27b6f41fddb.png"></p><h2 id="8-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#8-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="8. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>8. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>åœ¨ä¸¤ä¸ªæ¡ˆä¾‹ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬è¡¨æ˜æˆ‘ä»¬çš„æ–¹æ³•çš„ç»“æœå¯ä»¥æŒ‡å¯¼åº”ç”¨ç¨‹åºçº§çš„æ•°æ®æ”¾ç½®ä¼˜åŒ–ï¼Œå‡å°‘50%çš„è¿œç¨‹è®¿é—®å¹¶å°†BFSçš„æ€§èƒ½æé«˜13%ï¼Œå¹¶æŒ‡å¯¼ç³»ç»Ÿçº§è°ƒåº¦ä»¥å‡å°‘åŒä¸€åœ°ç‚¹å·¥ä½œçš„ç»©æ•ˆå·®å¼‚ã€‚</p><h2 id="9-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#9-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="9. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>9. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>å¾ˆéš¾è¯„ï¼Œæœ€åæ¡ˆä¾‹åˆ†æçš„æ„æ€æ˜¯ä¸€è¾¹è·‘ä»£ç ï¼Œä¸€è¾¹è°ƒå‚æ•°ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> Memory Pool </tag>
            
            <tag> Disaggregated Memory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Memtis: Efficient Memory Tiering with Dynamic Page Classification and Page Size Determination</title>
      <link href="/2023/11/10/Memtis/"/>
      <url>/2023/11/10/Memtis/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªACM Symposium on Operating Systems Principles, (SOSP), 2023</li><li>Memtis: Efficient Memory Tiering with Dynamic Page Classification and Page Size Determination</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>ATaehyung Lee, Young Ik Eom,ï¼ˆéŸ©å›½ï¼‰æˆå‡é¦†å¤§å­¦(SKKU)</li><li>Sumit Kumar Monga,å¼—å‰å°¼äºšç†å·¥å¤§å­¦ï¼ˆå…­æ‰€æä¾›é¢„å¤‡å½¹å†›å®˜è®­ç»ƒå›¢é¡¹ç›®çš„ç¾å›½é«˜ç­‰å†›äº‹é™¢æ ¡ä¹‹ä¸€ï¼‰</li><li>Changwoo Min,Igaliaå…¬å¸ï¼ˆOpen Source Consultancy and Developmentï¼‰</li></ul><h2 id="2-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#2-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="2. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>2. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ä»¥å‰åšåˆ†å±‚å†…å­˜ä¸»è¦è€ƒè™‘2ç‚¹ï¼š1.æ€ä¹ˆæ ·å»ç›‘æ§ç›®å‰æœ‰å“ªäº›é¡µé¢æ˜¯çƒ­é¡µé¢ï¼Œå› ä¸ºçƒ­é¡µé¢ä¼šéšç€æ—¶é—´è€Œäº§ç”Ÿæ”¹å˜ï¼ŒåŒæ—¶å±€éƒ¨æ€§ä¹Ÿä¸ä¸€å®šæœ‰æ•ˆã€‚2.ä»€ä¹ˆæ—¶å€™ä»€ä¹ˆåŠæ³•å°†çƒ­/å†·é¡µé¢è¿ç§»åˆ°å®ƒè¯¥åœ¨çš„åœ°æ–¹ã€‚</p><p>ä»¥å‰å¤§å®¶çš„æ–¹æ³•åŸºæœ¬åˆ†æˆä»¥ä¸‹3ç§æ¥ç›‘æ§çƒ­é¡µé¢ï¼š</p><ul><li>ç¼ºé¡µå¼‚å¸¸æ—¶å°†é¡µé¢è¿›è¡Œè¿ç§»æˆ–è€…æ”¶é›†æ•°æ®ï¼Œä½†æ˜¯ç¼ºé¡µå¼‚å¸¸åœ¨ç¨‹åºæ‰§è¡Œçš„å…³é”®è·¯å¾„ä¸Šï¼Œæ­¤æ—¶å†å»æ‰§è¡Œå…¶ä»–çš„æ“ä½œå¾ˆå®¹æ˜“äº§ç”Ÿæ›´é«˜çš„å»¶è¿Ÿã€‚</li><li>åŸºäºé¡µè¡¨çš„é¡µé¢æ‰«æï¼Œåœ¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€è½¬æ¢çš„è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨é¡µè¡¨ï¼Œé¡µè¡¨ä¸Šæœ‰ä¸€ä¸ªAä½çš„è®¿é—®ä½ï¼Œæ¯æ¬¡é¡µé¢è¢«è®¿é—®åéƒ½ä¼šç½®ä½ã€‚é€šè¿‡å®šæœŸæ‰«æé¡µè¡¨ï¼Œæ‰«æåå†æ¸…ç©ºç½®ä½æ¥æœé›†é¡µé¢è®¿é—®ä¿¡æ¯ã€‚ä½†æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½ å¯¹é¡µè¡¨çš„æ‰«æé—´éš”ã€æ‰«æçš„é‡‡æ ·ç²’åº¦ä¼šå½±å“CPUå¼€é”€ä»¥åŠå‡†ç¡®åº¦ã€‚</li><li>åŸºäºç¡¬ä»¶çš„é‡‡æ ·ï¼Œä¸åŒè®¾å¤‡éƒ½ä¼šæœ‰ç¡¬ä»¶è®¡æ•°å™¨PMUä»¥åŠPEBSï¼Œè¿™äº›é‡‡æ ·æ—¶å¯ä»¥è®°å½•ç‰©ç†åœ°å€å’Œpidç­‰ä¿¡æ¯ï¼Œä¹Ÿä¼šéšç€é‡‡æ ·ç²’åº¦æ›´å°è€Œå¼€é”€æ›´å¤§ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœç¡¬ä»¶è®¾å¤‡æ›´æ¢,å®ƒçš„æ€§èƒ½ç›‘æ§è®¡æ•°å™¨ï¼ˆPMCï¼‰çš„å¯„å­˜å™¨åœ°å€å¯èƒ½ä¼šæœ‰å˜åŒ–ã€‚è¿™æ—¶éœ€è¦é‡æ–°æŸ¥çœ‹æ–°ç¡¬ä»¶çš„ç¼–ç¨‹æ‰‹å†Œ,ç¡®å®šPMCå¯„å­˜å™¨çš„æ–°åœ°å€,ç„¶åä¿®æ”¹è½¯ä»¶ç¨‹åºä¸­çš„å¯„å­˜å™¨è®¿é—®ä»£ç ,å°†å…¶æ˜ å°„åˆ°æ–°çš„åœ°å€ä¸Šã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/cad3789c063a409294252b6a18309f12.png"></li></ul><p>é¡µé¢æ”¾ç½®ä¹Ÿå¯ä»¥å¤§è‡´åˆ†ä¸º3ç§ç±»å‹ï¼š</p><ul><li>æœ€è¿‘è®¿é—®çš„é¡µé¢ï¼Œè¿™ä¾èµ–äºæ—¶é—´å±€éƒ¨æ€§ï¼Œä½†æ˜¯å®ƒå¾€å¾€è¢«è®°å½•çš„æ—¶é—´ä¸å¤Ÿå°±ä¸èƒ½äº†è§£è¿™ä¸ªé¡µé¢å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„è®¿é—®å†å²ã€‚</li><li>æƒ³è¦æ•è·é¡µé¢çš„è®¿é—®å†å²ï¼Œç›®å‰çš„æ–¹æ³•è¿˜æ¯”è¾ƒå±€é™ï¼Œå¤§å®¶ä¼šè®¾è®¡ä½å›¾æˆ–è€…ä¸€å®šçš„æ•°æ®ç»“æ„å»è®°å½•ï¼Œæˆ–è€…å¹²è„†æ˜¯æ”¹è¿›LRU.</li><li>è¿˜æœ‰çš„æ–¹æ³•é€šè¿‡è®¾ç½®ä¸€ä¸ªé˜ˆå€¼æ¥è¡¨ç¤ºé¡µé¢åˆ°åº•æ˜¯å†·çš„æˆ–è€…æ˜¯çƒ­çš„ï¼Œè¿™å°±ä¼šå®¹æ˜“å‡ºç°å¦‚ä¸‹å›¾çš„æƒ…å†µï¼Œä¸åŒå·¥ä½œè´Ÿè½½è¿è¡Œåœ¨ä¸Šé¢ï¼Œä½†æ˜¯ä»–ä»¬åœ¨ä¸åŒæ—¶åˆ»ä½ å®šä¹‰çš„çƒ­è¦ä¹ˆå¤šäºDRAMï¼ˆæˆ‘ä»¬é«˜æ€§èƒ½ä½†æœ‰é™çš„å¿«é€Ÿå†…å­˜ï¼Œè¦ä¹ˆè¿œè¿œå°‘äºDRAMï¼‰ï¼Œè¿™ä½¿å¾—å¾ˆå¤šä¸åŒç¨‹åº¦å†·çš„é¡µé¢ä¹Ÿæ··åˆåˆ°äº†å¿«é€Ÿå†…å­˜å±‚ï¼Œè¿™å°±äº§ç”Ÿäº†æ— æ•ˆçš„é¡µé¢åˆ†ç±»ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d46af68f858d4fdc95a3c8d81589c840.png"></li></ul><p>å¦å¤–ä¸€ç‚¹æ˜¯åœ°å€è½¬æ¢çš„å¼€é”€ï¼Œå½“å†…å­˜å˜å¾—å¾ˆå¤§ä¹‹åï¼ŒTLBå¾ˆå°ç¼“å­˜çš„åœ°å€è½¬æ¢çš„æ¡ç›®ç›¸å¯¹è¦†ç›–ç‡å°±ä½äº†ã€‚è½¬æ¢å¼€é”€ä¸»è¦æ˜¯ç”±äºTLBæœªå‘½ä¸­æ—¶ç¼“æ…¢çš„page table walké€ æˆçš„ã€‚TLBçš„å‘½ä¸­é€Ÿåº¦å¾ˆå¿«ï¼Œä½†page table walkå¯èƒ½éœ€è¦å››æ¬¡å†…å­˜è®¿é—®æ‰èƒ½æŸ¥è¯¢åˆ†å±‚é¡µè¡¨ã€‚è¾ƒæ–°çš„å¤„ç†å™¨ç”±äºé‡‡ç”¨äº†æ›´æ·±çš„é¡µè¡¨ç»“æ„ï¼Œéœ€è¦å¤šè¾¾äº”æ¬¡å†…å­˜è®¿é—®ã€‚å¤§é¡µé¢é€šè¿‡ä¸¤ç§æ–¹å¼å‡å°‘è½¬æ¢å¼€é”€ã€‚1.ç”±äºå¤§é¡µé¢çš„å•ä¸ªæ¡ç›®æ˜ å°„äº†æ›´å¤§çš„åœ°å€èŒƒå›´ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å¢åŠ TLBè¦†ç›–ç‡æ¥é™ä½TLBæœªå‘½ä¸­çš„é¢‘ç‡ã€‚2.é€šè¿‡å‡å°‘éœ€è¦è®¿é—®çš„é¡µè¡¨çº§æ•°ï¼ŒåŠ å¿«å•ä¸ªwalké€Ÿåº¦ã€‚<br>ä½†æ˜¯å¤§å®¶åœ¨ä½¿ç”¨å¤§é¡µé¢çš„æ—¶å€™å¾€å¾€ä¸€ä¸ªå¤§é¡µé¢åªæœ‰å¾ˆå°ä¸€éƒ¨åˆ†å°é¡µé¢è¢«è®¿é—®ï¼Œè¿ç§»å¤§é¡µé¢åˆå¿…é¡»æ‰¿å—æ˜‚è´µçš„å¼€é”€ã€‚æ¯”å¦‚ä¸‹å›¾æ¨ªåæ ‡æ˜¯0åˆ°511ï¼Œæ¯ä¸ªç‚¹ä»£è¡¨ä¸€ä¸ªå¤§é¡µé¢ï¼Œï¼ˆaï¼‰å³ä¸Šè§’çš„ç‚¹è¡¨ç¤ºä¸€ä¸ªå¤§é¡µä¸­æœºä¼šæ‰€æœ‰çš„å°é¡µé¢éƒ½è¢«è®¿é—®åˆ°äº†ï¼ŒåŒæ—¶è¿™ä¸ªå¤§é¡µæ€»çš„è¢«è®¿é—®æ¬¡æ•°ä¹Ÿå¾ˆå¤§ã€‚æœ€åçš„æƒ…å†µæ˜¯ï¼ˆbï¼‰çš„å³ä¸Šè§’ï¼Œé‚£äº›å¤§é¡µé¢åªæœ‰å¾ˆå°‘çš„å°é¡µé¢è¢«è®¿é—®ï¼ŒåŒæ—¶æ•´ä½“è®¿é—®é¢‘ç‡åˆå¾ˆé«˜ï¼Œä¸å¦‚æ”¾å®ƒä»¬åšå°é¡µé¢å•é£æ›´å¥½ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/4d169f4812364c309dbd3b1a82623bb9.png"></p><p><span class="label danger">äº‹å®ä¸Šç¬”è€…è‡ªå·±åœ¨æµ‹è¿™ä¸ªåœ°å€è½¬æ¢å¼€é”€çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å‘ç°ä¼šå¤§åˆ°å“ªé‡Œå»ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘æ‰“å¼€æ–¹å¼ä¸å¯¹</span></p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>The biggest limitation of prior systems ï¼ˆtiered memory systemsï¼‰ is their inability to effectively classify page hotness across diverse memory configurations and workloads. </p><h2 id="4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="4. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>4. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>å…ˆæ”¾ä¸€ä¸ªæ€»ä½“è®¾è®¡å›¾ï¼Œè¿˜æ˜¯é‚£å‡ æ­¥ï¼Œé‡‡æ ·é¡µé¢ä¿¡æ¯ã€åˆ†æã€ç„¶åè¿ç§»ã€‚å¤šäº†å¯¹äºå¤§é¡µé¢çš„åˆ†æï¼Œåˆ†æå¤§é¡µé¢è¢«æ‹†åˆ†çš„å¥½å¤„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/73f7df30c4e14cd18ace9258ab6aed35.png"></p><p>PEBSé‡‡æ ·çš„å¥½å¤„å°±æ˜¯å¯ä»¥ç›´æ¥åŒºåˆ†ç›®å‰çš„åœ°å€æ˜¯è¢«å½“ä½œå°é¡µè¿˜æ˜¯å¤§é¡µäº†ã€‚åŒæ—¶è¿™é‡Œç¡¬ä»¶é‡‡æ ·åªé‡‡æ ·äº†ä¸¤ä¸ªæŒ‡ä»¤ï¼ˆäº‹ä»¶ï¼‰ï¼Œå°±è¿˜å¥½ä¸€èˆ¬ä¸ä¼šæ‰¾ä¸åˆ°æ˜ å°„ã€‚è¿™ä¸ªåå°çº¿ç¨‹æ ¹æ®å•æ ¸CPUæ€§èƒ½çš„3%æ§åˆ¶é‡‡æ ·çš„é—´éš”ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/a6823d64ee6142a493598c4e8eabc25c.png"></p><p>ä¸ºäº†å¹³è¡¡å°é¡µå’Œå¤§é¡µè®°å½•çƒ­åº¦çš„ä¸å…¬å¹³ï¼ˆæ¯•ç«Ÿå¤§é¡µå¤§ä¸€ç‚¹è¢«è®¿é—®çš„æ¦‚ç‡ä¹Ÿå¤§ä¸€äº›ï¼‰ï¼Œä½œè€…è®¾è®¡äº†çƒ­åº¦å› å­ã€‚ä¸»è¦ç¬”è€…è§‰å¾—éå¸¸æ£’çš„ç‚¹åœ¨äºè¿™ç§zipfåˆ†å¸ƒçš„ç›´æ–¹å›¾ï¼Œç¬¦åˆè®¿é—®åˆ°çƒ­åº¦åˆ†å¸ƒï¼Œç„¶ååˆå°†é¡µé¢çƒ­åº¦åšäº†å¾ˆå¤šåˆ†å±‚ï¼Œé€‚åˆä¸åŒçš„å¿«é€Ÿå±‚å†…å­˜å®¹é‡ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/54629799caed455cb4bd9a7155ca571d.png"></p><p>è®¾è®¡å†·çƒ­é˜ˆå€¼æ˜¯æ ¹æ®ç³»ç»Ÿç›®å‰DRAMçš„å«é‡æ¥åšçš„ï¼Œä»å€¼æœ€å¤§çš„binå¼€å§‹åŠ ï¼Œä¸€ç›´åˆ°è£…æ»¡DRAMåˆ™å‰ä¸€ä¸ªbinå°±æ˜¯çƒ­é˜ˆå€¼ï¼Œåé¢å°±æ˜¯æ¸©é˜ˆå€¼ï¼Œç”±äºæ¸©é˜ˆå€¼åªæ˜¯ä½œä¸ºçƒ­é¡µé¢å€™é€‰é¡µï¼Œæ‰€ä»¥å†·é˜ˆå€¼å°±ç›´æ¥-1å¾—åˆ°ï¼Œåªç»™æ¸©é¡µé¢ä¸€ä¸ªbinã€‚<span class="label danger">ä¸å¤ªç†è§£ä¸ºå•¥åªç»™ä¸€ä¸ªbinï¼Œè¿™æ˜¾å¾—è¿™ä¸ªé˜ˆå€¼ä¸€ç‚¹ä¹Ÿä¸åŠ¨æ€ï¼Œå…¶å®å¯èƒ½æ ¹æœ¬ä¸éœ€è¦è¿™ä¸ªTé˜ˆå€¼ï¼Œåº”è¯¥å¯ä»¥åšå‡ºæ›´çµæ´»çš„æ–¹æ³•</span>åŒæ—¶å¦‚æœçƒ­çš„binsåŠ ä¸Šæœ€åä¸€ä¸ªbiné©¬ä¸Šå°±æ»¡äº†ï¼Œé‚£ä¹ˆé€‰æ‹©ä¸è¦æœ€åé‚£ä¸ªbinäº†ï¼Œç»™é¡µé¢åŠ¨æ€è¿ç§»ç•™å‡ºç©ºé—´ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/9ddb01fa0d014f06be208f1e23e204e5.png"></p><p>ç¬”è€…ä»¥å‰ä¹Ÿæƒ³è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ”¶é›†äº†ä¸€æ‰¹åˆä¸€æ‰¹æ•°æ®ï¼Œå¯æ˜¯ç°æœ‰çš„çƒ­åº¦ä¼šå˜å•Šï¼Œæˆ‘ä»¥å‰çš„æ•°æ®æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™é‡Œä½œè€…å°†ä»–ä»¬ä»¥åˆ°åä¸€ä¸ªbinåšå˜å†·çš„å¤„ç†ï¼Œå¾ˆç®€å•æœºæ™ºã€‚åŒæ—¶é¡µé¢è¿ç§»äº¤ç»™é‡‡æ ·çº¿ç¨‹å’Œè¿ç§»çº¿ç¨‹æ¥åšï¼Œåšçš„æ—¶æœºå°±æ˜¯é‡‡æ ·å’Œå†·å¤„ç†åã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/7cdea7dfced74152bad98f62799c9b32.png"></p><p>æœ€åæ˜¯è®¾è®¡äº†å¤§é¡µé¢çš„æ‹†åˆ†ï¼Œç»¿è‰²éƒ¨åˆ†æ˜¯æ”¶ç›Šï¼Œæˆ‘ä»¬å¯ä»¥ä»ç®­å¤´çœ‹åˆ°ï¼Œç™½è‰²ç›´æ–¹å›¾ç»Ÿè®¡å¤§é¡µå’Œå°é¡µï¼Œç°è‰²ç›´æ–¹å›¾åªç»Ÿè®¡å°é¡µï¼Œé‚£ä¹ˆä¹‹é—´çš„å·®å€¼å°±æ˜¯å¦‚æœä»–ä¸æ˜¯å¤§é¡µï¼Œé‚£ä¹ˆçƒ­çš„binè¿˜ä¼šå¢åŠ å¤šå°‘ã€‚å·®å€¼è¶Šå¤§è¯´æ˜è¶Šä¸è¯¥ç”¨å¤§é¡µã€‚äºæ˜¯è®¾è®¡äº†ä¸€ä¸ªæ‹†åˆ†å¤§é¡µé¢çš„é˜ˆå€¼ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c79d262302d14c8892e6a1dcc44089b8.png"></p><h2 id="5-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#5-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="5. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>5. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>ä½œè€…å®éªŒç¯å¢ƒï¼š</p><ul><li>DRAM + NVM ï¼ˆOptane DCPMM, load: 300nsï¼‰</li><li>DRAM + emulated CXL memory ï¼ˆcross NUMA DRAM with increased latency, load: 177nsï¼‰</li><li>A single socket for our evaluations to avoid NUMA effects</li><li>The ratio of fast to capacity tier memory size as 1:2, 1:8, and 1:16ï¼ˆIn the 1:2 configuration, the fast tier size is set to 33% ï¼ˆ1/3ï¼‰ of the resident set size ï¼ˆRSSï¼‰     while in the 1:16 configuration, it is reduced to 5.9%ï¼ˆ1/17ï¼‰.ï¼‰</li></ul><p>æ€§èƒ½è¯„ä¼°å›¾æ˜¾ç¤ºå¥½äº7ä¸ªåˆ†å±‚å†…å­˜ï¼Œä»–ä»¬å¤§å¤šéƒ½å‘è¡¨äºAç±»ã€‚</p><h2 id="6-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#6-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="6. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>6. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>åœ¨åˆ†å±‚ä¸­ä½¿ç”¨æ··åˆé¡µé¢çš„å·¥ä½œæ¯”è¾ƒå°‘ï¼Œä¸»è¦åœ¨äºå¤§é¡µé¢å¸¦æ¥çš„å†…å­˜è†¨èƒ€ã€å†…å­˜ç¢ç‰‡ç­‰é—®é¢˜ï¼Œè§£å†³è¿™äº›é—®é¢˜å¯èƒ½æ¯”ä½¿ç”¨å¤§é¡µé¢èŠ‚çœçš„å¼€é”€æ›´å¤šã€‚è¿™ç¯‡å·¥ä½œåªè®¨è®ºæ‹†åˆ†å¤§é¡µé¢ï¼Œæ²¡æœ‰å¯ç”¨å¤§é¡µé¢çš„è®¾è®¡ã€‚åŒæ—¶åœ¨ä½¿ç”¨å¤§é¡µé¢çš„è¯„ä¼°æ–¹é¢ï¼Œè¿˜æœ‰å¥½å¤šå‰äººçš„å·¥ä½œæ²¡è®¨è®ºåˆ°ã€‚</p><p>é‡‡æ ·æ—¶CPUçš„æ¶ˆè€—ã€ç›´æ–¹å›¾çš„æ•°ç›®ã€è®¡ç®—é˜ˆå€¼æ—¶çš„Î±ã€ç›´æ–¹å›¾çš„é™æ¸©å‘¨æœŸã€é¡µé¢æ‹†åˆ†çš„å‚æ•°Î²ï¼Œå¯¹äºå‚æ•°æ•æ„Ÿæ€§çš„è¯„ä¼°ä¸å……åˆ†ã€‚</p><p>ä½œè€…å¥½åƒæ²¡è¯´æ¸…æ¥šä»–æ¯ä¸ªæ•°æ®æ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿå°±æ˜¯æ€ä¹ˆåšåˆ°çŸ¥é“å“ªä¸ªé¡µé¢å½“å‰åœ¨å“ªä¸ªbinçš„ï¼Œå› ä¸ºä½ è¿ç§»çš„æ—¶å€™éœ€è¦ç”¨åˆ°ï¼Œä½ æ‹†åˆ†å¤§é¡µé¢çš„æ—¶å€™ä¹Ÿéœ€è¦ç”¨åˆ°ã€‚</p><h2 id="7-åˆ›æ–°ç‚¹"><a href="#7-åˆ›æ–°ç‚¹" class="headerlink" title="7. åˆ›æ–°ç‚¹"></a>7. åˆ›æ–°ç‚¹</h2><p>å¯¹ç°æœ‰çš„åˆ†å±‚å†…å­˜ç³»ç»Ÿè¿›è¡Œäº†æ¯”è¾ƒå…¨é¢çš„åˆ†æå’Œæ€»ç»“ã€‚</p><p>Memtisçš„è®¾è®¡è§£å†³äº†ä½œè€…å‘ç°çš„ä¸€ä¸ªé—®é¢˜ï¼Œå³ç›®å‰çƒ­é¡µé¢é‡‡æ ·ä¸å‡†ç¡®å¼€é”€å¤§ã€è¿ç§»å¹¶æ²¡æœ‰å®Œå…¨å‘æŒ¥DRAMæ•ˆç‡ã€‚åœ¨ä¸è€ƒè™‘å¤§é¡µé¢çš„æƒ…å†µä¸‹ï¼ŒMemtisç›¸æ¯”äºå…¶ä»–å·¥ä½œæ˜¯æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿çš„ã€‚</p><h2 id="8-ç§¯ç´¯"><a href="#8-ç§¯ç´¯" class="headerlink" title="8. ç§¯ç´¯"></a>8. ç§¯ç´¯</h2><ul><li>æ€§èƒ½è¯„ä¼°é‚£å¼ å›¾å¯ä»¥å¤šçœ‹çœ‹ï¼Œå’Œè‡ªå·±çš„å·¥ä½œçœ‹æœ‰æ²¡æœ‰å‡ºå…¥ã€‚</li><li>æ€§èƒ½è¯„ä¼°åˆ†ç±»æ¯”è¾ƒå®Œæ•´çš„ï¼Œworkloadå¯ä»¥å€Ÿé‰´å€Ÿé‰´ã€‚</li><li><a href="https://github.com/cosmoss-jigu/memtis/tree/main/memtis-userspace#tips-for-setting-other-systems">å¼€æº</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå†…æ ¸å­—ç¬¦è®¾å¤‡é©±åŠ¨</title>
      <link href="/2023/11/10/Linux%E5%86%85%E6%A0%B8%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/"/>
      <url>/2023/11/10/Linux%E5%86%85%E6%A0%B8%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>æ ¹æ®è®¾å¤‡çš„å…±æ€§å¤§è‡´åˆ†ä¸º3ç±»</p><ul><li>å­—ç¬¦è®¾å¤‡ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½çš„I/Oä¼ è¾“ï¼Œæ¯”å¦‚é¼ æ ‡ã€é”®ç›˜ã€è§¦æ‘¸å±ï¼ˆCXL.memä¹Ÿæ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ä¼ è¾“ï¼Œä½†æ˜¯ä¸æ˜¯å­—ç¬¦æ•°æ®æµï¼‰ã€‚</li><li>å—è®¾å¤‡ï¼Œä»¥å—ä¸ºä¼ è¾“å•ä½ï¼Œæ¯”å¦‚SSDã€ç£ç›˜ã€‚</li><li>ç½‘ç»œè®¾å¤‡ï¼Œ<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/27aa9de078ec4377aa2cde3c33bce0ba.jpeg" alt="Linuxé©±åŠ¨è®¾å¤‡"></li></ul><h3 id="å­—ç¬¦è®¾å¤‡çš„æŠ½è±¡"><a href="#å­—ç¬¦è®¾å¤‡çš„æŠ½è±¡" class="headerlink" title="å­—ç¬¦è®¾å¤‡çš„æŠ½è±¡"></a>å­—ç¬¦è®¾å¤‡çš„æŠ½è±¡</h3><p>Linuxå¦‚ä½•æŠ½è±¡å’Œæè¿°è¿™äº›è®¾å¤‡çš„å‘¢ï¼Ÿè¿™é‡Œä¸»è¦è®¨è®ºå­—ç¬¦è®¾å¤‡<code>include\linux\cdev.h</code>ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">struct</span> <span class="token class-name">cdev</span> <span class="token punctuation">{</span><span class="token keyword">struct</span> <span class="token class-name">kobject</span> kobj<span class="token punctuation">;</span>  <span class="token comment">//è¯¥é©±åŠ¨æ‰€å±çš„kobjectï¼Œå¯ä»¥é€šè¿‡sysfsæ¥å£å°†å…¶æŒ‚è½½åˆ°æ‰€éœ€è¦çš„sysfsèŠ‚ç‚¹ï¼Œæ³¨æ„éœ€è¦é©±åŠ¨å¼€å‘äººå‘˜æ‰‹åŠ¨å»æŒ‚è½½ï¼Œæœ¬èº«å­—ç¬¦é©±åŠ¨ä¸ä¼šè¿›è¡ŒæŒ‚è½½åªä¼šå¯¹kobjåˆå§‹åŒ–ï¼Œéœ€è¦ç›¸åº”å…·ä½“è®¾å¤‡é©±åŠ¨è¿›è¡ŒæŒ‚è½½ã€‚</span><span class="token keyword">struct</span> <span class="token class-name">module</span> <span class="token operator">*</span>owner<span class="token punctuation">;</span>  <span class="token comment">//å­—ç¬¦è®¾å¤‡é©±åŠ¨æ‰€åœ¨çš„å†…æ ¸æ¨¡å—å¯¹è±¡æŒ‡é’ˆã€‚</span><span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">file_operations</span> <span class="token operator">*</span>ops<span class="token punctuation">;</span> <span class="token comment">//æ–‡ä»¶æ“ä½œ opencã€readã€writeç­‰ï¼Œå’Œåº”ç”¨ç¨‹åºäº¤äº’çš„æ¢çº½ã€‚</span><span class="token keyword">struct</span> <span class="token class-name">list_head</span> list<span class="token punctuation">;</span>  <span class="token comment">//ç”¨äºå°†å­—ç¬¦è®¾å¤‡ä¸²æˆé“¾è¡¨ã€‚</span><span class="token class-name">dev_t</span> dev<span class="token punctuation">;</span>  <span class="token comment">//è®¾å¤‡å·ï¼ˆä¸»è®¾å¤‡å’Œæ¬¡è®¾å¤‡ç»„æˆï¼‰</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>  <span class="token comment">//åŒå±ä¸»è®¾å¤‡å·çš„æ¬¡è®¾å¤‡å·ä¸ªæ•°</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•å­—ç¬¦è®¾å¤‡demoåªåŒ…å«å­—ç¬¦é©±åŠ¨çš„æ¡†æ¶ï¼š</p><h3 id="å†…æ ¸ä¸­åˆ›å»ºå­—ç¬¦é©±åŠ¨"><a href="#å†…æ ¸ä¸­åˆ›å»ºå­—ç¬¦é©±åŠ¨" class="headerlink" title="å†…æ ¸ä¸­åˆ›å»ºå­—ç¬¦é©±åŠ¨"></a>å†…æ ¸ä¸­åˆ›å»ºå­—ç¬¦é©±åŠ¨</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/module.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/fs.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/uaccess.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/init.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;linux/cdev.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DEMO_NAME</span> <span class="token string">"my_demo_dev"</span>  <span class="token comment">//è®¾å¤‡å</span></span><span class="token keyword">static</span> <span class="token class-name">dev_t</span> dev<span class="token punctuation">;</span>  <span class="token comment">//è®¾å¤‡å·</span><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">cdev</span> <span class="token operator">*</span>demo_cdev<span class="token punctuation">;</span>  <span class="token comment">//é™æ€å…¨å±€å˜é‡çš„æ–¹å¼åˆ›å»ºå­—ç¬¦è®¾å¤‡</span><span class="token keyword">static</span> <span class="token keyword">signed</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//æ‰“å¼€è®¾å¤‡</span><span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">demodrv_open</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">inode</span> <span class="token operator">*</span>inode<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> major <span class="token operator">=</span> <span class="token function">MAJOR</span><span class="token punctuation">(</span>inode<span class="token operator">-&gt;</span>i_rdev<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> minor <span class="token operator">=</span> <span class="token function">MINOR</span><span class="token punctuation">(</span>inode<span class="token operator">-&gt;</span>i_rdev<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"%s: major=%d, minor=%d\n"</span><span class="token punctuation">,</span> <span class="token constant">__func__</span><span class="token punctuation">,</span> major<span class="token punctuation">,</span> minor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// é‡Šæ”¾è®¾å¤‡</span><span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">demodrv_release</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">inode</span> <span class="token operator">*</span>inode<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//è¯»å–è®¾å¤‡</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span><span class="token function">demodrv_read</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> lbuf<span class="token punctuation">,</span> <span class="token class-name">loff_t</span> <span class="token operator">*</span>ppos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"%s enter\n"</span><span class="token punctuation">,</span> <span class="token constant">__func__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//å†™å…¥è®¾å¤‡</span><span class="token keyword">static</span> <span class="token class-name">ssize_t</span><span class="token function">demodrv_write</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">file</span> <span class="token operator">*</span>file<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> __user <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> count<span class="token punctuation">,</span> <span class="token class-name">loff_t</span> <span class="token operator">*</span>f_pos<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"%s enter\n"</span><span class="token punctuation">,</span> <span class="token constant">__func__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//å®šä¹‰æ“ä½œé›†åˆ</span><span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">file_operations</span> demodrv_fops <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> THIS_MODULE<span class="token punctuation">,</span><span class="token punctuation">.</span>open <span class="token operator">=</span> demodrv_open<span class="token punctuation">,</span><span class="token punctuation">.</span>release <span class="token operator">=</span> demodrv_release<span class="token punctuation">,</span><span class="token punctuation">.</span>read <span class="token operator">=</span> demodrv_read<span class="token punctuation">,</span><span class="token punctuation">.</span>write <span class="token operator">=</span> demodrv_write<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">int</span> __init <span class="token function">simple_char_init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> ret<span class="token punctuation">;</span>ret <span class="token operator">=</span> <span class="token function">alloc_chrdev_region</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>dev<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">,</span> DEMO_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//è‡ªåŠ¨åˆ†é…ä¸»è®¾å¤‡å·ï¼Œé¿å…é‡å¤</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"failed to allocate char device region"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span>demo_cdev <span class="token operator">=</span> <span class="token function">cdev_alloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//åŠ¨æ€åˆ›å»ºå­—ç¬¦è®¾å¤‡</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>demo_cdev<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"cdev_alloc failed\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">goto</span> unregister_chrdev<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">cdev_init</span><span class="token punctuation">(</span>demo_cdev<span class="token punctuation">,</span> <span class="token operator">&amp;</span>demodrv_fops<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//åˆå§‹åŒ–cdveç»“æ„ä½“ï¼Œå»ºç«‹è®¾å¤‡ä¸é©±åŠ¨æ“ä½œæ–¹æ³•é›†file_operationsä¹‹é—´çš„é“¾æ¥å…³ç³»</span>ret <span class="token operator">=</span> <span class="token function">cdev_add</span><span class="token punctuation">(</span>demo_cdev<span class="token punctuation">,</span> dev<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//å°†å­—ç¬¦è®¾å¤‡æ·»åŠ åˆ°ç³»ç»Ÿï¼ˆæ³¨å†Œå­—ç¬¦è®¾å¤‡ï¼‰[å­—ç¬¦è®¾å¤‡ç»“æ„ä½“ï¼Œè®¾å¤‡å·ï¼Œå¤šå°‘æ¬¡è®¾å¤‡å·]</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"cdev_add failed\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">goto</span> cdev_fail<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"succeeded register char device: %s\n"</span><span class="token punctuation">,</span> DEMO_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"Major number = %d, minor number = %d\n"</span><span class="token punctuation">,</span><span class="token function">MAJOR</span><span class="token punctuation">(</span>dev<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MINOR</span><span class="token punctuation">(</span>dev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>cdev_fail<span class="token operator">:</span><span class="token function">cdev_del</span><span class="token punctuation">(</span>demo_cdev<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//ä»ç³»ç»Ÿä¸­åˆ é™¤è¿™ä¸ªç»“æ„ä½“</span>unregister_chrdev<span class="token operator">:</span><span class="token function">unregister_chrdev_region</span><span class="token punctuation">(</span>dev<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//é‡Šæ”¾ä¸»è®¾å¤‡å·</span><span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">static</span> <span class="token keyword">void</span> __exit <span class="token function">simple_char_exit</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printk</span><span class="token punctuation">(</span><span class="token string">"removing device\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>demo_cdev<span class="token punctuation">)</span><span class="token function">cdev_del</span><span class="token punctuation">(</span>demo_cdev<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">unregister_chrdev_region</span><span class="token punctuation">(</span>dev<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">module_init</span><span class="token punctuation">(</span>simple_char_init<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">module_exit</span><span class="token punctuation">(</span>simple_char_exit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_AUTHOR</span><span class="token punctuation">(</span><span class="token string">"kylin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_LICENSE</span><span class="token punctuation">(</span><span class="token string">"GPL v2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">MODULE_DESCRIPTION</span><span class="token punctuation">(</span><span class="token string">"simpe character device"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘è¿™ä¸ªå†…æ ¸æ¨¡å—ï¼š</p><pre class="line-numbers language-Makefile" data-language="Makefile"><code class="language-Makefile">BASEINCLUDE ?= /lib/modules/`uname -r`/buildmydemo-objs := simple_char.o obj-m:=   mydemo.oall : $(MAKE) -C $(BASEINCLUDE) M=$(PWD) modules;clean:$(MAKE) -C $(BASEINCLUDE) M=$(PWD) clean;rm -f *.ko;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>make</code>ç¼–è¯‘åç”Ÿæˆ<code>mydemo.ko</code>, ç„¶ååŠ è½½è¿™ä¸ªæ¨¡å—</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> insmod mydemo.ko<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åŠ è½½å†…æ ¸æ¨¡å—åå¯ä»¥åœ¨<code>dmesg</code>å‘½ä»¤è¾“å‡ºçœ‹åˆ°<code>simple_char_init</code>å‡½æ•°æˆåŠŸåˆå§‹åŒ–çš„è¾“å‡ºã€‚<br><code>/proc/devices</code>å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„è®¾å¤‡åç§°å’Œè®¾å¤‡ç¼–å·ã€‚</p><h3 id="è®¾å¤‡èŠ‚ç‚¹"><a href="#è®¾å¤‡èŠ‚ç‚¹" class="headerlink" title="è®¾å¤‡èŠ‚ç‚¹"></a>è®¾å¤‡èŠ‚ç‚¹</h3><p>å†…æ ¸æ¨¡å—åŠ è½½åè¿˜éœ€è¦åœ¨<code>/dev/</code>ç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„èŠ‚ç‚¹ï¼Œ249æ˜¯åˆšåˆšåŠ è½½è¿™ä¸ªå†…æ ¸æ¨¡å—æ—¶åˆ†é…çš„ä¸»è®¾å¤‡å·ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">mknod</span> /dev/demo_drv c <span class="token number">249</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è®¾å¤‡èŠ‚ç‚¹å±äºç‰¹æ®Šçš„æ–‡ä»¶ï¼Œä¹Ÿå«è®¾å¤‡æ–‡ä»¶ã€‚è¿æ¥å†…æ ¸ç©ºé—´é©±åŠ¨å’Œç”¨æˆ·ç©ºé—´åº”ç”¨ç¨‹åºçš„æ¡¥æ¢ï¼Œç”¨æˆ·æ“ä½œç¡¬ä»¶è®¾å¤‡å˜æˆäº†æ“ä½œæ–‡ä»¶ã€‚è®¾å¤‡èŠ‚ç‚¹çš„ç”Ÿæˆæ–¹å¼æœ‰<code>mknod</code>æ‰‹åŠ¨ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥<code>udev</code>æœºåˆ¶åŠ¨æ€ç”Ÿæˆã€‚<br><code>ls -l</code>å¯ä»¥æŸ¥çœ‹<code>/dev/</code>ç›®å½•çš„æƒ…å†µï¼Œå…¶ä¸­<code>c</code>è¡¨ç¤ºå­—ç¬¦è®¾å¤‡ï¼Œ<code>b</code>è¡¨ç¤ºå—è®¾å¤‡ã€‚</p><h3 id="ç”¨æˆ·ç©ºé—´å¯¹å­—ç¬¦è®¾å¤‡çš„è°ƒç”¨"><a href="#ç”¨æˆ·ç©ºé—´å¯¹å­—ç¬¦è®¾å¤‡çš„è°ƒç”¨" class="headerlink" title="ç”¨æˆ·ç©ºé—´å¯¹å­—ç¬¦è®¾å¤‡çš„è°ƒç”¨"></a>ç”¨æˆ·ç©ºé—´å¯¹å­—ç¬¦è®¾å¤‡çš„è°ƒç”¨</h3><p>å†…æ ¸å®Œæˆå¯¹è¿™ä¸ªè®¾å¤‡åŠ è½½åï¼Œç”¨æˆ·ç©ºé—´æ“ä½œè¿™ä¸ªå­—ç¬¦é©±åŠ¨è®¾å¤‡</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fcntl.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DEMO_DEV_NAME</span> <span class="token string">"/dev/demo_drv"</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">char</span> buffer<span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> fd<span class="token punctuation">;</span>fd <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>DEMO_DEV_NAME<span class="token punctuation">,</span> O_RDONLY<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//æ‰“å¼€è®¾å¤‡[è®¾å¤‡æ–‡ä»¶ååˆšåˆšæ‰‹åŠ¨æŒ‚è½½çš„é‚£ä¸ªåå­—ï¼Œæ–‡ä»¶æ‰“å¼€å±æ€§]</span><span class="token keyword">if</span> <span class="token punctuation">(</span>fd <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"open device %s failded\n"</span><span class="token punctuation">,</span> DEMO_DEV_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">read</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//è°ƒç”¨è¯»å‡½æ•°</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//å…³é—­è®¾å¤‡</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œreadçš„è°ƒç”¨æ˜¯æ¥è‡ªä¹‹å‰æåˆ°çš„<code>file_operations</code>ï¼Œè¿™ä¸ªæ–¹æ³•é›†ç»“æ„ä½“æ˜¯ç”±<code>cdev_init</code>æ–¹æ³•å’Œç”¨æˆ·ç©ºé—´å»ºç«‹è”ç³»çš„ã€‚æ‰§è¡ŒæˆåŠŸè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆæ–‡ä»¶å¥æŸ„ï¼‰ã€‚åº”ç”¨ç¨‹åºçš„<code>open</code>æ–¹æ³•æ‰§è¡Œæ—¶ä¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¿›å…¥å†…æ ¸ç©ºé—´ï¼Œå†…æ ¸ç©ºé—´çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå±‚ç»è¿‡å¤æ‚çš„è½¬æ¢ï¼Œæœ€åä¼šè°ƒç”¨è®¾å¤‡é©±åŠ¨çš„<code>file_operations</code>æ–¹æ³•é›†é‡Œçš„<code>open</code>æ–¹æ³•ã€‚ </p><h3 id="miscæœºåˆ¶"><a href="#miscæœºåˆ¶" class="headerlink" title="miscæœºåˆ¶"></a>miscæœºåˆ¶</h3><p>misc deviceè¢«ç§°ä¸ºæ‚é¡¹è®¾å¤‡ï¼ŒLinuxå†…æ ¸æŠŠä¸€äº›ä¸ç¬¦åˆé¢„å…ˆç¡®å®šçš„å­—ç¬¦è®¾å¤‡åˆ’åˆ†ä¸ºæ‚é¡¹è®¾å¤‡ï¼Œè¿™ç±»è®¾å¤‡çš„ä¸»è®¾å¤‡å·æ˜¯10ï¼Œæ¬¡è®¾å¤‡å·åŠ¨æ€åˆ†é…ï¼ŒLinuxå†…æ ¸ä½¿ç”¨struct miscdeviceæ•°æ®ç»“æ„æè¿°è¿™ç±»è®¾å¤‡ã€‚ä½¿ç”¨miscæœºåˆ¶åˆ›å»ºé©±åŠ¨çš„è¿‡ç¨‹å’Œä¸Šé¢å·®ä¸å¤šï¼Œå…¶ä¸­miscçš„è®¾å¤‡æ–‡ä»¶å¯ä»¥è‡ªå·±å»ºå¥½ï¼Œå’Œè®¾å¤‡åä¸€æ ·ï¼ˆä¹‹å‰æ‰‹åŠ¨å»ºçš„å¯ä»¥æ¢åå­—ï¼‰</p><blockquote><p>è¿˜æœ‰IOé˜»å¡ï¼Œå¼‚æ­¥é€šä¿¡ã€IOå¤ç”¨ç­‰ï¼Œä½†æ˜¯å’ŒCXL.memåº”è¯¥å…³ç³»ä¸å¤§ï¼Œæ‰€ä»¥å°±ç®€å•çœ‹çœ‹ï¼Œä¸å†™ç¬”è®°äº†ã€‚</p></blockquote><h2 id="Memory-Pooling-With-CXL"><a href="#Memory-Pooling-With-CXL" class="headerlink" title="Memory Pooling With CXL"></a>Memory Pooling With CXL</h2><div class="note primary">- Donghyun Gouk , Miryeong Kwon , and Hanyeoreum Bae, KAIST- Sangwon Lee and Myoungsoo Jung , KAIST and Panmnesia</div> <p>è¿™ç¯‡å’Œ22å¹´ä»–ä»¬å‘çš„åˆ†è§£å†…å­˜ç›¸ä¼¼åº¦æé«˜ã€‚ç¨‹åºé€šè¿‡<code>malloc</code>ç”³è¯·å†…å­˜ï¼Œè¿™ä¸ªcè¯­è¨€åº“å‡½æ•°æœ‰ä¸ªé˜ˆå€¼æ˜¯128kã€‚å¤§äº128kè°ƒç”¨<code>mmap</code>ï¼Œå°äºè°ƒç”¨<code>brk</code>ï¼ˆä¸è¿‡ä¸åŒglibcçš„è¿™ä¸ªå€¼å¯èƒ½ä¸å¤ªä¸€æ ·ï¼‰ã€‚å¦‚æœç”³è¯·çš„æ˜¯æ¯”è¾ƒå¤§å—çš„å†…å­˜ï¼ˆè¶…è¿‡ 128Kï¼‰æ—¶ï¼Œä¼šè°ƒç”¨<code>mmap</code>åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­çš„æ–‡ä»¶æ˜ å°„ä¸åŒ¿åæ˜ å°„åŒºåˆ›å»ºå‡ºä¸€å—<code>VMA</code>å†…å­˜åŒºåŸŸï¼Œç”¨<code>struct anon_vma</code>ç»“æ„è¡¨ç¤ºã€‚åœ¨è¿™ç¯‡è®ºæ–‡é‡Œ<code>mmap</code>çš„æ˜ å°„æ˜¯æ–‡ä»¶æ˜ å°„ã€‚å°±æ˜¯è¯´å°†è¿›ç¨‹è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­æŸä¸€æ®µè™šæ‹Ÿå†…å­˜åŒºåŸŸä¸ç£ç›˜ä¸­æŸä¸ªæ–‡ä»¶çš„æŸæ®µåŒºåŸŸè¿›è¡Œæ˜ å°„ã€‚é€šè¿‡<code>mmap</code>åªæ˜¯ç»™ç¨‹åºçš„æŸä¸ªè¿›ç¨‹åˆ†é…äº†è™šæ‹Ÿå†…å­˜ï¼Œè¿˜æ²¡å®Œã€‚è¿™äº›è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„å…³ç³»æ˜¯æ€ä¹ˆå»ºç«‹çš„ï¼Ÿä»¥å‰é€šè¿‡<code>mmap</code>æ˜ å°„çš„æ˜¯ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦é€šè¿‡å‚æ•°<code>fd</code>æ¥æŒ‡å®šè¦æ˜ å°„æ–‡ä»¶çš„æè¿°ç¬¦ï¼ˆfile descriptorï¼‰ã€‚ç°åœ¨æ˜¯å»è®¿é—®ä¸€ä¸ªè®¾å¤‡ã€‚ä¸€èˆ¬æ¥è¯´å†…æ ¸è®¿é—®ä¸€ä¸ªè®¾å¤‡éœ€è¦è®¾å¤‡é©±åŠ¨ç¨‹åºè¿›è¡Œä¸€ç³»åˆ—æ“ä½œåŒ…æ‹¬åœ¨<code>/dev</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶æˆ–å—è®¾å¤‡æ–‡ä»¶ã€‚<code>/dev</code>ä¸‹çš„PCIeè®¾å¤‡æ–‡ä»¶æŠ½è±¡äº†åº”ç”¨ç¨‹åºä¸åº•å±‚ç¡¬ä»¶çš„äº¤äº’,é€šè¿‡æ–‡ä»¶æ“ä½œçš„ç»Ÿä¸€æ¥å£å®Œæˆå¯¹PCIeè®¾å¤‡çš„è®¿é—®ã€‚è€Œè¿™ç¯‡æ–‡ç« é‡ŒDIRECTCXLé©±åŠ¨ç¨‹åºå°†åŸºå€å¯„å­˜å™¨å’ŒHDMæ˜ å°„åˆ°ä¸»æœºçš„ä¿ç•™ç³»ç»Ÿå†…å­˜ç©ºé—´ä¸­ã€‚Host-Managed Device MemoryæŠ€æœ¯è®©è®¾å¤‡å†…å­˜è®¿é—®å¯¹ä¸»æœºæ¥è¯´å°±åƒè®¿é—®ç³»ç»Ÿå†…å­˜ä¸€æ ·,é€šè¿‡åŠ è½½/å­˜å‚¨æŒ‡ä»¤ç›´æ¥æ“ä½œã€‚å¯¹ä¸»æœºæ¥è¯´ä»¥å‰PMçš„ç‰©ç†åœ°å€åªæ˜¯æ’åœ¨DRAMåé¢çš„ä¸€æ®µçº¿æ€§åœ°å€ï¼Œé‚£ç°åœ¨åˆå¦‚ä½•çœ‹CXLè®¾å¤‡çš„å†…å­˜ï¼Ÿä»è®ºæ–‡çš„æè¿°æ¥çœ‹CXLå†…å­˜å¹¶ä¸å¯¹ä¸»æœºé€æ˜ï¼Œè€Œæ˜¯éœ€è¦å¤šå°‘å°±ç°æˆåˆ†å¤šå°‘ï¼ŒDIRECTCXLé©±åŠ¨ç¨‹åºå°±åˆ›å»ºå¤šå°‘<code>/dev/xx</code>ã€‚è¿™ç¯‡æ–‡ç« é‡ŒCXLå†…å­˜è®¾å¤‡çš„è™šæ‹Ÿåœ°å€åœ°å€å’Œç‰©ç†åœ°å€çš„æ˜ å°„æ›´åƒä¼ ç»Ÿæ®µå¼å†…å­˜ã€‚å¦‚ä¸‹å›¾å±•ç¤ºäº†ç¨‹åºè¯¥æ€ä¹ˆä½¿ç”¨CXLè®¾å¤‡å†…å­˜çš„æ•´ä¸ªæµç¨‹ã€‚æ— è®ºæ˜¯NVMè¿˜æ˜¯CXLä½œä¸ºç‰©ç†å†…å­˜å—ï¼Œå®ƒä»¬é¦–å…ˆéƒ½æ˜¯ç”±namespaceå®šä¹‰ä¸€å¥—å†…å­˜çš„æŠ½è±¡ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯æˆ‘ä»¬è®¨è®ºçš„èŒƒå›´ï¼‰ã€‚åªæ˜¯ä»¥å‰PMå°†namespaceé€šè¿‡çƒ­æ’æ‹”è®¾ç½®ä¸ºnodeï¼Œè€Œç°åœ¨æ˜¯è®¾ç½®ä¸ºå¦‚ä¸‹å›¾çš„æ®µå¼å†…å­˜ã€‚å¦ä¸€ä¸ªé—®é¢˜ä¸ºä»€ä¹ˆæ”¾åœ¨<code>/dev/directcxl</code>ä¹‹ç±»çš„åœ°æ–¹ï¼Ÿå› ä¸ºä»–å®ç°CXLçš„æ–¹å¼æ˜¯åŸºäºPCIeçš„ï¼Œæ˜¯ä¸ªè®¾å¤‡ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/cd7ecaf067cf4e8b92b034b2f5f6984c.png"></p><p>å­—ç¬¦è®¾å¤‡å›¾ç‰‡å‡ºå¤„<br><a href="https://jerrysheh.com/post/2720656c.html">https://jerrysheh.com/post/2720656c.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾å¤‡é©±åŠ¨ </tag>
            
            <tag> Memory Pool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data tiering in heterogeneous memory systems</title>
      <link href="/2023/11/09/Data-tiering-in-heterogeneous-memory-systems/"/>
      <url>/2023/11/09/Data-tiering-in-heterogeneous-memory-systems/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>(EuroSys), 2016</li><li>Data tiering in heterogeneous memory systems</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Subramanya R Dulloor, Amitabha Roy, Narayanan Sundaram, Nadathur Satish, Rajesh Sankaran, Jeff Jackson, Intel Labs</li><li>Subramanya R Dulloor, Karsten Schwan, ä½æ²»äºšç†å·¥å­¦é™¢</li><li>Zheguang Zhao, å¸ƒæœ—å¤§å­¦</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>NVMçš„ä¸€ä¸ªå…³é”®ä½¿ç”¨æ¨¡å‹æ˜¯æ›´ä¾¿å®œçš„é«˜å®¹é‡æ˜“å¤±æ€§å­˜å‚¨å™¨ã€‚æ•°æ®ä¸­å¿ƒè¿è¥å•†ä¸€å®šä¼šé—®ï¼Œè¿™ç§ä½¿ç”¨NVMå–ä»£å¤§éƒ¨åˆ†DRAMå†…å­˜çš„æ¨¡å¼æ˜¯å¦ä¼šå¯¼è‡´å…¶åº”ç”¨ç¨‹åºå¤§å¹…æ”¾ç¼“ï¼Ÿå›ç­”è¿™ä¸ªé—®é¢˜è‡³å…³é‡è¦ï¼Œå› ä¸ºå·¨å¤§çš„æ€§èƒ½å½±å“å°†æˆä¸ºé‡‡ç”¨æ­¤ç±»ç³»ç»Ÿçš„éšœç¢ã€‚</p><p><strong>æ¨¡æ‹Ÿå™¨çš„è®¾ç½®ï¼š</strong><br>è¯¥ç³»ç»Ÿä¸ŠDRAMçš„å»¶è¿Ÿå’Œå¸¦å®½åˆ†åˆ«ä¸º150nså’Œ40GB/sã€‚NVMæŠ€æœ¯æ­£åœ¨ä¸æ–­å‘å±•ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè¡¨ç°å‡ºä¸€ç³»åˆ—æ€§èƒ½ç‰¹å¾ï¼Œå…·ä½“å–å†³äºæŠ€æœ¯å’Œæ§åˆ¶å™¨è®¾è®¡çš„ç»†èŠ‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ”¹å˜NVMæ¨¡æ‹Ÿå™¨[39]çš„å‚æ•°æ¥åæ˜ è¿™ç§æƒ…å†µï¼Œé¦–å…ˆå°†å»¶è¿Ÿä»300nsæ”¹å˜åˆ°600nsï¼ŒåŒæ—¶ä¿æŒå¸¦å®½ä¸DRAMç›¸åŒï¼Œç„¶åå°†å¸¦å®½ä»40GB/sæ”¹å˜ï¼ˆä¸DRAMç›¸åŒï¼‰ã€‚ï¼‰é™è‡³5GB/sï¼ˆDRAMçš„12.5%ï¼‰ï¼ŒåŒæ—¶å°†å»¶è¿Ÿå›ºå®šåœ¨æœ€åæƒ…å†µä¸‹çš„600nsã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d373fef339cc4bdc8c903861be56f70c.png"><br>ä»å›¾ä¸Šæ¥çœ‹ï¼Œæ¨ªåæ ‡æ˜¯å»¶è¿Ÿå’Œå¸¦å®½ï¼Œè®¾ç½®çš„æ˜¯éšç€å»¶è¿Ÿå¢åŠ ï¼Œå¸¦å®½ä¹Ÿé€æ¸å¢åŠ çš„æƒ…å†µã€‚</p><p>è¡¨æ˜å°†æ•°æ®ç»“æ„æ”¾ç½®åœ¨ç‰¹å®šç±»å‹çš„å†…å­˜ä¸­å¯¹æ€§èƒ½çš„å½±å“å–å†³äºå¯¹å…¶çš„è®¿é—®æ¨¡å¼ã€‚è¿™ç§ä¾èµ–æ€§æ˜¯ç”±äº<span class="label danger">ä¸åŒçš„å†…å­˜è®¿é—®æ¨¡å¼ï¼ˆé¡ºåºã€éšæœºå’ŒæŒ‡é’ˆè·³è½¬ï¼‰åœ¨ç°ä»£è¶…æ ‡é‡ä¹±åºå¤„ç†å™¨ä¸Šå…·æœ‰éå¸¸ä¸åŒçš„æœ‰æ•ˆå»¶è¿Ÿ</span>ã€‚è®¿é—®åº”ç”¨ç¨‹åºæ•°æ®ç»“æ„çš„é¢‘ç‡æœ¬èº«ä¸è¶³ä»¥ç¡®å®šè¿™äº›æ•°æ®ç»“æ„çš„ç›¸å¯¹â€œçƒ­åº¦â€ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/816dca9ab7984868b2173b1e3371476e.png"></p><p>å°†è®¿é—®æ¨¡å¼åˆ†ä¸º3ç§æ¥æµ‹é‡ï¼š</p><ul><li>æŒ‡é’ˆè·³è½¬ä¼šç»å†æœ€å¤§çš„åœé¡¿å»¶è¿Ÿï¼Œç­‰äºå†…å­˜çš„å®é™…ç‰©ç†å»¶è¿Ÿã€‚</li><li>éšæœºè®¿é—®ï¼Œä¹±åºæ‰§è¡Œå¯ä»¥æœ‰æ•ˆéšè—ä¸€äº›å†…å­˜å»¶è¿Ÿã€‚</li><li>æµå¼è®¿é—®ï¼Œé¢„å–å™¨åœ¨éšè—å†…å­˜å»¶è¿Ÿæ–¹é¢æ›´åŠ æœ‰æ•ˆã€‚<br>è¿™äº›è®¿é—®æ¨¡å¼çš„æ€§èƒ½çš„æ•°é‡çº§å·®å¼‚éªŒè¯äº†æˆ‘ä»¬çš„è§‚å¯Ÿï¼Œå³ä»…è®¿é—®é¢‘ç‡ä¸è¶³ä»¥ç¡®å®šæ•°æ®ç»“æ„çš„â€œçƒ­åº¦â€ã€‚</li></ul><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p><span class="label primary">ä»£è¡¨æ€§åº”ç”¨ç¨‹åºè¿›è¡Œäº†å…¨é¢ç ”ç©¶</span>ï¼ŒåŒ…æ‹¬é”®å€¼å­˜å‚¨ (MemC3)ã€å†…å­˜æ•°æ®åº“ (VoltDB) å’Œå›¾å½¢åˆ†ææ¡†æ¶ (GraphMat)ï¼ˆåœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼‰ã€‚æˆ‘ä»¬çš„ç»“è®ºæ˜¯ï¼Œç¡®å®å¯ä»¥æ··åˆä½¿ç”¨<span class="label primary">å°‘é‡å¿«é€ŸDRAMå’Œå¤§é‡è¾ƒæ…¢çš„NVMï¼Œè€Œä¸ä¼šå¯¹åº”ç”¨ç¨‹åºçš„æ€§èƒ½äº§ç”Ÿæˆæ¯”ä¾‹çš„å½±å“</span>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç»“æœåªèƒ½é€šè¿‡ä»”ç»†æ”¾ç½®æ•°æ®ç»“æ„æ¥å®ç°ã€‚æœ¬æ–‡çš„è´¡çŒ®æ˜¯è®¾è®¡å’Œå®ç°äº†ä¸€ç»„åº“å’Œè‡ªåŠ¨å·¥å…·ï¼Œä½¿ç¨‹åºå‘˜èƒ½å¤Ÿä»¥æœ€å°‘çš„åŠªåŠ›å®ç°æœ€ä½³çš„æ•°æ®æ”¾ç½®ã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ä¸ºäº†å…‹æœâ€œä»…NVMâ€ç³»ç»Ÿä¸­çš„æ€§èƒ½ä¸‹é™é—®é¢˜ï¼Œæœªæ¥çš„ç³»ç»Ÿå¯èƒ½ä¼šå°†NVMä¸å°‘é‡DRAMç»“åˆèµ·æ¥ï¼Œä»è€Œå½¢æˆçœŸæ­£çš„å¼‚æ„å†…å­˜æ¶æ„ã€‚å¤„ç†æ­¤ç±»ç³»ç»Ÿä¸­DRAMå’ŒNVMä¸åŒç‰¹æ€§çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯å°†DRAMè§†ä¸ºNVMçš„ç¼“å­˜ï¼Œå¹¶åº”ç”¨ç»å…¸çš„pagingæŠ€æœ¯æŒ‰éœ€åœ¨å®ƒä»¬ä¹‹é—´åŠ¨æ€ç§»åŠ¨æ•°æ®ã€‚ä¸å¹¸çš„æ˜¯ï¼Œç”±äºå¤šç§åŸå› ï¼Œè¯¥è§£å†³æ–¹æ¡ˆä¼šå¯¼è‡´æ€§èƒ½ä¸ä½³ã€‚</p><p>é¦–å…ˆï¼Œå®ƒå¿½ç•¥äº†å…·æœ‰ä¸åŒè®¿é—®ç‰¹æ€§çš„å¯¹è±¡å¯ä»¥ä½äºåŒä¸€é¡µé¢ä¸Šçš„äº‹å®ï¼Œè¿«ä½¿ä½äºåŒä¸€ä½ç½®çš„å¯¹è±¡é¢ä¸´pagingç³»ç»Ÿçš„ç›¸åŒå¤„ç†ã€‚å…¶æ¬¡ï¼Œpagingä¼šå¸¦æ¥è¾ƒé«˜çš„å¼€é”€[17]ï¼Œè¿™é€šå¸¸æ˜¯ä¸å¯æ¥å—çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨ç›´æ¥è¿æ¥çš„NVMç¯å¢ƒä¸­ï¼Œæ•°æ®ä¸éœ€è¦pagingå³å¯è®¿é—®ã€‚äº‹å®ä¸Šï¼Œæœ¬æ–‡è€ƒè™‘çš„å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½æ˜ç¡®ç¦æ­¢å¯¹å…¶æ•´ä¸ªå†…å­˜æ•°æ®è¿›è¡Œpagingï¼ˆä¾‹å¦‚ä½¿ç”¨mlockï¼‰ï¼Œå¼ºè°ƒéœ€è¦æ¯”ä¼ ç»Ÿåˆ†é¡µæ›´å¤æ‚çš„è§£å†³æ–¹æ¡ˆã€‚</p><blockquote><p>pagingæ˜¯å•¥æ„æ€ï¼Ÿåº”è¯¥æ˜¯æŒ‡æŒ‰ç…§4KBæ¥ç»„ç»‡é¡µé¢ã€‚å› ä¸ºè¿™è¾¹çš„å¼•ç”¨åœ¨è®¨è®ºåŠ å…¥ä¸´ç•Œäºä¼ ç»Ÿå­˜å‚¨å’Œå†…å­˜è®¾å¤‡ä¹‹é—´çš„è®¾å¤‡åï¼Œé¡µé¢å›æ”¶çš„æ•ˆç‡å°†å¯èƒ½æ²¡æœ‰åŸæ¥é‚£ä¹ˆå¥½äº†ã€‚</p></blockquote><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d849fa0d1a4b4da19b8e2c7b9a7cc4cd.png" alt="è®¾è®¡æ€»è§ˆ"></p><p>æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œä½œè€…è®¤ä¸ºå†…å­˜è®¿é—®çš„å»¶è¿Ÿæ˜¯æ¥è‡ªCPUå¯¹ä¸åŒè®¿é—®æ¨¡å¼çš„å»¶è¿Ÿã€‚æ‰€ä»¥æ•°æ®çš„æ”¾ç½®é¦–å…ˆéœ€è¦è¯†åˆ«ä»–ä»¬çš„æ•°æ®ç»“æ„ï¼Œæ ‡è®°æ•°æ®ç»“æ„çš„åˆ†é…ï¼Œè¿è¡Œæ—¶å¾—åˆ°æ•°æ®ç»“æ„ä¼˜å…ˆçº§ï¼Œç„¶åç»“æŸåˆ†æè½¬ä¸ºè¿è¡Œæ—¶ç¡®å®šæœ€ä½³æ”¾ç½®ä½ç½®ã€‚ï¼ˆæœ‰ç‚¹å¥‡æ€ªï¼‰</p><p>æœ¬ä¾‹ä¸­çš„åº”ç”¨ç¨‹åºä½¿ç”¨XMem APIåˆ†é…ä¸‰ä¸ªæ•°æ®ç»“æ„ï¼ˆæ ‘ã€å“ˆå¸Œå’Œç¼“å†²åŒºï¼‰ã€‚æ¯ä¸ªæ•°æ®ç»“æ„çš„å†…å­˜åˆ†é…å‡ç”±å•ç‹¬çš„<code>jemalloc</code>å®ä¾‹ç®¡ç†ã€‚åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ ‡ç­¾ä»£è¡¨ï¼ˆT1ã€T2 å’Œ T3ï¼‰è¢«åˆ†é…å†…éƒ¨ä¼˜å…ˆçº§ï¼Œç”¨äºå†³å®šæ”¾ç½®ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/4668cf102ce144f996786f1c04e2c51f.png"></p><p>ç”¨PINå·¥å…·è®°å½•è®¿é—®çš„ä¿¡æ¯ï¼Œåœ¨ç¼“å†²åŒºæ‰«æã€‚å¦‚æœä¸€ä¸ªå€¼æ˜¯ä¸€ä¸‹ä¸ªè®¿é—®çš„åœ°å€ï¼Œé‚£ä¹ˆå°±æ˜¯æŒ‡é’ˆè·³è½¬ç±»å‹çš„ã€‚å¦‚æœè¿™æ¬¡è®¿é—®å’Œä¸‹æ¬¡è®¿é—®é è¿‘ï¼Œè¿ç»­å…ƒç´ ç›¸å·®ç›¸åŒæ•°é‡çš„ä½ç½®ï¼Œé‚£ä¹ˆè®¤ä¸ºæ˜¯æµå¼è®¿é—®ã€‚æ€»æ•°å‡å»è¿™ä¸¤è€…ï¼Œå¾—åˆ°éšæœºè®¿é—®çš„æ•°é‡ã€‚</p><p>ç„¶åæ ¹æ®ä¸€ç³»åˆ—å»ºæ¨¡ï¼Œç”¨è´ªå¿ƒç®—æ³•å»å†³å®šæ”¾ç½®ã€‚</p><p>ä¿®æ”¹åº”ç”¨ç¨‹åºä»¥ä½¿ç”¨X-Mem APIåªéœ€è¦åœ¨ä»»ä½•åº”ç”¨ç¨‹åºä¸­ç¼–å†™å¾ˆå°‘ï¼ˆ10åˆ°50ï¼‰è¡Œä»£ç ã€‚å¯¹äºæ¯ä¸ªåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬é¦–å…ˆç¡®å®šéšç€åº”ç”¨ç¨‹åºæ•°æ®å¤§å°è€Œå¢é•¿å¹¶å æ®åº”ç”¨ç¨‹åºå†…å­˜å ç”¨çš„é‡è¦éƒ¨åˆ†çš„æ•°æ®ç»“æ„ã€‚åªæœ‰è¿™æ ·å¤§çš„æ•°æ®ç»“æ„æ‰ä½¿ç”¨X-Mem APIè¿›è¡Œåˆ†é…ï¼›å…¶ä»–æ•°æ®ç»§ç»­ä½¿ç”¨é»˜è®¤ç³»ç»Ÿåˆ†é…å™¨åœ¨DRAMä¸­åˆ†é…ã€‚æ¯ä¸ªæ•°æ®ç»“æ„éƒ½è¢«èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„æ ‡ç­¾ã€‚æˆ‘ä»¬æ­£åœ¨æ¢ç´¢è‡ªåŠ¨åŒ–ä¸ºæ¯ä¸ªæ•°æ®ç»“æ„é™„åŠ å”¯ä¸€æ ‡ç­¾çš„è¿‡ç¨‹çš„é€‰é¡¹ï¼Œä¹Ÿè®¸ä½œä¸ºç¼–è¯‘å™¨æ‰©å±•ã€‚</p><h2 id="6-ç¯å¢ƒé…ç½®"><a href="#6-ç¯å¢ƒé…ç½®" class="headerlink" title="6. ç¯å¢ƒé…ç½®"></a>6. ç¯å¢ƒé…ç½®</h2><p>æ··åˆå†…å­˜ä»¿çœŸå¹³å°ï¼ˆHMEPï¼‰[39]ç”±è‹±ç‰¹å°”æ„å»ºï¼Œç”¨äºæ”¯æŒæ··åˆå†…å­˜ç³»ç»Ÿè½¯ä»¶å †æ ˆçš„æ¢ç´¢ã€‚ HMEPé€šè¿‡å®æ–½ä»¥ä¸‹æ–¹å¼å®ç°æ··åˆå†…å­˜ä¸å®é™…åº”ç”¨çš„ç ”ç©¶ï¼š(i)DRAMå’Œæ¨¡æ‹ŸNVMçš„ç‹¬ç«‹ç‰©ç†å†…å­˜èŒƒå›´ï¼ˆä½¿ç”¨è‡ªå®šä¹‰ BIOSï¼‰ï¼Œä»¥åŠ(ii)å¯é…ç½®å»¶è¿Ÿå’Œæ—¶é—´çš„ç»†ç²’åº¦æ¨¡æ‹ŸNVMçš„å¸¦å®½ï¼ˆä½¿ç”¨è‡ªå®šä¹‰CPUå¾®ä»£ç ï¼‰ã€‚HMEPä¹‹å‰å·²åœ¨å…¶ä»–ç ”ç©¶ä¸­ä½¿ç”¨è¿‡ [20,26,27,43,44,56]ï¼Œå¹¶åœ¨å…¶ä»–åœ°æ–¹è¯¦ç»†æè¿°è¿‡[39]ã€‚</p><p>æˆ‘ä»¬å±•ç¤ºäº†å…­ç§HMEPé…ç½®çš„ç»“æœï¼Œä»£è¡¨äº†NVMçš„æ€§èƒ½èŒƒå›´ï¼ˆè¡¨1ï¼‰ã€‚åœ¨è¿™äº›é…ç½®ä¸­ï¼ŒNVMçš„å»¶è¿ŸèŒƒå›´ä¸ºDRAMå»¶è¿Ÿçš„2å€åˆ°4å€ï¼ˆ300nsã€450nså’Œ600nsï¼‰ï¼ŒNVMçš„å¸¦å®½èŒƒå›´ä¸ºDRAMå¸¦å®½çš„1/4å€åˆ°1/8å€ï¼ˆ10GB/såˆ°5GB/sï¼‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜è¯„ä¼°äº†ç³»ç»Ÿä¸­NVMä¸DRAMå¤§å°çš„ä¸åŒæ¯”ä¾‹ã€‚æˆ‘ä»¬ä½¿ç”¨1/Tæ¥æŒ‡ä»£DRAMå¤§å°ä¸ºç³»ç»Ÿä¸­æ€»å¯ç”¨å†…å­˜çš„1/Tçš„è®¾ç½®ã€‚åœ¨æ‰€æœ‰æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ä¸º<strong>åº”ç”¨ç¨‹åºæä¾›å›ºå®šæ•°é‡çš„æ€»å†…å­˜</strong>ï¼ˆç­‰äºDRAMå’ŒNVMçš„æ€»å’Œï¼‰ã€‚ä¸è¿™äº›è®¾ç½®ç›¸å¯¹åº”ï¼Œæˆ‘ä»¬è¿˜è€ƒè™‘äº†æ€»å†…å­˜çš„æˆæœ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒNVMæˆæœ¬æºè‡ªä¹‹å‰çš„ç ”ç©¶ï¼Œé¢„è®¡åŸºäºNVMï¼ˆPCMï¼‰çš„SSDæ¯”ä¼ä¸šMLC NANDé—ªå­˜SSDè´µ4å€[33]ã€‚åŸºäºDDRçš„DRAM[19]çš„æ™®éä»·æ ¼ä»¥åŠä¿å®ˆä¼°è®¡ï¼Œæœ¬å·¥ä½œä¸­å‡è®¾çš„å¯ç›´æ¥å¯»å€NVMè®¾å¤‡å°†æ¯”åŸºäºNVMçš„SSDæ›´æ˜‚è´µï¼ˆè‡³å°‘åœ¨æœ€åˆï¼‰ï¼Œæˆ‘ä»¬å‡è®¾DRAMæ˜¯5Ã—æŒ‰æ¯æ¯”ç‰¹æˆæœ¬è®¡ç®—ï¼Œæ¯”NVMæ›´è´µã€‚ç”±äºæœ¬æ–‡æ„Ÿå…´è¶£çš„å¤§å‹å†…å­˜ç³»ç»Ÿä¸­çš„å†…å­˜æˆæœ¬æ˜æ˜¾é«˜äºå…¶ä»–æœåŠ¡å™¨ç»„ä»¶ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸Šè¿°æˆæœ¬ä¼°ç®—ä½œä¸ºæœåŠ¡å™¨æ€»æˆæœ¬çš„ä»£ç†ã€‚</p><h2 id="7-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#7-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="7. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>7. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>è¯„ä¼°æœ‰ä¸¤ä¸ªç›®æ ‡ã€‚é¦–å…ˆæ˜¯è¡¨æ˜æ‰€æœ‰ä¸‰ä¸ªåº”ç”¨ç¨‹åºçš„æ€§èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå…¶ä¸­æ¯ä¸ªæ•°æ®ç»“æ„çš„æ”¾ç½®é€‰æ‹©ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è¯æ˜æˆ‘ä»¬çš„æ”¾ç½®æŠ€æœ¯å¯ä»¥æ­£ç¡®è¯†åˆ«æ¯ä¸ªæ•°æ®ç»“æ„çš„è®¿é—®æ¨¡å¼ï¼Œå¹¶é€šè¿‡X-Memå®ç°æœ€ä½³æ•°æ®æ”¾ç½®ã€‚ä¸ºäº†è¯æ˜æ‰€æœ‰æƒ…å†µä¸‹çš„ç»“æœï¼Œæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªåŸºçº¿è¿›è¡Œæ¯”è¾ƒã€‚ç¬¬ä¸€ç§æ˜¯çº¯NVMâ€”â€”å…¶ä¸­åº”ç”¨ç¨‹åºçš„å†…å­˜å®Œå…¨ä»NVMåˆ†é…ã€‚ä»…NVMæè¿°äº†æ··åˆå†…å­˜ç³»ç»Ÿä¸­æœªç»ä¿®æ”¹çš„åº”ç”¨ç¨‹åºçš„æœ€åæƒ…å†µæ€§èƒ½ã€‚ç¬¬äºŒç§æ˜¯ä»…DRAMï¼Œå®ƒä»£è¡¨å½“æ‰€æœ‰è®¿é—®çš„æ•°æ®éƒ½åˆ†é…åœ¨å¿«é€ŸDRAMä¸­æ—¶åº”ç”¨ç¨‹åºçš„æœ€ä½³æ€§èƒ½ã€‚</p><p>çº¢è‰²æŸ±çŠ¶å›¾æ˜¯å¼€é”€ã€‚</p><h3 id="7-1-MLP-GraphMat"><a href="#7-1-MLP-GraphMat" class="headerlink" title="7.1 MLP GraphMat"></a>7.1 MLP GraphMat</h3><blockquote><p>MLP(memory-level parallelism)å¯ä»¥å¸®åŠ©CPUæ›´å¥½åœ°åˆ©ç”¨ç³»ç»Ÿå†…å­˜å±‚æ¬¡ç»“æ„ï¼Œä»è€Œå‡å°‘å†…å­˜è®¿é—®å»¶è¿Ÿå¹¶æé«˜è®¡ç®—æ•ˆç‡ã€‚MLPçš„å†…å­˜å±‚æ¬¡é€šå¸¸åŒ…æ‹¬å¯„å­˜å™¨ã€é«˜é€Ÿç¼“å­˜ã€ä¸»å†…å­˜å’Œå¯èƒ½è¿˜æœ‰å…¶ä»–çº§åˆ«çš„å†…å­˜ã€‚å½“CPUæ‰§è¡ŒæŒ‡ä»¤æ—¶ï¼Œå®ƒä¼šä¸æ–­åœ°ä»ä¸åŒçš„å†…å­˜å±‚æ¬¡ä¸­è·å–æ•°æ®ï¼Œè€Œä¸ä»…ä»…ä¾èµ–äºä¸»å†…å­˜ã€‚è¿™å¯ä»¥é€šè¿‡é¢„å–æ•°æ®åˆ°é«˜é€Ÿç¼“å­˜ã€ä½¿ç”¨å¤šçº§é«˜é€Ÿç¼“å­˜ã€ä¹±åºæ‰§è¡ŒæŒ‡ä»¤ç­‰æŠ€æœ¯æ¥å®ç°ã€‚é€šè¿‡å……åˆ†åˆ©ç”¨MLPï¼ŒCPUå¯ä»¥åœ¨ç­‰å¾…å†…å­˜æ•°æ®è¿”å›æ—¶æ‰§è¡Œå…¶ä»–æŒ‡ä»¤ï¼Œä»è€Œæé«˜æ•´ä½“æ€§èƒ½ã€‚MLPçš„å…·ä½“å®ç°å’Œæ€§èƒ½æå‡å–å†³äºå¤„ç†å™¨çš„æ¶æ„å’Œè®¾è®¡ï¼Œä»¥åŠç¼–å†™çš„ç¨‹åºçš„ç‰¹æ€§ã€‚</p></blockquote><p>GraphMaté‡‡ç”¨é¡¶ç‚¹ç¨‹åºï¼Œå¹¶åœ¨åç«¯å°†å…¶æ˜ å°„ä¸ºé«˜åº¦ä¼˜åŒ–ã€å¯æ‰©å±•çš„ç¨€ç–çŸ©é˜µæ“ä½œã€‚GraphMatä»¥è¿­ä»£å¹¿ä¹‰ç¨€ç–çŸ©é˜µ-ç¨€ç–å‘é‡ä¹˜æ³•ï¼ˆæˆ–SPMVï¼‰çš„æ–¹å¼å®ç°å›¾ç®—æ³•ï¼Œæ›´æ–°ä¸é¡¶ç‚¹ç›¸å…³çš„ä¸€äº›æ•°æ®ï¼ˆå¦‚ Pagerankï¼‰ã€‚ä¸‹å›¾æ˜¯åœ¨ä»£è¡¨Twitter followerç½‘ç»œ[34]çš„å¤§å›¾ä¸Šæ‰§è¡ŒPagerankç®—æ³•[23]ï¼Œ32G. Graphmatå…·æœ‰ä¸‰ç§ä¸»è¦æ•°æ®ç»“æ„ï¼š<strong>ç¨€ç–å‘é‡ã€é¡¶ç‚¹æ•°æ®çš„ç¨ å¯†å‘é‡ï¼Œæœ€åæ˜¯å‹ç¼©ç¨€ç–è¡Œæ ¼å¼çš„å›¾çš„é‚»æ¥çŸ©é˜µ</strong>ã€‚é¡¶ç‚¹æ•°æ®çš„ç¨€ç–å‘é‡æ˜¯åœ¨æ¯æ¬¡è¿­ä»£ä¸Šæ„å»ºçš„ï¼Œå¹¶ä¸”ç”±è®¡ç®—ä¸­æ´»åŠ¨é¡¶ç‚¹çš„æ•°æ®ç»„æˆã€‚é€šè¿‡è¯»å–å’Œå†™å…¥ç¨€ç–å‘é‡è€Œä¸æ˜¯é¡¶ç‚¹çš„å…¨ç¨ å¯†å‘é‡Graphmatå®ç°äº†æ›´å¥½çš„ç¼“å­˜æ•ˆç‡ã€‚ä»X-Memçš„APIå¯ä»¥å‘ç°å¯¹æ•°æ®ç»“æ„çš„è®¿é—®é‡æ˜¯å¾ˆæœ‰å€¾å‘æ€§çš„ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/a03fdc9475da4447b0e1544061a016d8.png"></p><p>å›¾8æ˜¾ç¤ºäº†è¿è¡Œæµ‹è¯•æ—¶GraphMatçš„å¸¦å®½è¦æ±‚å’Œæœ‰æ•ˆå»¶è¿Ÿã€‚æœ‰æ•ˆå»¶è¿Ÿï¼ˆæ˜¾ç¤ºä¸ºå®é™…ç‰©ç†å†…å­˜å»¶è¿Ÿçš„ç™¾åˆ†æ¯”ï¼‰é€šè¿‡æµ‹é‡æ¯æ¬¡æœ€åä¸€çº§ç¼“å­˜ç¼ºå¤±æ—¶ç”±äºå¾…è¯»å–è€Œå¯¼è‡´çš„coreåœæ»ï¼Œè¿‘ä¼¼äºåº”ç”¨ç¨‹åºä¸­çš„å¹³å‡å†…å­˜è¯»å–å»¶è¿Ÿã€‚GraphMatå¯ä»¥å®ç°å¾ˆé«˜çš„å¸¦å®½ä½¿ç”¨ç‡ï¼ˆè¯»å–å¸¦å®½é«˜è¾¾25GB/sï¼Œå†™å…¥å¸¦å®½é«˜è¾¾15GB/sï¼‰ï¼Œ<span class="label primary">ä½†ç”±äºGraphMatèƒ½å¤Ÿåˆ©ç”¨CPUçš„MLPï¼ˆå†…å­˜çº§å¹¶è¡Œæ€§ï¼‰ï¼Œå…¶æœ‰æ•ˆå»¶è¿Ÿå¾ˆä½ï¼ˆå¤§å¤šä½äº20%ï¼‰ã€‚ å› æ­¤ï¼ŒGraphMatçš„æ€§èƒ½å¯¹è¾ƒä½çš„å¸¦å®½é«˜åº¦æ•æ„Ÿï¼Œä½†å¯¹è¾ƒé«˜çš„å»¶è¿Ÿåªæœ‰ä¸€å®šç¨‹åº¦çš„æ•æ„Ÿã€‚</span>è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆGraphMatçš„çº¯NVMæ€§èƒ½ä¼šéšç€å¸¦å®½çš„é™ä½è€Œé™ä½ï¼Œè€Œä¸æ˜¯éšç€å»¶è¿Ÿçš„å¢åŠ è€Œå¢åŠ ï¼ˆå›¾9aæœ€é«˜çš„é‚£æ¡çº¿ï¼‰ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/a916317248884134b9aea76b6b686724.png"></p><p>GraphMatä»…é€‚ç”¨äºNVMçš„æ€§èƒ½æ¯”ä»…é€‚ç”¨äºDRAMçš„æ€§èƒ½å·®2.6å€è‡³5.9å€ï¼Œå¹¶ä¸”åœ¨è¾ƒä½å³°å€¼NVMå¸¦å®½ä¸‹æ€§èƒ½ä¸‹é™å°¤å…¶æ€¥å‰§ã€‚å¤§éƒ¨åˆ†æ€§èƒ½å·®è·å¯å½’å› äºç¨€ç–å‘é‡ï¼Œç¨€ç–å‘é‡ä»…å GraphMatå ç”¨ç©ºé—´ï¼ˆ32GBï¼‰çš„3.5%ï¼ˆä½†æ˜¯ä»–å¾ˆçƒ­ï¼‰ã€‚å›¾9bæè¿°äº†ä½¿ç”¨ç¨€ç–å‘é‡çš„SPMVæ“ä½œå¯¹GraphMatæ•´ä½“è¿è¡Œæ—¶é—´çš„å·¨å¤§è´¡çŒ®ã€‚è¶…è¿‡1/16ï¼Œæ€§èƒ½ä¼šå—åˆ°å¯¹å¤§å‹é‚»æ¥çŸ©é˜µçš„ç»Ÿä¸€ï¼ˆå¸¦å®½é™åˆ¶ï¼‰è®¿é—®çš„é™åˆ¶ã€‚å› æ­¤ï¼Œ1/2çš„æ€§èƒ½æ˜¯ä»…DRAMçš„1.09å€åˆ°1.29å€ï¼Œæ¯” 1/16 ç•¥æœ‰æ”¹è¿›ï¼Œä½†æˆæœ¬æ›´é«˜ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/54382511dea94faeb3fd6d56ab3d74f4.png"></p><h3 id="7-2-VoltDB"><a href="#7-2-VoltDB" class="headerlink" title="7.2 VoltDB"></a>7.2 VoltDB</h3><p>å†…å­˜æ•°æ®åº“åˆ©ç”¨æ¶æ„å’Œåº”ç”¨ç¨‹åºè¶‹åŠ¿æ¥é¿å…è®¸å¤šé€šå¸¸ä¸åŸºäºç£ç›˜çš„<strong>OLTPæ•°æ®åº“</strong>ç›¸å…³çš„å¼€é”€[12,13,15,51]ã€‚VoltDBå°±æ˜¯è¿™æ ·çš„å†…å­˜æ•°æ®åº“ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸€ç§ç¬¦åˆACIDçš„åˆ†å¸ƒå¼ä¸»å†…å­˜å…³ç³»æ•°æ®åº“ï¼Œå®ƒå®ç°äº†H-Storeçš„æ— å…±äº«æ¶æ„ [51]ã€‚å°†ä»“åº“æ•°é‡è®¾ç½®ä¸º512ä¸ªï¼ŒVoltDBä¸­çš„ç«™ç‚¹æ•°é‡è®¾ç½®ä¸º8ä¸ªï¼Œä»è€Œäº§ç”Ÿ40GBå†…å­˜å ç”¨ã€‚<strong>TPC-C</strong>ååé‡ä»¥æ¯ç§’æ€»äº‹åŠ¡æ•°æŠ¥å‘Šã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/197dc904cf5a493d9fc9d29a08d367f7.png"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/254aa90c9ef94399a85c33f3f940ab51.png"></p><p>å›¾11æ˜¾ç¤ºï¼ŒVoltDBçš„æ€§èƒ½åªå¯¹å†…å­˜å»¶è¿Ÿæ•æ„Ÿï¼Œè¿™å¯ä»¥è§£é‡Šä¸ºVoltDBä¸­çš„éšæœºè®¿é—®ï¼ˆå°¤å…¶æ˜¯å¯¹ç´¢å¼•çš„è®¿é—®ï¼‰é€ æˆäº†è¾ƒé«˜çš„æœ‰æ•ˆå»¶è¿Ÿï¼Œæœ‰æ—¶ç”šè‡³è¶…è¿‡50%ï¼ˆå›¾10bï¼‰ã€‚åœ¨TPC-Cå·¥ä½œè´Ÿè½½ä¸­ï¼ŒVoltDBçš„å¹³å‡è¯»å–å¸¦å®½ä¸º2.3GB/sï¼Œå†™å…¥å¸¦å®½ä»…ä¸º1.3GB/sï¼ˆå›¾10aï¼‰ï¼Œå› æ­¤å¯¹è¾ƒä½çš„å¸¦å®½å¹¶ä¸æ•æ„Ÿã€‚</p><p>VoltDBä¸­çš„TPC-CåŒ…å«28ä¸ªæ­¤ç±»æ•°æ®ç»“æ„ï¼Œå…¶ä¸­å‰10ä¸ªæ•°æ®ç»“æ„ï¼ˆæŒ‰å¤§å°ï¼‰çº¦å æ€»å†…å­˜å ç”¨çš„99%ã€‚è¡¨4è¯´æ˜äº†X-Memçš„æ”¾ç½®ç®—æ³•åœ¨è¿™å‰10ä¸ªæ•°æ®ç»“æ„ä¸­çš„åº”ç”¨ã€‚ä¸­é—´ç»“æœå’Œå…¶ä»–æ•°æ®ç»“æ„ä½¿ç”¨é»˜è®¤çš„ç³»ç»Ÿåˆ†é…å™¨åœ¨DRAMä¸­åˆ†é…ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/a6ec47fb78054c699cc750e00110fe6c.png"></p><p>1/16çš„æ€§èƒ½æ¯”çº¯NVMæé«˜äº†24%åˆ°48%ã€‚STOCKè¡¨å’Œå°å‹CUSTOMERè¡¨-åœ¨DRAMä¸­ã€‚1/8ï¼ˆæ­¤å¤„æœªæ˜¾ç¤ºä»¥é¿å…æ··ä¹±ï¼‰å’Œ1/4çš„æ€§èƒ½å¹¶ä¸æ¯”1/16å¥½å¤šå°‘ã€‚åœ¨1/2æ—¶ï¼ŒX-Memèƒ½å¤Ÿå°†VoltDBçš„æ‰€æœ‰æ•°æ®ç»“æ„æ”¾å…¥DRAMä¸­ï¼Œé™¤äº†éå¸¸å¤§ä½†ä¸ç»å¸¸ä½¿ç”¨çš„â€œCUSTOMER NAMEâ€.å›¾11bæ˜¾ç¤ºäº†<strong>TPC-Cäº‹åŠ¡</strong>çš„å»¶è¿Ÿåˆ†å¸ƒï¼Œå› ä¸ºå®ƒæ˜¯OLTPå·¥ä½œè´Ÿè½½çš„é‡è¦æŒ‡æ ‡ã€‚å½“æˆ‘ä»¬è½¬å‘NVMä¸­åŒ…å«æ›´å¤šæ•°æ®çš„é…ç½®æ—¶ï¼Œå¹³å‡äº‹åŠ¡å»¶è¿Ÿä¼šå¢åŠ ã€‚ç„¶è€Œï¼Œè¿™ç§å¢åŠ å—åˆ°å¸ƒå±€ç®—æ³•çš„è°ƒèŠ‚ï¼Œå¯¼è‡´äº‹åŠ¡å»¶è¿Ÿæ¥è¿‘DRAMï¼Œå³ä½¿å¯¹äº1/16é…ç½®ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h3 id="7-3-MemC3"><a href="#7-3-MemC3" class="headerlink" title="7.3 MemC3"></a>7.3 MemC3</h3><p>ä½œä¸ºå¤§å‹æ•°æ®ä¸­å¿ƒä¸­çš„ç¼“å­˜ï¼Œé”®å€¼å­˜å‚¨å˜å¾—è¶Šæ¥è¶Šé‡è¦[21]ã€‚æˆ‘ä»¬ç ”ç©¶äº†Memcached[10] çš„ä¸€ä¸ªå˜ä½“ï¼Œç§°ä¸ºMemC3[28]ï¼Œè¿™æ˜¯å¼€æºMemcachedçš„æœ€æ–°è¿›å±•ï¼Œå®ƒæ¯”ç°æœ‰å®ç°æé«˜äº†å†…å­˜æ•ˆç‡å’Œååé‡ã€‚ MemC3å®ç°äº†å¸ƒè°·é¸Ÿå“ˆå¸Œcuckoo hashingçš„å˜ä½“ï¼Œä»¥é¿å…Memcachedä¸­å¸¸è§çš„æ˜‚è´µçš„éšæœºç›¸å…³è®¿é—®ã€‚æ­¤å¤–ï¼ŒMemC3ç”¨ä¹è§‚å¹¶å‘æ§åˆ¶æ–¹æ¡ˆå–ä»£äº†Memcachedçš„ç‹¬å å…¨å±€é”å®šã€‚åœ¨åŠ è½½é˜¶æ®µï¼ŒMemC3æœåŠ¡å™¨å¡«å……äº†å¤§çº¦64GBçš„æ•°æ®é›†ã€‚å¯†é’¥å¤§å°å›ºå®šä¸º16å­—èŠ‚ï¼Œå€¼çš„å¤§å°èŒƒå›´ä»16Båˆ°8Kï¼Œå¤§è‡´éµå¾ªFacebookå‘å¸ƒçš„æ•°æ®ä¸­ETCè·Ÿè¸ªä¸­å€¼çš„åˆ†å¸ƒ [21]ã€‚è¶…è¿‡90%çš„å€¼çš„å¤§å°ä¸º512å­—èŠ‚æˆ–æ›´å°ã€‚ç„¶è€Œï¼Œå¤§äº512å­—èŠ‚çš„å€¼å‡ ä¹å æ®äº†ç¼“å­˜ç©ºé—´çš„50%å·¥ä½œè´Ÿè½½çš„æ€»å†…å­˜å ç”¨é‡çº¦ä¸º100GBã€‚</p><p>åœ¨æ‰§è¡Œé˜¶æ®µï¼Œå®¢æˆ·ç«¯å†æ¬¡æ ¹æ®ETCè¯·æ±‚è·Ÿè¸ªä¸­çš„å€¼åˆ†å¸ƒç”Ÿæˆ5000ä¸‡ä¸ªéšæœºæŸ¥è¯¢ã€‚å·¥ä½œè´Ÿè½½è¯»å–ç¹é‡ï¼ˆ95%GETå’Œ5%SETï¼‰ï¼Œå¹¶ä¸”å½“å‰ä¸åŒ…å«ä»»ä½•DELETEè¯·æ±‚ï¼ˆå’Œycsbå·®ä¸å¤šç«Ÿç„¶ï¼‰ã€‚æˆ‘ä»¬æŠ¥å‘Šå®Œæˆæµ‹è¯•çš„æ€»æ—¶é—´ã€‚å›¾12æ˜¾ç¤ºMemC3çš„æ€§èƒ½ç‰¹å¾ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚ä¸€ç§å¤§å°çš„å€¼ï¼ˆä»16Båˆ°8Kï¼‰ã€‚å›¾12aæ˜¾ç¤ºMemC3çš„è¯»å–å¸¦å®½èŒƒå›´ä¸º1.8 GB/sè‡³14GB/sï¼Œå†™å…¥å¸¦å®½èŒƒå›´ä¸º1GB/sè‡³6.5GB/sï¼Œå…·ä½“å–å†³äºå€¼çš„å¤§å°ã€‚ç”±äºé¡ºåºæ€§èƒ½çš„æé«˜ï¼Œæœ‰æ•ˆå»¶è¿Ÿåœ¨è¾ƒå¤§å€¼æ—¶å‡å°‘ï¼ˆä»48%åˆ°4%ï¼‰ï¼ˆå›¾12bï¼‰ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/2d40a9406d02470295476136fabd73cf.png"></p><p>MemC3å¯¹<span class="label primary">è¾ƒé«˜å»¶è¿Ÿè€Œä¸æ˜¯è¾ƒä½å¸¦å®½çš„æ•æ„Ÿæ€§</span>ï¼ˆå¦‚å›¾13aä¸­ä»…NVMçš„æ€§èƒ½æ‰€ç¤ºï¼‰å¯ä»¥é€šè¿‡å·¥ä½œè´Ÿè½½ä¸­è¾ƒå°å€¼çš„è¾ƒå¤§åå·®æ¥è§£é‡Šã€‚å›¾13bé€šè¿‡åˆ†è§£ä¸åŒå€¼å¤§å°çš„NVM-onlyå¼€é”€è¿›ä¸€æ­¥è¯´æ˜äº†è¿™ä¸€äº‹å®ã€‚MemC3åœ¨å¯åŠ¨æ—¶ä¸ºcuckooå“ˆå¸Œè¡¨åˆ†é…å†…å­˜ï¼Œå¹¶ä½¿ç”¨åŠ¨æ€slabåˆ†é…å™¨æ¥åˆ†é…å€¼ï¼Œslabç±»å‹ç”±slabåˆ†é…çš„å¤§å°å†³å®šã€‚å“ˆå¸Œè¡¨å’Œslabså‡ä½¿ç”¨xmallocè¿›è¡Œåˆ†é…ï¼Œå› æ­¤X-Memä¸­æ€»å…±æœ‰9ä¸ªæ•°æ®ç»“æ„ï¼ˆè¡¨5ï¼‰ï¼Œå› ä¸ºæ¯ä¸ªæ¿ç±»å‹éƒ½è¢«è§†ä¸ºå•ç‹¬çš„æ•°æ®ç»“æ„ã€‚è¡¨5æ˜¾ç¤ºäº†ç”±X-Memæ”¾ç½®ç®—æ³•ç¡®å®šçš„è¿™äº›æ•°æ®ç»“æ„çš„ä¼˜å…ˆçº§ã€‚è¯·æ³¨æ„ï¼ŒX-Memä¸ºå„ç§æ¿ç±»å‹ç¡®å®šçš„ä¼˜å…ˆçº§å®Œå…¨éµå¾ªå›¾13bä¸­ä»…NVMå¼€é”€çš„å€¼ç»†åˆ†ï¼Œè¿™è¯æ˜äº†X-Memæ”¾ç½®æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚åœ¨1/8åˆ†å±‚ä¸­ï¼Œåªæœ‰12.5%çš„åº”ç”¨ç¨‹åºæ•°æ®ä½äºDRAMä¸­ï¼Œæ€§èƒ½æ¯”ä»…NVMæé«˜äº†8%åˆ°17%ï¼Œå› ä¸ºX-Memåˆ†é…äº†MemC3çš„å¸ƒè°·é¸Ÿå“ˆå¸ŒDRAMã€‚ 1/4çš„è¡¨ç°ç”šè‡³æ›´å¥½ï¼Œå°†æ€§èƒ½æé«˜åˆ°ä»…DRAMçš„6%åˆ°13%ï¼Œä¸»è¦æ˜¯å› ä¸ºX-Memç°åœ¨èƒ½å¤Ÿå°†å¤§é‡å°å€¼æ”¾å…¥DRAMä¸­ï¼Œå¹¶å‡å°‘å¯¹NVMçš„éšæœºè®¿é—®æ¬¡æ•°ã€‚</p><p><span class="label primary">è¡¨5è¿˜æ˜¾ç¤ºäº†ä¸ºä»€ä¹ˆä»…å‡­æ•°æ®ç»“æ„çš„è®¿é—®é¢‘ç‡ä¸è¶³ä»¥ç¡®å®šå°†å…¶ç½®äºæ›´å¿«å†…å­˜ä¸­çš„å¥½å¤„ã€‚ä¾‹å¦‚ï¼Œå¸ƒè°·é¸Ÿå“ˆå¸Œå’Œ256Båœ¨è®¿é—®é¢‘ç‡å’Œå†…å­˜å ç”¨æ–¹é¢éƒ½æ¯”è¾ƒæ¥è¿‘ï¼Œä½†ç”±äºè®¿é—®æ¨¡å¼ä¸åŒï¼Œåœ¨æ¯ä¸ªå†…å­˜åŒºåŸŸçš„æ”¶ç›Šæ–¹é¢å´å½¢æˆäº†é²œæ˜å¯¹æ¯”ã€‚</span></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d50257a5b9004017867774b9e337a2dd.png"></p><h3 id="7-4-å®é™…éƒ¨ç½²"><a href="#7-4-å®é™…éƒ¨ç½²" class="headerlink" title="7.4 å®é™…éƒ¨ç½²"></a>7.4 å®é™…éƒ¨ç½²</h3><p>è™½ç„¶ç”¨xmallocå’Œxfreeæ›¿æ¢mallocå’Œfreeå¾ˆç®€å•ï¼Œä½†æ ¹æ®å®ç°æƒ…å†µï¼Œä¸ºå„ä¸ªæ•°æ®ç»“æ„åˆ†é…å”¯ä¸€çš„æ ‡è®°å¯èƒ½éœ€è¦æ›´å¤šçš„å·¥ä½œã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¿®æ”¹VoltDBéœ€è¦ä»˜å‡ºæœ€å¤šçš„åŠªåŠ›ï¼Œä½†ä»ç„¶æ¶‰åŠä¸åˆ°50è¡Œä»£ç çš„æ›´æ”¹ã€‚å¯¹äºé¢å‘å¯¹è±¡çš„ç¨‹åºæ¥è¯´ï¼Œå·¥ä½œé‡è¦ä½å¾—å¤šï¼Œå› ä¸ºå¯ä»¥å®šä¹‰ç‰¹å®šäºç±»çš„åˆ†é…å™¨æ¥è°ƒç”¨xmallocï¼Œè€Œä¸æ˜¯å°†è¿™äº›è°ƒç”¨åˆ†æ•£åœ¨ä»£ç ä¸­ã€‚è™½ç„¶è¿™ä¸ªè¿‡ç¨‹å¹¶ä¸ç¹é‡ï¼Œä½†ä»ç„¶éœ€è¦æ‰‹åŠ¨æ“ä½œå’Œå¯¹åº”ç”¨ç¨‹åºæºä»£ç çš„å……åˆ†ç†è§£ã€‚æˆ‘ä»¬è®¡åˆ’æ¢ç´¢è‡ªåŠ¨æ ‡è®°åº”ç”¨ç¨‹åºæ•°æ®ç»“æ„çš„åŠ¨æ€åˆ†é…çš„æŠ€æœ¯ï¼Œè‡³å°‘åœ¨æ‰˜ç®¡è¯­è¨€å’Œè¿è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ä¸­[24,32,50]ã€‚<span class="github-emoji"><span>ğŸ‘</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <span class="github-emoji"><span>ğŸ‘</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <span class="github-emoji"><span>ğŸ‘</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>åœ¨å‰–ææ­¥éª¤ä¸­è¿›è¡Œå†…å­˜è·Ÿè¸ªï¼ˆä½¿ç”¨Pinï¼‰ä¼šå¤§å¤§é™ä½åº”ç”¨ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ï¼ˆåœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­æœ€é«˜å¯è¾¾40å€ï¼‰ï¼Œå› æ­¤åªé€‚åˆç¦»çº¿ä½¿ç”¨ï¼Œä¸é€‚ç”¨äºç”Ÿäº§ã€‚æˆ‘ä»¬è€ƒè™‘è¿‡çš„ä¸€ä¸ªæ–¹æ¡ˆæ˜¯é‡‡ç”¨åŸºäºé‡‡æ ·çš„å‰–æ[55]ã€‚ç”±äºæ‹…å¿ƒé‡‡æ ·å‰–æå™¨å¯èƒ½æ— æ³•æ•æ‰åˆ°æŒ‡é’ˆè¿½é€å’Œstridedæ‰«æç­‰ç´§å¯†é—´éš”çš„å†…å­˜è®¿é—®ä¹‹é—´çš„å…³ç³»ï¼Œè¿™ä¸ªæƒ³æ³•è¢«æç½®äº†ã€‚æˆ‘ä»¬ç›®å‰æ­£åœ¨æ¢ç´¢å¯¹x86 ISAçš„æ‰©å±•ï¼Œä»¥å®ç°å¿…è¦çš„å‰–æï¼Œä½†æ— éœ€æ˜‚è´µçš„è·Ÿè¸ªæ¯æ¬¡å†…å­˜è®¿é—®çš„è¿‡ç¨‹ã€‚ä¸è¿‡ï¼Œå‰–æå™¨ä»ç„¶æ˜¯åˆæ­¥éƒ¨ç½²çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬è¿˜å‘ç°ï¼Œ<strong>åœ¨ä¿ç•™å„ç§æ•°æ®ç»“æ„ä¹‹é—´å…³ç³»çš„åŒæ—¶ï¼Œç¼©å°å·¥ä½œè´Ÿè½½çš„è§„æ¨¡ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å‰–ææ‰€èŠ±è´¹çš„æ—¶é—´</strong>ã€‚</p><p>å½“å†…å­˜åŒºåŸŸä»DRAMè¿ç§»åˆ°NVMæ—¶ï¼ŒX-Memé€šè¿‡ç­‰å¾…mbindè°ƒç”¨è¿”å›æ¥æ‰§è¡Œâ€œåŒæ­¥â€è¿ç§»ã€‚åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œè¿™ç§è¿ç§»çš„å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå› ä¸ºä¸åº”ç”¨ç¨‹åºçš„æ•´ä½“è¿è¡Œæ—¶é—´ç›¸æ¯”ï¼Œåˆ†é…æ‰€èŠ±è´¹çš„æ—¶é—´ç›¸å¯¹è¾ƒå°‘ã€‚è¡¨6æ˜¾ç¤ºäº†åŒºåŸŸå¤§å°èŒƒå›´ä»64Måˆ°1Gçš„è¿ç§»çš„åŸå§‹å¼€é”€ã€‚ 1GåŒºåŸŸå¯ä»¥æ¯”è¾ƒå°åŒºåŸŸæ‘Šé”€5%åˆ°8%çš„è¿ç§»æˆæœ¬ã€‚ç„¶è€Œï¼Œ**ä½¿ç”¨1GåŒºåŸŸçš„çœŸæ­£å¥½å¤„æ˜¯å®ƒå…è®¸åœ¨å¤§å¤šæ•°64ä½æœåŠ¡å™¨ä¸Šä½¿ç”¨å¤§å‹ï¼ˆ1GBï¼‰ç¡¬ä»¶é¡µé¢ï¼›ä¸4Ké¡µçš„åŸºå‡†ç›¸æ¯”ï¼Œè¿ç§»å¼€é”€è¿›ä¸€æ­¥å‡å°‘äº†60%**ã€‚è™½ç„¶æˆ‘ä»¬äº†è§£åœ¨å†…å­˜å ç”¨è¾ƒå¤§çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å…·æœ‰å¤§é¡µé¢çš„1GåŒºåŸŸçš„å¥½å¤„[27]ï¼Œä½†X-Memçš„å½“å‰å®ç°ä½¿ç”¨64 MBåŒºåŸŸï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰æ¥å‡å°‘å†…éƒ¨ç¢ç‰‡ã€‚æ­¤å¤–ï¼Œç”±äºLinuxå†…æ ¸çš„é™åˆ¶ï¼ŒX-Memä½¿ç”¨4Kç¡¬ä»¶é¡µé¢ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/7974e5f219954ae0b7e2eecd5050c5db.png"></p><h2 id="8-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#8-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="8. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>8. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>è¿™é‡Œä½œè€…åªå¯¹å †è¿›è¡Œåˆ†é…ï¼Œç°åœ¨äººä»¬åœ¨åŒ¿åå’Œæ–‡ä»¶æ˜ å°„åŒºä¹Ÿæœ‰å…³æ³¨ã€‚</p><p>å…·ä½“ä½œè€…è®²äº†å¾ˆå¤šä»jmallocæ¥åšçš„äº‹æƒ…ï¼Œæ²¡æœ‰çœ‹æ‡‚ï¼Œå†çœ‹çœ‹å§ï¼Œemmmmmmmmmm</p><h2 id="9-åˆ›æ–°ç‚¹"><a href="#9-åˆ›æ–°ç‚¹" class="headerlink" title="9. åˆ›æ–°ç‚¹"></a>9. åˆ›æ–°ç‚¹</h2><p>è¿™ä¸ªéƒ½æƒ³åˆ°äº†ï¼š<br>æ•°æ®ä¸­å¿ƒé€šå¸¸åœ¨éƒ¨ç½²ä¹‹å‰ä½¿ç”¨å½±å­åŸºç¡€è®¾æ–½æ¥æµ‹è¯•å…¶ä»£ç ã€‚ä¸€ç§é€‰æ‹©æ˜¯å®šæœŸåˆ†ææ­¤å½±å­ç¯å¢ƒä¸­çš„å·¥ä½œè´Ÿè½½ï¼Œå¹¶ç›¸åº”åœ°é‡æ–°åˆ†ç±»åº”ç”¨ç¨‹åºæ•°æ®ã€‚</p><h2 id="10-ç§¯ç´¯"><a href="#10-ç§¯ç´¯" class="headerlink" title="10. ç§¯ç´¯"></a>10. ç§¯ç´¯</h2><p><a href="https://lwn.net/Articles/636972/">æƒŠ, åŸæ¥è®ºå›é‡ŒMCçš„æƒ³æ³•å¾ˆæ—©ä¹‹å‰å°±è®¨è®ºè¿‡äº†, ä½¿ç”¨å¤§é¡µé¢å’Œæ˜¯å¦ç”¨LRUè¿™äº›é—®é¢˜ä¹Ÿéƒ½æœ‰è®¨è®º</a></p><p>è®¨è®ºäº†å…³äºä»·æ ¼çš„äº‹</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Working Set Analytics</title>
      <link href="/2023/11/01/Working-Set-Analytics/"/>
      <url>/2023/11/01/Working-Set-Analytics/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary">- æ–‡ç« æ¥è‡ªACM Comput. Surv. 2021- Working Set Analytics</div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>PETER J. DENNINGï¼ˆACMå‰ä»»ä¸»å¸­ï¼Œè™šæ‹Ÿå†…å­˜æ–¹é¢å‘æ˜äº†ç¨‹åºè¡Œä¸ºçš„å·¥ä½œé›†æ¨¡å‹è§£å†³äº†æŠ–åŠ¨ï¼Œç­‰å…¶ä»–è´¡çŒ®ï¼‰, æµ·å†›ç ”ç©¶ç”Ÿé™¢ï¼ˆç¾å›½æµ·å†›çš„å…¬ç«‹ç ”ç©¶ç”Ÿé™¢ï¼‰ç¾å›½åŠ åˆ©ç¦å°¼äºšå·è’™ç‰¹é›·å¸‚</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><blockquote><p>å·¥ä½œé›†æ˜¯æŒ‡ç¨‹åºåœ¨æœ€è¿‘ä¸€æ¬¡æ‰§è¡Œä¸­è®¿é—®è¿‡çš„é¡µé¢(å†…å­˜å—)é›†åˆã€‚å·¥ä½œé›†ç®—æ³•å¯ä»¥æ ¹æ®ç¨‹åºçš„è®¿é—®å±€éƒ¨æ€§åŸç†æ¥æé«˜å†…å­˜åˆ©ç”¨ç‡,å‡å°‘é¡µé¢ç½®æ¢çš„æ¬¡æ•°,ä»è€Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ä¸å…¨å±€ç½®æ¢ç®—æ³•(å¦‚FIFO)ç›¸æ¯”,å·¥ä½œé›†ç®—æ³•æ›´èƒ½é€‚åº”ä¸åŒè¿›ç¨‹çš„å†…å­˜è®¿é—®è¡Œä¸ºã€‚</p></blockquote><h2 id="3-æ–‡ç« æ¦‚è¦"><a href="#3-æ–‡ç« æ¦‚è¦" class="headerlink" title="3. æ–‡ç« æ¦‚è¦"></a>3. æ–‡ç« æ¦‚è¦</h2><p>ç¨‹åºè¡Œä¸ºçš„å·¥ä½œé›†æ¨¡å‹äº1965å¹´å‘æ˜ã€‚å®ƒåœ¨è™šæ‹Ÿå†…å­˜ç®¡ç†é¢†åŸŸç»å—äº†50å¤šå¹´çš„æ—¶é—´è€ƒéªŒã€‚å®ƒè¢«è®¤ä¸ºæ˜¯ç®¡ç†æ“ä½œç³»ç»Ÿå’Œç¼“å­˜ä¸­çš„å†…å­˜çš„ç†æƒ³é€‰æ‹©ã€‚å®ƒçš„ä¼˜è¶Šæ€§èƒ½æ˜¯åŸºäºåŒæ—¶å‘ç°çš„å±€åŸŸæ€§åŸç†ï¼›å±€éƒ¨æ€§æ˜¯è§‚å¯Ÿåˆ°çš„ç¨‹åºåœ¨è¾ƒé•¿æ—¶é—´å†…ä½¿ç”¨å…¶é¡µé¢çš„ä¸åŒå­é›†çš„è¶‹åŠ¿ã€‚</p><p>æœ¬æ•™ç¨‹è¿½æº¯äº†å·¥ä½œé›†ç†è®ºä»èµ·æºåˆ°ç°åœ¨çš„å‘å±•ã€‚</p><ol><li>æˆ‘ä»¬å°†è®¨è®ºå±€éƒ¨æ€§åŸç†åŠå…¶å®éªŒéªŒè¯ã€‚</li><li>æˆ‘ä»¬å°†å±•ç¤ºä¸ºä»€ä¹ˆå·¥ä½œé›†å†…å­˜ç®¡ç†å¯ä»¥æŠµæŠ—é¢ ç°¸å¹¶ç”Ÿæˆæ¥è¿‘æœ€ä½³çš„ç³»ç»Ÿååé‡ã€‚</li><li>æˆ‘ä»¬å°†ä»‹ç»å¼ºå¤§çš„çº¿æ€§æ—¶é—´ç®—æ³•ï¼Œç”¨äºè®¡ç®—å·¥ä½œé›†ç»Ÿè®¡æ•°æ®å¹¶å°†å…¶åº”ç”¨äºå†…å­˜ç³»ç»Ÿçš„è®¾è®¡ã€‚</li><li>æˆ‘ä»¬å°†æ­ç©¿æœ‰å…³å­˜å‚¨ç³»ç»Ÿå±€éƒ¨æ€§å’Œæ€§èƒ½çš„å‡ ä¸ªç¥è¯ã€‚</li><li>æœ€åæˆ‘ä»¬å°†è®¨è®ºå·¥ä½œé›†æ¨¡å‹åœ¨å¹¶è¡Œç³»ç»Ÿã€ç°ä»£å…±äº« CPU ç¼“å­˜ã€ç½‘ç»œè¾¹ç¼˜ç¼“å­˜ä»¥åŠåº“å­˜å’Œç‰©æµç®¡ç†ä¸­çš„åº”ç”¨ã€‚</li></ol><h2 id="4-è™šæ‹Ÿå†…å­˜çš„å‘å±•ä¹‹ç—›"><a href="#4-è™šæ‹Ÿå†…å­˜çš„å‘å±•ä¹‹ç—›" class="headerlink" title="4. è™šæ‹Ÿå†…å­˜çš„å‘å±•ä¹‹ç—›"></a>4. è™šæ‹Ÿå†…å­˜çš„å‘å±•ä¹‹ç—›</h2><p>æ›¼å½»æ–¯ç‰¹çš„è®¾è®¡å¸ˆæ¨å‡ºäº†å››é¡¹åˆ›æ–°ï¼Œè¿™äº›åˆ›æ–°å¾ˆå¿«å°±è¢«é‡‡çº³ä¸ºè®¡ç®—æœºä½“ç³»ç»“æ„å’Œæ“ä½œç³»ç»Ÿçš„æ ‡å‡†ï¼Œä»é‚£æ—¶èµ·åˆ°ä»Šå¤©ã€‚</p><ol><li>Pageï¼Œä¸€ç§å›ºå®šå¤§å°çš„å­˜å‚¨å’Œä¼ è¾“å•å…ƒã€‚ç¨‹åºå’Œæ•°æ®è¢«åˆ†æˆé¡µé¢å¹¶å­˜å‚¨åœ¨ç§°ä¸ºé¡µæ¡†çš„ä¸»å­˜å‚¨å™¨æ’æ§½ä¸­ï¼Œå¹¶åœ¨è¾…åŠ©å­˜å‚¨å™¨ä¸Šå¤åˆ¶å‰¯æœ¬ã€‚</li><li>addressesï¼ˆå€¼çš„åç§°ï¼‰å’Œlocationsï¼ˆä¿å­˜å€¼çš„å†…å­˜æ’æ§½ï¼‰ä¹‹é—´çš„åŒºåˆ†ã€‚åœ°å€ç©ºé—´æ˜¯ä¸€ä¸ªå¤§å‹çš„çº¿æ€§åœ°å€åºåˆ—ï¼Œä¸»å­˜å‚¨å™¨ï¼ˆRAMï¼‰æ˜¯ä¸€ä¸ªé¡µæ¡†æ± ï¼Œæ¯ä¸ªé¡µæ¡†éƒ½å¯ä»¥å®¹çº³åœ°å€ç©ºé—´ä¸­çš„ä»»ä½•é¡µé¢ã€‚å½“CPUå°†åœ°å€ç”Ÿæˆåˆ°å…¶åœ°å€ç©ºé—´æ—¶ï¼Œç¡¬ä»¶å†…å­˜æ˜ å°„å•å…ƒä½¿ç”¨å°†é¡µé¢ä¸é¡µæ¡†ç›¸å…³è”çš„é¡µè¡¨å°†addressesè½¬æ¢ä¸ºlocationsã€‚</li><li>page faultï¼Œå½“æ‰§è¡Œç¨‹åºå‘æ˜ å°„å•å…ƒæä¾›é¡µé¢ä¸åœ¨ä¸»å­˜ä¸­çš„åœ°å€æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šè§¦å‘ä¸­æ–­ã€‚æ“ä½œç³»ç»Ÿåœ¨è¾…åŠ©å†…å­˜ä¸­æ‰¾åˆ°ä¸¢å¤±çš„é¡µé¢ï¼Œé€‰æ‹©ä¸€ä¸ªå·²åŠ è½½çš„é¡µé¢è¿›è¡Œé€å‡ºï¼Œå¹¶å°†ä¸¢å¤±çš„é¡µé¢è½¬ç§»åˆ°ç©ºå‡ºçš„é¡µé¢æ¡†æ¶ä¸­ã€‚</li><li>é¡µé¢æ›¿æ¢ç­–ç•¥ï¼Œè¯¥ç®—æ³•é€‰æ‹©å¿…é¡»ä»ä¸»å†…å­˜ä¸­é€å‡ºå“ªä¸ªé¡µé¢å¹¶å°†å…¶è¿”å›åˆ°è¾…åŠ©å†…å­˜ä»¥ä¸ºä¼ å…¥é¡µé¢è®©è·¯ã€‚æœªå‘½ä¸­ç‡å‡½æ•°ï¼ˆäº§ç”Ÿé¡µé¢é”™è¯¯çš„å¼•ç”¨çš„æ¯”ä¾‹ï¼‰æ˜¯è™šæ‹Ÿå†…å­˜çš„å…³é”®æ€§èƒ½æŒ‡æ ‡ã€‚</li></ol><p>æ“ä½œç³»ç»Ÿçš„æ€§èƒ½ä¸€ç›´æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ã€‚ä¸ºäº†è¢«æ“ä½œç³»ç»Ÿæ¥å—ï¼Œè™šæ‹Ÿå†…å­˜ç³»ç»Ÿå¿…é¡»é«˜æ•ˆã€‚æ•ˆç‡ä½ä¸‹çš„ä¸¤ä¸ªæ½œåœ¨æ¥æºæ˜¯åœ°å€æ˜ å°„å’Œé¡µé¢ä¼ è¾“ã€‚å®ƒä»¬å¯ä»¥ç§°ä¸ºå¯»å€é—®é¢˜å’Œæ›¿æ¢é—®é¢˜ã€‚</p><p>æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚TLBæ˜¯å†…å­˜æ˜ å°„å•å…ƒä¸­çš„ä¸€ä¸ªå°å‹é«˜é€Ÿç¼“å­˜ï¼Œå®ƒå°†åœ°å€æ˜ å°„çš„å‡æ…¢é™åˆ¶ä¸ºæ­£å¸¸ RAM è®¿é—®æ—¶é—´çš„ 3%ã€‚å°±æ‰€æœ‰å¥½å¤„è€Œè¨€ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„æˆæœ¬ã€‚è™šæ‹Ÿå†…å­˜ç¡®å®ä½¿ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›æé«˜äº†ä¸€å€æˆ–ä¸‰å€ã€‚å®ƒè¿˜æ¶ˆé™¤äº†å¿…é¡»é’ˆå¯¹æ¯ä¸ªä¸åŒå¤§å°çš„ä¸»å†…å­˜é‡æ–°åˆ¶å®šæ‰‹å·¥ä¼ è¾“è®¡åˆ’çš„æ¼äººé—®é¢˜ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè™šæ‹Ÿå†…å­˜å¯ä»¥å°†ä¸»å†…å­˜åˆ’åˆ†ä¸ºä¸ç›¸äº¤çš„é›†åˆï¼Œæ¯ä¸ªåœ°å€ç©ºé—´å¯¹åº”ä¸€ä¸ªé›†åˆï¼Œä»è€Œæ”¯æŒé˜²æ­¢æ­£åœ¨æ‰§è¡Œçš„ä½œä¸šç›¸äº’å¹²æ‰°çš„ä¸»è¦ç›®æ ‡ã€‚è¿™å¯¹äºæ—©æœŸæ“ä½œç³»ç»Ÿçš„è®¾è®¡è€…å’Œç”¨æˆ·æ¥è¯´éƒ½æ˜¯å¥½æ¶ˆæ¯ã€‚</p><blockquote><p>å¤ªé•¿å•¦ï¼Œæ­£åœ¨åŠªåŠ›è¯»â€¦â€¦</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> O </tag>
            
            <tag> Working Set </tag>
            
            <tag> Memory Management </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå†…æ ¸å¸¸ç”¨Cè¯­è¨€æŠ€å·§æ•°æ®ç»“æ„å’Œç®—æ³•</title>
      <link href="/2023/10/31/Linux%E5%86%85%E6%A0%B8%E5%B8%B8%E7%94%A8C%E8%AF%AD%E8%A8%80%E6%8A%80%E5%B7%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/"/>
      <url>/2023/10/31/Linux%E5%86%85%E6%A0%B8%E5%B8%B8%E7%94%A8C%E8%AF%AD%E8%A8%80%E6%8A%80%E5%B7%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="1-Linuxå†…æ ¸ä¸­å¸¸ç”¨Cè¯­è¨€æŠ€å·§"><a href="#1-Linuxå†…æ ¸ä¸­å¸¸ç”¨Cè¯­è¨€æŠ€å·§" class="headerlink" title="1.Linuxå†…æ ¸ä¸­å¸¸ç”¨Cè¯­è¨€æŠ€å·§"></a>1.Linuxå†…æ ¸ä¸­å¸¸ç”¨Cè¯­è¨€æŠ€å·§</h2><p>GCCçš„Cç¼–è¯‘å™¨å¯¹Cè¯­è¨€è¿›è¡Œäº†å¾ˆå¤šæ‰©å……ï¼Œç§°ä¸ºGUN Cè¯­è¨€ã€‚</p><h3 id="1-1è¯­å¥è¡¨è¾¾å¼"><a href="#1-1è¯­å¥è¡¨è¾¾å¼" class="headerlink" title="1.1è¯­å¥è¡¨è¾¾å¼"></a>1.1è¯­å¥è¡¨è¾¾å¼</h3><p>è¯­å¥è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨å¾ªç¯ã€è·³è½¬å’Œå±€éƒ¨å˜é‡ï¼Œé€šå¸¸ç”¨åœ¨å®å®šä¹‰ä¸­ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name function">max</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token comment">/***è°ƒç”¨ max(i++, j++),å®çš„ä½œç”¨æ˜¯æ–‡æœ¬æ›¿æ¢å¾—åˆ°(i++) &gt; (j++) ? (i++) : (j++)åœ¨æ¡ä»¶éƒ¨åˆ†è¢«è®¡ç®—ä¸€æ¬¡ï¼Œç»“æœéƒ¨åˆ†è¿˜è¢«è®¡ç®—ä¸€æ¬¡ï¼Œä¼šå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚***/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“çŸ¥é“abç±»å‹æ—¶çš„å†™æ³•</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">maxint</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>  <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">int</span> _a<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> _b<span class="token operator">=</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>  <span class="token expression">_a <span class="token operator">&gt;</span> _b <span class="token operator">?</span> _a <span class="token operator">:</span> _b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸çŸ¥é“abç±»å‹, <code>typeof</code>å¯ä»¥æ„é€ æ–°çš„ç±»å‹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">&lt;</span>include<span class="token operator">/</span>linux<span class="token operator">/</span>kernel<span class="token punctuation">.</span>h<span class="token operator">&gt;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">min</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span><span class="token punctuation">\</span>  <span class="token expression"><span class="token keyword">typeof</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> _min1 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>  <span class="token expression"><span class="token keyword">typeof</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> _min2 <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>  <span class="token expression"><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>_min1 <span class="token operator">==</span> <span class="token operator">&amp;</span>_min2<span class="token punctuation">)</span><span class="token punctuation">;</span> \  </span></span>  <span class="token comment">/***  &amp;_min1å¾—åˆ°min1çš„æŒ‡é’ˆï¼Œç¼–è¯‘æ—¶ï¼Œå¦‚æœä¸¤ä¸ªæŒ‡é’ˆç±»å‹ä¸åŒä¼šæŠ¥é”™ã€‚  voidåªæ˜¯æƒ³åˆ©ç”¨è¯­å¥è¡¨è¾¾å¼è¿›è¡Œç±»å‹æ£€æŸ¥,è€Œä¸éœ€è¦æ¯”è¾ƒçš„ç»“æœã€‚  ä¸ºä»€ä¹ˆè¦æ¯”è¾ƒåœ°å€ï¼Œä¸ç›´æ¥æ¯”è¾ƒå€¼ï¼Ÿ  claudeçš„å›ç­”ï¼š  å³ä½¿ç¼–è¯‘å™¨å¯¹_min1å’Œ_min2åšä¼˜åŒ–,è½¬æ¢ä¸ºå¯„å­˜å™¨å˜é‡,æŒ‡é’ˆåœ°å€æ¯”è¾ƒä»å¯ç”¨ï¼›  æŒ‡é’ˆåœ°å€æ¯”è¾ƒä¹Ÿå¯ä»¥ä½œç”¨äºç»“æ„ä½“ç­‰éåŸºæœ¬ç±»å‹ã€‚  ***/</span>  _min1 <span class="token operator">&lt;</span> _min2 <span class="token operator">?</span> _min1 <span class="token operator">:</span> _min2<span class="token punctuation">;</span> \<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2æ ‡å·å…ƒç´ "><a href="#1-2æ ‡å·å…ƒç´ " class="headerlink" title="1.2æ ‡å·å…ƒç´ "></a>1.2æ ‡å·å…ƒç´ </h3><p>æ ‡å‡†Cè¯­è¨€è¦æ±‚æ•°ç»„æˆ–è€…ç»“æ„ä½“åˆå§‹åŒ–å¿…é¡»å›ºå®šé¡ºåºã€‚ä½†GUN Cå¯ä»¥æŒ‡å®šè¦åˆå§‹åŒ–çš„ï¼Œæ²¡æœ‰åˆå§‹åŒ–çš„ä¸º0æˆ–è€…NULLï¼Œè€Œä¸”é¡ºåºå¯ä»¥ä¸å›ºå®šã€‚ä»¥ä¸‹æ˜¯Cå†…æ ¸ä¸­çš„ä¸€æ®µä»£ç ç¤ºä¾‹:</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">static</span> <span class="token keyword">struct</span> <span class="token class-name">usb_driver</span> usb_storage_driver <span class="token operator">=</span> <span class="token punctuation">{</span>       <span class="token punctuation">.</span>owner         <span class="token operator">=</span> THIS_MODULE<span class="token punctuation">,</span>        <span class="token punctuation">.</span>name          <span class="token operator">=</span> <span class="token string">"usb-storage"</span><span class="token punctuation">,</span>         <span class="token punctuation">.</span>probe         <span class="token operator">=</span> storage_probe<span class="token punctuation">,</span>        <span class="token punctuation">.</span>disconnect    <span class="token operator">=</span> storage_disconnect<span class="token punctuation">,</span>        <span class="token punctuation">.</span>id_table      <span class="token operator">=</span> storage_usb_ids<span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3å¯å˜å‚æ•°çš„å®"><a href="#1-3å¯å˜å‚æ•°çš„å®" class="headerlink" title="1.3å¯å˜å‚æ•°çš„å®"></a>1.3å¯å˜å‚æ•°çš„å®</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">&lt;</span>include<span class="token operator">/</span>linux<span class="token operator">/</span>printk<span class="token punctuation">.</span>h<span class="token operator">&gt;</span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name function">pr_debug</span><span class="token expression"><span class="token punctuation">(</span>fmt<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> \ </span><span class="token comment">//...æ˜¯å¯å˜åŒ–å‚æ•°</span></span>  <span class="token function">dynamic_pr_debug</span><span class="token punctuation">(</span>fmt<span class="token punctuation">,</span> ##__VA_ARGS__<span class="token punctuation">)</span> <span class="token comment">//__VA_ARGS__ç¼–è¯‘å™¨ä¿ç•™å­—æ®µ</span><span class="token comment">//é¢„å¤„ç†æ—¶å‚æ•°ä¼ ç»™å®ï¼Œè°ƒç”¨å®æ—¶ä¼ ç»™dynamic_pr_debugå‡½æ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-4å‡½æ•°å±æ€§ã€å˜é‡å±æ€§æ ¸ç±»å‹å±æ€§"><a href="#1-4å‡½æ•°å±æ€§ã€å˜é‡å±æ€§æ ¸ç±»å‹å±æ€§" class="headerlink" title="1.4å‡½æ•°å±æ€§ã€å˜é‡å±æ€§æ ¸ç±»å‹å±æ€§"></a>1.4å‡½æ•°å±æ€§ã€å˜é‡å±æ€§æ ¸ç±»å‹å±æ€§</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//å±æ€§è¯­æ³•æ ¼å¼</span><span class="token keyword">__attribute__</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>attribute<span class="token operator">-</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">void</span> <span class="token keyword">__attribute__</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>noreturn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">die</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å‘Šè¯‰dieå‡½æ•°ï¼Œä»ä¸è¿”å›å€¼</span><span class="token keyword">static</span> <span class="token keyword">inline</span> u32 __attribute_const__ <span class="token function">read_cpuid_cachetype</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token function">read_cpuid</span><span class="token punctuation">(</span>CTR_EL0<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">//åªè°ƒç”¨å‡½æ•°ä¸€æ¬¡ï¼Œå†æ¬¡è°ƒç”¨æ—¶è¿”å›ç¬¬ä¸€æ¬¡ç»“æœå°±è¡Œ</span><span class="token keyword">struct</span> <span class="token class-name">xx</span><span class="token punctuation">{</span>  <span class="token comment">//è¡¨ç¤ºå˜é‡æˆ–è€…ç»“æ„ä½“æˆå‘˜çš„æœ€å°å¯¹é½æ ¼å¼</span>  <span class="token comment">//ä»¥8å­—èŠ‚å¯¹é½æ–¹å¼åˆ†é…xxæ•°æ®ç»“æ„</span><span class="token punctuation">}</span><span class="token function">__aligned</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸è¿‡è¿˜æœ‰æ›´å¤æ‚çš„å‡½æ•°å±æ€§ã€‚å‡½æ•°å±æ€§çš„å®å®šä¹‰åœ¨<code>compiler-gcc.h</code>ä¸­ï¼Œåœ¨ä½¿ç”¨æ—¶å®ƒä»¬ä¸ä¸€å®šéƒ½æœ‰<code>__attribute</code>å­—ç¬¦ä¸²åœ¨ã€‚</p><h3 id="1-5å†…å»ºå‡½æ•°"><a href="#1-5å†…å»ºå‡½æ•°" class="headerlink" title="1.5å†…å»ºå‡½æ•°"></a>1.5å†…å»ºå‡½æ•°</h3><p>ä»¥<code>_builtin</code>ä½œä¸ºå‰ç¼€ï¼ˆå½“ç„¶æœ‰çš„å·²ç»è¢«å®å®šä¹‰è¿‡äº†ï¼‰</p><ul><li><code>__builtin_constant_p(x)</code>åˆ¤æ–­åœ¨ç¼–è¯‘æ—¶æ˜¯å¦å°±èƒ½ç¡®å®šä¸ºå¸¸é‡ï¼Œè¿”å›1æˆ–0</li><li><code>__builtin_expect(exp, c)</code>è¡¨ç¤º<code>exp==c</code>çš„æ¦‚ç‡å¾ˆå¤§ï¼Œå¼•å¯¼GCCåšæ¡ä»¶åˆ†æ”¯é¢„æµ‹ï¼Œæé«˜CPUé¢„å–æŒ‡ä»¤æ­£ç¡®ç‡<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LIKELY</span><span class="token expression"><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token function">__builtin_expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> </span><span class="token comment">//xå¾ˆå¯èƒ½ä¸ºçœŸ</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">UNLIKELY</span><span class="token expression"><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token function">__builtin_expect</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> </span><span class="token comment">//xå¾ˆå¯èƒ½ä¸ºå‡</span></span><span class="token comment">//!!æ˜¯ä¸ºäº†ç¡®ä¿æ˜¯boolå€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><code>__builtin_prefetch(const void *addr, int rw, int locality)</code>ä¸»åŠ¨é¢„å–ï¼Œåœ¨ä½¿ç”¨<code>addr</code>çš„å€¼ä¹‹å‰æŠŠè¿™ä¸ªå€¼åŠ å…¥åˆ°cacheï¼ŒrwæŒ‡è¯»å†™å±æ€§ï¼ŒlocalityæŒ‡å±€éƒ¨æ€§å¼ºå¼±<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">prefetch</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token function">__builtin_prefetch</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">prefetchw</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token function">__builtin_prefetch</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h3 id="1-6-UL"><a href="#1-6-UL" class="headerlink" title="1.6 UL"></a>1.6 UL</h3><p>åœ¨æ•°å­—å®šä¹‰æ—¶åœ¨åé¢åŠ ä¸Š<code>UL</code>åç¼€ï¼Œè¿™ä¼šæŠŠ<code>int</code>ç±»å‹å¼ºåˆ¶è½¬åŒ–ä¸º<code>unsigned long</code>ï¼Œé˜²æ­¢ä¸¤ä¸ª<code>int</code>ç›¸åŠ æº¢å‡ºã€‚</p><h2 id="2-Linuxå†…æ ¸ä¸­å¸¸ç”¨æ•°æ®ç»“æ„å’Œç®—æ³•"><a href="#2-Linuxå†…æ ¸ä¸­å¸¸ç”¨æ•°æ®ç»“æ„å’Œç®—æ³•" class="headerlink" title="2.Linuxå†…æ ¸ä¸­å¸¸ç”¨æ•°æ®ç»“æ„å’Œç®—æ³•"></a>2.Linuxå†…æ ¸ä¸­å¸¸ç”¨æ•°æ®ç»“æ„å’Œç®—æ³•</h2><p>Linuxå†…æ ¸æœ‰çš„æ•°æ®ç»“æ„éå¸¸å¸¸ç”¨å› æ­¤å°è£…å¥½äº†ä¸€ç³»åˆ—çš„æ•°æ®ç»“æ„ä»¥åŠå’Œç›¸å…³å‡½æ•°æ“ä½œã€‚</p><h3 id="2-1é“¾è¡¨"><a href="#2-1é“¾è¡¨" class="headerlink" title="2.1é“¾è¡¨"></a>2.1é“¾è¡¨</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">&lt;</span>include<span class="token operator">/</span>linux<span class="token operator">/</span>types<span class="token punctuation">.</span>h<span class="token operator">&gt;</span><span class="token keyword">struct</span> <span class="token class-name">list_head</span><span class="token punctuation">{</span>  <span class="token keyword">struct</span> <span class="token class-name">list_head</span> <span class="token operator">*</span>next<span class="token punctuation">,</span> <span class="token operator">*</span>prev<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºé“¾è¡¨çš„æ•°æ®åŒºæ˜¯å„ä¸ç›¸åŒçš„ï¼Œæ‰€ä»¥æ˜¯çº¯é“¾è¡¨å°è£…æ²¡æœ‰æ•°æ®åŒºã€‚ä½¿ç”¨æ–¹å¼æ˜¯åµŒå…¥åˆ°å…¶ä»–æ•°æ®ç»“æ„ï¼Œå¦‚åœ¨<code>page</code>ä¸­åµŒå…¥lrué“¾è¡¨çš„èŠ‚ç‚¹è¿™æ ·å°±åŠ å…¥äº†LRUé“¾è¡¨ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">&lt;</span>include<span class="token operator">/</span>linux<span class="token operator">/</span>mm_types<span class="token punctuation">.</span>h<span class="token operator">&gt;</span><span class="token keyword">struct</span> <span class="token class-name">page</span><span class="token punctuation">{</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token keyword">struct</span> <span class="token class-name">list_head</span> lru<span class="token punctuation">;</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é“¾è¡¨çš„åˆå§‹åŒ–æ˜¯å°†ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘è‡ªèº«</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">&lt;</span>include<span class="token operator">/</span>linux<span class="token operator">/</span>list<span class="token punctuation">.</span>h<span class="token operator">&gt;</span><span class="token comment">//åŠ¨æ€åˆå§‹åŒ–</span><span class="token keyword">static</span> <span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">INIT_LIST_HEAD</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">list_head</span> <span class="token operator">*</span>list<span class="token punctuation">)</span><span class="token punctuation">{</span>  list<span class="token operator">-&gt;</span>next <span class="token operator">=</span> list<span class="token punctuation">;</span>  list<span class="token operator">-&gt;</span>next <span class="token operator">=</span> list<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//é™æ€åˆå§‹åŒ–ï¼Œå®å®šä¹‰çš„å±•å¼€ç»“æœæ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæŒ‡é’ˆçš„ç»“æ„ï¼Œè¿™ä¸¤ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘nameè‡ªèº«</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LIST_HEAD_INIT</span><span class="token expression"><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span> </span></span><span class="token comment">//ç„¶åæŠŠä¸Šä¸ªç»“æ„ä½“å°è£…</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LIST_HEAD</span><span class="token expression"><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">struct</span> <span class="token class-name">list_head</span> name <span class="token operator">=</span> <span class="token function">LIST_HEAD_INIT</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>inlineæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œé€šå¸¸ç”¨äºæŒ‡ç¤ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°†å‡½æ•°çš„ä»£ç æ’å…¥åˆ°å‡½æ•°è°ƒç”¨çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯åƒæ™®é€šå‡½æ•°é‚£æ ·è¿›è¡Œå‡½æ•°è°ƒç”¨ã€‚å› ä¸ºå‡½æ•°è°ƒç”¨é€šå¸¸æ¶‰åŠä¸€å®šçš„å¼€é”€ï¼Œå¦‚å‚æ•°ä¼ é€’ã€æ ˆå¸§è®¾ç½®ç­‰ï¼Œè€Œinlineå‡½æ•°å¯ä»¥å‡å°‘è¿™äº›å¼€é”€ã€‚è¿™æ ·çš„å‡½æ•°è¢«å£°æ˜ä¸ºå†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•åœ¨å‡½æ•°è°ƒç”¨çš„åœ°æ–¹ç›´æ¥æ’å…¥å‡½æ•°ä½“çš„ä»£ç ã€‚è¿™å¯ä»¥æé«˜å‡½æ•°è°ƒç”¨çš„æ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå°è€Œç®€å•çš„å‡½æ•°ã€‚å¦‚æœå‡½æ•°ä½“è¿‡äºå¤æ‚ï¼Œå†…è”å¯èƒ½ä¼šå¯¼è‡´ä»£ç è†¨èƒ€ï¼Œåè€Œé™ä½æ€§èƒ½ã€‚ä¸è¿‡ï¼Œæœ€ç»ˆæ˜¯å¦å†…è”å‡½æ•°ç”±ç¼–è¯‘å™¨å†³å®šã€‚</p></blockquote><p>æ·»åŠ èŠ‚ç‚¹åˆ°é“¾è¡¨</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">&lt;</span>include<span class="token operator">/</span>linux<span class="token operator">/</span>list<span class="token punctuation">.</span>h<span class="token operator">&gt;</span><span class="token comment">//æ·»åŠ åˆ°è¡¨å¤´</span><span class="token keyword">void</span> <span class="token function">list_add</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">list_head</span> <span class="token operator">*</span>new<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">list_head</span> <span class="token operator">*</span>head<span class="token punctuation">)</span><span class="token comment">//æ·»åŠ åˆ°è¡¨å°¾</span><span class="token keyword">void</span> <span class="token function">list_add_tail</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">list_head</span> <span class="token operator">*</span>new<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">list_head</span> <span class="token operator">*</span>head<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éå†èŠ‚ç‚¹æ¥å£</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">list_for_each</span><span class="token expression"><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> head<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>  <span class="token expression"><span class="token keyword">for</span> <span class="token punctuation">(</span>pos<span class="token operator">=</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token operator">-&gt;</span>next<span class="token punctuation">;</span> pos<span class="token operator">!=</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span> pos<span class="token operator">=</span>pos<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä½†æ˜¯ä¸»è¦è¿˜æ˜¯è®¿é—®è¿™ä¸ªèŠ‚ç‚¹åµŒå…¥çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚å‰é¢æåˆ°çš„pageç»“æ„ä½“é‡Œçš„å…¶ä»–æˆå‘˜è¯¥æ€ä¹ˆåŠï¼Ÿ</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">list_entry</span><span class="token expression"><span class="token punctuation">(</span>ptr<span class="token punctuation">,</span> type<span class="token punctuation">,</span> member<span class="token punctuation">)</span> <span class="token function">container_of</span><span class="token punctuation">(</span>ptr<span class="token punctuation">,</span> type<span class="token punctuation">,</span> member<span class="token punctuation">)</span></span></span><span class="token comment">/*container_ofå®å®šä¹‰åœ¨kernelå¤´æ–‡ä»¶ä¸­container_ofå…ˆå°†0åœ°å€è½¬åŒ–ä¸ºtypeç»“æ„ä½“æŒ‡é’ˆï¼Œ_mptr=ptrï¼Œç±»æ¯”pageé‡Œlruæˆå‘˜çš„åœ°å€ï¼ˆå› ä¸ºå‡è®¾åœ¨éå†LRUé“¾è¡¨ï¼‰è·å–memberåœ¨typeç»“æ„ä½“ä¸­çš„åç§»é‡ï¼Œtypeâ€”&gt;memberï¼Œå³pageç»“æ„ä½“ä¸­lruçš„åç§»é‡ptr-offsetå¾—åˆ°è¿™ä¸ªç»“æ„ä½“çš„çœŸå®åœ°å€ï¼Œç°åœ¨è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘pageäº† */</span>  <span class="token comment">//çœŸå®æ¡ˆä¾‹</span> <span class="token operator">&lt;</span>drivers<span class="token operator">/</span>block<span class="token operator">/</span>osdblk<span class="token punctuation">.</span>c<span class="token operator">&gt;</span> <span class="token comment">//è¿™ä¸ªå‡½æ•°ä¼ å…¥çš„å‚æ•°ä¸ç”¨ç®¡</span> <span class="token keyword">static</span> <span class="token class-name">ssize_t</span> <span class="token function">class_osdblk_list</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">class</span> <span class="token operator">*</span>c<span class="token punctuation">,</span>                <span class="token keyword">struct</span> <span class="token class-name">class_attribute</span> <span class="token operator">*</span>attr<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">list_head</span> <span class="token operator">*</span>tmp<span class="token punctuation">;</span> <span class="token comment">//å½“å‰éå†åˆ°çš„èŠ‚ç‚¹</span>    <span class="token function">list_for_each</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> <span class="token operator">&amp;</span>osdblkdev_list<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">struct</span> <span class="token class-name">osdblk_device</span> <span class="token operator">*</span>osdev<span class="token punctuation">;</span> <span class="token comment">//è¿™ä¸ªé“¾è¡¨æœ¬æ¥ä¸²è¿èµ·æ¥çš„ç»“æ„ä½“</span>      osdev <span class="token operator">=</span> <span class="token function">list_entry</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">osdblk_device</span><span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//é“¾è¡¨çš„ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºosdblk_deviceçš„ç»“æ„ä½“æˆå‘˜ï¼Œåç§°æ˜¯node</span>      <span class="token comment">//ç°åœ¨å¯ä»¥å¯¹æ‹¿åˆ°çš„ç»“æ„ä½“åšä¸€ç³»åˆ—æ“ä½œäº†</span>      n <span class="token operator">+=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>data<span class="token operator">+</span>n<span class="token punctuation">,</span> <span class="token string">"%d %d ..."</span><span class="token punctuation">,</span> osdev<span class="token operator">-&gt;</span>id<span class="token punctuation">,</span> osdev<span class="token operator">-&gt;</span>major<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> n<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2æ— é”ç¯å½¢ç¼“å†²åŒº"><a href="#2-2æ— é”ç¯å½¢ç¼“å†²åŒº" class="headerlink" title="2.2æ— é”ç¯å½¢ç¼“å†²åŒº"></a>2.2æ— é”ç¯å½¢ç¼“å†²åŒº</h3><p>ç¯å½¢ç¼“å†²åŒºå±äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹çš„ç»å…¸ç®—æ³•ï¼Œå¥½å¤„æ˜¯å½“ä¸€ä¸ªå…ƒç´ è¢«æ¶ˆè€—åï¼Œå…¶ä½™å…ƒç´ ä¸éœ€è¦ç§»åŠ¨å­˜å‚¨ä½ç½®ï¼Œå‡å°‘å¤åˆ¶æ“ä½œã€‚é€šè¿‡ç§»åŠ¨è¯»æŒ‡é’ˆå’Œå†™æŒ‡é’ˆå®ç°ç¼“å†²åŒºæ•°æ®çš„è¯»å–å’Œå†™å…¥ã€‚å†…æ ¸ä½¿ç”¨KFIFOæ— é”ç¯å½¢ç¼“å†²åŒºâ€œfirst in first outâ€.</p><p>åˆ›å»ºKFIFO</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token operator">&lt;</span>include<span class="token operator">/</span>linux<span class="token operator">/</span>kfifo<span class="token punctuation">.</span>h<span class="token operator">&gt;</span><span class="token comment">//åŠ¨æ€åˆ†é…</span><span class="token keyword">int</span> <span class="token function">kfifo_alloc</span><span class="token punctuation">(</span>fifo<span class="token punctuation">,</span> size<span class="token punctuation">,</span> gfp_mask<span class="token punctuation">)</span><span class="token comment">/*åˆ›å»ºå¤§å°ä¸ºsizeçš„ç¯å½¢ç¼“å†²åŒºfifoæŒ‡å‘kfifoæ•°æ®ç»“æ„gfp_maskæ˜¯å†…å­˜åˆ†é…çš„æ©ç  */</span><span class="token comment">//é™æ€åˆ†é…</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">DEFINE_KFIFO</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">,</span> type<span class="token punctuation">,</span> size<span class="token punctuation">)</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">INIT_KFIFO</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¥åˆ—</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">kfifo_in</span><span class="token punctuation">(</span>fifo<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token comment">//å°†bufæŒ‡é’ˆæŒ‡å‘çš„nä¸ªå…ƒç´ å¤åˆ¶åˆ°ç¯å½¢ç¼“å†²åŒº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å‡ºåˆ—</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">kfifo_out</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> n<span class="token punctuation">)</span></span></span><span class="token comment">//ä»fifoå¤åˆ¶nä¸ªåˆ°buf</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è·å–ç¼“å†²åŒºå¤§å°</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">kfifo_size</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">)</span> </span><span class="token comment">//ç¼“å†²åŒºå¤§å°</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">kfifo_len</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">)</span>  </span><span class="token comment">//æœ‰å¤šå°‘æœ‰æ•ˆæ•°æ®å…ƒç´ </span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">kfifo_is_empty</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">)</span> </span><span class="token comment">//æ˜¯å¦ä¸ºç©º</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">kfifo_is_full</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">)</span> </span><span class="token comment">//æ˜¯å¦å·²æ»¡</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸ç”¨æˆ·ç©ºé—´äº¤äº’</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">kfifo_from_user</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">,</span> from<span class="token punctuation">,</span> len<span class="token punctuation">,</span> copied<span class="token punctuation">)</span></span></span><span class="token comment">//å°†fromæŒ‡å‘çš„ç”¨æˆ·ç©ºé—´ä¸­lenä¸ªæ•°æ®å…ƒç´ å¤åˆ¶åˆ°KFIFOä¸­ï¼Œæœ€åä¸€ä¸ªå‚æ•°copiedè¡¨ç¤ºæˆåŠŸå¤åˆ¶äº†å‡ ä¸ªå…ƒç´ </span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">kfifo_to_user</span><span class="token expression"><span class="token punctuation">(</span>fifo<span class="token punctuation">,</span> to<span class="token punctuation">,</span> len<span class="token punctuation">,</span> copied<span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="2-3çº¢é»‘æ ‘"><a href="#2-3çº¢é»‘æ ‘" class="headerlink" title="2.3çº¢é»‘æ ‘"></a>2.3çº¢é»‘æ ‘</h3><p>ä¼˜ç‚¹æ˜¯æ‰€æœ‰é‡è¦æ“ä½œå¯ä»¥åœ¨ $O(log_2n)$çš„æ—¶é—´å†…å®Œæˆã€‚<br><a href="https://www.jianshu.com/p/e136ec79235c">è¿™æ˜¯ç®—æ³•ä»‹ç»</a><br><a href="https://www.cnblogs.com/hellokitty2/p/15362630.html">è¿™æ˜¯linuxæ–‡æ¡£é‡ŒDocumentation/Rbtree.txtçº¢é»‘æ ‘çš„ç¿»è¯‘</a></p><hr><blockquote><p>å¤§éƒ¨åˆ†æ˜¯ã€Šå¥”è·‘å§Linuxå†…æ ¸å…¥é—¨ç¯‡ï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹ç¬¬äºŒç« çš„é˜…è¯»ç¬”è®°ã€‚è°¢è°¢æ¬£æ¬£å¸®å¿™ç­”ç–‘</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C syntax </tag>
            
            <tag> Data Structure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Direct Access, High-Performance Memory Disaggregation with DIRECTCXL</title>
      <link href="/2023/10/29/Direct-Access-High-Performance-Memory-Disaggregation-with-DIRECTCXL/"/>
      <url>/2023/10/29/Direct-Access-High-Performance-Memory-Disaggregation-with-DIRECTCXL/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary no-icon"><ul><li>æ–‡ç« æ¥è‡ª2022 USENIX Annual Technical Conference,CCFA</li><li>Direct Access, High-Performance Memory Disaggregation with DIRECTCXL</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li> Donghyun Gouk, Sangwon Lee, Miryeong Kwon, Myoungsoo Jung. KAIST CAMELab.</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><h3 id="Memory-disaggregationæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Memory-disaggregationæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Memory disaggregationæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Memory disaggregationæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¸€ç§æœåŠ¡å™¨å†…å­˜æ¶æ„,å…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†æœåŠ¡å™¨å†…å­˜ä»è®¡ç®—èŠ‚ç‚¹ï¼ˆCPUï¼‰ä¸Šåˆ†ç¦»å‡ºæ¥,å½¢æˆä¸€ä¸ªå¯ç‹¬ç«‹æ‰©å±•çš„å†…å­˜èµ„æºæ± ,ç„¶åå†æ ¹æ®éœ€è¦å°†å†…å­˜èµ„æºåŠ¨æ€åˆ†é…ç»™å„ä¸ªè®¡ç®—èŠ‚ç‚¹ä½¿ç”¨ã€‚ï¼ˆå°†å†…å­˜èµ„æºè§£è€¦ï¼Œä½¿å¤šä¸ªè®¡ç®—èŠ‚ç‚¹å¯ä»¥è®¿é—®ä¸€ä¸ªé›†ä¸­å¼å†…å­˜æ± ï¼Œè€Œä¸å¿…ä¾èµ–æœ¬åœ°å†…å­˜ã€‚ï¼‰</p><h3 id="è¿œç«¯ç›´æ¥å†…å­˜è®¿é—®RDMAæ€ä¹ˆåšçš„ï¼Ÿ"><a href="#è¿œç«¯ç›´æ¥å†…å­˜è®¿é—®RDMAæ€ä¹ˆåšçš„ï¼Ÿ" class="headerlink" title="è¿œç«¯ç›´æ¥å†…å­˜è®¿é—®RDMAæ€ä¹ˆåšçš„ï¼Ÿ"></a>è¿œç«¯ç›´æ¥å†…å­˜è®¿é—®RDMAæ€ä¹ˆåšçš„ï¼Ÿ</h3><p>å¯¹äºåç«¯ç½‘ç»œæ§åˆ¶ï¼Œå¤§å¤šæ•°åˆ†è§£å·¥ä½œé‡‡ç”¨è¿œç¨‹ç›´æ¥å†…å­˜è®¿é—®ï¼ˆRDMAï¼‰[4,5,11â€“13,15,16]æˆ–ç±»ä¼¼çš„å®šåˆ¶DMAåè®®[7,9,10]ã€‚å›¾1æ˜¾ç¤ºäº†RDMAå¼æ•°æ®ä¼ è¾“ï¼ˆå•ä¾§RDMAï¼‰çš„å·¥ä½œåŸç†ã€‚å¯¹äºä¸»æœºå’Œå†…å­˜èŠ‚ç‚¹ç«¯ï¼ŒRDMAéƒ½éœ€è¦RDMA NICï¼ˆRNIC[23]ï¼‰ç­‰ç¡¬ä»¶æ”¯æŒï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯å°½å¯èƒ½æ¶ˆé™¤ç½‘ç»œè½¯ä»¶å †æ ˆçš„å¹²é¢„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/9128ea4c40a043d9bd581017c6274724.png"><br>ä¸ºäº†åœ¨å®ƒä»¬ä¹‹é—´ç§»åŠ¨æ•°æ®ï¼Œæ¯ä¸€ä¾§çš„è¿›ç¨‹é¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå­˜å‚¨åŒºåŸŸï¼ˆMRï¼‰å¹¶è®©MRåˆ°è¾¾åº•å±‚RNICã€‚åœ¨æ­¤æœŸé—´ï¼ŒRNICé©±åŠ¨ç¨‹åºæ£€æŸ¥ä¸MRé¡µé¢å…³è”çš„æ‰€æœ‰ç‰©ç†åœ°å€ï¼Œå¹¶å°†å®ƒä»¬æ³¨å†Œåˆ°RNICçš„å†…å­˜è½¬æ¢è¡¨ï¼ˆMTTï¼‰ã€‚</p><p>ç”±äºè¿™ä¸¤ä¸ªRNICè¿˜åœ¨åˆå§‹åŒ–æ—¶äº¤æ¢å…¶MRçš„è™šæ‹Ÿåœ°å€ï¼Œå› æ­¤ä¸»æœºå¯ä»¥ç®€å•åœ°å°†å†…å­˜èŠ‚ç‚¹çš„ç›®æ ‡è™šæ‹Ÿåœ°å€ä¸æ•°æ®ä¸€èµ·å‘é€ä»¥è¿›è¡Œå†™å…¥ã€‚ç„¶åï¼Œè¿œç¨‹èŠ‚ç‚¹é€šè¿‡å‚è€ƒå…¶MTTæ¥è½¬æ¢åœ°å€ï¼Œå¹¶å°†ä¼ å…¥æ•°æ®å¤åˆ¶åˆ°MRçš„ç›®æ ‡ä½ç½®ã€‚é€šè¿‡RDMAçš„è¯»å–ä¹Ÿå¯ä»¥ä»¥ç±»ä¼¼çš„æ–¹å¼æ‰§è¡Œã€‚è¯·æ³¨æ„ï¼Œé™¤äº†å†…å­˜å¤åˆ¶æ“ä½œï¼ˆå¯¹äºDMAï¼‰ä¹‹å¤–ï¼Œæ¯ä¸€æ–¹çš„åº”ç”¨ç¨‹åºè¿˜éœ€è¦å‡†å¤‡æ•°æ®åˆ°MRä¸­æˆ–ä»MRä¸­æ£€ç´¢æ•°æ®ä»¥è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œä»è€Œåœ¨æœ¬åœ°DRAMä¸­å¼•å…¥é¢å¤–çš„æ•°æ®å‰¯æœ¬[24]ã€‚</p><p>ï¼ˆè¯´åˆ°åº•å°±æ˜¯éœ€è¦å¤åˆ¶å¾ˆå¤šæ¬¡å§ï¼‰</p><h3 id="åŸºäºé¡µé¢çš„å†…å­˜æ± â€”â€”SWAP"><a href="#åŸºäºé¡µé¢çš„å†…å­˜æ± â€”â€”SWAP" class="headerlink" title="åŸºäºé¡µé¢çš„å†…å­˜æ± â€”â€”SWAP"></a>åŸºäºé¡µé¢çš„å†…å­˜æ± â€”â€”SWAP</h3><p>åŸºäºé¡µé¢çš„å†…å­˜åˆ†è§£[4-10]é€šè¿‡ä¾èµ–è™šæ‹Ÿå†…å­˜ç³»ç»Ÿå®ç°å†…å­˜å¼¹æ€§ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ç§æ–¹æ³•ä¼šåœ¨å‡ºç°ç¼ºé¡µå¼‚å¸¸æ—¶å°†æ•°æ®äº¤æ¢åˆ°è¿œç¨‹å†…å­˜èŠ‚ç‚¹è€Œä¸æ˜¯åº•å±‚å­˜å‚¨ã€‚ä¸»æœºkswapdä¸‹çš„åˆ†è§£é©±åŠ¨ç¨‹åºå°†ä¼ å…¥çš„å—åœ°å€è½¬æ¢ä¸ºå†…å­˜èŠ‚ç‚¹çš„è™šæ‹Ÿåœ°å€ï¼Œç›®æ ‡é¡µé¢å¤åˆ¶åˆ°RNICçš„MRå¹¶å‘å†…å­˜èŠ‚ç‚¹å‘å‡ºç›¸åº”çš„RDMAè¯·æ±‚ã€‚</p><p>å½“å¯¹è¿œç¨‹å†…å­˜çš„è¯·æ±‚è¿‡å¤šæ—¶ï¼Œç”±äºé¡µé¢é”™è¯¯å¤„ç†ã€I/O æ”¾å¤§å’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼ŒåŸºäºé¡µé¢çš„ç³»ç»Ÿä¼šé­å—æ€§èƒ½ä¸‹é™[16]ã€‚</p><h3 id="åŸºäºå¯¹è±¡çš„å­˜å‚¨æ± â€”â€”KVS"><a href="#åŸºäºå¯¹è±¡çš„å­˜å‚¨æ± â€”â€”KVS" class="headerlink" title="åŸºäºå¯¹è±¡çš„å­˜å‚¨æ± â€”â€”KVS"></a>åŸºäºå¯¹è±¡çš„å­˜å‚¨æ± â€”â€”KVS</h3><p>åŸºäºå¯¹è±¡çš„å†…å­˜åˆ†è§£ç³»ç»Ÿ[11-16]ä½¿ç”¨è‡ªå·±çš„æ•°æ®åº“ï¼ˆä¾‹å¦‚é”®å€¼å­˜å‚¨ï¼ˆKVSï¼‰ï¼‰ç›´æ¥å¹²é¢„RDMAæ•°æ®ä¼ è¾“ã€‚åŸºäºå¯¹è±¡çš„ç³»ç»Ÿä¸ºä¸»æœºå’Œå†…å­˜èŠ‚ç‚¹ç«¯åˆ›å»ºä¸¤ä¸ªMRï¼Œæ¯ä¸ªMRå¤„ç†ç¼“å†²åŒºæ•°æ®å’Œæäº¤/å®Œæˆé˜Ÿåˆ—ï¼ˆSQ/CQï¼‰ã€‚é‡‡ç”¨KVå“ˆå¸Œè¡¨ï¼Œå…¶æ¡ç›®æŒ‡å‘ç›¸åº”çš„ï¼ˆè¿œç¨‹ï¼‰å†…å­˜å¯¹è±¡ã€‚æ¯å½“åº”ç”¨ç¨‹åºå‘å‡ºPutï¼ˆæˆ–Getï¼‰è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿä¼šå°†ç›¸åº”çš„å€¼æ”¾å…¥ä¸»æœºçš„ç¼“å†²åŒºMRä¸­ï¼Œå¹¶é€šè¿‡RDMAå†™å…¥SQ MRçš„è¿œç¨‹ç«¯æ¥æäº¤å®ƒã€‚ç”±äºå†…å­˜èŠ‚ç‚¹ä¸æ–­è½®è¯¢SQ MRï¼Œå› æ­¤å®ƒå¯ä»¥è¯†åˆ«è¯¥è¯·æ±‚ã€‚ç„¶åï¼Œå†…å­˜èŠ‚ç‚¹é€šè¿‡RDMAå°†å€¼å¤åˆ¶åˆ°å…¶ç¼“å†²åŒºMRï¼Œå¹¶é€šè¿‡å†™å…¥ä¸»æœºçš„CQ MRæ¥å®Œæˆè¯·æ±‚ã€‚</p><p>è¿™ç§æ–¹æ³•å—åˆ°é™åˆ¶ï¼Œå› ä¸ºå®ƒéœ€è¦å¯¹é—ç•™åº”ç”¨ç¨‹åºè¿›è¡Œå¤§é‡çš„æºä»£ç çº§ä¿®æ”¹ã€‚è€Œä¸”è®¿é—®ä¸æ˜¯ç›´æ¥çš„ï¼Œæ˜¯é€šè¿‡æäº¤å®Œæˆé˜Ÿåˆ—é—´æ¥äº¤äº’çš„ã€‚</p><h3 id="CXLä¼˜åŠ¿"><a href="#CXLä¼˜åŠ¿" class="headerlink" title="CXLä¼˜åŠ¿"></a>CXLä¼˜åŠ¿</h3><p>FlexBusæŒ‡çš„æ˜¯CXLå®šä¹‰çš„äº’è¿æ¶æ„ã€‚CXL.memå…è®¸ä¸»æœºé€šè¿‡PCIeæ€»çº¿ç›´æ¥è®¿é—®åº•å±‚å†…å­˜,è€Œä¸æ˜¯é€šè¿‡åƒPCIeè¿™æ ·çš„å¤–è®¾äº’è¿åè®®ã€‚ï¼ˆCXLåŸºäºPCI Express 5.0ç‰©ç†å±‚ï¼Œé€Ÿåº¦é«˜è¾¾ 32GT/sã€‚ï¼‰</p><p>CXLæœ€åˆçš„è®¾è®¡ç›®çš„æ˜¯å®ç°è·¨ä¸åŒå¤„ç†å™¨å¤åˆä½“çš„å¼‚æ„ç®¡ç†çš„å“è¶Šæ€§ï¼Œä½†ä¸šç•Œå’Œå­¦æœ¯ç•Œéƒ½é¢„è®¡å…¶ç¼“å­˜ä¸€è‡´æ€§èƒ½åŠ›å¯ä»¥å¸®åŠ©æé«˜å†…å­˜åˆ©ç”¨ç‡å¹¶ä»¥ä½å»¶è¿Ÿç¼“è§£å†…å­˜è¿‡åº¦é…ç½®[20-22]ã€‚</p><h2 id="3-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#3-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="3. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>3. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>æˆ‘ä»¬å¯ä»¥æ ¹æ®ç°æœ‰çš„å†…å­˜åˆ†è§£è¿è¡Œæ—¶å¦‚ä½•ç®¡ç†ä¸»æœºå’Œå†…å­˜æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ï¼Œå°†å…¶å¤§è‡´åˆ†ä¸ºä¸¤ç§ä¸åŒçš„æ–¹æ³•ï¼šiï¼‰åŸºäºé¡µé¢å’Œiiï¼‰åŸºäºå¯¹è±¡ã€‚åŸºäºé¡µé¢çš„æ–¹æ³•[4-10]åˆ©ç”¨è™šæ‹Ÿå†…å­˜æŠ€æœ¯æ¥ä½¿ç”¨åˆ†è§£å†…å­˜ï¼Œè€Œæ— éœ€æ›´æ”¹ä»£ç ã€‚åœ¨å‘ç”Ÿé¡µé¢é”™è¯¯æ—¶ï¼Œå®ƒé€šè¿‡ç½‘ç»œå°†é©»ç•™åœ¨ä¸»æœºæœ¬åœ°DRAMä¸Šçš„é¡µé¢ç¼“å­˜æ•°æ®ä¸è¿œç¨‹å†…å­˜ç³»ç»Ÿè¿›è¡Œäº¤æ¢ã€‚å¦ä¸€æ–¹é¢ï¼ŒåŸºäºå¯¹è±¡çš„æ–¹æ³•ä½¿ç”¨è‡ªå·±çš„æ•°æ®åº“ï¼ˆä¾‹å¦‚é”®å€¼å­˜å‚¨ï¼‰ä»è¿œç¨‹å¤„ç†åˆ†è§£å†…å­˜ï¼Œè€Œä¸æ˜¯åˆ©ç”¨è™šæ‹Ÿå†…å­˜ç³»ç»Ÿ[11-16]ã€‚è¿™ç§æ–¹æ³•å¯ä»¥è§£å†³åœ°å€è½¬æ¢å¸¦æ¥çš„æŒ‘æˆ˜ï¼ˆä¾‹å¦‚ï¼Œé¡µé¢é”™è¯¯ã€ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œå†™æ”¾å¤§ï¼‰ï¼Œä½†å®ƒéœ€è¦å¤§é‡çš„æºä»£ç çº§åˆ«ä¿®æ”¹å’Œæ¥å£æ›´æ”¹ã€‚</p><p>è™½ç„¶æœ‰å¾ˆå¤šå˜ä½“ï¼Œä½†æ‰€æœ‰ç°æœ‰æ–¹æ³•éƒ½éœ€è¦é€šè¿‡è¿œç¨‹ç›´æ¥å†…å­˜è®¿é—®ï¼ˆRDMAï¼‰[4,5,11â€“13,15,16]ï¼ˆæˆ–ç±»ä¼¼çš„ç»†ç²’åº¦ç½‘ç»œæ¥å£ [7,9,10,17]ï¼‰å°†æ•°æ®ä»è¿œç¨‹å†…å­˜ç§»åŠ¨åˆ°ä¸»æœºå†…å­˜ã€‚æ­¤å¤–ï¼Œå®ƒä»¬ç”šè‡³éœ€è¦ç®¡ç†ä¸»æœºæˆ–å†…å­˜èŠ‚ç‚¹ä¸­æœ¬åœ°ç¼“å­˜çš„æ•°æ®ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ•°æ®ç§»åŠ¨åŠå…¶ä¼´éšæ“ä½œï¼ˆä¾‹å¦‚é¡µé¢ç¼“å­˜ç®¡ç†ï¼‰å¼•å…¥äº†å†—ä½™å†…å­˜å‰¯æœ¬å’Œè½¯ä»¶ç»“æ„å¹²é¢„ï¼Œè¿™ä½¿å¾—åˆ†è§£å†…å­˜çš„å»¶è¿Ÿæ¯”æœ¬åœ°DRAMè®¿é—®çš„å»¶è¿Ÿé•¿å¤šä¸ªæ•°é‡çº§ã€‚</p><h2 id="4-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#4-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="4. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>4. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>å°½ç®¡CXLå±•ç°å‡ºä»¥ä½æˆæœ¬å’Œé«˜æ€§èƒ½å®ç°å†…å­˜åˆ†è§£çš„å·¨å¤§æ½œåŠ›ï¼Œä½†å®ƒå°šæœªæŠ•å…¥ç”Ÿäº§ï¼Œå¹¶ä¸”æ²¡æœ‰å¹³å°å°†å†…å­˜é›†æˆåˆ°å†…å­˜æ± ç½‘ç»œä¸­ã€‚åŸºäºCXLçš„å†…å­˜åˆ†è§£ä¸ç›´æ¥è®¿é—®ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><h3 id="5-1æ¶æ„è®¾è®¡"><a href="#5-1æ¶æ„è®¾è®¡" class="headerlink" title="5.1æ¶æ„è®¾è®¡"></a>5.1æ¶æ„è®¾è®¡</h3><p>CXLè®¾å¤‡è®¾è®¡å’Œå®ç°ä¸ºæ¯ä¸ªæ¨¡å—éƒ½èƒ½å¤Ÿæ‹¥æœ‰è®¸å¤šå¸¦æœ‰è‡ªå·±çš„ç¡¬ä»¶æ§åˆ¶å™¨çš„DRAM DIMMã€‚æˆ‘ä»¬çš„CXLè®¾å¤‡é‡‡ç”¨å¤šä¸ªDRAMæ§åˆ¶å™¨ï¼Œé€šè¿‡ä¼ ç»ŸDDRæ¥å£è¿æ¥DRAM DIMMã€‚ç„¶åï¼Œå…¶CXLæ§åˆ¶å™¨é€šè¿‡è®¸å¤šPCIeé€šé“å°†å†…éƒ¨DRAMæ¨¡å—æš´éœ²ç»™FlexBusã€‚</p><p>åœ¨å½“å‰æ¶æ„ä¸­ï¼Œè®¾å¤‡çš„CXLæ§åˆ¶å™¨è§£æä¼ å…¥çš„åŸºäºPCIeçš„CXLæ•°æ®åŒ…ï¼ˆç§°ä¸ºCXL flitsï¼‰ï¼Œå°†å…¶ä¿¡æ¯ï¼ˆåœ°å€å’Œé•¿åº¦ï¼‰è½¬æ¢ä¸ºDRAMè¯·æ±‚ï¼Œå¹¶ä½¿ç”¨DRAMæ§åˆ¶å™¨ä»åº•å±‚DRAMä¸ºå®ƒä»¬æä¾›æœåŠ¡ã€‚</p><h3 id="5-2ç³»ç»Ÿé›†æˆ"><a href="#5-2ç³»ç»Ÿé›†æˆ" class="headerlink" title="5.2ç³»ç»Ÿé›†æˆ"></a>5.2ç³»ç»Ÿé›†æˆ</h3><p>å›¾2æ˜¾ç¤ºäº†CXLè®¾å¤‡çš„å†…éƒ¨DRAMå¦‚ä½•é€šè¿‡CXLæ˜ å°„ï¼ˆæš´éœ²ï¼‰åˆ°ä¸»æœºçš„å†…å­˜ç©ºé—´ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/62b69a72893c4da1a015bbc2c157204c.png"><br>ä¸»æœºCPUçš„ç³»ç»Ÿæ€»çº¿åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªCXLæ ¹ç«¯å£ï¼ˆRPï¼‰ï¼Œå®ƒä»¬è¿æ¥ä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸ºç«¯ç‚¹ï¼ˆEPï¼‰è®¾å¤‡çš„CXLè®¾å¤‡ã€‚</p><ol><li>æˆ‘ä»¬çš„ä¸»æœºç«¯å†…æ ¸é©±åŠ¨ç¨‹åºé¦–å…ˆé€šè¿‡PCIeäº‹åŠ¡æŸ¥è¯¢åŸºå€å¯„å­˜å™¨ï¼ˆBARï¼‰åŠå…¶å†…éƒ¨å­˜å‚¨å™¨ï¼ˆç§°ä¸ºä¸»æœºç®¡ç†è®¾å¤‡å­˜å‚¨å™¨ï¼ˆHDMï¼‰ï¼‰çš„å¤§å°æ¥æšä¸¾CXLè®¾å¤‡ã€‚</li><li>æ ¹æ®æ£€ç´¢åˆ°çš„å¤§å°ï¼Œå†…æ ¸é©±åŠ¨ç¨‹åºå°†BARå’ŒHDMæ˜ å°„åˆ°ä¸»æœºçš„ä¿ç•™ç³»ç»Ÿå†…å­˜ç©ºé—´ä¸­ï¼Œå¹¶è®©åº•å±‚CXLè®¾å¤‡çŸ¥é“å®ƒä»¬çš„BARå’ŒHDMï¼ˆåŸºåœ°å€ï¼‰åœ¨ä¸»æœºç³»ç»Ÿå†…å­˜ä¸­çš„æ˜ å°„ä½ç½®ã€‚</li><li>å½“ä¸»æœºCPUé€šè¿‡load/storeæŒ‡ä»¤è®¿é—®HDMç³»ç»Ÿå†…å­˜æ—¶ï¼Œè¯·æ±‚ä¼šè¢«ä¼ é€’åˆ°ç›¸åº”çš„RPï¼ŒRPå°†è¯·æ±‚è½¬æ¢ä¸ºCXL flitã€‚ç”±äºHDMæ˜ å°„åˆ°ç³»ç»Ÿå†…å­˜çš„ä¸åŒä½ç½®ï¼Œå› æ­¤HDMçš„å†…å­˜åœ°å€ç©ºé—´ä¸EPå†…éƒ¨DRAMçš„å†…å­˜åœ°å€ç©ºé—´ä¸åŒã€‚å› æ­¤ï¼ŒCXLæ§åˆ¶å™¨é€šè¿‡ç®€å•åœ°ä»ä¸­æ‰£é™¤HDMçš„åŸºåœ°å€æ¥è½¬æ¢ä¼ å…¥çš„åœ°å€ï¼Œå¹¶å°†è½¬æ¢åçš„è¯·æ±‚å‘é€åˆ°åº•å±‚DRAMæ§åˆ¶å™¨ã€‚ç»“æœé€šè¿‡CXLäº¤æ¢æœºå’ŒFlexBusè¿”å›è‡³ä¸»æœºã€‚è¯·æ³¨æ„ï¼Œç”±äºHDMè®¿é—®æ²¡æœ‰è½¯ä»¶å¹²é¢„æˆ–å†…å­˜æ•°æ®å‰¯æœ¬ï¼Œå› æ­¤DIRECTCXLå¯ä»¥ä»¥è¾ƒä½çš„è®¿é—®å»¶è¿Ÿå‘ä¸»æœºå…¬å¼€CXLè®¾å¤‡çš„å†…å­˜èµ„æºã€‚</li></ol><p>ï¼ˆæ„æ€æ˜¯é€šè¿‡è¿™ä¸€æ­¥ï¼Œä¸»æœºç³»ç»Ÿæ˜ å°„CXL.memçš„åœ°å€äº†ã€‚ï¼‰</p><h3 id="5-3CXLç½‘ç»œäº¤æ¢æœº"><a href="#5-3CXLç½‘ç»œäº¤æ¢æœº" class="headerlink" title="5.3CXLç½‘ç»œäº¤æ¢æœº"></a>5.3CXLç½‘ç»œäº¤æ¢æœº</h3><p>å›¾3aè¯´æ˜äº†DIRECTCXLå¦‚ä½•ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªCXLè®¾å¤‡ä»ä¸»æœºä¸­åˆ†è§£å†…å­˜èµ„æºï¼Œå›¾3bæ˜¾ç¤ºäº†å…¶ä¸­æˆ‘ä»¬çš„CXLäº¤æ¢æœºç»„ç»‡ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/1788e055a03e4a3d94cc4cae173984f9.png"></p><p>ä¸»æœºçš„CXL RPç›´æ¥è¿æ¥åˆ°CXLäº¤æ¢æœºæˆ–CXLè®¾å¤‡çš„ä¸Šæ¸¸ç«¯ï¼ˆUSPï¼‰ã€‚CXLäº¤æ¢æœºçš„ä¸‹æ¸¸ç«¯å£ï¼ˆDSPï¼‰è¿˜è¿æ¥å¦ä¸€ä¸ªCXLäº¤æ¢æœºçš„USPæˆ–CXLè®¾å¤‡ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬çš„CXLäº¤æ¢æœºé‡‡ç”¨å¤šä¸ªUSPå’ŒDSPã€‚é€šè¿‡è®¾ç½®å†…éƒ¨è·¯ç”±è¡¨ï¼Œæˆ‘ä»¬çš„CXLäº¤æ¢æœºçš„ç»“æ„ç®¡ç†å™¨ï¼ˆFMï¼‰é‡æ–°é…ç½®äº¤æ¢æœºçš„äº¤å‰å¼€å…³ï¼Œå°†æ¯ä¸ªUSPè¿æ¥åˆ°ä¸åŒçš„ DSPï¼Œä»è€Œåˆ›å»ºä»æ ¹ï¼ˆä¸»æœºï¼‰åˆ°ç»ˆç«¯ï¼ˆCXLè®¾å¤‡ï¼‰çš„è™šæ‹Ÿå±‚æ¬¡ç»“æ„ã€‚ç”±äºCXLè®¾å¤‡å¯ä»¥é‡‡ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ§åˆ¶å™¨å’Œè®¸å¤šDRAMï¼Œå› æ­¤å®ƒè¿˜å¯ä»¥å®šä¹‰å¤šä¸ªé€»è¾‘è®¾å¤‡ï¼Œæ¯ä¸ªé€»è¾‘è®¾å¤‡å°†å…¶è‡ªå·±çš„HDMæš´éœ²ç»™ä¸»æœºã€‚è¿™æ ·ï¼Œä¸åŒçš„ä¸»æœºå¯ä»¥è¿æ¥åˆ°CXLäº¤æ¢æœºå’ŒCXLè®¾å¤‡ã€‚è¯·æ³¨æ„ï¼Œæ¯ä¸ªCXLè™šæ‹Ÿå±‚æ¬¡ç»“æ„ä»…æä¾›ä»ä¸€ä¸ªåˆ°å¦ä¸€ä¸ªçš„è·¯å¾„ï¼Œä»¥ç¡®ä¿æ²¡æœ‰ä¸»æœºå…±äº«HDMã€‚</p><h3 id="5-4ç¨‹åºæ€ä¹ˆçœ‹CXLçš„å†…å­˜"><a href="#5-4ç¨‹åºæ€ä¹ˆçœ‹CXLçš„å†…å­˜" class="headerlink" title="5.4ç¨‹åºæ€ä¹ˆçœ‹CXLçš„å†…å­˜"></a>5.4ç¨‹åºæ€ä¹ˆçœ‹CXLçš„å†…å­˜</h3><p>ä¸RDMAç›¸æ¯”ï¼Œä¸€æ—¦ä¸»æœºå’ŒCXLè®¾å¤‡ä¹‹é—´å»ºç«‹äº†è™šæ‹Ÿå±‚æ¬¡ç»“æ„ï¼Œä¸»æœºä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºå°±å¯ä»¥é€šè¿‡å¼•ç”¨HDMçš„å†…å­˜ç©ºé—´ç›´æ¥è®¿é—®CXLè®¾å¤‡ã€‚ç„¶è€Œï¼Œå®ƒéœ€è¦è½¯ä»¶è¿è¡Œæ—¶/é©±åŠ¨ç¨‹åºæ¥ç®¡ç†åº•å±‚CXLè®¾å¤‡å¹¶åœ¨åº”ç”¨ç¨‹åºçš„å†…å­˜ç©ºé—´ä¸­å…¬å¼€å…¶HDMã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ”¯æŒDIRECTCXL è¿è¡Œæ—¶ï¼Œå®ƒå°†HDMçš„åœ°å€ç©ºé—´ç®€å•åœ°åˆ†æˆå¤šä¸ªæ®µï¼Œç§°ä¸º <code>cxl-namespace</code>ã€‚ç„¶åå…è®¸åº”ç”¨ç¨‹åºå°†æ¯ä¸ªCXLå‘½åç©ºé—´ä½œä¸ºå†…å­˜æ˜ å°„æ–‡ä»¶ï¼ˆmmapï¼‰è¿›è¡Œè®¿é—®ã€‚</p><p>ä¸ºå•¥æ˜¯æ˜ å°„æ–‡ä»¶ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c6fa0871c9e64650a0a23a410649c60c.png"></p><p>å›¾4æ˜¾ç¤ºäº†è¿è¡Œæ—¶çš„è½¯ä»¶å †æ ˆä»¥åŠåº”ç”¨ç¨‹åºå¦‚ä½•é€šè¿‡cxlå‘½åç©ºé—´ä½¿ç”¨åˆ†è§£å†…å­˜ã€‚å½“æ£€æµ‹åˆ°CXLè®¾å¤‡æ—¶ï¼ˆåœ¨PCIeæšä¸¾æ—¶ï¼‰ï¼ŒDIRECTCXLé©±åŠ¨ç¨‹åºä¼šåˆ›å»ºä¸€ä¸ªå…¥å£è®¾å¤‡ï¼ˆä¾‹å¦‚ <code>/dev/directcxl</code>ï¼‰ä»¥å…è®¸ç”¨æˆ·é€šè¿‡<code>ioctl</code>ç®¡ç†<span class="label primary">cxlå‘½åç©ºé—´</span>ã€‚å¦‚æœç”¨æˆ·å‘<code>/dev/directcxl</code>è¯·æ±‚cxlå‘½åç©ºé—´ï¼Œåˆ™é©±åŠ¨ç¨‹åºä¼šé€šè¿‡å¼•ç”¨å…¶HDMæ®µè¡¨æ¥æ£€æŸ¥HDMä¸Šçš„ï¼ˆç‰©ç†ï¼‰è¿ç»­åœ°å€ç©ºé—´ï¼Œè¯¥è¡¨çš„æ¡ç›®åŒ…æ‹¬æ®µçš„åç§»é‡ã€å¤§å°å’Œå¼•ç”¨è®¡æ•°ï¼ˆè®°å½•å¦‚ä½•è®¸å¤šcxlå‘½åç©ºé—´æŒ‡ç¤ºæ­¤æ®µï¼‰ã€‚ç”±äºå¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®è¯¥è¡¨ï¼Œå› æ­¤å…¶æ ‡å¤´è¿˜ä¿ç•™å¿…è¦çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è‡ªæ—‹é”ã€è¯»/å†™é”å’Œè¡¨æ¡ç›®æ‘˜è¦ï¼ˆä¾‹å¦‚ï¼Œæœ‰æ•ˆæ¡ç›®å·ï¼‰ã€‚ä¸€æ—¦DIRECTCXLé©±åŠ¨ç¨‹åºæ ¹æ®ç”¨æˆ·è¯·æ±‚åˆ†é…äº†ä¸€ä¸ªæ®µï¼Œå®ƒå°±ä¼šä¸ºmmapåˆ›å»ºä¸€ä¸ªè®¾å¤‡ï¼ˆä¾‹å¦‚ <code>/dev/cxl-ns0</code>ï¼‰å¹¶æ›´æ–°æ®µè¡¨ã€‚ç”¨æˆ·ç¨‹åºå¯ä»¥ä½¿ç”¨<code>mmap</code>å’Œ<code>vm_area_struct</code>å°†<code>cxl-namespace</code>æ˜ å°„åˆ°å…¶è¿›ç¨‹è™šæ‹Ÿå†…å­˜ç©ºé—´ã€‚</p><p>è¯·æ³¨æ„ï¼ŒDIRECTCXLè½¯ä»¶è¿è¡Œæ—¶æ˜¯ä¸ºç›´æ¥è®¿é—®CXLè®¾å¤‡è€Œè®¾è®¡çš„ï¼Œè¿™ä¸æŒä¹…å†…å­˜å¼€å‘å·¥å…·åŒ…ï¼ˆPMDK[25]ï¼‰çš„å†…å­˜æ˜ å°„æ–‡ä»¶ç®¡ç†çš„æ¦‚å¿µç±»ä¼¼ã€‚ç„¶è€Œï¼Œå®ƒçš„å‘½åç©ºé—´ç®¡ç†æ¯”PMDKæ›´ç®€å•ã€æ›´çµæ´»ã€‚ä¾‹å¦‚ï¼ŒPMDKçš„å‘½åç©ºé—´ä¸NVMeå‘½åç©ºé—´çš„ç†å¿µéå¸¸ç›¸ä¼¼ï¼Œç”±æ–‡ä»¶ç³»ç»Ÿæˆ–å…·æœ‰å›ºå®šå¤§å°çš„DAXè¿›è¡Œç®¡ç†[26]ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„cxlå‘½åç©ºé—´æ›´ç±»ä¼¼äºä¼ ç»Ÿçš„å†…å­˜æ®µï¼Œå®ƒç›´æ¥æš´éœ²ç»™åº”ç”¨ç¨‹åºè€Œæ— éœ€ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿã€‚</p><h3 id="5-5åŸå‹å®ç°"><a href="#5-5åŸå‹å®ç°" class="headerlink" title="5.5åŸå‹å®ç°"></a>5.5åŸå‹å®ç°</h3><p>å›¾5aè¯´æ˜äº†æˆ‘ä»¬ç”¨äºåˆ†è§£å†…å­˜èµ„æºçš„CXLç½‘ç»œæ‹“æ‰‘è®¾è®¡ï¼Œå®é™…ç³»ç»Ÿä¸­çš„ç›¸åº”å®ç°å¦‚å›¾5bæ‰€ç¤ºã€‚æœ‰nå°è®¡ç®—ä¸»æœºé€šè¿‡CXLäº¤æ¢æœºè¿æ¥må°CXLè®¾å¤‡ï¼›åœ¨æˆ‘ä»¬çš„åŸå‹ä¸­ï¼Œnå’Œmä¸º4ï¼Œä½†è¿™äº›æ•°å­—å¯ä»¥é€šè¿‡ä½¿ç”¨æ›´å¤šCXLå¼€å…³æ¥æ‰©å±•ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªCXLè®¾å¤‡åŸå‹å‡åŸºäºæˆ‘ä»¬å®šåˆ¶çš„é™„åŠ å¡ï¼ˆAICï¼‰CXLå†…å­˜åˆ€ç‰‡æ„å»ºï¼Œè¯¥åˆ€ç‰‡é‡‡ç”¨16nm FPGAå’Œ8ä¸ªä¸åŒçš„DDR4 DRAMæ¨¡å—ï¼ˆ64GBï¼‰ã€‚åœ¨FPGAä¸­ï¼Œæˆ‘ä»¬åˆ¶é€ äº†ä¸€ä¸ªCXLæ§åˆ¶å™¨å’Œå…«ä¸ªDRAMæ§åˆ¶å™¨ï¼Œæ¯ä¸ªæ§åˆ¶å™¨ç®¡ç†CXLç«¯ç‚¹å’Œå†…éƒ¨DRAMé€šé“ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿˜æ²¡æœ‰æ”¯æŒCXLçš„å¤„ç†å™¨æ¶æ„ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨RISC-V ISAæ„å»ºè‡ªå·±çš„å†…éƒ¨ä¸»æœºå¤„ç†å™¨ï¼Œè¯¥å¤„ç†å™¨é‡‡ç”¨å››ä¸ªä¹±åºæ ¸å¿ƒï¼Œ<span class="label primary">å…¶æœ«çº§ç¼“å­˜ï¼ˆLLCï¼‰å®ç°CXL RP</span>ã€‚æ¯ä¸ªæ”¯æŒCXLçš„ä¸»æœºå¤„ç†å™¨éƒ½åœ¨é«˜æ€§èƒ½æ•°æ®ä¸­å¿ƒåŠ é€Ÿå¡ä¸­å®ç°ï¼Œå……å½“ä¸»æœºçš„è§’è‰²ï¼Œå¯ä»¥å•ç‹¬è¿è¡ŒLinux 5.13å’ŒDIRECTCXLã€‚æˆ‘ä»¬é€šè¿‡PCIeèƒŒæ¿å‘å››å°ä¸»æœºå…¬å¼€å››ä¸ªCXLè®¾å¤‡ï¼ˆ32ä¸ªDRAMæ¨¡å—ï¼‰ã€‚æˆ‘ä»¬é€šè¿‡å¤šä¸€ä¸ªå®ç°DIRECTCXLçš„CXLäº¤æ¢æœºçš„åŠ é€Ÿå™¨å¡æ¥æ‰©å±•èƒŒæ¿ã€‚è¯¥äº¤æ¢æœºå®ç°äº†FMï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªè™šæ‹Ÿå±‚æ¬¡ç»“æ„ï¼Œæ¯ä¸ªè™šæ‹Ÿå±‚æ¬¡ç»“æ„ä»¥çµæ´»çš„æ–¹å¼è¿æ¥ä¸»æœºå’ŒCXLè®¾å¤‡ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/eed160e3d6e0444aacccb166c4ab9ab5.png"></p><p>å¤„ç†å™¨ç«¯çš„CXLå¼•æ“å’ŒCXLäº¤æ¢æœºè¿˜æ²¡æœ‰å•†ä¸šåŒ–çš„CXL2.0 IPã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä»å¤´å¼€å§‹æ„å»ºäº†æ‰€æœ‰DIRECTCXL IPã€‚ä¸»æœºç«¯å¤„ç†å™¨éœ€è¦é«˜çº§é…ç½®å’Œç”µæºæ¥å£ï¼ˆACPI[27]ï¼‰æ¥è¿›è¡ŒCXL2.0æšä¸¾ï¼ˆä¾‹å¦‚RPä½ç½®å’ŒRPçš„ä¿ç•™åœ°å€ç©ºé—´ï¼‰ã€‚ç”±äºRISC-Vå°šä¸æ”¯æŒ ACPIï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡å°†æ­¤ç±»ä¿¡æ¯æ·»åŠ åˆ°è®¾å¤‡æ ‘ä¸­æ¥å¯ç”¨CXLæšä¸¾[28]ã€‚</p><blockquote><p>å’¦~</p></blockquote><h2 id="6-ç§¯ç´¯"><a href="#6-ç§¯ç´¯" class="headerlink" title="6. ç§¯ç´¯"></a>6. ç§¯ç´¯</h2>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> CXL </tag>
            
            <tag> RDMA </tag>
            
            <tag> å†…å­˜åˆ†è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cgroupå’Œnamespace</title>
      <link href="/2023/10/29/%E5%B0%8F%E5%AE%9E%E9%AA%8C-cgroup%E9%99%90%E5%88%B6%E5%92%8Cnamespace/"/>
      <url>/2023/10/29/%E5%B0%8F%E5%AE%9E%E9%AA%8C-cgroup%E9%99%90%E5%88%B6%E5%92%8Cnamespace/</url>
      
        <content type="html"><![CDATA[<h2 id="1-1-ä»‹ç»"><a href="#1-1-ä»‹ç»" class="headerlink" title="1.1. ä»‹ç»"></a>1.1. ä»‹ç»</h2><p>å†…æ ¸æ§åˆ¶ç»„<code>cgroups</code>æ˜¯ä¸€é¡¹å†…æ ¸åŠŸèƒ½ï¼Œå…è®¸ä¸º<strong>è¿›ç¨‹</strong>åˆ†é…å’Œé™åˆ¶ç¡¬ä»¶å’Œç³»ç»Ÿèµ„æºã€‚</p><p><strong>åˆ›å»º</strong>ï¼šåœ¨ä½¿ç”¨<code>systemd</code>ï¼ˆsystemdæ˜¯System Management Daemonçš„ç®€å†™ï¼ˆåœ¨UNIXç³»ç»Ÿä¸­ï¼Œåå°è¿›ç¨‹éƒ½æŒ‰ç…§æƒ¯ä¾‹ä»¥dç»“å°¾ï¼Œå› æ­¤å½“ä½ çœ‹åˆ°ä¸€ä¸ªè¿›ç¨‹çš„åå­—ä»¥dç»“å°¾ï¼Œé‚£å®ƒææœ‰å¯èƒ½æ˜¯ä¸€ä¸ªåå°è¿›ç¨‹ï¼‰ï¼Œå®ƒæ˜¯Linuxç³»ç»Ÿä¸­å¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼‰çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œ<code>/sys/fs/cgroup</code>ç›®å½•éƒ½æ˜¯<strong>ç”±systemdåœ¨ç³»ç»Ÿå¯åŠ¨çš„è¿‡ç¨‹ä¸­æŒ‚è½½</strong>çš„ï¼Œå¹¶ä¸”æŒ‚è½½ä¸ºåªè¯»çš„ç±»å‹ï¼ˆåˆ›å»ºcgroupé™¤äº†ä½¿ç”¨cgroupçš„å·¥å…·çš„å‘½ä»¤ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥åœ¨ç›®å½•é‡Œåˆ›å»ºç›¸åº”memoryæˆ–è€…cpuçš„ç›®å½•ï¼Œä¹‹åé»˜è®¤çš„cgroupæ–‡ä»¶ä¼šåœ¨é‡Œé¢è‡ªåŠ¨ç”Ÿæˆï¼Œä½†æ˜¯æœ‰çš„æƒ…å†µä¸‹è¿™æ ·çš„æ–¹å¼åˆ›å»ºæ˜¯ä¸è¢«å…è®¸ä¸èƒ½æˆåŠŸçš„å³ä½¿æ˜¯sudoï¼‰ã€‚</p><p><strong>ç»“æ„</strong>ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½åˆ†é…æœ‰ä¸€ä¸ªç®¡ç†cgroupã€‚cgroupä»¥åˆ†å±‚æ ‘ç»“æ„æ’åºã€‚å¯ä»¥ä¸ºå•ä¸ªè¿›ç¨‹æˆ–å±‚æ¬¡ç»“æ„çš„æ•´ä¸ªåˆ†æ”¯è®¾ç½®èµ„æºé™åˆ¶ã€‚ä½¿ç”¨cgroupså°†æ‰€æœ‰è¿›ç¨‹ç»„ç»‡æˆç»„ï¼Œè¿™ç§°ä¸ºåˆ‡ç‰‡sliceï¼Œsliceæ˜¯ä¸€æ£µæ ‘æˆ–è€…ä¸€æ£µå­æ ‘ã€‚scopeå’Œserviceæ˜¯sliceä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œscopeæ˜¯ä»¥èµ„æºç®¡ç†ä¸ºç›®çš„çš„æ¯”å¦‚æˆ‘æœ‰ä¸€ç»„ä¸å¤ªç›¸å…³ä½†æ˜¯éƒ½éœ€è¦è¢«é™åˆ¶CPUä½¿ç”¨çš„è¿›ç¨‹ï¼›serviceæ˜¯ä¸€ç»„ç›¸å…³çš„è¿›ç¨‹ä¸€èµ·å·¥ä½œï¼Œå½¢æˆä¸€ä¸ªæœåŠ¡å•å…ƒã€‚é»˜è®¤æƒ…å†µä¸‹, systemdä¼šè‡ªåŠ¨åˆ›å»ºslice, scopeå’Œserviceå•ä½çš„å±‚çº§,æ¥ä¸ºcgroupæ ‘æä¾›ç»Ÿä¸€ç»“æ„ã€‚</p><p><strong>è®°è´¦</strong>ï¼šè®°è´¦ï¼ˆAccountingï¼‰åŠŸèƒ½æ˜¯æŒ‡cgroupså¯ä»¥è·Ÿè¸ªå’Œè®°å½•ç»„å†…ä»»åŠ¡ï¼ˆè¿›ç¨‹æˆ–çº¿ç¨‹ï¼‰ä½¿ç”¨èµ„æºçš„æƒ…å†µã€‚æ”¶é›†æœ‰å…³ç‰¹å®šè¿›ç¨‹ç»„ï¼ˆcgroupï¼‰ä½¿ç”¨çš„CPUæ—¶é—´ã€å†…å­˜å ç”¨ã€ç£ç›˜I/Oç­‰æ–¹é¢çš„ä¿¡æ¯ã€‚è¿™æœ‰åŠ©äºè¯†åˆ«èµ„æºå¯†é›†å‹ä»»åŠ¡ï¼Œç®¡ç†ç³»ç»Ÿè´Ÿè½½ï¼Œå¹¶è¿›è¡Œèµ„æºåˆ†é…å’Œä¼˜åŒ–ã€‚è®°è´¦å…·æœ‰ç›¸å¯¹è¾ƒå°ä½†éé›¶çš„å¼€é”€ï¼Œå…¶å½±å“å–å†³äºå·¥ä½œè´Ÿè½½ã€‚è¯·æ³¨æ„ï¼Œæ‰“å¼€ä¸€ä¸ªå•å…ƒçš„è®°è´¦ä¹Ÿä¼šéšå¼åœ°ä¸ºç›´æ¥åŒ…å«åœ¨åŒä¸€åˆ‡ç‰‡ä¸­çš„æ‰€æœ‰å•å…ƒåŠå…¶æ‰€æœ‰çˆ¶åˆ‡ç‰‡å’Œå•å…ƒæ‰“å¼€è®°è´¦ã€‚ç›´æ¥åŒ…å«åœ¨å…¶ä¸­ï¼Œå› æ­¤ä¼šè®¡æˆæœ¬ä¸å±äºå•ä¸ªå•ä½ã€‚</p><p><strong>å†…æ ¸é…ç½®</strong>ï¼šæ¯ä¸ªæ§åˆ¶ç»„å­ç³»ç»Ÿéƒ½ä¾èµ–äºç›¸å…³çš„é…ç½®é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œcpusetå­ç³»ç»Ÿåº”é€šè¿‡CONFIG_CPUSETSå†…æ ¸é…ç½®é€‰é¡¹å¯ç”¨ï¼Œioå­ç³»ç»Ÿåº”é€šè¿‡CONFIG_BLK_CGROUPå†…æ ¸é…ç½®é€‰é¡¹å¯ç”¨ç­‰ã€‚è¦å¯ç”¨cgroupsä¸­çš„memoryå­ç³»ç»Ÿ,éœ€è¦åœ¨å†…æ ¸é…ç½®æ—¶å°†CONFIG_MEMCGé€‰é¡¹è®¾ç½®ä¸ºy. All of these kernel configuration options may be found in the General setup â†’ Control Group support menu.</p><h2 id="1-2-diff-V1-V2"><a href="#1-2-diff-V1-V2" class="headerlink" title="1.2. diff V1 V2"></a>1.2. diff V1 V2</h2><p>/usr/src/linux/Documentation/admin-guide/cgroup-v1<br>/usr/src/linux/Documentation/admin-guide/cgroup-v2.rst.</p><p>cgroup v1 ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p><ul><li>subsystemï¼ˆå­ç³»ç»Ÿï¼‰ï¼šå†…æ ¸æ¨¡å—ï¼Œå…·ä½“çš„èµ„æºæ§åˆ¶å™¨ï¼Œå¯ä»¥è¢«å…³è”åˆ°cgroupæ ‘ã€‚ä¸åŒèµ„æºçš„æ§åˆ¶å™¨ä¸åŒï¼Œä¾‹å¦‚ï¼Œå†…å­˜å­ç³»ç»Ÿæ§åˆ¶å†…å­˜èµ„æºï¼ŒCPUå­ç³»ç»Ÿæ§åˆ¶CPUèµ„æºã€‚</li><li>cgroupï¼ˆæ§åˆ¶ç»„ï¼‰ï¼šèµ„æºéš”ç¦»çš„æœ€å°å•ä½ï¼Œè¡¨ç¤ºä¸€ç»„è¿›ç¨‹å’Œcgroupå­ç³»ç»Ÿçš„å…³è”ï¼Œä¾‹å¦‚ï¼šé€šè¿‡å†…å­˜å­ç³»ç»Ÿé™åˆ¶ä¸€ç»„è¿›ç¨‹çš„å¯ç”¨å†…å­˜èµ„æºæ€»é‡ã€‚è¿›ç¨‹å¯ä»¥åŠ å…¥æŸä¸ªcgroupï¼Œä¹Ÿå¯ä»¥ä»ä¸€ä¸ªcgroupè¿ç§»åˆ°å¦ä¸€ä¸ªcgroupï¼ŒåŒä¸€è¿›ç¨‹ä¸èƒ½åŒæ—¶å­˜åœ¨åŒç±»å‹çš„ä¸¤ä¸ªcgroupä¸­ã€‚</li><li>hierarchyï¼ˆå±‚çº§ï¼‰ï¼šç”±ä¸€ç³»åˆ—cgroupæŒ‰ç…§æ ‘çŠ¶ç»“æ„æ’åˆ—ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªcgroupï¼Œå­cgroupé»˜è®¤ç»§æ‰¿çˆ¶cgroupçš„å‚æ•°å’Œé…ç½®ã€‚ç³»ç»Ÿå¯ä»¥æœ‰å¤šä¸ªå±‚çº§ï¼ˆcgroupæ ‘ï¼‰ï¼Œæ¯ä¸ªå±‚çº§å¯ä»¥å’Œä¸åŒçš„subsystemå…³è”ï¼Œæ¯ä¸ªsubsystemåªèƒ½å’Œä¸€ä¸ªå±‚çº§å…³è”ï¼ŒåŒä¸€è¿›ç¨‹å¯ä»¥å±äºå¤šä¸ªå±‚çº§ï¼Œä½†åœ¨æ¯ä¸ªå±‚çº§ä¸­åªèƒ½å±äºä¸€ä¸ªcgroupèŠ‚ç‚¹ã€‚</li></ul><p>åœ¨cgroup v2ä¸­ï¼Œå»æ‰äº†å±‚çº§ï¼ˆhierarchyï¼‰çš„æ¦‚å¿µï¼Œåªæœ‰ä¸€ä¸ªå±‚çº§ï¼Œæ‰€æœ‰cgroupåœ¨è¯¥å±‚çº§ä¸­ä»¥æ ‘å½¢çš„æ–¹å¼ç»„ç»‡ï¼Œæ¯ä¸ªcgroupå¯ä»¥ç®¡ç†å¤šç§èµ„æºã€‚åœ¨cgroup v1ä¸­ï¼Œæ¯ç§èµ„æºä¸€ä¸ªå±‚çº§ã€‚å¯¹äºbgå’Œadhocä¸¤ä¸ªcgroupï¼Œbgéœ€è¦é™åˆ¶blkioå’Œmemoryä¸¤ç§èµ„æºï¼Œadhocéœ€è¦é™åˆ¶memoryå’Œpidsä¸¤ç§èµ„æºã€‚cgroup v1åœºæ™¯çš„è§†å›¾å¦‚ä¸‹ï¼š<br><img src="https://pic3.zhimg.com/80/v2-8097cbafea04c6cd4a3325600a435d12_1440w.webp"></p><p>å¯¹äºcgroup v2ï¼Œç”±äºæ‰€æœ‰èµ„æºéƒ½åœ¨åŒä¸€ä¸ªcgroupä¸‹ç®¡ç†ï¼Œé€šè¿‡cgroup.sub_controlleræ§åˆ¶å­cgroupå¯ç”¨çš„controllerï¼Œè¿™æ ·ä¸€æ¥ï¼Œè§†å›¾ä»¥cgroupä¸ºå•ä½ï¼Œæ›´åŠ æ¸…æ™°å’Œä¾¿äºç®¡ç†ã€‚<br><img src="https://pic1.zhimg.com/80/v2-6afa56ea78c4af88ffaea2057690f0c4_1440w.webp"></p><p>åœ¨cgroup v2ä¸­ï¼Œæ¯ä¸ªcgroupç›®å½•ä¸‹æœ‰ä¸ªåä¸ºcgroup.controllersçš„å¯è¯»æ–‡ä»¶ï¼Œè®°å½•äº†å½“å‰cgroupå¯ç”¨çš„controllerã€‚æ ¹ç›®å½•cgroup.controllersæ–‡ä»¶çš„å†…å®¹è®°å½•äº†å½“å‰ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰controllerã€‚</p><p>åœ¨cgroup v2ä¸­ï¼Œæ¯ä¸ªcgroupç›®å½•ä¸‹æœ‰ä¸ªåä¸ºcgroup.controllersçš„å¯è¯»æ–‡ä»¶ï¼Œè®°å½•äº†å½“å‰cgroupå¯ç”¨çš„controllerã€‚æ ¹ç›®å½•ä¸‹cgroup.controllersæ–‡ä»¶çš„å†…å®¹è®°å½•äº†å½“å‰ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰controllerã€‚ä¿®æ”¹çˆ¶cgroupçš„cgroup.subtree_controlï¼Œå¢åŠ cgroup controllerï¼š</p><pre class="line-numbers language-none"><code class="language-none">echo "+memory" &gt; test/cgroup.subtree_controlcat test/child/cgroup.controllersmemory<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åˆ é™¤å­cgroupä¸­çš„controllerï¼Œä¹Ÿé€šè¿‡ä¿®æ”¹çˆ¶cgroupçš„cgroup.subtree_controlå®ç°ï¼š</p><pre class="line-numbers language-none"><code class="language-none">echo "-memory" &gt; test/cgroup.subtree_controlcat test/child/cgroup.controllers<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å½“å‰cgroupä¸­å­˜åœ¨è¿›ç¨‹æ—¶ï¼Œå†™å…¥ä¸ä¼šæˆåŠŸï¼›å†™å…¥å½“å‰cgroupæ²¡æœ‰å¯ç”¨çš„controlleræ—¶ï¼Œä¸ä¼šæˆåŠŸã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/643942399">å‚è€ƒ</a></p><h2 id="1-3-Unified-Control-Group-Hierarchy"><a href="#1-3-Unified-Control-Group-Hierarchy" class="headerlink" title="1.3. Unified Control Group Hierarchy"></a>1.3. Unified Control Group Hierarchy</h2><p>èŠ‚ç‚¹å­˜åœ¨ä»¥ä¸‹é¢3ç§cgroupsæ¨¡å¼ï¼Œé€‰æ‹©ä¸åŒæ¨¡å¼,ä¼šå½±å“åˆ°ç”¨æˆ·ç©ºé—´çš„ cgroupä½¿ç”¨ä¸å…¼å®¹æ€§ï¼š</p><ul><li>legacyï¼šåªæ”¯æŒcgroup V1</li><li>hybridï¼šåŒæ—¶æ”¯æŒcgroup V1å’Œcgroup V2</li><li>unifiedï¼šåªæ”¯æŒcgroup V2åˆå«Unified Control Group Hierarchy </li></ul><p>åˆ¤æ–­ç›®å‰æ˜¯å“ªç§æ¨¡å¼<a href="https://zhuanlan.zhihu.com/p/643942399">å‚è€ƒ</a>ï¼š</p><pre class="line-numbers language-none"><code class="language-none">[ $(stat -fc %T /sys/fs/cgroup/) = "cgroup2fs" ] &amp;&amp; echo "unified" || ( [ -e \/sys/fs/cgroup/unified/ ] &amp;&amp; echo "hybrid" || echo "legacy")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä½¿ç”¨unifiedæ¨¡å¼ï¼ˆæ³¨æ„cgroup_no_v1=allï¼‰ï¼š</p><pre class="line-numbers language-none"><code class="language-none">GRUB_CMDLINE_LINUX="cgroup_enable=memory \systemd.unified_cgroup_hierarchy=1 \systemd.legacy_systemd_cgroup_controller=0 cgroup_no_v1=all"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ legacy æ¨¡å¼ï¼š</p><pre class="line-numbers language-none"><code class="language-none">GRUB_CMDLINE_LINUX="cgroup_enable=memory \systemd.unified_cgroup_hierarchy=0 \systemd.legacy_systemd_cgroup_controller=1"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ hybrid æ¨¡å¼ï¼š</p><pre class="line-numbers language-none"><code class="language-none">GRUB_CMDLINE_LINUX="cgroup_enable=memory \systemd.unified_cgroup_hierarchy=1 \systemd.legacy_systemd_cgroup_controller=1"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸»è¦æ˜¯å¼€å¯GRUB_CMDLINE_LINUX= â€œsystemd.unified_cgroup_hierarchy=yesâ€æ‰èƒ½ä½¿ç”¨V2ç‰ˆæœ¬ï¼Œæœ‰æ—¶å€™å†…æ ¸å¯èƒ½æ²¡æœ‰é»˜è®¤ã€‚</p><p>ä»¥åŠè²Œä¼¼åœ¨å†…æ ¸ç¼–è¯‘æ—¶ä¹Ÿæœ‰é€‰é¡¹ï¼š</p><pre class="line-numbers language-none"><code class="language-none"># Only unified hierarchy is supportedCONFIG_CGROUP_UNIFIED_SYSTEMD=y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="2-1-åˆ›å»ºä¸€ä¸ªæœ‰å†…å­˜é™åˆ¶çš„cgroup"><a href="#2-1-åˆ›å»ºä¸€ä¸ªæœ‰å†…å­˜é™åˆ¶çš„cgroup" class="headerlink" title="2.1.åˆ›å»ºä¸€ä¸ªæœ‰å†…å­˜é™åˆ¶çš„cgroup"></a>2.1.åˆ›å»ºä¸€ä¸ªæœ‰å†…å­˜é™åˆ¶çš„cgroup</h2><p>ä¸ºäº†åˆ›å»ºã€ç®¡ç†å’Œç›‘æ§cgroupï¼Œæˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªåä¸ºcgroup-toolsçš„åŒ…<code>sudo apt install cgroup-tools</code></p><p>åˆ›å»ºå†…å­˜ç±»å‹çš„cgroupå‘½åä¸ºmemhog-limiter<code>sudo cgcreate -g memory:memhog-limiter</code>å®é™…æ“ä½œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªç›®å½•ã€‚<code>ls -la /sys/fs/cgroup/memhog-limiter/</code></p><p><img src="https://img-blog.csdnimg.cn/4acc17383e0e4fb1b4cd544b495488f1.png" alt="ç³»ç»Ÿä¸åŒç›®å½•ä½ç½®ä¼šä¸åŒ"></p><p>è®¾ç½®å†…å­˜é™åˆ¶ï¼Œè¿™é‡Œæœ‰æ–°ç‰ˆçš„cgroupçš„è½¯é™åˆ¶æ˜¯memory.high,ç¡¬é™åˆ¶æ˜¯menory.max<code>sudo cgset -r memory.max=50M memhog-limiter</code>è®¾ç½®å®Œæˆåå¯ä»¥è¾“å‡ºæŸ¥çœ‹<code>cat  /sys/fs/cgroup/memhog-limiter/memory.max</code></p><p><img src="https://img-blog.csdnimg.cn/100b93b3167145538f316f4a5fe29082.png"></p><h2 id="2-2-å»é™åˆ¶å†…å­˜"><a href="#2-2-å»é™åˆ¶å†…å­˜" class="headerlink" title="2.2. å»é™åˆ¶å†…å­˜"></a>2.2. å»é™åˆ¶å†…å­˜</h2><blockquote><p>memhogï¼šç”¨äºæµ‹è¯•ç³»ç»Ÿå†…å­˜ç®¡ç†çš„å·¥å…·ï¼Œå®ƒé€šå¸¸ç”¨äºåœ¨Linuxç³»ç»Ÿä¸Šè¿›è¡Œå†…å­˜å‹åŠ›æµ‹è¯•ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ é€šè¿‡åˆ†é…å¤§é‡çš„å†…å­˜æ¥æ¨¡æ‹Ÿå†…å­˜å‹åŠ›ã€‚</p></blockquote><p>åˆ›å»ºä¸€ä¸ªåƒå†…å­˜çš„è„šæœ¬</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span> memhog 100M<span class="token punctuation">;</span> <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>pgrep memhog<span class="token variable">)</span></span> <span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$id</span>"</span> <span class="token punctuation">;</span> <span class="token function">sleep</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿è¡Œè„šæœ¬<code>sudo cgexec -g memory:memhog-limiter ./memhog.sh</code>æŸ¥çœ‹è¿™ä¸ªå†…å­˜æ§åˆ¶ç»„é‡Œçš„pid<code>cat  /sys/fs/cgroup/memhog-limiter/cgroup.procs</code></p><p><img src="https://img-blog.csdnimg.cn/98414239c59242a1b9a5d84302694121.png"></p><p>æ˜¾ç„¶æ²¡æœ‰æ§åˆ¶ä½ï¼Œemmmmåˆ°åº•ä»€ä¹ˆåŸå› è¿˜åœ¨æ‰¾ã€‚</p><h2 id="2-3-åˆ›å»ºnamespace"><a href="#2-3-åˆ›å»ºnamespace" class="headerlink" title="2.3. åˆ›å»ºnamespace"></a>2.3. åˆ›å»ºnamespace</h2><p><code>sudo cgexec -g memory:memhog-limiter unshare -fp --mount-proc</code></p><p>To verify that you are in a new namespace<code>ps -ef</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token environment constant">UID</span>          PID    <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMDroot           <span class="token number">1</span>       <span class="token number">0</span>  <span class="token number">0</span> 08:00 pts/0    00:00:00 <span class="token parameter variable">-bash</span>root          <span class="token number">12</span>       <span class="token number">1</span>  <span class="token number">0</span> 08:00 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-ef</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ–°å‘½åç©ºé—´ä¸­ï¼Œåªæœ‰bashä½œä¸ºPID 1è¿è¡Œã€‚å› æ­¤ï¼Œç°åœ¨å¯åŠ¨çš„æ¯ä¸ªæœåŠ¡éƒ½å°†åœ¨è¿™ä¸ªcgroupä¸Šä¸‹æ–‡ä¸­å¯åŠ¨ã€‚</p><p><code>./memhog.sh</code>åº”è¯¥ä¹Ÿæ˜¯è¢«ä¹‹å‰é‚£æ ·é™åˆ¶ä½çš„æƒ…å†µã€‚</p><p><a href="https://facebookmicrosites.github.io/cgroup2/docs/create-cgroups.html">è¿™æ˜¯facebookå…³äºcgroup2çš„æ–‡æ¡£ï¼Œä»–ä»¬çš„åˆ›å»ºæ–¹å¼ä¸å¤ªä¸€æ ·ï¼Œä¹Ÿå¯ä»¥è¯•è¯•</a></p><h2 id="2-4-namespaceåˆæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-4-namespaceåˆæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.4. namespaceåˆæ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.4. namespaceåˆæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Kernel space - åœ¨æŸä¸ªç‰¹å®šnamespaceå†…,æ“ä½œç³»ç»Ÿå†…æ ¸æ‰§è¡Œçš„å†…å­˜åŒºåŸŸã€‚<br>User space - åœ¨æŸä¸ªç‰¹å®šnamespaceå†…,ç”¨æˆ·æ¨¡å¼ç¨‹åºæ‰§è¡Œçš„å†…å­˜åŒºåŸŸã€‚</p><p>Namespaceçš„ç±»å‹æœ‰:<br>PID namespace - è¿›ç¨‹IDçš„éš”ç¦»Namespace<br>Network namespace - ç½‘ç»œè®¾å¤‡å’Œåè®®æ ˆçš„éš”ç¦»Namespace<br>Mount namespace - æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹çš„éš”ç¦»Namespace<br>IPC namespace - è¿›ç¨‹é—´é€šä¿¡çš„éš”ç¦»Namespace<br>UTS namespace - ä¸»æœºåå’ŒåŸŸåçš„éš”ç¦»Namespace<br>User namespace - ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„éš”ç¦»Namespace</p><p>é€šè¿‡namespaceæŠ€æœ¯,å†…æ ¸å¯ä»¥ä¸ºä¸åŒçš„ç”¨æˆ·ç©ºé—´æä¾›éš”ç¦»çš„ç³»ç»Ÿèµ„æº,å¢å¼ºå®‰å…¨æ€§å’Œå®¹å™¨åŒ–ã€‚æ‰€ä»¥åœ¨è®¨è®ºç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´æ—¶,éœ€è¦æ˜ç¡®æ˜¯åœ¨å“ªä¸ªnamespaceç¯å¢ƒä¸‹ã€‚æ¯”å¦‚dockerå®¹å™¨å†…çš„ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´å°±ä¸å®¿ä¸»æœºéš”ç¦»å¼€æ¥ã€‚</p><p>å‘½åç©ºé—´æ˜¯Linuxå†…æ ¸ç”¨æ¥éš”ç¦»å†…æ ¸èµ„æºçš„æ–¹å¼ã€‚è®©ä¸€äº›è¿›ç¨‹åªèƒ½çœ‹åˆ°å’Œè‡ªå·±ç›¸å…³çš„ä¸€éƒ¨åˆ†èµ„æºã€‚ä¸¤ç»„æ„Ÿè§‰ä¸åˆ°å¯¹æ–¹å­˜åœ¨ã€‚<br><a href="https://zhuanlan.zhihu.com/p/593351621">æ›´å¤šå®éªŒå‚è€ƒ</a></p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cgroup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>x86æ¶æ„å†…æ ¸è°ƒè¯•ç¯å¢ƒæ­å»ºQEMU+GDB</title>
      <link href="/2023/10/29/Linux%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BAQEMU-GDB/"/>
      <url>/2023/10/29/Linux%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BAQEMU-GDB/</url>
      
        <content type="html"><![CDATA[<h2 id="1-èµ·å› "><a href="#1-èµ·å› " class="headerlink" title="1. èµ·å› "></a>1. èµ·å› </h2><p>å¤ªå¤šæ–‡ç« æ˜¯åŸºäºarmæ¶æ„åœ¨è®²ï¼Œè€ŒåŸºäºx86æ¶æ„çš„å¤§éƒ¨åˆ†éƒ½æ˜¯æœ€å°æ ¹æ–‡ä»¶çš„å†…æ ¸è°ƒè¯•ï¼Œè€Œå¯¹å†…æ ¸ä¿®æ”¹çš„èŒƒå›´å¾€å¾€æ¯”è¿™ä¸ªå¤§ã€‚æ­¤æ–‡è®°å½•è¿™äº›å›°æ‰°çš„è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="2-æœ€å°æ ¹æ–‡ä»¶çš„ç¼–è¯‘ç¯å¢ƒ"><a href="#2-æœ€å°æ ¹æ–‡ä»¶çš„ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="2. æœ€å°æ ¹æ–‡ä»¶çš„ç¼–è¯‘ç¯å¢ƒ"></a>2. æœ€å°æ ¹æ–‡ä»¶çš„ç¼–è¯‘ç¯å¢ƒ</h2><ol><li>ç¼–è¯‘é€‰é¡¹é‡Œæœ‰çš„è¿˜éœ€è¦åŠ ä¸Šè°ƒè¯•ä¿¡æ¯</li><li>éœ€è¦ä¸€ä¸ªæ ¹æ–‡ä»¶ç³»ç»Ÿæ¥è¿è¡Œåˆšåˆšç¼–è¯‘å¥½çš„å†…æ ¸ï¼Œè¿è¡Œbusyboxä¼šåœ¨_installç›®å½•ä¸‹å¾—åˆ°ä¸€ä¸ªæœ€å°çš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œè¿˜éœ€è¦è¿›è¡Œä¸‹é¢çš„æ“ä½œï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">rsync</span> <span class="token parameter variable">-ar</span> busybox-1.33.0/_install/* rootfs<span class="token builtin class-name">cd</span> rootfs<span class="token function">sudo</span> <span class="token function">chown</span> root:root * <span class="token parameter variable">-R</span><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> proc sys dev etc/init.d<span class="token function">sudo</span> <span class="token function">mknod</span> <span class="token parameter variable">-m</span> <span class="token number">622</span> dev/console c <span class="token number">5</span> <span class="token number">1</span><span class="token function">sudo</span> <span class="token function">mknod</span> <span class="token parameter variable">-m</span> <span class="token number">666</span> dev/null c <span class="token number">1</span> <span class="token number">3</span><span class="token function">sudo</span> <span class="token function">mknod</span> <span class="token parameter variable">-m</span> <span class="token number">666</span> dev/zero c <span class="token number">1</span> <span class="token number">5</span><span class="token function">sudo</span> <span class="token function">mknod</span> <span class="token parameter variable">-m</span> <span class="token number">666</span> dev/ptmx c <span class="token number">5</span> <span class="token number">2</span><span class="token function">sudo</span> <span class="token function">mknod</span> <span class="token parameter variable">-m</span> <span class="token number">666</span> dev/tty c <span class="token number">5</span> <span class="token number">0</span><span class="token function">sudo</span> <span class="token function">mknod</span> <span class="token parameter variable">-m</span> <span class="token number">444</span> dev/random c <span class="token number">1</span> <span class="token number">8</span><span class="token function">sudo</span> <span class="token function">mknod</span> <span class="token parameter variable">-m</span> <span class="token number">444</span> dev/urandom c <span class="token number">1</span> <span class="token number">9</span><span class="token function">sudo</span> <span class="token function">chown</span> root:tty dev/<span class="token punctuation">{</span>console,ptmx,tty<span class="token punctuation">}</span><span class="token function">sudo</span> <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">'echo "#!/bin/sh\nmount -t proc none /proc\nmount -t sysfs none /sys\nln -s /dev/null /dev/tty2\nln -s /dev/null /dev/tty3\nln -s /dev/null /dev/tty4\nexit 0" &gt; etc/init.d/rcS'</span><span class="token function">sudo</span> <span class="token function">chmod</span> a+x etc/init.d/rcS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol> <div class="note info no-icon">ä½†æ˜¯æˆ‘çš„è¦æ±‚åº”è¯¥ä¸æ­¢æœ€å°æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œè¿˜éœ€è¦æ›´ä¸°å¯Œçš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚å¯¹äº4.15ç”¨äºé‡‡æ ·çš„é‚£ä¸ªå†…æ ¸æœ€å°æ ¹æ–‡ä»¶ç³»ç»Ÿcgroupæ–‡ä»¶å¤¹å°±æ˜¯æ²¡æ³•æŒ‚è½½ä¸Šçš„ã€‚ä¸€äº›å¯èƒ½æœ‰æ•ˆçš„æ–¹æ³•ï¼š- 2.1åœ¨åˆ›å»ºæ–‡ä»¶é•œåƒçš„æ—¶å€™åŠ å…¥é‚£äº›ç›®å½•ã€‚- 2.2ä½¿ç”¨-append "init=/xx.sh"å†™ä¸€ä¸ªè„šæœ¬å‘Šè¯‰å†…æ ¸å¯åŠ¨é˜¶æ®µéœ€è¦åˆ›å»ºçš„ç›®å½•å’Œæ–‡ä»¶       ä½†è¿™ä¸¤ç§æ–¹å¼ä¸ä¸€å®šèƒ½è¡Œï¼Œå› ä¸ºè¿™é‡Œé¢çš„æ–‡ä»¶åº”è¯¥æ˜¯å†…æ ¸è‡ªå·±æŒ‚è½½ä¸Šå»çš„æ‰å¯¹ï¼Œæœ€åˆimgé‡Œé¢çš„æ–‡ä»¶åªæœ‰ä¸€å±‚ã€‚è€Œæœ‰è¶£çš„æ˜¯æœ€å°çš„æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºçš„æ—¶å€™ï¼Œæœ‰4ä¸ªæ–‡ä»¶åˆ›å»ºç©ºæ–‡ä»¶å¤¹ï¼Œç”±å†…æ ¸å¯åŠ¨æ—¶æŒ‚è½½ä¸Šå»å°±å¥½ã€‚å½“éœ€è¦æ›´å¤šæ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½æ—¶ï¼Œéœ€è¦è‡ªå·±ä»å†…æ ¸æ–‡ä»¶å»æ‹¿ç¼–è¯‘äº†çš„ï¼Œå¹¶ä¸”åˆ›å»ºæ–°çš„æ–‡ä»¶æ˜ å°„ã€‚è¯¦è§ä¸‹é¢è¿™éƒ¨åˆ†çš„æ–‡ä»¶æœ‰æ²¡æœ‰è¢«æ”¹ã€‚</div> <p>è¿™é‡Œå‚è€ƒçš„é“¾æ¥å¦‚ä¸‹,è°¢è°¢æ…·æ…¨çš„å‰è¾ˆä»¬ï¼š<br><a href="https://www.cnblogs.com/haiyonghao/p/14440249.html">åˆ©ç”¨qemu+gdbåœ¨ubuntuä¸‹æ­å»ºè°ƒè¯•kernelçš„ç¯å¢ƒ</a><br><a href="https://blog.cyyself.name/setup-linux-kernel-debug-environment/">Linuxå†…æ ¸è°ƒè¯•ç¯å¢ƒçš„æ­å»ºQEMU+GDB</a><br><a href="https://www.ebpf.top/post/qemu_gdb_busybox_debug_kernel/">ä½¿ç”¨GDB+Qemuè°ƒè¯•Linuxå†…æ ¸</a>  </p><ol start="3"><li>å¯åŠ¨å‘½ä»¤<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">qemu-system-x86_64 <span class="token punctuation">\</span><span class="token parameter variable">-kernel</span> /home/yi/Downloads/kernel/longterm/linux-5.4.259/arch/x86_64/boot/bzImage <span class="token punctuation">\</span><span class="token parameter variable">-nographic</span> <span class="token punctuation">\</span><span class="token parameter variable">-append</span> <span class="token string">"nokaslr console=ttyS0 root=/dev/sda rw"</span> <span class="token punctuation">\</span><span class="token parameter variable">-drive</span> <span class="token assign-left variable">file</span><span class="token operator">=</span>/home/yi/Documents/kernel.img,format<span class="token operator">=</span>raw,id<span class="token operator">=</span>hd0 <span class="token punctuation">\</span><span class="token parameter variable">-m</span> 8G <span class="token punctuation">\</span><span class="token parameter variable">-s</span> <span class="token punctuation">\</span> <span class="token parameter variable">-S</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="3-æ›´ä¸°å¯Œçš„è°ƒè¯•ç¯å¢ƒ"><a href="#3-æ›´ä¸°å¯Œçš„è°ƒè¯•ç¯å¢ƒ" class="headerlink" title="3. æ›´ä¸°å¯Œçš„è°ƒè¯•ç¯å¢ƒ"></a>3. æ›´ä¸°å¯Œçš„è°ƒè¯•ç¯å¢ƒ</h2><p><span class="label primary">Ubuntuç³»ç»Ÿæä¾›debootstrapå·¥å…·å¿«é€Ÿåˆ›å»ºæŒ‡å®šæ¶æ„çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚</span></p><h3 id="3-1-æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ¶ä½œ"><a href="#3-1-æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ¶ä½œ" class="headerlink" title="3.1 æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ¶ä½œ"></a>3.1 æ ¹æ–‡ä»¶ç³»ç»Ÿçš„åˆ¶ä½œ</h3><p>åªä½¿ç”¨æœ€å°çš„æ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯å¾ˆæœ‰å±€é™æ€§çš„ï¼Œå¾ˆå¤šè°ƒè¯•çš„å·¥å…·éƒ½æ²¡æ³•ç”¨ï¼Œç°åœ¨è¯•å›¾åšä¸€ä¸ªæ›´ä¸°å¯Œçš„æ ¹æ–‡ä»¶ã€‚<br>è¿™äº›æ–‡ä»¶æ¥è‡ª<a href="https://github.com/figozhang/runninglinuxkernel_5.0">ç¬¨å”çš„å¥”è·‘å§</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> rootfs_debian_x86_64.part0* <span class="token operator">&gt;</span> rootfs_debian_x86_64.tar.xz<span class="token function">sudo</span> <span class="token function">tar</span> Jxf rootfs_debian_x86_64.tar.xz<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/yi/Documents/rootfsAdvance<span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-a</span> rootfs_debian_x86_64/* rootfsAdvance/<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /home/yi/Documents/rootfs_debian_x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-ç¼–è¯‘å†…æ ¸"><a href="#3-2-ç¼–è¯‘å†…æ ¸" class="headerlink" title="3.2 ç¼–è¯‘å†…æ ¸"></a>3.2 ç¼–è¯‘å†…æ ¸</h3><p>è¿›å…¥ç¼–è¯‘å†…æ ¸çš„é‚£ä¸ªæ–‡ä»¶é‡Œ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> <span class="token parameter variable">-j20</span><span class="token function">sudo</span> <span class="token function">make</span> modules_install <span class="token parameter variable">-j</span> <span class="token number">20</span><span class="token function">make</span> headers_install<span class="token function">make</span> <span class="token parameter variable">-s</span> kernelrelease<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¾—åˆ°ç»“æœ5.4.259qemulearn</p><h3 id="3-3-å®Œå–„å‡†å¤‡è¦åˆ¶ä½œçš„æ–‡ä»¶ç³»ç»Ÿ"><a href="#3-3-å®Œå–„å‡†å¤‡è¦åˆ¶ä½œçš„æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="3.3 å®Œå–„å‡†å¤‡è¦åˆ¶ä½œçš„æ–‡ä»¶ç³»ç»Ÿ"></a>3.3 å®Œå–„å‡†å¤‡è¦åˆ¶ä½œçš„æ–‡ä»¶ç³»ç»Ÿ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/yi/Documents/rootfsAdvance/usr/src/linux/<span class="token function">rm</span> /home/yi/Documents/rootfsAdvance/lib/modules/5.4.259qemulearn/build<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/yi/Documents/rootfsAdvance/lib/modules/5.4.259qemulearn/build<span class="token function">cp</span> <span class="token parameter variable">-a</span> include /home/yi/Documents/rootfsAdvance/usr/src/linux/<span class="token function">cp</span> Makefile .config Module.symvers System.map /home/yi/Documents/rootfsAdvance/usr/src/linux/<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/yi/Documents/rootfsAdvance/usr/src/linux/arch/x86/<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/yi/Documents/rootfsAdvance/usr/src/linux/arch/x86/kernel/<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/yi/Documents/rootfsAdvance/usr/src/linux/scripts<span class="token function">cp</span> <span class="token parameter variable">-a</span> arch/x86/include /home/yi/Documents/rootfsAdvance/usr/src/linux/arch/x86/<span class="token function">cp</span> <span class="token parameter variable">-a</span> arch/x86/Makefile /home/yi/Documents/rootfsAdvance/usr/src/linux/arch/x86/<span class="token function">cp</span> <span class="token parameter variable">-a</span> scripts /home/yi/Documents/rootfsAdvance/usr/src/linux/<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/src/linux /home/yi/Documents//lib/modules/5.4.259qemulearn/build<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-4-åˆ¶ä½œæµç¨‹"><a href="#3-4-åˆ¶ä½œæµç¨‹" class="headerlink" title="3.4 åˆ¶ä½œæµç¨‹"></a>3.4 åˆ¶ä½œæµç¨‹</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>/home/yi/Documents/rootfsAdvance.ext4 <span class="token assign-left variable">bs</span><span class="token operator">=</span>1M <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">8192</span>mkfs.ext4 /home/yi/Documents/rootfsAdvance.ext4<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> tmpfs<span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-t</span> ext4 /home/yi/Documents/rootfsAdvance.ext4 tmpfs/ <span class="token parameter variable">-o</span> loop<span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-af</span> /home/yi/Documents/rootfsAdvance/* tmpfs/<span class="token function">umount</span> tmpfs<span class="token function">chmod</span> <span class="token number">777</span> /home/yi/Documents/rootfsAdvance.ext4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-5-å¯åŠ¨"><a href="#3-5-å¯åŠ¨" class="headerlink" title="3.5 å¯åŠ¨"></a>3.5 å¯åŠ¨</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> qemu-system-x86_64 <span class="token parameter variable">-m</span> 10G<span class="token punctuation">\</span><span class="token parameter variable">-nographic</span> <span class="token parameter variable">-smp</span> <span class="token number">10</span> <span class="token punctuation">\</span><span class="token parameter variable">-kernel</span> /home/yi/Downloads/kernel/longterm/linux-5.4.259/arch/x86_64/boot/bzImage <span class="token punctuation">\</span><span class="token parameter variable">-append</span> <span class="token string">"console=ttyS0 root=/dev/sda rw"</span> <span class="token punctuation">\</span><span class="token parameter variable">-hda</span> /home/yi/Documents/rootfsAdvance.ext4 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-gdbæ–­ç‚¹è°ƒè¯•"><a href="#4-gdbæ–­ç‚¹è°ƒè¯•" class="headerlink" title="4. gdbæ–­ç‚¹è°ƒè¯•"></a>4. gdbæ–­ç‚¹è°ƒè¯•</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">åœ¨æœ‰vmlinuxçš„ç›®å½•ä¸‹è¿›å…¥gdb<span class="token function">file</span> vmlinuxtarget remote:1234hb start_kernel <span class="token comment">#å¦‚æœæ–­ç‚¹ä¸åœæ­¢ï¼Œç¬¬ä¸€ä¸ªæ–­ç‚¹éœ€è¦ä¸‹ç¡¬æ–­ç‚¹è€Œä¸æ˜¯è½¯æ–­ç‚¹;åŒæ—¶è¿˜éœ€è¦åœ¨å¯åŠ¨å‘½ä»¤åŠ ä¸Šnokaslrå…³é—­åœ°å€éšæœºåŒ–</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/03c49184e12d49609da4d119d33ab0a2.png"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/dd4051a0e5474b1ba326ad35d6641735.png"></p><h2 id="5-vscodeè¿æ¥ä¸Šè™šæ‹Ÿæœº"><a href="#5-vscodeè¿æ¥ä¸Šè™šæ‹Ÿæœº" class="headerlink" title="5. vscodeè¿æ¥ä¸Šè™šæ‹Ÿæœº"></a>5. vscodeè¿æ¥ä¸Šè™šæ‹Ÿæœº</h2><p>éœ€è¦å®‰è£…ä¸€ä¸ªgdb debugçš„æ‰©å±•<br><a href="https://github.com/Dreamacro/clash/releases">ç”¨åˆ°çš„ç½‘ç»œå·¥å…·</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> clash-linux-amd64-v1.18.0/<span class="token function">chmod</span> +x clash-linux-amd64 <span class="token function">cat</span> my_paid_config.yaml <span class="token operator">&gt;</span> ~/.config/clash/config.yaml<span class="token function">sudo</span> <span class="token function">mv</span> clash-linux-amd64 /usr/local/bin/clashclash <span class="token parameter variable">-d</span> ~/.config/clash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/69931823d9f94936adb5ba782301da2f.jpeg" alt="é…ç½®ç½‘å…³"></p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> qemu </tag>
            
            <tag> gdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>watermark</title>
      <link href="/2023/10/27/watermark/"/>
      <url>/2023/10/27/watermark/</url>
      
        <content type="html"><![CDATA[<p>å†…å­˜å›æ”¶æœºåˆ¶ä¸»è¦ä¾èµ–äºä¸‰ä¸ªå­—æ®µLOW MIN HIGH</p><p>watermarkæœ‰ä»¥ä¸‹ä¸¤ç§ä¸»è¦å®ç°æ–¹å¼:<br>åœ°å€watermark - åœ¨ç‰©ç†å†…å­˜çš„æŸä¸ªåœ°å€å¤„å†™å…¥ä¸€ä¸ªç‰¹æ®Šçš„å€¼,è¿™ä¸ªåœ°å€å°±æ˜¯watermarkã€‚å½“å†…å­˜ä½¿ç”¨é‡è¾¾åˆ°watermarkåœ°å€æ—¶,å°±è¡¨ç¤ºå†…å­˜å·²ä½¿ç”¨åˆ°ä¸€å®šç¨‹åº¦,å¯èƒ½éœ€è¦é‡‡å–ç›¸åº”æªæ–½(å¦‚ç»“æŸæŸäº›è¿›ç¨‹é‡Šæ”¾å†…å­˜ç­‰)ã€‚<br>å€¼watermark - å†…å­˜ä¸­æœ‰ä¸€ä¸ªå˜é‡ç”¨äºå­˜å‚¨ä¸€ä¸ªæ•°å€¼,è¿™ä¸ªæ•°å€¼å°±æ˜¯watermarkã€‚å®ƒå¯ä»¥è¡¨ç¤ºå½“å‰å†…å­˜å·²ä½¿ç”¨çš„ç™¾åˆ†æ¯”æˆ–è€…å‰©ä½™å†…å­˜çš„å¤§å°ã€‚å½“è¯¥å€¼è¾¾åˆ°äº‹å…ˆè®¾ç½®çš„é˜ˆå€¼æ—¶,å°±è§¦å‘ç›¸åº”çš„å†…å­˜è°ƒèŠ‚æœºåˆ¶ã€‚</p><p>åœ¨x86 Linuxä¸Š,å†…å­˜watermarkä¸»è¦é‡‡ç”¨é¢„å…ˆè®¾ç½®å¥½çš„ç‰©ç†åœ°å€æ¥åæ˜ å†…å­˜ä½¿ç”¨çŠ¶æ€,æ ¹æ®åœ°å€æ˜¯å¦è¢«å ç”¨æ¥å†³å®šæ˜¯å¦éœ€è¦å†…å­˜å›æ”¶æˆ–è¿›ç¨‹ç»ˆæ­¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> watermark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡PTEç»Ÿè®¡é¡µé¢è®¿é—®æ¬¡æ•°</title>
      <link href="/2023/10/26/%E9%80%9A%E8%BF%87PTE%E7%BB%9F%E8%AE%A1%E9%A1%B5%E9%9D%A2%E8%AE%BF%E9%97%AE%E6%AC%A1%E6%95%B0/"/>
      <url>/2023/10/26/%E9%80%9A%E8%BF%87PTE%E7%BB%9F%E8%AE%A1%E9%A1%B5%E9%9D%A2%E8%AE%BF%E9%97%AE%E6%AC%A1%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>åˆ†æç³»ç»Ÿå†…å­˜è®¿é—®çš„æ–¹æ³•ä¹‹ä¸€ï¼šé¡µé¢è¡¨æ¡ç›®(PTE)ä½è·Ÿè¸ªã€‚æ“ä½œç³»ç»Ÿå¯ä»¥æ¸…ç©ºPTEä¸­çš„è®¿é—®(A)ä½å’Œè„(D)ä½,ç¡¬ä»¶é¡µè¡¨éå†å™¨ä¼šè®¾ç½®è¿™äº›ä½ã€‚é€šè¿‡å®šæœŸé‡ç½®è¿™äº›ä½å¹¶æ£€æŸ¥Aä½çš„çŠ¶æ€,æ“ä½œç³»ç»Ÿå¯ä»¥åˆ¤æ–­é¡µé¢æ˜¯å¦åœ¨é‡ç½®é—´éš”å†…è¢«è®¿é—®è¿‡ã€‚</p><h3 id="Aä½è¢«ç½®ä½çš„æ—¶åˆ»ï¼Ÿ"><a href="#Aä½è¢«ç½®ä½çš„æ—¶åˆ»ï¼Ÿ" class="headerlink" title=" Aä½è¢«ç½®ä½çš„æ—¶åˆ»ï¼Ÿ"></a><span class="label primary"> Aä½è¢«ç½®ä½çš„æ—¶åˆ»ï¼Ÿ</span></h3><p>æ¯å½“è®¿é—®ä¸€ä¸ªé¡µé¢æ—¶ï¼Œ<strong>ç¡¬ä»¶</strong>ä¼š<strong>è‡ªåŠ¨</strong>å°†Aä½è®¾ç½®ä¸º1ã€‚è¿™æ„å‘³ç€ï¼Œå½“CPUè®¿é—®ä¸€ä¸ªé¡µé¢æ—¶ï¼Œç¡¬ä»¶ä¼šæ£€æµ‹åˆ°è¿™ä¸ªè®¿é—®å¹¶å°†Aä½ä»0è®¾ç½®ä¸º1ï¼Œè¡¨ç¤ºé¡µé¢å·²ç»è¢«è®¿é—®ã€‚</p><h3 id="Aä½ç½®ä½è¢«æ¸…é™¤çš„æ—¶åˆ»ï¼Ÿ"><a href="#Aä½ç½®ä½è¢«æ¸…é™¤çš„æ—¶åˆ»ï¼Ÿ" class="headerlink" title=" Aä½ç½®ä½è¢«æ¸…é™¤çš„æ—¶åˆ»ï¼Ÿ"></a><span class="label primary"> Aä½ç½®ä½è¢«æ¸…é™¤çš„æ—¶åˆ»ï¼Ÿ</span></h3><ul><li>æ“ä½œç³»ç»Ÿå¯ä»¥å®šæœŸæ£€æŸ¥Aä½çš„çŠ¶æ€ï¼Œé€šå¸¸æ˜¯é€šè¿‡ä¸€ç§å«åšâ€é¡µé¢è¡¨æ¡ç›®ä½è·Ÿè¸ªâ€ï¼ˆPage Table Entry (PTE) Trackingï¼‰çš„æ–¹æ³•æ¥å®ç°ã€‚</li><li>å°†ä¸€ä¸ªé¡µé¢ä»ç‰©ç†å†…å­˜ä¸­ç½®æ¢åˆ°ç£ç›˜ä¸Šæ—¶ï¼Œé€šå¸¸ä¼šæ¸…é›¶è¯¥é¡µé¢çš„Aä½ã€‚</li></ul><h3 id="ä¼šä¸ä¼šå­˜åœ¨Aä½è¿˜æ²¡æœ‰ç½®0çš„æƒ…å†µä¸‹ï¼Œé¡µé¢åˆè¢«è®¿é—®äº†ï¼Ÿ"><a href="#ä¼šä¸ä¼šå­˜åœ¨Aä½è¿˜æ²¡æœ‰ç½®0çš„æƒ…å†µä¸‹ï¼Œé¡µé¢åˆè¢«è®¿é—®äº†ï¼Ÿ" class="headerlink" title=" ä¼šä¸ä¼šå­˜åœ¨Aä½è¿˜æ²¡æœ‰ç½®0çš„æƒ…å†µä¸‹ï¼Œé¡µé¢åˆè¢«è®¿é—®äº†ï¼Ÿ"></a><span class="label primary"> ä¼šä¸ä¼šå­˜åœ¨Aä½è¿˜æ²¡æœ‰ç½®0çš„æƒ…å†µä¸‹ï¼Œé¡µé¢åˆè¢«è®¿é—®äº†ï¼Ÿ</span></h3><p>æ˜¯çš„ï¼Œå¦‚æœåœ¨ä¸Šä¸€æ¬¡è®¿é—®å,PTEçš„A bitè¿˜æ²¡æœ‰è¢«æ“ä½œç³»ç»Ÿé‡ç½®ä¸º0,ç„¶åé¡µé¢åˆè¢«è®¿é—®äº†,é‚£ä¹ˆç¡¬ä»¶ä»ä¼šå°†A bitç½®1ã€‚</p><h3 id="struct-pageé‡Œæœ‰-countå’Œ-mapcountï¼Œè¿™ä¸ªå’ŒPTEçš„Aä½æœ‰ä»€ä¹ˆå…³ç³»å—ï¼Ÿ"><a href="#struct-pageé‡Œæœ‰-countå’Œ-mapcountï¼Œè¿™ä¸ªå’ŒPTEçš„Aä½æœ‰ä»€ä¹ˆå…³ç³»å—ï¼Ÿ" class="headerlink" title="struct pageé‡Œæœ‰_countå’Œ_mapcountï¼Œè¿™ä¸ªå’ŒPTEçš„Aä½æœ‰ä»€ä¹ˆå…³ç³»å—ï¼Ÿ"></a><span class="label primary">struct pageé‡Œæœ‰_countå’Œ_mapcountï¼Œè¿™ä¸ªå’ŒPTEçš„Aä½æœ‰ä»€ä¹ˆå…³ç³»å—ï¼Ÿ</span></h3><p>_countå­—æ®µè¡¨ç¤ºè¿™ä¸ªç‰©ç†é¡µæ¡†è¢«å¤šå°‘ä¸ªè™šæ‹Ÿé¡µæ˜ å°„å’Œå…±äº«ã€‚å®ƒåæ˜ äº†ä¸€ä¸ªé¡µæ¡†çš„å¼•ç”¨æ•°é‡ã€‚<br>_mapcountå­—æ®µè¡¨ç¤ºè¿™ä¸ªé¡µæ¡†è¢«å¤šå°‘ä¸ªPTEæ˜ å°„ã€‚<br>ä¹Ÿå°±æ˜¯è¯´:_countå’Œ_mapcountè¡¨ç¤ºé¡µé¢çš„æ˜ å°„å…³ç³»,è€ŒPTEä¸­çš„Aä½è¡¨ç¤ºé¡µé¢çš„è®¿é—®çŠ¶æ€ã€‚struct pageå’ŒPTEä¸­çš„ä¿¡æ¯åæ˜ äº†ä¸åŒçš„å†…å­˜ç®¡ç†éœ€è¦ã€‚<br>ä¸¤è€…ä¹Ÿæœ‰è”ç³»,æ¯”å¦‚åœ¨å›æ”¶å†…å­˜é¡µæ—¶,åªæœ‰_mapcountä¸º0æ—¶,è¡¨ç¤ºæ²¡æœ‰PTEæŒ‡å‘è¯¥é¡µ,æ‰å¯ä»¥å®‰å…¨å›æ”¶ã€‚</p><p>åŸºäº4.15å†…æ ¸é€šè¿‡PTEç»Ÿè®¡é¡µé¢è®¿é—®æ¬¡æ•°ä»£ç æµç¨‹å›¾ï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/6660cc59f6994938a01bd9ff25569339.png"></p><p>ä¸ºäº†ä¿è¯æ¯ä¸ªè¿›ç¨‹é‡Œå†…å­˜æ˜ å°„çš„ç‹¬ç«‹è¿›è¡Œï¼Œæ‰€ä»¥æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰ç‹¬ç«‹çš„é¡µè¡¨ï¼Œè€Œé¡µè¡¨çš„èµ·å§‹åœ°å€å°±å­˜æ”¾åœ¨ struct mm_struct ç»“æ„ä¸­çš„ pgd å±æ€§ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PTE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸åŒçš„æ€»çº¿å’Œå†…å­˜æ¡ç»„æˆ</title>
      <link href="/2023/10/26/%E4%B8%8D%E5%90%8C%E7%9A%84%E6%80%BB%E7%BA%BF/"/>
      <url>/2023/10/26/%E4%B8%8D%E5%90%8C%E7%9A%84%E6%80%BB%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸€äº›å…³äºDDR-Tæ›´å¤šçš„ä¿¡æ¯åœ¨è®ºæ–‡Characterizing the Performance of Intel Optane Persistent Memoryâ€”â€”A Close Look at its On-DIMM Bufferingæœ‰è¢«è®¨è®ºã€‚</p></blockquote><h2 id="å†…å­˜æ¡ç»„æˆ"><a href="#å†…å­˜æ¡ç»„æˆ" class="headerlink" title="å†…å­˜æ¡ç»„æˆ"></a>å†…å­˜æ¡ç»„æˆ</h2><p>æ¬è¿å’Œä¿®æ”¹è‡ª<a href="https://www.cnblogs.com/yilang/p/11103061.html#:~:text=1%20%E6%8C%89%E5%AD%97%E7%BC%96%E5%9D%80%EF%BC%9A%20%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%B8%AA256M%E5%86%85%E5%AD%98%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%AE%83%E7%9A%84%E5%AF%BB%E5%9D%80%E8%8C%83%E5%9B%B4%E6%98%AF64M%EF%BC%8C%E8%80%8C%E6%AF%8F%E4%B8%AA%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E5%8F%AF%E4%BB%A5%E5%AD%98%E5%82%A832bit%E6%95%B0%E6%8D%AE%E3%80%82,2%20%E6%8C%89%E5%8D%8A%E5%AD%97%E7%BC%96%E5%9D%80%EF%BC%9A%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%B8%AA256M%E5%86%85%E5%AD%98%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%AE%83%E7%9A%84%E5%AF%BB%E5%9D%80%E8%8C%83%E5%9B%B4%E6%98%AF128M%EF%BC%8C%E8%80%8C%E6%AF%8F%E4%B8%AA%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E5%8F%AF%E4%BB%A5%E5%AD%98%E5%82%A816bit%E6%95%B0%E6%8D%AE%E3%80%82%203%20%E6%8C%89%E5%AD%97%E8%8A%82%E7%BC%96%E5%9D%80%EF%BC%9A%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%B8%AA256M%E5%86%85%E5%AD%98%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%AE%83%E7%9A%84%E5%AF%BB%E5%9D%80%E8%8C%83%E5%9B%B4%E6%98%AF256M%EF%BC%8C%E8%80%8C%E6%AF%8F%E4%B8%AA%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E5%8F%AF%E4%BB%A5%E5%AD%98%E5%82%A88bit%E6%95%B0%E6%8D%AE%E3%80%82">å†…å­˜æ¡çš„ç»„æˆã€ç¼–å€ã€å¯»å€å’Œè¯»å†™æ–¹å¼</a></p><ul><li>DIMMæ˜¯è‹±æ–‡Dual In-line Memory Moduleçš„ç¼©å†™,æ„æ€æ˜¯åŒåˆ—ç›´æ’å†…å­˜æ¨¡å—ã€‚DIMMæ¨¡å—æœ‰ä¸€ä¸ªå°çš„å°åˆ·ç”µè·¯æ¿,ä¸Šé¢ç„Šæ¥æœ‰ä¸€ç³»åˆ—çš„å†…å­˜èŠ¯ç‰‡,å¹¶åœ¨ç”µè·¯æ¿çš„ä¸¤ä¾§æœ‰ä¸€æ’é‡‘å±æ¥è§¦é’ˆ,å¯ä»¥ç›´æ’åœ¨ä¸»æ¿çš„å†…å­˜æ’æ§½ä¸Šã€‚</li><li>CPUä¸å†…å­˜ä¹‹é—´çš„æ¥å£ä½å®½æ˜¯64bitï¼Œä¹Ÿå°±æ„å‘³ç€CPUåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…ä¼šå‘å†…å­˜å‘é€æˆ–ä»å†…å­˜è¯»å–64bitçš„æ•°æ®ã€‚å•ä¸ªå†…å­˜é¢—ç²’çš„ä½å®½ä»…æœ‰4bitã€8bitæˆ–16bitï¼Œä¸ªåˆ«ä¹Ÿæœ‰32bitçš„ã€‚å› æ­¤ï¼Œå¿…é¡»æŠŠå¤šä¸ªé¢—ç²’å¹¶è”èµ·æ¥ï¼Œç»„æˆä¸€ä¸ªä½å®½ä¸º64bitçš„æ•°æ®é›†åˆï¼Œæ‰å¯ä»¥å’ŒCPUäº’è¿ã€‚ç”Ÿäº§å•†æŠŠ64bité›†åˆç§°ä¸ºä¸€ä¸ªRANKæˆ–Physical RANKã€‚</li><li>Chipï¼ˆMemoryï¼‰å­˜å‚¨èŠ¯ç‰‡ï¼Œåˆå«å†…å­˜é¢—ç²’ã€‚çœŸæ­£æä¾›å­˜å‚¨çš„å™¨ä»¶ã€‚</li><li>Bank:Chipé‡ŒåŒ…å«å¤šä¸ªBankã€‚ä¸€ä¸ªBankå°±æ˜¯ä¸€ä¸ªå­˜å‚¨çŸ©é˜µåº“ã€‚ç”±Chipçš„BAçº¿çš„ä½å®½å†³å®šä¸ªæ•°ã€‚</li><li>Channelåœ¨è®¡ç®—æœºç³»ç»Ÿæ¶æ„ä¸­æŒ‡çš„æ˜¯å†…å­˜é€šé“ï¼ˆMemory Channelï¼‰ã€‚å†…å­˜é€šé“çš„æ•°é‡å†³å®šäº†CPUèƒ½å¤ŸåŒæ—¶è®¿é—®å†…å­˜çš„å¸¦å®½ã€‚åŒé€šé“ï¼ˆDual Channelï¼‰åˆ™æœ‰ä¸¤ä¸ªé€šé“åŒæ—¶å·¥ä½œ,å¯ä»¥åŒæ—¶è¯»å–ä¸¤ä¸ªå†…å­˜æ¨¡å—çš„æ•°æ®ã€‚</li></ul><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/13a2a5c123234fd0a99f23734c36edc0.png"></p><p>bankå†å¾€ä¸‹åˆ†å°±æ˜¯å®é™…å­˜å‚¨å•ä½å…ƒçš„ç”µè·¯ï¼Œä¸€èˆ¬æ¥è¯´æ¨ªå‘é€‰æ‹©æ’æ•°çš„çº¿è·¯ç§°ä¸ºrowï¼ˆrow enable, row select, word lineï¼‰ï¼Œçºµå‘è´Ÿè´£ä¼ é€ä¿¡å·çš„çº¿è·¯ç§°ä¸ºcolumnï¼ˆbitlineï¼‰ï¼Œæ¯ç»„bankçš„ä¸‹æ–¹è¿˜ä¼šæœ‰ä¸ªrow bufferï¼ˆsense ampliferï¼‰ï¼Œè´Ÿè´£å°†è¯»å‡ºçš„rowå†…å®¹æš‚å­˜ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/f81976ab0534432a990e976c8a82df59.png"><br>ç‰©ç†åœ°å€è¦åŒ…å«è¡Œåœ°å€ã€åˆ—åœ°å€ï¼Œbankåœ°å€ã€rankä¿¡æ¯ç­‰ï¼Œç›´åˆ°å®šä½åˆ°cellã€‚</p><h2 id="CXL3-0"><a href="#CXL3-0" class="headerlink" title="CXL3.0"></a>CXL3.0</h2><p><a href="https://www.computeexpresslink.org/_files/ugd/0c1418_a8713008916044ae9604405d10a7773b.pdf">å¤§éƒ¨åˆ†å†…å®¹æ¥è‡ªè¿™ç¯‡æ–‡ç« ï¼Œä½œè€…æ˜¯Debendra Das Sharmaåšå£«Intelé™¢å£«å…¼I/OæŠ€æœ¯å’Œæ ‡å‡†æ€»ç›‘ï¼›Ishwar Agarwalé¦–å¸­ç¡¬ä»¶å·¥ç¨‹å¸ˆå…¼å¾®è½¯Azureç¡¬ä»¶æ¶æ„è”åˆä¸»å¸­â€¦â€¦</a><br>Compute Express Linkâ„¢æ˜¯ä¸€ç§<strong>å¼€æ”¾å¼è¡Œä¸šæ ‡å‡†äº’è¿åè®®</strong>ï¼Œå¯åœ¨ä¸»æœºå¤„ç†å™¨å’ŒåŠ é€Ÿå™¨ã€å†…å­˜ç¼“å†²åŒºå’Œæ™ºèƒ½I/Oè®¾å¤‡ç­‰è®¾å¤‡ä¹‹é—´æä¾›é«˜å¸¦å®½ã€ä½å»¶è¿Ÿè¿æ¥ã€‚å®ƒæ—¨åœ¨é€šè¿‡æ”¯æŒå¼‚æ„å¤„ç†å’Œå†…å­˜ç³»ç»Ÿä»¥åŠäººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€åˆ†æã€äº‘åŸºç¡€è®¾æ–½ã€ç½‘ç»œå’Œè¾¹ç¼˜äº‘åŒ–ã€é€šä¿¡ç³»ç»Ÿå’Œé«˜æ€§èƒ½è®¡ç®—ç­‰é¢†åŸŸçš„åº”ç”¨æ¥è§£å†³ä¸æ–­å¢é•¿çš„<strong>é«˜æ€§èƒ½è®¡ç®—å·¥ä½œè´Ÿè½½</strong>ã€‚åŸºäºPCI ExpressÂ®çš„I/Oè¯­ä¹‰ä¹‹ä¸Šçš„ä¸€è‡´æ€§å’Œå†…å­˜è¯­ä¹‰ï¼Œå¯åœ¨ä¸æ–­å‘å±•çš„ä½¿ç”¨æ¨¡å‹ä¸­ä¼˜åŒ–æ€§èƒ½ã€‚è¿™ä¸€ç‚¹å˜å¾—è¶Šæ¥è¶Šé‡è¦ï¼Œå› ä¸ºåœ¨è¿™äº›æ–°å…´åº”ç”¨ä¸­å¤„ç†æ•°æ®éœ€è¦åœ¨CPUã€GPUã€FPGAã€æ™ºèƒ½NICå’Œå…¶ä»–åŠ é€Ÿå™¨ä¸­éƒ¨ç½²æ ‡é‡ã€çŸ¢é‡ã€çŸ©é˜µå’Œç©ºé—´æ¶æ„çš„å¤šæ ·åŒ–ç»„åˆã€‚</p><p>CXL1.0äº2019å¹´3æœˆé¦–æ¬¡æ¨å‡ºï¼Œæ”¯æŒä¸€ç»„ä¸°å¯Œçš„åè®®ä¹‹é—´çš„åŠ¨æ€å¤ç”¨ï¼ŒåŒ…æ‹¬I/Oï¼ˆ<strong>CXL.io</strong>åŸºäºPCIeï¼‰ã€ç¼“å­˜ï¼ˆ<strong>CXL.cache</strong>ï¼‰å’Œå†…å­˜ï¼ˆ<strong>CXL.memory</strong>ï¼‰è¯­ä¹‰ã€‚CXLåœ¨ä¸»æœºå¤„ç†å™¨å’Œè¿æ¥çš„CXLè®¾å¤‡ä¸Šçš„ä»»ä½•å†…å­˜ä¹‹é—´ç»´æŠ¤ç»Ÿä¸€ã€ä¸€è‡´çš„å†…å­˜ç©ºé—´ã€‚è¿™å…è®¸CPUå’Œè®¾å¤‡å…±äº«èµ„æºå¹¶åœ¨åŒä¸€å†…å­˜åŒºåŸŸä¸Šè¿è¡Œï¼Œä»¥æé«˜æ€§èƒ½ã€å‡å°‘æ•°æ®ç§»åŠ¨å¹¶é™ä½è½¯ä»¶å †æ ˆå¤æ‚æ€§ï¼ˆæ¯”å¦‚GPUå’ŒCPUç”¨å†…å­˜å°±æŒºéº»çƒ¦çš„ï¼‰ã€‚</p><p>åŸºäºCXLçš„è¡Œä¸šæˆåŠŸå’Œæ¥å—åº¦ï¼ˆ180å¤šå®¶æˆå‘˜å…¬å¸çš„ç§¯æå‚ä¸è¯æ˜ï¼‰ï¼ŒCXL2.0äº2020å¹´11æœˆå‘å¸ƒï¼Œæ”¯æŒæ›´å¤šä½¿ç”¨æ¨¡å‹ï¼ŒåŒæ—¶ä¿æŒä¸CXL1.1å’ŒCXL1.0çš„å®Œå…¨å‘åå…¼å®¹æ€§ã€‚CXL2.0åœ¨ä¸‰å¤§æ–¹é¢å¢å¼ºäº†CXL1.1çš„ä½“éªŒï¼šæ”¯æŒå•çº§äº¤æ¢æœºã€æ”¯æŒæŒä¹…åŒ–å†…å­˜ã€å†…å­˜æ± å’Œå®‰å…¨æ€§ã€‚è¿™äº›åŠŸèƒ½ä½¿å¹³å°ä¸­çš„è®¸å¤šè®¾å¤‡èƒ½å¤Ÿè¿ç§»åˆ°CXLï¼ŒåŒæ—¶ä¿æŒä¸PCIe5.0çš„å…¼å®¹æ€§ä»¥åŠCXLçš„ä½å»¶è¿Ÿç‰¹æ€§ã€‚</p><p>CXL3.0åŸºäºPCIe6.0æŠ€æœ¯ï¼Œå°†ä¼ è¾“é€Ÿç‡æé«˜ä¸€å€è‡³64GT/sï¼Œä¸”ä¸å‰ä»£äº§å“ç›¸æ¯”æ²¡æœ‰é¢å¤–çš„å»¶è¿Ÿã€‚è¿™ä½¿å¾—3.0ç‰ˆæœ¬äº§ç”Ÿäº†æ›´å¤šç”¨ä¾‹ï¼š</p><ul><li>å†…å­˜æ± å’Œå…±äº«ï¼šCXL3.0å¯¹CXL2.0ä¸­é¦–æ¬¡å¼•å…¥çš„å†…å­˜æ± è¿›è¡Œäº†é‡å¤§å¢å¼ºã€‚å†…å­˜æ± èƒ½å¤Ÿå°†CXLé™„åŠ å†…å­˜è§†ä¸ºå¯æ›¿ä»£èµ„æºï¼Œå¯ä»¥æ ¹æ®éœ€è¦çµæ´»åœ°åˆ†é…å’Œé‡Šæ”¾åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼ˆä¹Ÿç§°ä¸ºèŠ‚ç‚¹æˆ–ä¸»æœºï¼‰ã€‚è¿™ä½¿å¾—ç³»ç»Ÿè®¾è®¡äººå‘˜æ— éœ€è¿‡åº¦é…ç½®æœºæ¶ä¸­çš„æ¯å°æœåŠ¡å™¨ï¼ŒåŒæ—¶è·å¾—æœ€ä½³æ€§èƒ½ã€‚å›¾3æ˜¾ç¤ºäº†CXL2.0å†…å­˜æ± çš„ç¤ºä¾‹ã€‚åœ¨CXL3.0ä¸­ï¼Œé™¤äº†å†…å­˜æ± ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¼•å…¥äº†å†…å­˜å…±äº«çš„æ¦‚å¿µã€‚å†…å­˜å…±äº«æ˜¯ä½¿ç”¨ç¡¬ä»¶ä¸€è‡´æ€§åœ¨ä¸»æœºä¹‹é—´ä¸€è‡´å…±äº«CXLè¿æ¥å†…å­˜çš„èƒ½åŠ›ã€‚å› æ­¤ï¼Œä¸å†…å­˜æ± ä¸åŒï¼Œå†…å­˜å…±äº«å…è®¸ç»™å®šçš„å†…å­˜åŒºåŸŸå¯ç”±å¤šä¸ªä¸»æœºåŒæ—¶è®¿é—®ï¼Œå¹¶ä¸”ä»ç„¶ä¿è¯æ¯ä¸ªä¸»æœºéƒ½èƒ½çœ‹åˆ°è¯¥ä½ç½®çš„æœ€æ–°æ•°æ®ï¼Œè€Œä¸éœ€è¦è½¯ä»¶ç®¡ç†çš„åè°ƒã€‚è¿™ä½¿å¾—ç³»ç»Ÿè®¾è®¡èƒ½å¤Ÿæ„å»ºæœºå™¨é›†ç¾¤ï¼Œé€šè¿‡å…±äº«å†…å­˜ç»“æ„æ¥è§£å†³å¤§å‹é—®é¢˜ã€‚å›¾4æ˜¾ç¤ºäº†å…±äº«å’Œæ± åŒ–å†…å­˜æ‹“æ‰‘çš„ç¤ºä¾‹ã€‚</li></ul><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/cb97d276823f47bab80034187b4c5df0.png" alt="å›¾3"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/da32e99101d141769a8cf4a94cb9d77d.png" alt="å›¾4"></p><div class="note info no-icon">åœ¨CXLåè®®ä¸­,å®šä¹‰äº†ä¸åŒç±»å‹çš„è®¾å¤‡:- CXL Type-1: Cache-Coherent (CC) Accelerator,å¦‚GPU- CXL Type-2: Memory Expander,å¦‚DRAM- CXL Type-3: IO and Memory Semantic (IOMS) Device,å¦‚SSD</div> <ul><li>Fabricï¼šCXL3.0é¦–æ¬¡å¼•å…¥äº†FabricåŠŸèƒ½ï¼Œè¶…è¶Šäº†PCIeå’Œå‰å‡ ä»£CXLä¼ ç»Ÿçš„åŸºäºæ ‘çš„æ¶æ„ç»“æ„ã€‚å›¾5æ˜¾ç¤ºäº†CXLç»“æ„çš„éæ ‘å½¢æ‹“æ‰‘ç¤ºä¾‹ã€‚CXLç»“æ„æœ€å¤šå¯æ”¯æŒ4096ä¸ªèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨ç§°ä¸ºåŸºäºç«¯å£çš„è·¯ç”±ï¼ˆPBRï¼‰çš„æ–°çš„å¯æ‰©å±•å¯»å€æœºåˆ¶ç›¸äº’é€šä¿¡ã€‚è¿™é‡Œï¼ŒèŠ‚ç‚¹å¯ä»¥æ˜¯CPUä¸»æœºã€å¸¦æˆ–ä¸å¸¦å†…å­˜çš„CXLåŠ é€Ÿå™¨ã€PCIeè®¾å¤‡æˆ–Global Fabric Attached Memoryï¼ˆGFAMï¼‰è®¾å¤‡ã€‚GFAMè®¾å¤‡ç±»ä¼¼äºä¼ ç»Ÿçš„CXL Type-3è®¾å¤‡ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒå¯ä»¥ä½¿ç”¨åŸºäºç«¯å£çš„è·¯ç”±ä»¥çµæ´»çš„æ–¹å¼è¢«å¤šä¸ªèŠ‚ç‚¹ï¼ˆæœ€å¤š4095ä¸ªï¼‰è®¿é—®ã€‚è¿™ç§æ¶æ„ä¸ºæ„å»ºå¼ºå¤§çš„ç³»ç»Ÿå¼€è¾Ÿäº†å¯èƒ½æ€§ï¼Œè¯¥ç³»ç»Ÿç”±è®¡ç®—å’Œå†…å­˜å…ƒç´ ç»„æˆï¼Œä»¥æ»¡è¶³ç‰¹å®šå·¥ä½œè´Ÿè½½çš„éœ€æ±‚ã€‚å›¾6æ˜¾ç¤ºäº†CXL Fabricsçš„å‡ ä¸ªç¤ºä¾‹ç”¨ä¾‹ã€‚</li></ul><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/76fbf37cdd6849e299c4752a0db65012.png" alt="å›¾5"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/50588c04fc3c467fb36f03d6ab091518.png" alt="å›¾6 MLåŠ é€Ÿå™¨å’ŒGFAMè®¾å¤‡ï¼ˆå·¦ï¼‰ã€å…·æœ‰å…±äº«å†…å­˜å’ŒNICçš„HPCåˆ†æï¼ˆå³ï¼‰"></p><div class="note primary no-icon">ä»2.0å’Œ3.0æ¥çœ‹å’Œå†…å­˜è®¾å¤‡çš„é“¾æ¥æœ‰ç›´è¿å’Œäº¤æ¢æœºé“¾æ¥ã€‚Direct Connect Modeå…è®¸CXLè®¾å¤‡åƒæœ¬åœ°PCIeè®¾å¤‡ä¸€æ ·ç›´æ¥è¿æ¥åœ¨ä¸»æœºç«¯å£ä¸Š,è€Œä¸éœ€è¦é€šè¿‡CXL Switchã€‚é¿å…äº†CXL Switchå¯èƒ½å¸¦æ¥çš„é¢å¤–è·³æ•°å’Œå»¶è¿Ÿã€‚å¯¹äºä¸€äº›å¯¹å»¶è¿Ÿè¾ƒæ•æ„Ÿçš„åº”ç”¨,Direct Connect Modeå¯ä»¥å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚ç¼ºç‚¹æ˜¯æŸå¤±äº†CXL Switchçš„çµæ´»æ€§å’Œç«¯å£è™šæ‹ŸåŒ–èƒ½åŠ›ã€‚</div> <p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d03c1f5fd8f84fd49eb3dfd02c7e85c3.png" alt="the Computer Architecture and Memory Systems Laboratoryï¼ˆCAMELï¼‰at KAIST"></p><p>è¿™ä¸ªå®éªŒå®¤è¿˜è®²è¿™ä¸ªåŸå‹ä¸åªä½¿ç”¨DRAMæ‰©å±•å†…å­˜åšäº†ä¸€ç³»åˆ—æ¯”è¾ƒï¼š<a href="https://camel.kaist.ac.kr/public/camel-cxl-memory-pooling.pdf">A Technology Brief by CAMEL KAIST</a>ï¼ˆä½†æ˜¯ä¸ªäººè§‰å¾—ä»–å¯¹å®éªŒç»“æœè§£é‡Šé‚£éƒ¨åˆ†ä¸å¤Ÿè¯¦ç»†ï¼Œæœ‰çš„ç‚¹ä¸å¤ªæ‡‚ï¼‰</p><div class="note warning no-icon">å½“å‰æ”¯æŒCXLçš„äº§å“å¤§å¤šè¿˜åœç•™åœ¨CXL1.0ç‰ˆæœ¬,CXL2.0çš„æ”¯æŒè¿˜æ¯”è¾ƒæœ‰é™</div> <h2 id="DDRï¼ˆåŒæ•°æ®é€Ÿç‡ï¼‰"><a href="#DDRï¼ˆåŒæ•°æ®é€Ÿç‡ï¼‰" class="headerlink" title="DDRï¼ˆåŒæ•°æ®é€Ÿç‡ï¼‰"></a>DDRï¼ˆåŒæ•°æ®é€Ÿç‡ï¼‰</h2><p>DDRæ˜¯ä¸€ç§ç”¨äºç³»ç»Ÿå†…å­˜ï¼ˆRAMï¼‰çš„æ¥å£å’ŒæŠ€æœ¯ã€‚å®ƒå…è®¸CPUï¼ˆä¸­å¤®å¤„ç†å™¨ï¼‰ä¸ç³»ç»Ÿå†…å­˜ä¹‹é—´è¿›è¡Œé«˜é€Ÿæ•°æ®ä¼ è¾“ã€‚DDRæ ‡å‡†æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œä¾‹å¦‚DDR3ã€DDR4å’ŒDDR5ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ä¸åŒçš„æ•°æ®ä¼ è¾“é€Ÿç‡å’ŒæŠ€æœ¯è§„æ ¼ã€‚DDRä¸»è¦ç”¨äºå­˜å‚¨å’Œè¯»å–è®¡ç®—æœºå†…å­˜ä¸­çš„æ•°æ®ï¼Œä»¥ä¾›CPUä½¿ç”¨ã€‚CPUé€šè¿‡DDRæ¥å£æ¥è®¿é—®å†…å­˜ä¸­çš„ç¨‹åºå’Œæ•°æ®ã€‚DDRå†…å­˜é€šå¸¸ä»¥å¤šé€šé“æ–¹å¼å·¥ä½œï¼Œå…¶ä¸­æ¯ä¸ªé€šé“å¯ä»¥è¿æ¥ä¸€ä¸ªæˆ–å¤šä¸ªDRAMï¼ˆDynamic Random Access Memoryï¼‰å†…å­˜æ¡ã€‚åœ¨è¿™æ ·çš„é…ç½®ä¸­ï¼Œæ•°æ®å¯ä»¥åœ¨ä¸åŒçš„å†…å­˜æ¡ä¹‹é—´åˆ†æ•£å­˜æ”¾ï¼Œè¿™è¢«ç§°ä¸ºå¤šé€šé“å†…å­˜æ¶æ„ï¼Œæ€»å¸¦å®½å°±æ˜¯å„é€šé“å¸¦å®½çš„æ€»å’Œã€‚</p><h2 id="DDR-T"><a href="#DDR-T" class="headerlink" title="DDR-T"></a>DDR-T</h2><p>Intel Optane Persistent Memoryä½¿ç”¨DDR-Tä¸CPUä¼ è¾“æ•°æ®ã€‚ç‰¹åˆ«è®¾è®¡ç”¨äºå¤§å‹æ•°æ®ä¸­å¿ƒå’Œéœ€è¦å¤§é‡å†…å­˜çš„é«˜æ€§èƒ½è®¡ç®—ç¯å¢ƒã€‚DDR-Tå†…å­˜æ¨¡å—é€šå¸¸å…·æœ‰éå¸¸é«˜çš„å­˜å‚¨å®¹é‡ï¼Œé€šå¸¸ä»¥TBï¼ˆTerabytesï¼Œåƒå…†å­—èŠ‚ï¼‰ä¸ºå•ä½æ¥è¡¡é‡ï¼Œå› æ­¤å¾—åä¸ºâ€Terabyteâ€ã€‚è¿™ä½¿å¾—DDR-Téå¸¸é€‚åˆå¤§è§„æ¨¡æ•°æ®åˆ†æã€è™šæ‹ŸåŒ–ã€äººå·¥æ™ºèƒ½å’Œå…¶ä»–å†…å­˜å¯†é›†å‹åº”ç”¨ã€‚</p><h2 id="PCIeï¼ˆPeripheral-Component-Interconnect-Expressï¼‰"><a href="#PCIeï¼ˆPeripheral-Component-Interconnect-Expressï¼‰" class="headerlink" title="PCIeï¼ˆPeripheral Component Interconnect Expressï¼‰"></a>PCIeï¼ˆPeripheral Component Interconnect Expressï¼‰</h2><p>PCIeæ˜¯ä¸€ç§ç”¨äºè¿æ¥å„ç§å¤–éƒ¨è®¾å¤‡å’Œæ‰©å±•å¡çš„é«˜é€Ÿæ€»çº¿æ ‡å‡†ã€‚å®ƒé€šå¸¸ç”¨äºè¿æ¥å›¾å½¢å¡ã€ç½‘ç»œé€‚é…å™¨ã€å­˜å‚¨æ§åˆ¶å™¨ã€å£°å¡ç­‰å¤–éƒ¨ç¡¬ä»¶è®¾å¤‡ã€‚PCIeæä¾›äº†é«˜å¸¦å®½å’Œä½å»¶è¿Ÿçš„æ•°æ®ä¼ è¾“é€šé“ï¼Œä½¿å¤–éƒ¨è®¾å¤‡èƒ½å¤Ÿä¸CPUå’Œç³»ç»Ÿå†…å­˜è¿›è¡Œå¿«é€Ÿé€šä¿¡ã€‚PCIeé€šå¸¸ä¸ç”¨äºå†…å­˜è®¿é—®ï¼Œè€Œæ˜¯ç”¨äºè¿æ¥å¤–éƒ¨è®¾å¤‡ï¼Œä»¥æ‰©å±•è®¡ç®—æœºçš„åŠŸèƒ½ã€‚</p><h2 id="UPI"><a href="#UPI" class="headerlink" title="UPI"></a>UPI</h2><p>è·¨NUMAèŠ‚ç‚¹é—´æ•°æ®çš„ä¼ è¾“ã€‚</p><h2 id="ISA"><a href="#ISA" class="headerlink" title="ISA"></a>ISA</h2><p>X86ä½“ç³»ç»“æ„ä¸‹æœ‰ISAæ€»çº¿.</p><p>ZONE_DMAï¼šç”¨äºé‚£äº›æ— æ³•å¯¹å…¨éƒ¨ç‰©ç†å†…å­˜è¿›è¡Œå¯»å€çš„ç¡¬ä»¶è®¾å¤‡ï¼Œè¿›è¡ŒDMAæ—¶çš„å†…å­˜åˆ†é…ã€‚ä¾‹å¦‚å‰è¾¹ä»‹ç»çš„ISAè®¾å¤‡åªèƒ½å¯¹ç‰©ç†å†…å­˜çš„å‰16Mè¿›è¡Œå¯»å€ã€‚è¯¥åŒºåŸŸçš„é•¿åº¦ä¾èµ–äºå…·ä½“çš„å¤„ç†å™¨ç±»å‹ã€‚</p><p>å†…æ ¸æ€è™šæ‹Ÿå†…å­˜ç©ºé—´çš„å‰896MåŒºåŸŸæ˜¯ç›´æ¥æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸­çš„å‰896MåŒºåŸŸä¸­çš„ï¼Œç›´æ¥æ˜ å°„åŒºä¸­çš„æ˜ å°„å…³ç³»æ˜¯ä¸€æ¯”ä¸€æ˜ å°„ã€‚æ˜ å°„å…³ç³»æ˜¯å›ºå®šçš„ä¸ä¼šæ”¹å˜ã€‚<strong>ç›´æ¥æ˜ å°„åŒºçš„å‰16Mä¸“é—¨è®©å†…æ ¸ç”¨æ¥ä¸ºDMAåˆ†é…å†…å­˜ï¼Œè¿™å—16Må¤§å°çš„å†…å­˜åŒºåŸŸæˆ‘ä»¬ç§°ä¹‹ä¸ºZONE_DMAã€‚</strong> X86ä½“ç³»ç»“æ„ä¸‹ISAæ€»çº¿çš„ç›´æ¥å†…å­˜å­˜å–æ§åˆ¶å™¨å«DMAã€‚16Måˆ°896Mï¼ˆä¸åŒ…å«896Mï¼‰è¿™æ®µåŒºåŸŸï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <strong>ZONE_NORMAL</strong>ã€‚</p><h2 id="DMA"><a href="#DMA" class="headerlink" title="DMA"></a>DMA</h2><p>è¿™ä¸ªå’ŒZONE_DMAæ²¡æœ‰ç›´æ¥å…³ç³»çš„ï¼DMAï¼ˆDirect Memory Accessç›´æ¥å†…å­˜è®¿é—®ï¼‰æŠ€æœ¯</p><p>å…è®¸å¤–å›´è®¾å¤‡åœ¨ä¸æ¶‰åŠä¸­å¤®å¤„ç†å™¨ï¼ˆCPUï¼‰çš„æƒ…å†µä¸‹å°†æ•°æ®ä¼ è¾“åˆ°ç³»ç»Ÿå†…å­˜æˆ–ä»ç³»ç»Ÿå†…å­˜ä¼ è¾“æ•°æ®ã€‚DMAæ˜¯ä¸€ç§é€šç”¨çš„æœºåˆ¶ï¼Œå¯ä»¥åœ¨å„ç§æ•°æ®ä¼ è¾“åœºæ™¯ä¸­ä½¿ç”¨ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ‹·è´ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œä¸€èˆ¬æ–‡ä»¶è¯»å†™åœ¨page cacheä½¿ç”¨buffer IOå¦‚æœä¸å‘½ä¸­æœ‰2æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œ3æ¬¡æ‹·è´ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/57d7f3138355481fabd774aa88d22ba9.png"></p><p>éƒ¨åˆ†åº”ç”¨ä½¿ç”¨direct IOå¯ä»¥å‡å°‘æ‹·è´ã€‚è¿™å–å†³äºä½ çš„ç¨‹åºæ˜¯å¦å­˜åœ¨å±€éƒ¨æ€§åŸç†å¯ä»¥å……åˆ†åˆ©ç”¨page cache.</p><h2 id="DAX"><a href="#DAX" class="headerlink" title="DAX"></a>DAX</h2><p>å…è®¸åº”ç”¨ç¨‹åºç›´æ¥å°†æ•°æ®ä»å†…å­˜ä¼ è¾“åˆ°å­˜å‚¨è®¾å¤‡ã€‚ç»•è¿‡ä¼ ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿæ ˆï¼Œå…è®¸åº”ç”¨ç¨‹åºé€šè¿‡Direct Memory Access (DMA)ç›´æ¥ä¸å­˜å‚¨è®¾å¤‡è¿›è¡Œäº¤äº’ï¼Œç‰¹åˆ«æ˜¯ä¸éæ˜“å¤±æ€§å†…å­˜ï¼ˆNVMï¼‰è®¾å¤‡ä¸€èµ·ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CXL </tag>
            
            <tag> bus </tag>
            
            <tag> DDR </tag>
            
            <tag> PCIe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>X86æ¶æ„ä¸‹64ä½çš„ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´</title>
      <link href="/2023/10/26/Linux%2064%E4%BD%8D%E7%9A%84%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%E5%92%8C%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4/"/>
      <url>/2023/10/26/Linux%2064%E4%BD%8D%E7%9A%84%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%E5%92%8C%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜ï¼Ÿ"></a><span class="label primary">ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿå†…å­˜ï¼Ÿ</span></h2><ol><li>å†…å­˜éš”ç¦»ï¼Œä½¿æ¯ä¸ªè¿è¡Œçš„è¿›ç¨‹éƒ½è®¤ä¸ºå®ƒæ‹¥æœ‰æ•´ä¸ªç³»ç»Ÿçš„å†…å­˜ã€‚åœ¨å¤šè¿›ç¨‹ç³»ç»Ÿä¸­ç›´æ¥æ“ä½œç‰©ç†å†…å­˜åœ°å€çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ç²¾ç¡®åœ°çŸ¥é“æ¯ä¸€ä¸ªå˜é‡çš„ä½ç½®éƒ½è¢«å®‰æ’åœ¨äº†å“ªé‡Œï¼Œè€Œä¸”è¿˜è¦æ³¨æ„å½“å‰è¿›ç¨‹åœ¨å’Œå¤šä¸ªè¿›ç¨‹åŒæ—¶è¿è¡Œçš„æ—¶å€™ï¼Œä¸èƒ½å…±ç”¨åŒä¸€ä¸ªåœ°å€ï¼Œå¦åˆ™å°±ä¼šé€ æˆåœ°å€å†²çªã€‚</li><li>å»¶è¿Ÿå†…å­˜åˆ†é…,åªæœ‰å½“é¡µé¢çœŸæ­£è¢«è®¿é—®æ—¶,æ‰éœ€è¦ä»ç£ç›˜åŠ è½½åˆ°ç‰©ç†å†…å­˜ã€‚</li><li>é¡µå¼å†…å­˜ç®¡ç†æŠ€æœ¯ã€‚</li><li>é€šè¿‡ä¸ç£ç›˜ç©ºé—´çš„äº¤æ¢å®ç°æ‰©å±•å†…å­˜å®¹é‡ã€‚</li></ol><h2 id="è™šæ‹Ÿåœ°å€æ€ä¹ˆè®¤ï¼Ÿ"><a href="#è™šæ‹Ÿåœ°å€æ€ä¹ˆè®¤ï¼Ÿ" class="headerlink" title="è™šæ‹Ÿåœ°å€æ€ä¹ˆè®¤ï¼Ÿ"></a><span class="label primary">è™šæ‹Ÿåœ°å€æ€ä¹ˆè®¤ï¼Ÿ</span></h2><p>åœ¨32ä½æœºå™¨ä¸Šï¼ŒæŒ‡é’ˆçš„å¯»å€èŒƒå›´ä¸º $2^{32}$ï¼Œæ‰€èƒ½è¡¨è¾¾çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸º4GBï¼ˆ$2^{30}$æ˜¯ä»Båˆ°GBï¼‰ã€‚åœ¨ç›®å‰çš„64ä½ç³»ç»Ÿä¸‹åªä½¿ç”¨äº†48ä½æ¥æè¿°è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå¯»å€èŒƒå›´ä¸º $2^{48}$ï¼Œæ‰€èƒ½è¡¨è¾¾çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸º256TBï¼ˆå­—èŠ‚å¯å¯»å€ï¼Œä¸€ä¸ªåœ°å€çš„å¤§å°æ˜¯Byteï¼‰ã€‚</p><ul><li>ä½128Tè¡¨ç¤ºç”¨æˆ·æ€è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œè™šæ‹Ÿå†…å­˜åœ°å€èŒƒå›´ä¸ºï¼š0x0000 0000 0000 0000 - 0x0000 7FFF FFFF F000 ã€‚</li></ul><p>1å·¦ç§»47ä½ï¼ˆäºŒè¿›åˆ¶åˆ°16è¿›åˆ¶4ä½ä¸€ç»„ï¼‰å¾—åˆ°çš„åœ°å€æ˜¯ 0x0000800000000000ï¼Œç„¶åå‡å»ä¸€ä¸ª PAGE_SIZEï¼ˆé»˜è®¤ä¸º 4Kï¼‰ï¼Œå°±æ˜¯0x00007FFFFFFFF000ï¼Œå…± 128Tã€‚</p><ul><li>é«˜128Tè¡¨ç¤ºå†…æ ¸æ€è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œè™šæ‹Ÿå†…å­˜åœ°å€èŒƒå›´ä¸ºï¼š0xFFFF 8000 0000 0000 - 0xFFFF FFFF FFFF FFFF ã€‚</li></ul><p>0x[ç”¨æˆ·/å†…æ ¸æ€ä½][47ä½åç§»é‡][ä¿ç•™ä½][12ä½é¡µå†…åç§»].ç”¨æˆ·ç©ºé—´çš„è™šæ‹Ÿå†…å­˜åœ°å€çš„é«˜16ä½å…¨éƒ¨ä¸º0.å†…æ ¸ç©ºé—´çš„è™šæ‹Ÿå†…å­˜åœ°å€çš„é«˜16ä½å…¨éƒ¨ä¸º1.</p><p>è¿™æ ·ä¸€æ¥å°±åœ¨ç”¨æˆ·æ€è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸å†…æ ¸æ€è™šæ‹Ÿå†…å­˜ç©ºé—´ä¹‹é—´å½¢æˆäº†ä¸€æ®µ0x0000 7FFF FFFF F000 - 0xFFFF 8000 0000 0000 çš„åœ°å€ç©ºæ´ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªç©ºæ´å«åšcanonical addressç©ºæ´ã€‚é«˜16ä½ä¸å…¨ä¸º0ä¹Ÿä¸å…¨ä¸º1.</p><p><img src="https://images.weserv.nl/?url=https://cdn.xiaolincoding.com//mysql/other/4956918c43e186d49df7b9802f080de8.png"></p><h2 id="64ä½Linuxç³»ç»Ÿä¸‹ï¼Œè¿›ç¨‹è™šæ‹Ÿå†…å­˜ç©ºé—´å¸ƒå±€æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#64ä½Linuxç³»ç»Ÿä¸‹ï¼Œè¿›ç¨‹è™šæ‹Ÿå†…å­˜ç©ºé—´å¸ƒå±€æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="64ä½Linuxç³»ç»Ÿä¸‹ï¼Œè¿›ç¨‹è™šæ‹Ÿå†…å­˜ç©ºé—´å¸ƒå±€æ˜¯æ€æ ·çš„ï¼Ÿ"></a><span class="label primary">64ä½Linuxç³»ç»Ÿä¸‹ï¼Œè¿›ç¨‹è™šæ‹Ÿå†…å­˜ç©ºé—´å¸ƒå±€æ˜¯æ€æ ·çš„ï¼Ÿ</span></h2><p>åœ¨è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ï¼ŒåŒ…æ‹¬heap, stackå’Œé€šè¿‡mmapåŒ¿åæ˜ å°„çš„åŒºåŸŸï¼Œè¿™äº›åŒºåŸŸåœ¨å»ºç«‹çš„æ—¶å€™åªæœ‰è™šæ‹Ÿåœ°å€ï¼Œå½“å®ƒä»¬çœŸæ­£è¢«è®¿é—®åˆ°çš„æ—¶å€™ï¼Œå†…æ ¸æ‰ä¼šä¸ºå…¶åˆ†é…ç‰©ç†é¡µé¢ï¼Œè¿™ç§æ–¹å¼è¢«ç§°ä½œdemand allocationï¼ˆæŒ‰éœ€åˆ†é…ï¼‰ï¼Œå®ƒå’Œpage cacheçš„demand pagingçš„æ¦‚å¿µæ˜¯å¯¹åº”çš„è¿™éƒ¨åˆ†ç‰©ç†é¡µé¢ç”±äºæ²¡æœ‰å¯¹åº”å¤–éƒ¨å­˜å‚¨ä»‹è´¨ä¸Šçš„æ–‡ä»¶ï¼Œå› æ­¤è¢«ç»Ÿç§°ä¸ºanonymous pagesã€‚</p><p><img src="https://images.weserv.nl/?url=https://cdn.xiaolincoding.com//mysql/other/532e6cdf4899588f8b873b6435cba2d8.png"></p><ol><li>å‡†å¤‡è¿è¡Œçš„ç¨‹åºç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶å­˜æ”¾åœ¨ç£ç›˜ä¸­ï¼ŒCPUä¼šæ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„æœºå™¨ç æ¥é©±åŠ¨è¿›ç¨‹çš„è¿è¡Œã€‚æ‰€ä»¥åœ¨è¿›ç¨‹è¿è¡Œä¹‹å‰ï¼Œè¿™äº›å­˜æ”¾åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„æœºå™¨ç éœ€è¦è¢«åŠ è½½è¿›å†…å­˜ä¸­ï¼Œè€Œç”¨äºå­˜æ”¾è¿™äº›æœºå™¨ç çš„è™šæ‹Ÿå†…å­˜ç©ºé—´å«åš<strong>ä»£ç æ®µ</strong>ã€‚</li><li>åœ¨ä»£ç æ®µè·Ÿæ•°æ®æ®µçš„ä¸­é—´è¿˜æœ‰ä¸€æ®µä¸å¯ä»¥è¯»å†™çš„ä¿æŠ¤æ®µï¼Œå®ƒçš„ä½œç”¨æ˜¯é˜²æ­¢ç¨‹åºåœ¨è¯»å†™æ•°æ®æ®µçš„æ—¶å€™è¶Šç•Œè®¿é—®åˆ°ä»£ç æ®µï¼Œè¿™ä¸ªä¿æŠ¤æ®µå¯ä»¥è®©è¶Šç•Œè®¿é—®è¡Œä¸ºç›´æ¥å´©æºƒï¼Œé˜²æ­¢å®ƒç»§ç»­å¾€ä¸‹è¿è¡Œã€‚</li><li>ç¨‹åºä»£ç ä¸­æˆ‘ä»¬é€šå¸¸ä¼šå®šä¹‰å¤§é‡çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œè¿™äº›å…¨å±€å˜é‡åœ¨ç¨‹åºç¼–è¯‘ä¹‹åä¹Ÿä¼šå­˜å‚¨åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œåœ¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œè¿™äº›å…¨å±€å˜é‡ä¹Ÿéœ€è¦è¢«åŠ è½½è¿›å†…å­˜ä¸­ä¾›ç¨‹åºè®¿é—®ã€‚<strong>æŒ‡å®šäº†åˆå§‹å€¼çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­çš„å­˜å‚¨åŒºåŸŸæˆ‘ä»¬å«åšæ•°æ®æ®µã€‚æ²¡æœ‰æŒ‡å®šåˆå§‹å€¼çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­çš„å­˜å‚¨åŒºåŸŸå«åšBSSæ®µã€‚</strong>å› ä¸ºå†…æ ¸çŸ¥é“è¿™äº›æ•°æ®æ˜¯æ²¡æœ‰åˆå€¼çš„ï¼Œæ‰€ä»¥åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­åªä¼šè®°å½•BSSæ®µçš„å¤§å°ï¼Œåœ¨åŠ è½½è¿›å†…å­˜æ—¶ä¼šç”Ÿæˆä¸€æ®µ0å¡«å……çš„å†…å­˜ç©ºé—´ã€‚</li><li>ç¨‹åºåœ¨è¿è¡ŒæœŸé—´å¾€å¾€éœ€è¦åŠ¨æ€çš„ç”³è¯·å†…å­˜ï¼Œæ‰€ä»¥åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­ä¹Ÿéœ€è¦ä¸€å—åŒºåŸŸæ¥å­˜æ”¾è¿™äº›åŠ¨æ€ç”³è¯·çš„å†…å­˜ï¼Œè¿™å—åŒºåŸŸå°±å«åšå †ã€‚å †ç©ºé—´ä¸­åœ°å€çš„å¢é•¿æ–¹å‘æ˜¯ä»ä½åœ°å€åˆ°é«˜åœ°å€å¢é•¿ã€‚å†…æ ¸ä¸­ä½¿ç”¨start_brkæ ‡è¯†å †çš„èµ·å§‹ä½ç½®ï¼Œbrkæ ‡è¯†å †å½“å‰çš„ç»“æŸä½ç½®ã€‚å½“å †ç”³è¯·æ–°çš„å†…å­˜ç©ºé—´æ—¶ï¼Œåªéœ€è¦å°†brkæŒ‡é’ˆå¢åŠ å¯¹åº”çš„å¤§å°ï¼Œå›æ”¶åœ°å€æ—¶å‡å°‘å¯¹åº”çš„å¤§å°å³å¯ã€‚æ¯”å¦‚å½“æˆ‘ä»¬é€šè¿‡mallocå‘å†…æ ¸ç”³è¯·å¾ˆå°çš„ä¸€å—å†…å­˜æ—¶ï¼ˆ128Kä¹‹å†…ï¼‰ï¼Œå°±æ˜¯é€šè¿‡æ”¹å˜brkä½ç½®å®ç°çš„ã€‚</li><li>ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦ä¾èµ–åŠ¨æ€é“¾æ¥åº“ï¼Œè¿™äº›åŠ¨æ€é“¾æ¥åº“ä»¥.soæ–‡ä»¶çš„å½¢å¼å­˜æ”¾åœ¨ç£ç›˜ä¸­ï¼Œæ¯”å¦‚Cç¨‹åºä¸­çš„glibcï¼Œé‡Œè¾¹å¯¹ç³»ç»Ÿè°ƒç”¨è¿›è¡Œäº†å°è£…ã€‚glibcåº“é‡Œæä¾›çš„ç”¨äºåŠ¨æ€ç”³è¯·å †å†…å­˜çš„mallocå‡½æ•°å°±æ˜¯å¯¹ç³»ç»Ÿè°ƒç”¨sbrkå’Œmmapçš„å°è£…ã€‚è¿™äº›åŠ¨æ€é“¾æ¥åº“ä¹Ÿæœ‰è‡ªå·±çš„å¯¹åº”çš„ä»£ç æ®µï¼Œæ•°æ®æ®µï¼ŒBSSæ®µï¼Œä¹Ÿéœ€è¦ä¸€èµ·è¢«åŠ è½½è¿›å†…å­˜ä¸­ã€‚è¿˜æœ‰ç”¨äºå†…å­˜æ–‡ä»¶æ˜ å°„çš„ç³»ç»Ÿè°ƒç”¨mmapï¼Œä¼šå°†æ–‡ä»¶ä¸å†…å­˜è¿›è¡Œæ˜ å°„ï¼Œé‚£ä¹ˆæ˜ å°„çš„è¿™å—å†…å­˜ï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰ä¹Ÿéœ€è¦åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­æœ‰ä¸€å—åŒºåŸŸå­˜å‚¨ã€‚è¿™äº›éƒ½è¢«æ”¾åœ¨<strong>æ–‡ä»¶æ˜ å°„ä¸åŒ¿åæ˜ å°„åŒº</strong>ã€‚</li><li>åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™æ€»è¯¥è¦è°ƒç”¨å„ç§å‡½æ•°å§ï¼Œé‚£ä¹ˆè°ƒç”¨å‡½æ•°è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°çš„å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°ä¹Ÿéœ€è¦ä¸€å—å†…å­˜åŒºåŸŸæ¥ä¿å­˜ã€‚è¿™ä¸€å—åŒºåŸŸåœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´ä¸­å«åš<strong>æ ˆ</strong>ã€‚</li></ol><h2 id="è™šæ‹Ÿå†…å­˜æ˜¯æ€ä¹ˆè¢«ç»„ç»‡çš„ï¼Ÿ"><a href="#è™šæ‹Ÿå†…å­˜æ˜¯æ€ä¹ˆè¢«ç»„ç»‡çš„ï¼Ÿ" class="headerlink" title="è™šæ‹Ÿå†…å­˜æ˜¯æ€ä¹ˆè¢«ç»„ç»‡çš„ï¼Ÿ"></a><span class="label primary">è™šæ‹Ÿå†…å­˜æ˜¯æ€ä¹ˆè¢«ç»„ç»‡çš„ï¼Ÿ</span></h2><blockquote><p>å¯ä»¥é€šè¿‡<code>cat /proc/pid/maps</code>æˆ–è€…<code>pmap pid</code>æ¥æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„å®é™…è™šæ‹Ÿå†…å­˜å¸ƒå±€ã€‚</p></blockquote><p>è¿™æ¶‰åŠåˆ°å…·ä½“çš„æ•°æ®ç»“æ„å’Œçº¢é»‘æ ‘ï¼Œä¸æ˜¯è¿™ç¯‡blogé‡ç‚¹ï¼Œä¸‹é¢æ”¾ä¸€ä¸ªæ¦‚è¦å›¾ã€‚</p><p><img src="https://images.weserv.nl/?url=https://cdn.xiaolincoding.com//mysql/other/f28079c8b8fbf1853570302bee2a1929.png"></p><h2 id="ZONEç±»å‹ä¸å†…æ ¸ç©ºé—´"><a href="#ZONEç±»å‹ä¸å†…æ ¸ç©ºé—´" class="headerlink" title="ZONEç±»å‹ä¸å†…æ ¸ç©ºé—´"></a>ZONEç±»å‹ä¸å†…æ ¸ç©ºé—´</h2><ol><li>å†…æ ¸ç©ºé—´æ˜¯æ‰€æœ‰è¿›ç¨‹å…±äº«çš„ï¼Œä¸åŒè¿›ç¨‹è¿›å…¥å†…æ ¸æ€ä¹‹åçœ‹åˆ°çš„è™šæ‹Ÿå†…å­˜ç©ºé—´å…¨éƒ¨æ˜¯ä¸€æ ·çš„ã€‚</li><li>å†…æ ¸æ€è™šæ‹Ÿå†…å­˜ç©ºé—´çš„å‰896MåŒºåŸŸæ˜¯ç›´æ¥æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸­çš„å‰896MåŒºåŸŸä¸­çš„ï¼Œç›´æ¥æ˜ å°„åŒºä¸­çš„æ˜ å°„å…³ç³»æ˜¯ä¸€æ¯”ä¸€æ˜ å°„ã€‚æ˜ å°„å…³ç³»æ˜¯å›ºå®šçš„ä¸ä¼šæ”¹å˜ã€‚<strong>ç›´æ¥æ˜ å°„åŒºçš„å‰16Mä¸“é—¨è®©å†…æ ¸ç”¨æ¥ä¸ºDMAåˆ†é…å†…å­˜ï¼Œè¿™å—16Må¤§å°çš„å†…å­˜åŒºåŸŸæˆ‘ä»¬ç§°ä¹‹ä¸ºZONE_DMAã€‚</strong> X86ä½“ç³»ç»“æ„ä¸‹ISAæ€»çº¿çš„ç›´æ¥å†…å­˜å­˜å–æ§åˆ¶å™¨å«DMAã€‚16Måˆ°896Mï¼ˆä¸åŒ…å«896Mï¼‰è¿™æ®µåŒºåŸŸï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <strong>ZONE_NORMAL</strong>ã€‚</li><li>ç‰©ç†å†…å­˜896Mä»¥ä¸Šçš„åŒºåŸŸè¢«å†…æ ¸åˆ’åˆ†ä¸º<strong>ZONE_HIGHMEM</strong>åŒºåŸŸï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºé«˜ç«¯å†…å­˜ã€‚è¿™å—åŠ¨æ€æ˜ å°„åŒºå†…æ ¸æ˜¯ä½¿ç”¨ vmalloc è¿›è¡Œå†…å­˜åˆ†é…,å°†ä¸è¿ç»­çš„ç‰©ç†å†…å­˜æ˜ å°„åˆ°è¿ç»­çš„è™šæ‹Ÿå†…å­˜ä¸Šã€‚<br><img src="https://images.weserv.nl/?url=https://cdn.xiaolincoding.com//mysql/other/0bd4766b19d043bb4aebdd06bdf8e67c.png"></li></ol><p><img src="https://images.weserv.nl/?url=https://cdn.xiaolincoding.com//mysql/other/e1f2e689c2754b2af540c6d0b6ab327f.png"></p><p>å†…æ ¸é¡µé¢å±äºé€»è¾‘zoneçš„é‚£ä¸ªä¸å¯ç§»åŠ¨ç±»çš„ã€‚</p><h2 id="ä¸ç”¨æˆ·æ€å†…æ ¸æ€æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ"><a href="#ä¸ç”¨æˆ·æ€å†…æ ¸æ€æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ" class="headerlink" title="ä¸ç”¨æˆ·æ€å†…æ ¸æ€æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ"></a>ä¸ç”¨æˆ·æ€å†…æ ¸æ€æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿ</h2><ul><li>å†…æ ¸ç©ºé—´ç”¨äºå­˜æ”¾æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä»£ç å’Œæ•°æ®ï¼Œå…·æœ‰é«˜ç‰¹æƒçº§åˆ«ï¼Œåªèƒ½ç”±å†…æ ¸æ€çš„ä»£ç è®¿é—®ã€‚</li><li>ç”¨æˆ·ç©ºé—´ç”¨äºå­˜æ”¾ç”¨æˆ·åº”ç”¨ç¨‹åºçš„ä»£ç å’Œæ•°æ®ï¼Œå…·æœ‰è¾ƒä½çš„ç‰¹æƒçº§åˆ«ï¼Œåªèƒ½ç”±ç”¨æˆ·æ€çš„ä»£ç è®¿é—®ã€‚</li></ul><p>è¿™ç§åˆ†ç¦»å…è®¸æ“ä½œç³»ç»Ÿä¿æŠ¤å…¶æ ¸å¿ƒåŠŸèƒ½å¹¶ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚ç”¨æˆ·åº”ç”¨ç¨‹åºéœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥ä¸å†…æ ¸è¿›è¡Œé€šä¿¡å’Œè®¿é—®ç³»ç»Ÿèµ„æºã€‚</p><h2 id="é¡µè¡¨æ˜¯ç‰©ç†é¡µå’Œè™šæ‹Ÿé¡µçš„çº½å¸¦"><a href="#é¡µè¡¨æ˜¯ç‰©ç†é¡µå’Œè™šæ‹Ÿé¡µçš„çº½å¸¦" class="headerlink" title="é¡µè¡¨æ˜¯ç‰©ç†é¡µå’Œè™šæ‹Ÿé¡µçš„çº½å¸¦"></a>é¡µè¡¨æ˜¯ç‰©ç†é¡µå’Œè™šæ‹Ÿé¡µçš„çº½å¸¦</h2><p>é¡µè¡¨ä¹Ÿæ˜¯æ”¾åœ¨ç‰©ç†é¡µä¸­çš„ã€‚å› ä¸ºé¡µè¡¨ä¹Ÿæ˜¯å¯ä»¥è¢«æ”¾åœ¨LLCä¹‹ç±»çš„é è¿‘CPUçš„åœ°æ–¹ç¼“å­˜çš„ï¼Œå¤§å†…å­˜ä½¿ç”¨åpage walkçš„å¼€é”€å¯¹DRAM5-6æ¬¡çš„è®¿é—®å‘ç”Ÿæ¬¡æ•°åˆ°åº•æ˜¯ä¸æ˜¯ç“¶é¢ˆï¼ŸåŠ ä¸Šé¡µé¢è¢«åŠ¨æ€è¿ç§»ï¼Œå°±ç®—æ˜¯å†å¤§çš„å†…å­˜ï¼Œçƒ­çš„éƒ¨åˆ†åœ¨DRAMé‡Œäº†ï¼ŒLLCå¯ä»¥å­˜é‚£ä¸ªåŒºåŸŸçš„PDEï¼Œè¿™æ ·æ›´å‡å°‘äº†page walkã€‚</p><p>page faultçš„å‘ç”Ÿæ˜¯å»ºç«‹ç‰©ç†é¡µå’Œè™šæ‹Ÿé¡µå¯¹åº”çš„é‡è¦é€”å¾„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/9e06fd08fdf24e6e8d72c2d4be13531a.jpeg"></p><h2 id="åˆ†é…è™šæ‹Ÿé¡µå°±æ˜¯vmaæ˜¯mallocå’Œmmapåœ¨åšï¼Œä½†æ˜¯ä»–ä»¬åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#åˆ†é…è™šæ‹Ÿé¡µå°±æ˜¯vmaæ˜¯mallocå’Œmmapåœ¨åšï¼Œä½†æ˜¯ä»–ä»¬åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="åˆ†é…è™šæ‹Ÿé¡µå°±æ˜¯vmaæ˜¯mallocå’Œmmapåœ¨åšï¼Œä½†æ˜¯ä»–ä»¬åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"></a><span class="label primary">åˆ†é…è™šæ‹Ÿé¡µå°±æ˜¯vmaæ˜¯mallocå’Œmmapåœ¨åšï¼Œä½†æ˜¯ä»–ä»¬åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</span></h2><p>PS. æ–‡ç« æ ¹æ®<a href="https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;mid=2247522087&amp;idx=2&amp;sn=fe8f4cd34d68e0a10658dee88bd337df&amp;chksm=f98dd38dcefa5a9ba43a9d1ac96852532f53278915a6f6b9f5187b8c1c885c1e5848ebabbc86#rd">å…¬ä¼—å·@binçš„æŠ€æœ¯å°å±‹</a>åšäº†ä¸€å®šå¢åˆ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kernelspace </tag>
            
            <tag> userspace </tag>
            
            <tag> namespace </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå‡ºç°æ–‡ä»¶å¾ˆå°‘ä½†ç£ç›˜å®¹é‡å·²æ»¡çš„æƒ…å†µ</title>
      <link href="/2023/10/26/Linux%E5%87%BA%E7%8E%B0%E6%96%87%E4%BB%B6%E5%BE%88%E5%B0%91%E4%BD%86%E7%A3%81%E7%9B%98%E5%AE%B9%E9%87%8F%E5%B7%B2%E6%BB%A1%E7%9A%84%E6%83%85%E5%86%B5/"/>
      <url>/2023/10/26/Linux%E5%87%BA%E7%8E%B0%E6%96%87%E4%BB%B6%E5%BE%88%E5%B0%91%E4%BD%86%E7%A3%81%E7%9B%98%E5%AE%B9%E9%87%8F%E5%B7%B2%E6%BB%A1%E7%9A%84%E6%83%85%E5%86%B5/</url>
      
        <content type="html"><![CDATA[<p>è™šæ‹Ÿæœºç£ç›˜æ˜¾ç¤º99%çš„å®¹é‡ï¼Œä½†æ˜¯æˆ‘çš„æ–‡ä»¶åªæœ‰2.5Gï¼Œè™šæ‹Ÿæœºä¸€å…±100Gï¼Œå…¶ä»–å®¹é‡æ¥è‡ªå“ªé‡Œï¼Ÿ<br>ä½¿ç”¨ncduç£ç›˜åˆ†æå·¥å…·<code>sudo ncdu /</code>ï¼Œè¿™ä¼šæ˜¾ç¤ºç£ç›˜ä¸Šçš„æ–‡ä»¶å’Œç›®å½•ï¼ŒæŒ‰å¤§å°æ’åºã€‚å¯ä»¥å¯¼èˆªåˆ°å ç”¨å¤§é‡ç©ºé—´çš„ç›®å½•ï¼Œå¹¶æŸ¥çœ‹å“ªäº›æ–‡ä»¶æˆ–å­ç›®å½•å ç”¨äº†å¤§é‡çš„ç£ç›˜ç©ºé—´ã€‚</p><p><code>/var/log/syslog</code>æœ‰64.5Gï¼Œæ¸…ç©ºsyslogæ–‡ä»¶<code>sudo truncate -s 0 /var/log/syslog</code></p><p>ä¸ºé¿å…å°†æ¥å†æ¬¡å‡ºç°ç±»ä¼¼é—®é¢˜ï¼Œé…ç½®æ—¥å¿—è½®æ¢ï¼ˆlog rotationï¼‰å®šæœŸåˆ é™¤æ—§çš„æ—¥å¿—æ•°æ®å¹¶é™åˆ¶æ—¥å¿—æ–‡ä»¶çš„å¤§å°ã€‚syslogä½¿ç”¨logrotateå·¥å…·æ¥è¿›è¡Œæ—¥å¿—è½®æ¢ã€‚ç¼–è¾‘logrotateé…ç½®æ–‡ä»¶ï¼Œ<code>/etc/logrotate.conf</code>æˆ–<code>/etc/logrotate.d/</code>ç›®å½•ä¸­ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/var/log/syslog <span class="token punctuation">{</span>    size 100M       rotate <span class="token number">10</span>    compress    delaycompress    missingok    notifempty    create <span class="token number">644</span> root root<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™åˆ¶syslogæ–‡ä»¶çš„å¤§å°ä¸º100MBï¼Œä¿ç•™æœ€å¤š10ä¸ªæ—§æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶å¯ç”¨å‹ç¼©ä»¥èŠ‚çœç©ºé—´ã€‚<br>å¾ˆå¤šæ—¥å¿—éƒ½æœ‰ä¸€ä¸ª.confæ–‡ä»¶éƒ½èƒ½ç”¨è¿™ä¸ªæ–¹å¼é™åˆ¶å¤§å°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ncdu </tag>
            
            <tag> log rotation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Transparent memory offloading in datacenters</title>
      <link href="/2023/10/15/Transparent-memory-offloading-in-datacenters/"/>
      <url>/2023/10/15/Transparent-memory-offloading-in-datacenters/</url>
      
        <content type="html"><![CDATA[<p><a href="https://facebookmicrosites.github.io/cgroup2/docs/pressure-metrics.html">è¿™äº›ç­–ç•¥å·²ç»åœ¨ç°åœ¨çš„å†…æ ¸ä¸­ä½¿ç”¨äº†</a></p><h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary no-icon"><ul><li>æ–‡ç« æ¥è‡ªASPLOSâ€™22å››ç¯‡Best Paperä¹‹ä¸€ ï¼ˆä½†æ˜¯è¿™ä¸ªå…¬å¸å’Œå¯†è¥¿æ ¹å¤§å­¦ä¹‹ååˆä½œçš„ä¸€ç¯‡å†…å®¹ç›¸å…³æ€§è¿˜æŒºé«˜çš„ï¼‰</li><li>TMO: Transparent Memory Offloading in Datacenters</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li> Johannes Weiner, Niket Agarwal, Dan Schatzberg, etc. Mate Inc.</li><li> Dimitrios Skarlatos, å¡å†…åŸºæ¢…éš†å¤§å­¦CMU</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>æœºå™¨å­¦ä¹ ç­‰æ–°å…´åº”ç”¨å¯¹å†…å­˜éœ€æ±‚çš„å¤§å¹…å¢é•¿ï¼ŒåŠ ä¸ŠDRAMè®¾å¤‡æ‰©å±•é€Ÿåº¦çš„æ”¾ç¼“[19,25] ä»¥åŠDRAMæˆæœ¬çš„å¤§å¹…æ³¢åŠ¨ï¼Œä½¿å¾—DRAMä½œä¸ºå”¯ä¸€çš„å†…å­˜å®¹é‡è§£å†³æ–¹æ¡ˆå˜å¾—æ˜‚è´µå¾—ä»¤äººæœ›è€Œå´æ­¥ã€‚</p><p>è¿‘å¹´æ¥ï¼Œå¤§é‡éDRAMæ›´ä¾¿å®œçš„å†…å­˜æŠ€æœ¯ï¼Œä¾‹å¦‚NVMe SSD[8,11]å’ŒNVM[14,17,24,30,34,37]å·²æˆåŠŸéƒ¨ç½²åœ¨æ•°æ®ä¸­å¿ƒï¼Œæˆ–æ­£åœ¨ä½¿ç”¨å®ƒä»¬æ–¹å¼ã€‚æ­¤å¤–ï¼Œæ–°å…´çš„éDDRå†…å­˜æ€»çº¿æŠ€æœ¯ï¼Œä¾‹å¦‚CXL[9]æä¾›ç±»ä¼¼å†…å­˜çš„è®¿é—®è¯­ä¹‰å’Œæ¥è¿‘DDRçš„æ€§èƒ½ã€‚è¿™äº›è¶‹åŠ¿çš„èåˆä¸ºå†…å­˜åˆ†å±‚å¸¦æ¥äº†è¿‡å»ä¸å¯èƒ½çš„æ–°æœºä¼š[12,16,21,31â€“33,39,40]ã€‚</p><p>ä½¿ç”¨å‹ç¼©å†…å­˜å¯ä»¥å¤§å¹…é™ä½æˆæœ¬ï¼Œä½†è¿™ä»ç„¶ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦NVMe SSDç­‰æ›¿ä»£å†…å­˜æŠ€æœ¯æ¥è¿›ä¸€æ­¥é™ä½æˆæœ¬ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>æ€§èƒ½ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒèŠ‚çº¦å†…å­˜ã€‚TMOæ ¹æ®è®¾å¤‡çš„æ€§èƒ½ç‰¹å¾å’Œåº”ç”¨ç¨‹åºå¯¹å†…å­˜è®¿é—®é€Ÿåº¦å‡æ…¢çš„æ•æ„Ÿåº¦ï¼Œè‡ªåŠ¨è°ƒæ•´è¦å¸è½½åˆ°å¼‚æ„è®¾å¤‡ï¼ˆä¾‹å¦‚å‹ç¼©å†…å­˜æˆ–SSDï¼‰çš„å†…å­˜é‡ã€‚ </p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><blockquote><p>zswapæ˜¯ä¸€é¡¹Linuxå†…æ ¸çš„è™šæ‹Ÿå†…å­˜å‹ç¼©åŠŸèƒ½ï¼Œå¯ä¸ºå°†è¦äº¤æ¢çš„é¡µé¢æä¾›å‹ç¼©å›å†™ç¼“å­˜ã€‚å½“å†…å­˜é¡µå°†è¦äº¤æ¢å‡ºå»æ—¶ï¼Œzswapä¸å°†å…¶ç§»åŠ¨åˆ°äº¤æ¢è®¾å¤‡ï¼Œè€Œæ˜¯å¯¹å…¶æ‰§è¡Œå‹ç¼©ï¼Œç„¶åå­˜å‚¨åˆ°ç³»ç»ŸRAMå†…åŠ¨æ€åˆ†é…çš„å†…å­˜æ± ä¸­ã€‚å›å†™åˆ°å®é™…äº¤æ¢è®¾å¤‡çš„åŠ¨ä½œåˆ™ä¼šå»¶è¿Ÿï¼Œç”šè‡³èƒ½å®Œå…¨é¿å…ï¼Œä»è€Œæ˜¾è‘—å‡å°‘Linuxç³»ç»Ÿç”¨äºäº¤æ¢çš„I/Oï¼›å‰¯ä½œç”¨åˆ™æ˜¯å‹ç¼©æ‰€éœ€çš„é¢å¤–CPUå‘¨æœŸã€‚</p></blockquote><p>å”¯ä¸€å·²çŸ¥çš„å¤§è§„æ¨¡é‡‡ç”¨å†…æ ¸é©±åŠ¨äº¤æ¢ç”¨äºå»¶è¿Ÿæ•æ„Ÿçš„æ•°æ®ä¸­å¿ƒåº”ç”¨ç¨‹åºçš„æ˜¯Googleçš„zswapéƒ¨ç½²[18][43].åœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ä¸­å°†å…¶ç§°ä¸ºg-swapã€‚ä½œä¸ºå…ˆé©±ï¼Œg-swapæå¤§åœ°æ¨è¿›äº†ç°æœ‰æŠ€æœ¯æ°´å¹³ï¼Œä½†ä»ç„¶å­˜åœ¨å‡ ä¸ªä¸»è¦å±€é™æ€§:ä»…æ”¯æŒå•ä¸ªæ…¢é€Ÿå†…å­˜å±‚ï¼›æŸäº›åº”ç”¨ç¨‹åºçš„æ•°æ®éš¾ä»¥å‹ç¼©ï¼Œä¾‹å¦‚å…·æœ‰é‡åŒ–å­—èŠ‚ç¼–ç å€¼çš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>TMOéœ€è¦å›ç­”ä¸¤ä¸ªé—®é¢˜ï¼šè¦å¸è½½å¤šå°‘å†…å­˜ä»¥åŠè¦å¸è½½å“ªäº›å†…å­˜ã€‚<br>ï¼ˆ1ï¼‰é¡µé¢ä¼šå†·å¤šä¹…ï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/4d3acd6320e244119f41bdab3ffe1a62.png"></p><blockquote><p>service-level agreement SLA ç½‘ç«™æœåŠ¡å¯ç”¨æ€§çš„ä¸€ä¸ªä¿è¯<br>ä¸ºäº†ç®€åŒ–æ•°æ®ä¸­å¿ƒä¸­åº”ç”¨ç¨‹åºçš„æ“ä½œï¼Œéœ€è¦ä½¿ç”¨å¤§é‡å†…å­˜æ¥å¯ç”¨å¾®æœåŠ¡å¹¶æä¾›åŸºç¡€è®¾æ–½çº§åŠŸèƒ½ã€‚æˆ‘ä»¬å°†è½¯ä»¶åŒ…ã€åˆ†æã€æ—¥å¿—è®°å½•ä»¥åŠä¸æ•°æ®ä¸­å¿ƒåº”ç”¨ç¨‹åºéƒ¨ç½²ç›¸å…³çš„å…¶ä»–æ”¯æŒåŠŸèƒ½æ‰€éœ€çš„å†…å­˜å®šä¹‰ä¸º<strong>æ•°æ®ä¸­å¿ƒå†…å­˜ç¨</strong>ã€‚è¿™éƒ¨åˆ†å 20%,æœ€å…ˆè¢«å¸è½½ï¼Œå› ä¸ºå†…å­˜ç¨çš„SLAæ¯”ç¨‹åºç›´æ¥æ¶ˆè€—çš„SLAå°‘ã€‚</p></blockquote><p>ï¼ˆ2ï¼‰ä¸åŒç¨‹åºæ–‡ä»¶é¡µå’ŒåŒ¿åé¡µæ‰€å æ¯”æ¯”ä¾‹ä¸åŒ<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/08366eac5f724234bd566fd6c704ff40.png"></p><p>ï¼ˆ3ï¼‰è€ƒè™‘åˆ°å¸è½½åˆ°çš„SSDè€ä¹…æ€§ä¸åŒSSDè®¾å¤‡çš„å»¶è¿Ÿç­‰ï¼Œè®¾è®¡æ¶æ„<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/35bf4ada06834da894f7c606466dbe8d.png"></p><p>å›¾6æ˜¾ç¤ºäº†TMOæ¶æ„æ¦‚è¿°ï¼ˆå·¦ï¼‰ä»¥åŠå†…å­˜å’Œå­˜å‚¨å¸ƒå±€ï¼ˆå³ï¼‰ã€‚</p><ol><li>æœªä¿®æ”¹çš„å·¥ä½œè´Ÿè½½åœ¨å®¹å™¨1å†…æ‰§è¡Œï¼Œå¹¶é€šè¿‡ç³»ç»Ÿè°ƒç”¨å’Œåˆ†é¡µä¸å†…æ ¸å†…å­˜ç®¡ç†å­ç³»ç»Ÿäº¤äº’ã€‚ </li><li>Senpaiæ˜¯ä¸€ä¸ªç”¨æˆ·ç©ºé—´ç»„ä»¶ï¼Œè´Ÿè´£æ§åˆ¶å†…å­˜å¸è½½è¿‡ç¨‹å¹¶å†³å®šåº”ä»æ¯ä¸ªå·¥ä½œè´Ÿè½½ä¸­å¸è½½å¤šå°‘å†…å­˜ã€‚Senpaiä»¥å‹åŠ›ä¿¡æ¯çš„å½¢å¼ç›‘æ§åº”ç”¨ç¨‹åºæ€§èƒ½ä¸‹é™ã€‚</li><li>å‹åŠ›ä¿¡æ¯ç”±å†…æ ¸ä¸­çš„å‹åŠ›å¤±é€Ÿä¿¡æ¯ï¼ˆPSIï¼‰ç»„ä»¶æŠ¥å‘Šã€‚</li><li>åŸºäºPSIä¿¡æ¯Senpaié€šè¿‡å†™å…¥cgroupæ§åˆ¶æ–‡ä»¶æ¥é©±åŠ¨å¸è½½è¿‡ç¨‹ï¼Œä»è€Œè§¦å‘å†…æ ¸çš„å†…å­˜å›æ”¶é€»è¾‘ã€‚å›æ”¶é€»è¾‘å†³å®šè¦å¸è½½å“ªäº›å†…å­˜ã€‚</li><li>å†…å­˜ç®¡ç†å­ç³»ç»Ÿå‘PSIæ¨¡å—æš´éœ²å†…å­˜å‹åŠ›ä¿¡æ¯ã€‚</li><li>5è§¦å‘å¯¹å¸è½½åç«¯å’Œå¸¸è§„æ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™æ“ä½œã€‚<br>TMOæ”¯æŒå¸è½½åˆ°åŸºäºzswapçš„å‹ç¼©å†…å­˜æ± æˆ–é€šè¿‡äº¤æ¢å­˜å‚¨è®¾å¤‡ã€‚</li></ol><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/35bf4ada06834da894f7c606466dbe8d.png" alt="æ€»ä½“è®¾è®¡å›¾"></p><h2 id="5-1-PSIæœ‰æ•ˆæ•è·å†…å­˜å¸è½½å¯¹ä¸åŒåº”ç”¨ç¨‹åºçš„å½±å“"><a href="#5-1-PSIæœ‰æ•ˆæ•è·å†…å­˜å¸è½½å¯¹ä¸åŒåº”ç”¨ç¨‹åºçš„å½±å“" class="headerlink" title="5.1 PSIæœ‰æ•ˆæ•è·å†…å­˜å¸è½½å¯¹ä¸åŒåº”ç”¨ç¨‹åºçš„å½±å“"></a>5.1 PSIæœ‰æ•ˆæ•è·å†…å­˜å¸è½½å¯¹ä¸åŒåº”ç”¨ç¨‹åºçš„å½±å“</h2><p>æ¯ä¸ªéé—²ç½®è¿›ç¨‹ï¼ŒPSIä¼šè¿›ä¸€æ­¥åŒºåˆ†è¿›ç¨‹å¯è¿è¡Œçš„æ—¶é—´æ®µå’Œå› èµ„æºä¸è¶³è€Œåœæ»çš„æ—¶é—´æ®µã€‚å°†è®¡ç®—æ½œåŠ›å®šä¹‰ä¸ºä»¥CPUæ•°é‡ä¸ºä¸Šé™çš„éé—²ç½®è¿›ç¨‹æ•°é‡ã€‚PSI=åœæ»æ•°/è®¡ç®—æ½œåŠ›*100%. å¯¹äºå®¹å™¨å’Œå…¨ç³»ç»ŸåŸŸï¼ŒPSIä¸ºæ¯ç§èµ„æºå¼•å…¥äº†ä¸¤ä¸ªå‹åŠ›æŒ‡æ ‡ï¼Œåˆ†åˆ«ç§°ä¸º â€œsomeâ€å’Œ â€œfullâ€ã€‚someæŒ‡æ ‡è·Ÿè¸ªåŸŸå†…è‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…èµ„æºæ—¶åœæ»çš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚fullæŒ‡æ ‡è·Ÿè¸ªçš„æ˜¯æ‰€æœ‰è¿›ç¨‹åŒæ—¶å»¶è¿Ÿçš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/0bdbab3ec366466d9c89cbbb2c0d1d0d.png"><br>è™šçº¿æ¡†æ˜¯æ‰§è¡Œæ—¶é—´å’Œåœé¡¿æ—¶é—´ã€‚æ‰§è¡Œæ—¶é—´æ ‡å‡†åŒ–ä¸º100%å¹¶åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ã€‚someåœé¡¿è“è‰²ç®­å¤´ï¼Œfullåœé¡¿ç»¿è‰²ç®­å¤´ã€‚ç¬¬ä¸€é˜¶æ®µAå’ŒBåœæ­¢å…¶ä¸­ä¸€ä¸ªå³å¯éƒ½æœ‰èµ„æºç”¨someæŒ‡æ ‡12.5%ï¼›ç¬¬äºŒé˜¶æ®µåŒæ—¶åœæ­¢6.25%ï¼ŒfullæŒ‡æ ‡6.25%ï¼ŒsomeæŒ‡æ ‡18.75%ã€‚â€œsomeâ€æ—¨åœ¨æ•è·ç”±äºç¼ºä¹èµ„æºè€Œå¯¼è‡´å„ä¸ªè¿›ç¨‹å¢åŠ çš„å»¶è¿Ÿï¼Œè€Œâ€œfullâ€åˆ™è¡¨ç¤ºå®¹å™¨æˆ–ç³»ç»Ÿä¸­å®Œå…¨éç”Ÿäº§æ€§çš„æ—¶é—´é‡ã€‚</p><div class="note danger">è¿™ä¸ªç¤ºä¾‹é‡Œæ‰§è¡Œæ—¶é—´å½’ä¸€åŒ–åä¸ºå•¥é‚£ä¸ªæ–¹å—ä¸æ˜¯æ»¡çš„ï¼Œå°±æ˜¯25%æ²¡æœ‰æ‹‰æ»¡ï¼Œéš¾é“æ˜¯ä¸ºäº†ç”»å›¾å¥½çœ‹ï¼Œå¬ä»–è§£é‡Šåº”è¯¥æ˜¯æ»¡çš„æ‰å¯¹å•Šï¼Ÿé»‘è‰²æ–œæ¡çº¹å—å¾ˆweird</div> <p>PSIåªå‡ºç°åœ¨ä»¥ä¸‹3ä¸ªåœºæ™¯ï¼š<br>ä¸ºäº†è·Ÿè¸ªå†…å­˜å‹åŠ›ï¼ŒPSIè®°å½•ä¸“é—¨åœ¨å†…å­˜ä¸è¶³æ—¶å‘ç”Ÿçš„äº‹ä»¶æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ç›®å‰ï¼Œè¿™åŒ…æ‹¬ä¸‰ç§æƒ…å†µã€‚ç¬¬ä¸€ç§æƒ…å†µæ˜¯å½“å†…å­˜å·²æ»¡æ—¶è¿›ç¨‹è§¦å‘å›æ”¶é¡µé¢å¹¶ä¸”è¿›ç¨‹å°è¯•åˆ†é…æ–°é¡µé¢ã€‚ç¬¬äºŒç§æƒ…å†µæ˜¯è¿›ç¨‹éœ€è¦ç­‰å¾…IOå‘ç”Ÿæ•…éšœï¼Œå³æœ€è¿‘ä»æ–‡ä»¶ç¼“å­˜ä¸­é€å‡ºçš„é¡µé¢å‡ºç°é‡å¤§æ•…éšœã€‚ç¬¬ä¸‰ç§æƒ…å†µæ˜¯è¿›ç¨‹åœ¨ä»äº¤æ¢è®¾å¤‡è¯»å–é¡µé¢æ—¶å‘ç”Ÿé˜»å¡ã€‚</p><div class="note primary">ä¸€ç§ç°æœ‰æœºåˆ¶æ˜¯é©»ç•™é›†å¤§å°ï¼ˆRSSï¼‰ï¼Œå®ƒåæ˜ äº†ä¸€ä¸ªè¿›ç¨‹å½“å‰åˆ†é…çš„ç‰©ç†å†…å­˜é‡,åŒ…æ‹¬è¯¥è¿›ç¨‹ä½¿ç”¨çš„ä»£ç ã€æ•°æ®å’Œå †æ ˆç­‰æ‰€å ç”¨çš„å†…å­˜ã€‚RSSçš„ä¸»è¦é™åˆ¶æ˜¯å¹¶ä¸èƒ½æ•æ‰åˆ°å†…å­˜æˆ–ç¼ºä¹å†…å­˜å¯¹åº”ç”¨ç¨‹åºæ€§èƒ½çš„å½±å“ã€‚å…¶ä»–æŒ‡æ ‡ï¼ˆä¾‹å¦‚å‡çº§ç‡ï¼‰ä»£è¡¨æ¯ç§’çš„swap-insã€‚æå‡ç‡çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒæ²¡æœ‰è€ƒè™‘å¸è½½åç«¯çš„æ€§èƒ½ç‰¹å¾ã€‚æ­¤å¤–ï¼Œç”±äºå¸è½½å¯¼è‡´æ›´å¤šå†…å­˜å˜å¾—å¯ç”¨ï¼Œå®ƒæ— æ³•æ•è·åº”ç”¨ç¨‹åºæ€§èƒ½çš„æ”¹è¿›ã€‚<p>åœ¨PSIä¹‹å‰ï¼Œæ“ä½œå‘˜ä¾èµ–äºå…³è”å†…æ ¸æ—¶é—´ã€åº”ç”¨ç¨‹åºååé‡å˜åŒ–ã€å›æ”¶æ´»åŠ¨äº‹ä»¶è®¡æ•°å™¨ã€æ–‡ä»¶é‡è¯»å’Œæ¢å…¥ç­‰é—´æ¥æŒ‡æ ‡æ¥ä¼°è®¡å·¥ä½œè´Ÿè½½çš„èµ„æºå¥åº·çŠ¶å†µã€‚è¿™éœ€è¦å¯¹å­˜å‚¨ç¡¬ä»¶è®¾å¤‡ç‰¹æ€§å’Œå†…æ ¸è¡Œä¸ºæœ‰ç›´è§‚çš„äº†è§£ã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶è¶…å‰è¯»å–ç®—æ³•å¯èƒ½ä¼šåœ¨ä¸åŒç¨‹åº¦ä¸Šä½¿åº”ç”¨ç¨‹åºå…å—å·²è®°å½•çš„ç¼“å­˜é‡è¯»çš„å½±å“ã€‚å¦ä¸€æ–¹é¢ï¼ŒPSIå¯ç›´æ¥åœ¨è¿›ç¨‹çº§åˆ«æµ‹é‡åˆæ ¼åœæ»äº‹ä»¶é€ æˆçš„ç”Ÿäº§åŠ›æŸå¤±ã€‚å®ƒè€ƒè™‘äº†åº•å±‚ç¡¬ä»¶çš„å·®å¼‚ã€å†…æ ¸å†…å­˜ç®¡ç†ç®—æ³•çš„æœ‰æ•ˆæ€§ï¼Œç”šè‡³å·¥ä½œè´Ÿè½½çš„å†…éƒ¨å¹¶å‘æ€§ï¼ˆå³éƒ¨åˆ†åœæ»ä¸å®Œå…¨åœæ»ï¼‰ã€‚</p><p>æ‰€ä»¥è¿™ä¸ªæŒ‡æ ‡ååº”èµ„æºæ€»æ•°å˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå¯¹æ¯ä¸ªè¿›ç¨‹æ€§èƒ½çš„å½±å“ã€‚ä»ç„¶æ˜¯å¯¹æŸä¸ªè¿›ç¨‹/ç¨‹åºï¼Œæˆ‘æŒ‰é‡åˆ†é…DRAMï¼Œçœ‹ä»–æ€§èƒ½æé«˜äº†ï¼Œå†ç»™ä¸€ç‚¹ï¼Œ<br>è€Œä¸”ä»çƒ­åŠ›å›¾æ¥çœ‹ï¼Œçƒ­åº¦çš„æå‡æ˜¯æœ‰ä¸€å®šæ—¶é—´çš„ã€‚</p></div> <h2 id="5-2-Senpai"><a href="#5-2-Senpai" class="headerlink" title="5.2 Senpai"></a>5.2 Senpai</h2><p>æ¯éš”å‡ ç§’ï¼ŒSenpaiå°±ä¼šä¸ºæ¯ä¸ªcgroupè®¡ç®—ä¸€æ¬¡è¦å›æ”¶çš„å†…å­˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/bb712a3ad3724964a1443b7d3dcd8c05.png" alt="PSIç¡®å®šå†…å­˜å‹åŠ›ï¼Œé˜ˆå€¼æ ¹æ®å®éªŒåŠ¨æ€è°ƒèŠ‚ï¼ŒSenpaiä»LRUä¸­æ‰§è¡Œå¸è½½"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/59595c4f3cfc49699351c75a066e57ca.png"></p><p>ğ‘ƒğ‘†ğ¼ğ‘¡â„ğ‘Ÿğ‘’ğ‘ â„ğ‘œğ‘™ğ‘‘å’Œ reclaim_ratioæ˜¯å¯é…ç½®å‚æ•°ã€‚ ğ‘ğ‘¢ğ‘Ÿğ‘Ÿğ‘’ğ‘›ğ‘¡_ğ‘šğ‘’ğ‘š æ˜¯cgroupçš„å½“å‰å†…å­˜å ç”¨é‡ã€‚</p><p>åŠ¨æ€å·¥ä½œè´Ÿè½½åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®¹å™¨å†…å­˜å¿«é€Ÿå¢é•¿ä¸”å…¶å¤§å°æ­£åœ¨ä¸»åŠ¨æ‰©å±•ï¼Œåˆ™å®ƒå¯èƒ½ä¼šè¢«é˜»å¡ï¼Œç›´åˆ° Senpaiè¿›ä¸€æ­¥æé«˜å…¶é™åˆ¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å†…æ ¸ä¸­æ·»åŠ äº†ä¸€ä¸ªæ— çŠ¶æ€å†…å­˜å›æ”¶cgroupæ§åˆ¶æ–‡ä»¶ã€‚é€šè¿‡è¿™ä¸ªæ§åˆ¶é’®ï¼ŒSenpaiå¯ä»¥è¦æ±‚å†…æ ¸ç²¾ç¡®å›æ”¶è®¡ç®—å‡ºçš„å†…å­˜é‡ï¼Œè€Œä¸æ–½åŠ ä»»ä½•é™åˆ¶ï¼Œä»è€Œé¿å…äº†é˜»å¡æ‰©å±•å·¥ä½œè´Ÿè½½çš„é£é™©ã€‚ï¼ˆçœ‹ä¸æ‡‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆå“©ï¼‰</p><p>Senpaiåœ¨å¯¼å‡ºå†…æ ¸ä¹‹ä¸Šçš„ç”¨æˆ·ç©ºé—´ä¸­ä»¥PSIå’Œcgroupå†…å­˜æ§åˆ¶æ¥å£å®ç°ã€‚ä¸å‡è®¾çš„å†…æ ¸å†…å®ç°ç›¸æ¯”ï¼Œè¿™æœ‰å‡ ä¸ªä¼˜ç‚¹ã€‚é¦–å…ˆï¼Œç”¨æˆ·ç©ºé—´å¯ä»¥å®Œå…¨è®¿é—®æµ®ç‚¹å•å…ƒï¼Œå› æ­¤å¯ä»¥æ›´æœ‰æ•ˆåœ°æ‰§è¡Œè®¡ç®—ã€‚å…¶æ¬¡ï¼Œç”¨æˆ·ç©ºé—´ç»„ä»¶çš„å‘å¸ƒå‘¨æœŸå¾€å¾€æ¯”å†…æ ¸å¿«å¾—å¤šã€‚è®¡åˆ’åœ¨å…·æœ‰ä¸åŒæ€§èƒ½SLOé˜ˆå€¼çš„å·¥ä½œè´Ÿè½½ä¸­åˆ©ç”¨ä¸åŒçš„Senpaié…ç½®ã€‚</p><h2 id="5-3-å›æ”¶æ“ä½œ"><a href="#5-3-å›æ”¶æ“ä½œ" class="headerlink" title="5.3 å›æ”¶æ“ä½œ"></a>5.3 å›æ”¶æ“ä½œ</h2><p>Senpaiä¾é å†…æ ¸ä»cgroupsä¸­å›æ”¶å†·å†…å­˜é¡µã€‚Senpaiè®©å†…æ ¸çš„å›æ”¶ç®—æ³•é€‰æ‹©è¦å¸è½½çš„é¡µé¢ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ˜‚è´µçš„å…¨é¡µè¡¨æ‰«ææ¥ç¡®å®šå“ªäº›å†…å­˜é¡µé¢æ˜¯å†·é¡µé¢ã€‚è¯¥ç®—æ³•é€šè¿‡ä¸ºæ–‡ä»¶å’Œäº¤æ¢æ”¯æŒé¡µé¢ç»´æŠ¤ä¸€å¯¹æ´»åŠ¨/éæ´»åŠ¨é¡µé¢LRUåˆ—è¡¨ï¼Œå¹¶é¦–å…ˆå›æ”¶è¾ƒå†·çš„é¡µé¢æ¥è¿è¡Œã€‚è¿™ç§æœºåˆ¶ç»è¿‡ç”Ÿäº§æµ‹è¯•ï¼Œèƒ½ä»¥ç›¸å¯¹è¾ƒä½çš„CPUæˆæœ¬å’Œè¾ƒé«˜çš„å‡†ç¡®æ€§è¯†åˆ«è¾ƒå°‘ä½¿ç”¨çš„å†…å­˜é¡µé¢ã€‚åœ¨Senpaiä¸­ä½¿ç”¨è¿™ç§æœºåˆ¶å¤§å¤§ç®€åŒ–äº†æˆ‘ä»¬çš„å®ç°è¿‡ç¨‹ã€‚åœ¨ç”Ÿäº§ä¸­ï¼ŒSenpaié©±åŠ¨çš„å›æ”¶åªæ¶ˆè€—æ‰€æœ‰CPUå‘¨æœŸçš„0.05%ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p><p>ä½†æ˜¯æœ‰æ”¹è¿›ã€‚ç”±äºå¾ˆå¤šæ–‡ä»¶åªä¼šè¢«è¯»ä¸€æ¬¡ï¼Œå½“æ–‡ä»¶ç¼“å­˜ç¼ºé¡µæ—¶ï¼Œæ¢è¿›æ¥çš„Pageä¼šä¼˜å…ˆæ”¾åœ¨inactive listä¸­ã€‚å½“å†æ¬¡è¯»åˆ°è¿™ä¸ªé¡µé¢æ—¶ï¼ŒæŒ‰ç…§soft faultçš„æƒ¯ä¾‹ï¼Œé¡µæ¡†ä¼šä»inactive æŒªåˆ°activeã€‚Linuxä¸­ä½¿ç”¨radix treeæ¥è¿½è¸ªé¡µæ¡†ï¼Œradix treeé€šè¿‡ä¸€ç§ç‰¹æ®Šçš„å…ƒç´ æ¥è¿½è¸ªåŒ¿åå†…å­˜è¢«æ¢åˆ°swapä¸­çš„æƒ…å†µã€‚ä½œè€…æ‰©å……äº†è¿™ä¸ªç‰¹æ®Šçš„å…ƒç´ ï¼Œç§°ä¹‹ä¸ºshadow entryã€‚å½“inactive listä¸­çš„å†…å®¹è¢«æ¢å‡ºæ—¶ï¼Œæœ‰ä¸ªè®¡æ•°å™¨ï¼ˆworkingset_timeï¼‰ä¼šè‡ªå¢ã€‚æ¯ä¸ªé¡µæ¡†è¢«ç§»é™¤çš„æ—¶å€™ï¼Œshadow entryä¸­éƒ½ä¼šè®°å½•å½“å‰çš„workingset_timeã€‚ä¹Ÿå³å½“ç¬¬ä¸€ä¸ªè¢«reclaimçš„é¡µé¢å¯¹åº”çš„shadow entryè®°å½•0ï¼Œç¬¬äºŒä¸ªè¢«reclaimçš„é¡µé¢è®°å½•1ï¼Œç­‰ç­‰å•è°ƒè‡ªå¢ã€‚</p><p>å½“æŸä¸ªè¢«reclaimçš„é¡µé¢å‘ç”ŸPFè¢«æ¢å›æ—¶ï¼Œç”¨å½“å‰çš„workingset_timeå‡å»shadow entryä¸­è®°å½•çš„å€¼å¯ä»¥å¾—åˆ°é¡µé¢è¢«æ¢å‡ºæœŸé—´æ¸…ç†äº†å¤šå°‘é¡µé¢ï¼Œç§°ä¹‹ä¸ºrefault distanceã€‚å¦‚æœrefault distanceå°äºactive listï¼Œåˆ™å½“å‰è¿™æ¬¡PFå°±è¢«è®¤ä¸ºæ˜¯refaultã€‚å½“å‘ç”Ÿrefaultæ—¶ï¼Œå†…æ ¸å°±ä¼šå¼€å§‹å€¾å‘äºå›æ”¶åŒ¿åé¡µã€‚åŒæ—¶å‘ç”Ÿrefaultçš„é¡µé¢ä¼šç›´æ¥åŠ å…¥åˆ°active listå¹¶ä½¿active list é•¿åº¦åŠ ä¸€ã€‚å½“refault distanceå°äºactive listæ—¶ï¼Œå…¶å®å°±è¯´æ˜è¿™ä¸ªé¡µé¢ä½¿ç”¨çš„æ¯”è¾ƒé¢‘ç¹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±åº”è¯¥æ‰©å¤§ä¸€ç‚¹active listæŠŠè¿™ä¸ªé¡µé¢åŠ åˆ°acitve listä¸­ï¼Œå¹¶ä¸”è½¬å‘å›æ”¶åŒ¿åå†…å­˜ã€‚</p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸ºäº†å¸è½½å†·æ•°æ®ï¼Œæå‡ºçš„æŒ‡æ ‡å¾ˆæ–°é¢–ä¹Ÿæœ‰æ•ˆã€‚è€Œä¸”è¿™æ˜¯å…³æ³¨å†…å­˜å’Œç¡¬ç›˜ä¹‹é—´äº¤äº’çš„ï¼Œä¹ŸæŒºæœ‰å‚è€ƒä»·å€¼ã€‚</p><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><p>è¿ç§»è¿‡ç¨‹å¯ä»¥ç”±åº”ç”¨ç¨‹åºæœ¬èº«ã€ç”¨æˆ·ç©ºé—´åº“[6,12,26,29]ã€å†…æ ¸æˆ–è™šæ‹Ÿæœºç®¡ç†ç¨‹åºé©±åŠ¨ã€‚</p><p>æˆ‘ä»¬å°†å†…å­˜å¸è½½åç«¯å®šä¹‰ä¸ºä¿å­˜å¸è½½å†…å­˜çš„æ…¢é€Ÿå†…å­˜å±‚ã€‚åœ¨æˆ‘ä»¬å½“å‰çš„ç”Ÿäº§é˜Ÿåˆ—ä¸­ï¼Œè¿™ç”±NVMe SSDå’Œå‹ç¼©å†…å­˜æ± ç»„æˆã€‚æœªæ¥æˆ‘ä»¬é¢„è®¡è¿™å°†åŒ…æ‹¬NVMå’ŒCXLè®¾å¤‡ã€‚</p><p>åœ¨è·¨å¸è½½åç«¯å…·æœ‰å¤šæ ·æ€§çš„å¼‚æ„å­˜å‚¨å™¨ç³»ç»Ÿä¸­ï¼Œç»™å®šçš„ä¸»è¦æ•…éšœç‡ï¼ˆé‚£äº›ç¡¬ä»¶è®¡æ•°å™¨ï¼‰å¯èƒ½åœ¨æ…¢é€Ÿå­˜å‚¨è®¾å¤‡ä¸Šæ„æˆé—®é¢˜ï¼Œè€Œåœ¨è¾ƒå¿«å­˜å‚¨è®¾å¤‡ä¸Šåˆ™æ— å…³ç´§è¦ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¾ˆéš¾ç†è§£ç‰¹å®šçš„å†…æ ¸äº‹ä»¶æ˜¯å¦æ˜¯å·¥ä½œè´Ÿè½½çš„åŠŸèƒ½é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Exploring Memory Access Similarity to Improve Irregular Application Performance for Distributed</title>
      <link href="/2023/10/15/Exploring-Memory-Access-Similarity-to-Improve-Irregular-Application-Performance-for-Distributed/"/>
      <url>/2023/10/15/Exploring-Memory-Access-Similarity-to-Improve-Irregular-Application-Performance-for-Distributed/</url>
      
        <content type="html"><![CDATA[<h2 id="0-è®ºæ–‡ä¿¡æ¯"><a href="#0-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="0.è®ºæ–‡ä¿¡æ¯"></a>0.è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªIEEE Transactions on Parallel and Distributed Systemsï¼ŒTPDSï¼Œ2023</li><li>Exploring Memory Access Similarity to Improve Irregular Application Performance for Distributed</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Wenjie Liuï¼Œ Xubin Heï¼Œç¾å›½å®¾å¤•æ³•å°¼äºšå·è´¹åŸå¤©æ™®å¤§å­¦è®¡ç®—æœºä¸ä¿¡æ¯ç§‘å­¦ç³»</li><li>Qing Liuï¼Œç¾å›½æ–°æ³½è¥¿å·çº½ç“¦å…‹å¸‚æ–°æ³½è¥¿ç†å·¥å­¦é™¢ç”µæ°”ä¸è®¡ç®—æœºå·¥ç¨‹ç³»</li></ul><h1 id="1-Background"><a href="#1-Background" class="headerlink" title="1.Background"></a>1.Background</h1><p>stacked DRAM and off-chip DRAMçš„å¼‚æ„ã€‚<br>å¹¶è¡Œå·¥ä½œæ¨¡å¼ä½¿å¾—åœ¨é«˜æ€§èƒ½é›†ç¾¤ä¸Šäº§ç”Ÿè·¨èŠ‚ç‚¹çš„ä¸è§„åˆ™å†…å­˜è®¿é—®è¡Œä¸ºï¼ˆmemory access behaviorsï¼Œ<strong>MAB</strong>ï¼‰ã€‚<br>ä½†æ˜¯æ‰§è¡Œå…±äº«åŠŸèƒ½æˆ–è€…æ•°æ®ç»“æ„æ—¶ï¼ŒèŠ‚ç‚¹é—´ä¼šäº§ç”Ÿç›¸ä¼¼çš„MABã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/59b533c0f549441a95aade87ee7d645f.png"><br>å·¥ä½œèŠ‚ç‚¹ä¹‹é—´å†…å­˜è®¿é—®ç›¸ä¼¼æ€§çš„ç¤ºä¾‹ã€‚æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹æ‰§è¡Œå…±äº«äºŒè¿›åˆ¶ä»£ç çš„ä¸åŒéƒ¨åˆ†, åˆ›å»ºMABçš„å„ç§ç»„åˆã€‚å¦‚å›¾æ‰€ç¤º,ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„ç›¸ä¼¼æ€§æ˜¯é€šè¿‡é‡å çš„MABä»¥åŠæ¯ä¸ªMABè¦†ç›–çš„é¡µé¢æ•°é‡æ¥ä¼°è®¡çš„,ä¾‹å¦‚,èŠ‚ç‚¹Kå’ŒèŠ‚ç‚¹Så…±äº«ç›¸åŒçš„MABå¹¶äº§ç”Ÿé«˜ç›¸ä¼¼æ€§ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/0ea19701091942909a12b353a43e0b5f.png"><br>æœ€å¸¸ç”¨çš„6ä¸ªMABæ‰€è¦†ç›–çš„å†…å­˜é¡µçš„ç»†åˆ†ã€‚å¯ä»¥å¾—å‡ºä¸‰ä¸ªè§‚å¯Ÿç»“æœã€‚é¦–å…ˆ, MAB,ä¾‹å¦‚MAB 0,å¯ä»¥è¢«æ‰€æœ‰èŠ‚ç‚¹å…±äº«ä¸ºæ‰§è¡Œç›¸åŒçš„äºŒè¿›åˆ¶ä»£ç ã€‚<br>ç¬¬äºŒï¼Œåœ¨èŠ‚ç‚¹3.4.6.7.8.11.12.13ä¸Šè§‚å¯Ÿåˆ°ç›¸åŒçš„MABç»„åˆ;å› ä¸ºè¿™æ ·çš„èŠ‚ç‚¹å¯ä»¥æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ã€‚ç¬¬ä¸‰, <del>MAB 5ä»…åœ¨èŠ‚ç‚¹14.ä¸Šæ˜¾ç¤º</del> ï¼Œå¹¶ä¸”å¤§é‡é¡µé¢è¢«MAB 5è¦†ç›–,è¿™æ„å‘³ç€ç›¸ä¼¼æ€§ä¸ä»…å­˜åœ¨äºèŠ‚ç‚¹ä¹‹é—´ï¼Œè€Œä¸”å­˜åœ¨äºèŠ‚ç‚¹å†…çš„å¤šä¸ªé¡µé¢ä¹‹é—´ã€‚</p><h1 id="2-è§£å†³çš„é—®é¢˜ï¼ˆMotivationï¼‰"><a href="#2-è§£å†³çš„é—®é¢˜ï¼ˆMotivationï¼‰" class="headerlink" title="2.è§£å†³çš„é—®é¢˜ï¼ˆMotivationï¼‰"></a>2.è§£å†³çš„é—®é¢˜ï¼ˆMotivationï¼‰</h1><p>ä¸ºäº†åˆ©ç”¨å †å DRAMå®ç°çš„é«˜æ€§èƒ½ï¼Œè®¾è®¡é«˜æ•ˆæ··åˆå­˜å‚¨å™¨ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ä¸¤ä¸ªæŒ‘æˆ˜ã€‚</p><ul><li>ç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯ç¡®å®šè¿è¡Œæ—¶çš„æœ€ä½³æ•°æ®ä½ç½®ã€‚</li><li>ç¬¬äºŒä¸ªæŒ‘æˆ˜æ˜¯å‡å°‘å…ƒæ•°æ®é€ æˆçš„å¼€é”€ã€‚ä¸‹å›¾æ¯”è¾ƒäº†ç°æœ‰æŠ€æœ¯çš„å †å DRAMå‘½ä¸­ç‡å’Œå…ƒæ•°æ®å¯¼è‡´çš„ç›¸åº”æ€§èƒ½ä¸‹é™ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œæœ€å…ˆè¿›çš„æ–¹æ³•ä¸æ–­æé«˜å †å DRAMå‘½ä¸­ç‡ã€‚åŒæ—¶,å¯¹äºä¸è§„åˆ™çš„HPCåº”ç”¨ç¨‹åº,å…ƒæ•°æ®å¯¼è‡´çš„æ€§èƒ½å¼€é”€æ˜¾è‘—å¢åŠ ï¼Œè¿™é™ä½äº†å †å DRAMå¸¦æ¥çš„æ€§èƒ½å¢ç›Šã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/7c1d020bbf2d4c08b35440e4307a2647.png"></li></ul><h1 id="3-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#3-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="3.å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>3.å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h1><p>ç°æœ‰çš„æ–¹æ³•é€šè¿‡åˆ©ç”¨æ¯ä¸ª<strong>æ•°æ®å—çš„è®¿é—®å†å²</strong>[7] [8] [9]æˆ–æ“ä½œç³»ç»Ÿ[10] [11]æä¾›çš„æç¤ºæ¥è¯†åˆ«çƒ­æ•°æ®ï¼Œè¿™äº›æç¤ºå¿½ç•¥äº†ç”±é›†ç¾¤çš„å¹¶è¡Œå·¥ä½œæ¨¡å¼å¯ç”¨çš„å…±äº«MAB,å¹¶ä¸”å¯èƒ½åœ¨é›†ç¾¤ç¯å¢ƒä¸­è¡¨ç°ä¸ä½³ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> C. C. Chou, A. Jaleel, and M. K. Qureshi, â€œCAMEO: A two-level memory organization with capacity of main memory and flexibility of hardware-managed cache,â€ <span class="token keyword">in</span> Proc. IEEE/ACM 47th Annu. Int. Symp. Microarchitecture, <span class="token number">2014</span>, pp. <span class="token number">1</span>â€“12.<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> J. B. Kotra, H. Zhang, A. R. Alameldeen, C. Wilkerson, and M. T. Kandemir, â€œChameleon: A dynamically reconfigurable heterogeneous memory system,â€ <span class="token keyword">in</span> Proc. IEEE/ACM 47th Annu. Int. Symp. Microarchitecture, <span class="token number">2018</span>, Art. no. <span class="token number">533</span>.<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> E. Vasilakis, V. Papaefstathiou, P. Trancoso, and I. Sourdis, â€œHybrid2: Combining caching and migration <span class="token keyword">in</span> hybrid memory systems,â€ <span class="token keyword">in</span> Proc. IEEE Int. Symp. High Perform. Comput. Architecture, <span class="token number">2020</span>, pp. <span class="token number">649</span>â€“662.<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> A. Kokolis, D. Skarlatos, and J. Torrellas, â€œPageSeer: Using page walks to trigger page swaps <span class="token keyword">in</span> hybrid memory systems,â€ <span class="token keyword">in</span> Proc. IEEE Int. Symp. High Perform. Comput. Architecture, <span class="token number">2019</span>, pp. <span class="token number">596</span>â€“608.<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> A. Prodromou, M. Meswani, N. Jayasena, G. Loh, and D. M. Tullsen, â€œMemPod: A clustered architecture <span class="token keyword">for</span> efficient and scalable migration <span class="token keyword">in</span> flat address space multi-level memories,â€ <span class="token keyword">in</span> Proc. IEEE Int. Symp. High Perform. Comput. Architecture, <span class="token number">2017</span>, pp. <span class="token number">433</span>â€“444.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é’ˆå¯¹ä¸è§„åˆ™åº”ç”¨çš„ä¼˜åŒ–ã€‚ç°æœ‰çš„ç ”ç©¶é’ˆå¯¹ä¸è§„åˆ™åº”ç”¨, è¦ä¹ˆå°†ä¸è§„åˆ™æ€§æš´éœ²ç»™ä½œä¸šè°ƒåº¦å™¨è¿›è¡Œè‡ªé€‚åº”è°ƒåº¦[31] ,[32] ,è¦ä¹ˆåˆ©ç”¨ä¸è§„åˆ™æ€§åœ¨å¼‚æ„é›†ç¾¤ä¸­è¿›è¡Œæ›´å¥½çš„èµ„æºåˆ†é…[33] [34]ã€‚Nozalç­‰äººæå‡ºåœ¨ä½¿ç”¨OneAPIæ¡†æ¶æ‰§è¡Œä¸è§„åˆ™åº”ç”¨ç¨‹åºæ—¶ï¼Œå¹³è¡¡åˆ†é…ç»™ä¸åŒç¡¬ä»¶çš„è´Ÿè½½[31]ã€‚ æ­¤å¤–, Daiç­‰äººåœ¨è¿è¡Œæ—¶æ£€æµ‹ä¸å‡åŒ€åˆ†å¸ƒçš„ä¸è§„åˆ™å·¥ä½œè´Ÿè½½, å¹¶å°†ä¸å ªé‡è´Ÿçš„èŠ‚ç‚¹çš„å·¥ä½œè´Ÿè½½è¿ç§»åˆ°åˆ†é…è¾ƒå°‘å·¥ä½œè´Ÿè½½çš„èŠ‚ç‚¹[32]ã€‚å¦ä¸€æ–¹é¢,åˆ©ç”¨ä¸è§„åˆ™æ€§æ¥ç»†åŒ–é›†ç¾¤ä¸­çš„èµ„æºåˆ†é…ã€‚æ¨ç­‰äººè§‚å¯Ÿäº†é›†ç¾¤ä¸­è¿è¡Œçš„ä¸è§„åˆ™åº”ç”¨ç¨‹åºå¯¼è‡´çš„éšæœºå’Œä¸è§„åˆ™ç½‘ç»œæµé‡,å¹¶æå‡ºåˆ©ç”¨æ•°æ®å‹ç¼©æŠ€æœ¯æ¥æœ€å¤§é™åº¦åœ°å‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—[34]ã€‚æ­¤å¤–, Shinç­‰äººåˆ†æäº†GPUä¸Šè¿è¡Œçš„ä¸è§„åˆ™åº”ç”¨ç¨‹åºå¯¼è‡´çš„æ€§èƒ½ä¸‹é™,å¹¶æå‡ºåŠ å¿«åœ°å€è½¬æ¢è¿‡ç¨‹ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘SIMDæŒ‡ä»¤çš„æ•°æ®å‡†å¤‡æ—¶é—´[33]ã€‚</p><p>ç³»ç»Ÿä¸­çš„ç›¸ä¼¼æ€§ã€‚ç›¸ä¼¼ä¹‹å¤„å­˜åœ¨äºè®¸å¤šæ–¹é¢å„æ–¹é¢çš„è®¡ç®—ç³»ç»Ÿ, ä»¥åŠå…ˆå‰çš„å·¥ä½œæ¢è®¨äº†ç›¸ä¼¼æ€§ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚Kollerç­‰äººæå‡ºäº†ä¸€ç§åŸºäºè§‚å¯Ÿåˆ°çš„å­˜å‚¨å’Œè®¿é—®æ•°æ®çš„é«˜åº¦ç›¸ä¼¼çš„I/Oå†…å®¹çš„I/Oé‡å¤æ•°æ®æ¶ˆé™¤æ–¹æ³•[35]ã€‚åŒæ—¶,Xiaoç­‰äººåˆ©ç”¨é«˜çº§ç¨‹åºä¸­ä¸°å¯Œçš„è‡ªç›¸ä¼¼æ€§æ¥åŠ é€ŸèŠ¯ç‰‡ä¹‹é—´çš„æ•°æ®é€šä¿¡[36]ã€‚åˆ˜ç­‰äººåˆ©ç”¨é›†ç¾¤çš„å¹¶è¡Œå·¥ä½œæ¨¡å¼,æå‡ºäº†æé«˜æ‰é˜Ÿæ€§èƒ½çš„æ–¹æ³•ã€‚</p><p>æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿã€‚ç°æœ‰å·¥ç¨‹ç¡®å®šçƒ­ç‚¹é€šè¿‡ç›‘è§†æ¯ä¸ªæ•°æ®å—çš„å­˜å‚¨å™¨è®¿é—®è¡Œä¸ºæˆ–ä¾èµ–äºæ“ä½œç³»ç»Ÿå‘ç°çš„ä¿¡æ¯æ¥è·å–æ•°æ®ã€‚é€šè¿‡ç›‘æµ‹æ¯ä¸ªæ•°æ®å—çš„å†…å­˜è®¿é—®è¡Œä¸º, å¯ä»¥ä½¿ç”¨è·å¾—çš„è®¿é—®è¡Œä¸ºæ¥è¯†åˆ«ä¸‹é¢è®¿é—®çš„ç¼“å­˜è¡Œï¼Œå¹¶ä¸”å¯ä»¥æ‰§è¡Œå‡†ç¡®çš„æ•°æ®è¿ç§»/ç¼“å­˜[7]ã€[8]ã€[9]ã€‚å¦ä¸€æ–¹é¢,Prodromouç­‰äººæå‡ºåˆ©ç”¨æ“ä½œç³»ç»Ÿè§‚å¯Ÿåˆ°çš„å†…å­˜è®¿é—®è¡Œä¸ºï¼Œå¹¶ä½¿ç”¨å¤šæ•°å…ƒç´ ç®—æ³•æ¥é¢„æµ‹çƒ­é¡µ[1]ã€‚æ­¤å¤–,ç ”ç©¶äººå‘˜å°†è®¡ç®—èƒ½åŠ›é›†æˆåˆ°å †å çš„DRAMä¸­ï¼Œè¿™è¿›ä¸€æ­¥å‡å°‘äº†å†…å­˜æµé‡,å¹¶ä¸ºå†…å­˜å¯†é›†å‹åº”ç”¨æä¾›äº†æ›´é«˜çš„æ•ˆç‡[37] ,[38]ã€‚</p><h1 id="4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯ï¼ˆDesignï¼‰"><a href="#4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯ï¼ˆDesignï¼‰" class="headerlink" title="4.å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯ï¼ˆDesignï¼‰"></a>4.å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯ï¼ˆDesignï¼‰</h1><h2 id="4-1-Similarity-Monitor"><a href="#4-1-Similarity-Monitor" class="headerlink" title="4.1 Similarity Monitor"></a>4.1 Similarity Monitor</h2><p>æå‡ºäº†ä¸€ç§é‡åŒ–æ–¹æ³•æ¥æµ‹é‡èŠ‚ç‚¹ä¹‹é—´çš„å†…å­˜è®¿é—®ç›¸ä¼¼åº¦ï¼Œ<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/97d94f0e504f4a95936dca253e9c8429.png">å°†æ¥è‡ªæ‰€æœ‰èŠ‚ç‚¹çš„MABèšåˆä¸ºå…¨å±€å†…å­˜è®¿é—®è¡Œä¸ºå‘é‡(<strong>GMABV</strong>) ,ç”Ÿæˆæ¯èŠ‚ç‚¹å†…å­˜è®¿é—®è¡Œä¸ºçŸ¢é‡(<strong>PMABV</strong>) ï¼Œå¹¶è®¡ç®—PMABVä¹‹é—´çš„è·ç¦»ä½œä¸ºç›¸ä¼¼æ€§ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/f907559fea214cc1b9b62e61ce11e4ef.png"><br>æ¯”è¾ƒä¸¤ç§å…±äº«æ–¹æ¡ˆï¼Œå…¨å±€å…±äº«æ— æ³•ä¸ºä¸è§„åˆ™åº”ç”¨æä¾›é«˜çš„å…±äº«ç²¾åº¦ï¼Œå› ä¸ºå¹¶éæ¯ä¸ªMABéƒ½å¯¹å…¶ä»–èŠ‚ç‚¹æœ‰å¸®åŠ©ã€‚ç›¸å,é€‰æ‹©æ€§å…±äº«æŒ‰éœ€å…±äº«MAB,è¿™ä¼šç»™éƒ¨ç½²çš„èŠ‚ç‚¹å¸¦æ¥æ€§èƒ½å¼€é”€ã€‚ç”±äºMABå…±äº«ä¸å‡†ç¡®,è¿™ä¸¤ç§æ–¹æ³•éƒ½å­˜åœ¨æ€§èƒ½æŸå¤±ï¼ŒGSå’ŒSSçš„æ€§èƒ½æŸå¤±åˆ†åˆ«é«˜è¾¾13.1%å’Œ15.4%ï¼Œ è¿™è¡¨æ˜åœ¨ä¸è§„åˆ™åº”ç”¨çš„æƒ…å†µä¸‹éœ€è¦ä¸€ç§æœ‰æ•ˆçš„MABå…±äº«æ–¹æ¡ˆã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Similarity-Based Sharing</span>Input: Receiving access behavior AccBhv from <span class="token function">node</span> k<span class="token keyword">if</span> AccBhv <span class="token keyword">in</span> GMABV <span class="token keyword">then</span><span class="token keyword">if</span> <span class="token function">node</span> k belongs to a Similarity Group <span class="token keyword">then</span>Forward AccBhv to nodes within the group with global sharing<span class="token keyword">else</span>Perform selective sharing with all Low Similarity nodesend <span class="token keyword">if</span>Update metadata<span class="token keyword">else</span>Update PMABV , GMABV and Similarity Matrixend <span class="token keyword">if</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-2-Access-Behavior-Buffer"><a href="#4-2-Access-Behavior-Buffer" class="headerlink" title="4.2 Access Behavior Buffer"></a>4.2 Access Behavior Buffer</h2><p>æ ¹æ®SMABSçš„è®¾è®¡ï¼ŒèŠ‚ç‚¹ä¹‹é—´åªå…±äº«å½“å‰å·¥ä½œé›†çš„MABï¼Œè¿™å‡è½»äº†æ¯ä¸ªèŠ‚ç‚¹ä¸ŠMABç›‘æ§å¸¦æ¥çš„å¼€é”€ã€‚æ­¤å¤–ï¼Œç”±äºæ¯ä¸ªèŠ‚ç‚¹å¤„ç†çš„å¤§é‡ç»“æ„åŒ–æ•°æ®å’ŒHPCåº”ç”¨ç¨‹åºä¸­ä¸°å¯Œçš„å¾ªç¯ï¼Œè·¨èŠ‚ç‚¹çš„å¤šä¸ªå†…å­˜é¡µå…±äº«ç›¸åŒçš„MABã€‚å› æ­¤ï¼Œå³ä½¿æ˜¯å•ä¸ªå…±äº«MABä¹Ÿå¯ä»¥æè¿°ç›¸åº”èŠ‚ç‚¹å†…å¤šä¸ªé¡µé¢çš„è®¿é—®è¡Œä¸ºã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c8a23de4e70141a0a79a68b7c4769a7d.png"><br>å¦‚å›¾è®¿é—®è¡Œä¸ºç¼“å†²åŒºçš„ä¸€ä¸ªæ¡ç›®ã€‚çŠ¶æ€å’Œè¦†ç›–æ¯”ç‰¹éƒ½ç¡®å®šæ–°è§‚å¯Ÿåˆ°çš„MABæ˜¯å¦å°†è¢«å‘é€åˆ°ç›¸ä¼¼æ€§ç›‘è§†å™¨ä»¥è¿›è¡Œç›¸ä¼¼æ€§æ›´æ–°ã€‚è€Œèµ·å§‹åœ°å€å’Œè¦†ç›–é¡µæ˜¯ç”¨æ¥å¿«é€Ÿè¯†åˆ«å†…å­˜è¯·æ±‚çš„æ»‘åŠ¨çª—å£éƒ¨åˆ†ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/e6b261c2909546e593d09f8c527e1daf.png"></p><h2 id="4-3-Swap-Executor"><a href="#4-3-Swap-Executor" class="headerlink" title="4.3 Swap Executor"></a>4.3 Swap Executor</h2><p>ä¸ºäº†åˆ©ç”¨è®¿é—®è¡Œä¸ºç¼“å†²åŒºä¸­ç¼“å†²çš„M4B,äº¤æ¢æ‰§è¡Œå™¨ç”¨äºé€šè¿‡ä½¿ç”¨å…±äº«M4Bä½œä¸ºâ€œé…æ–¹â€æ¥æ‰§è¡Œåº•å±‚æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿçš„æ•°æ®æ”¾ç½®ã€‚</p><h2 id="4-4-SM-HMS-Overview"><a href="#4-4-SM-HMS-Overview" class="headerlink" title="4.4 SM-HMS Overview"></a>4.4 SM-HMS Overview</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d1f03539af6148d385ff12d71c165eaf.png"></p><h1 id="5-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#5-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="5.ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>5.ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h1><p>åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œçš„ï¼Œé¦–å…ˆæ˜¯ä½œä¸šå®Œæˆæ—¶é—´æ¯”è¾ƒï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/02a690c97d864595a981b18d199b8106.png"><br>ä¹‹åæ˜¯IPCæ¯”è¾ƒï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/963bb9358e614c849013917e811a2781.png"><br>è¿˜è®¨è®ºäº†ç›¸åº”çš„å‚æ•°æ•æ„Ÿæ€§ã€å †å å‘½ä¸­ç‡ï¼ˆä¸è¿‡è¿™éƒ½æ˜¯é’ˆå¯¹ç‰‡å†…DRAMçš„äº†ï¼‰å»¶è¿Ÿå’Œå¸¦å®½çš„æ”¶ç›Šåº”è¯¥æ˜¯æ¥è‡ªäºå…±äº«å§ã€‚ä¹‹åå®¹é‡å ç”¨ä¹‹ç±»çš„æ•°æ®éƒ½å¾ˆå¥½ï¼Œä¸æ”¾å›¾ç‰‡äº†ã€‚</p><p>æˆ‘ä»¬å¯¹ç”±å¤šè¾¾256ä¸ªèŠ‚ç‚¹ç»„æˆçš„å„ç§é›†ç¾¤é…ç½®ä¸Šçš„ä¸€ç»„ä¸è§„åˆ™åº”ç”¨ç¨‹åºçš„è¯„ä¼°ç»“æœè¡¨æ˜ï¼Œ SM-HMSåœ¨å®Œæˆæ—¶é—´å‡å°‘æ–¹é¢ä¼˜äºæœ€å…ˆè¿›çš„æ–¹æ³•Cameoã€Chameleonå’ŒHyrbid2 ï¼Œ åˆ†åˆ«å‡å°‘äº†58.6%ã€56.7%å’Œ31.3%ï¼Œ å¹³å‡å‡å°‘äº†46.1%ã€41 .6%å’Œ19.3%ã€‚ä¸ç†æƒ³çš„æ··åˆå­˜å‚¨ç³»ç»Ÿç›¸æ¯”ï¼Œ SM-HMSçš„æ•ˆç‡é«˜è¾¾98.6%(å¹³å‡91.9% )ã€‚æ­¤å¤–,åœ¨å¸¸è§„åº”ç”¨.ä¸Šçš„å®éªŒè¡¨æ˜ï¼Œæ‰€æå‡ºçš„<br>SM-HMSæœ‰åˆ©äºæ›´å¹¿æ³›çš„HPCåº”ç”¨ã€‚</p><h1 id="6-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#6-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="6.ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>6.ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h1><p>è¿™äº›æœ€å¼€å§‹è®¾ç½®çš„5ç±»MABåˆ†åˆ«æ˜¯å•¥ï¼Ÿåˆ°åº•æ˜¯æ€ä¹ˆå°†è®¿é—®è¡Œä¸ºè¡¨ç¤ºä¸ºå‘é‡çš„ï¼Œ<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/a85a47828a004423ad5a501188b6a2b2.png"></p><h1 id="7-åˆ›æ–°ç‚¹"><a href="#7-åˆ›æ–°ç‚¹" class="headerlink" title="7.åˆ›æ–°ç‚¹"></a>7.åˆ›æ–°ç‚¹</h1><p>åº”è¯¥å°±æ˜¯åˆ©ç”¨ç›¸ä¼¼æ€§å»åšï¼Œå‡å°‘äº†ä¸€äº›é‡å¤æ“ä½œï¼Ÿä»æ ¹æœ¬ä¸Šè®², SMHMSåŒºåˆ«äºå­˜åœ¨é€šè¿‡æ ¹æ®é‡åŒ–çš„å†…å­˜è®¿é—®ç›¸ä¼¼æ€§åœ¨å·¥ä½œèŠ‚ç‚¹ä¹‹é—´å…±äº«å†…å­˜è®¿é—®è¡Œä¸º, å¹¶å°†å…±äº«çš„å†…å­˜è®¿é—®è¡Œä¸ºä½œä¸ºâ€œé…æ–¹â€æ¥æ‰§è¡Œå‡†ç¡®å’ŒçŸ¥æƒ…çš„ç¼“å­˜æ›¿æ¢,ä»è€Œæé«˜äº†å †å DRAMçš„åˆ©ç”¨ç‡,å¹¶ç›¸åº”åœ°é™ä½äº†å…ƒæ•°æ®å¼€é”€ã€‚</p><h1 id="8-è¯¥è®ºæ–‡çš„ç›¸å…³èµ„æ–™"><a href="#8-è¯¥è®ºæ–‡çš„ç›¸å…³èµ„æ–™" class="headerlink" title="8.è¯¥è®ºæ–‡çš„ç›¸å…³èµ„æ–™"></a>8.è¯¥è®ºæ–‡çš„ç›¸å…³èµ„æ–™</h1><p>srdsï¼Œä¸­æ–‡åä½œè€…ä¸€èˆ¬éƒ½ä¸ä¼šå…¬å¸ƒä»€ä¹ˆèµ„æ–™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> å †å DRAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Exploring the Design Space of Page Management for Multi-Tiered Memory Systems</title>
      <link href="/2023/10/13/Exploring-the-Design-Space-of-Page-Management-for-Multi-Tiered-Memory-Systems/"/>
      <url>/2023/10/13/Exploring-the-Design-Space-of-Page-Management-for-Multi-Tiered-Memory-Systems/</url>
      
        <content type="html"><![CDATA[<h2 id="è®ºæ–‡ä¿¡æ¯"><a href="#è®ºæ–‡ä¿¡æ¯" class="headerlink" title="è®ºæ–‡ä¿¡æ¯"></a>è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªUSENIX Annual Technical Conference, (ATC), 2021</li><li>Exploring the Design Space of Page Management for Multi-Tiered Memory Systems</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Jonghyeon Kim, Wonkyo Choe, and Jeongseob Ahn, ï¼ˆéŸ©å›½ï¼‰äºšæ´²å¤§å­¦</li></ul><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>AutoNUMAç”¨äºå¹³è¡¡NumaèŠ‚ç‚¹é—´çš„å†…å­˜è®¿é—®ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯ï¼šå®šæœŸç»Ÿè®¡å„è¿›ç¨‹çš„å†…å­˜è®¿é—®æƒ…å†µï¼Œ å¹¶unmapping pagesï¼Œç„¶åè§¦å‘NUMA hinting faultï¼Œåœ¨page faultä¸­é‡æ–°å‡è¡¡å†…å­˜è®¿é—®ï¼Œç›®çš„æ˜¯ä½¿è¿è¡Œ è¿›ç¨‹çš„CPUå°½é‡è®¿é—®æœ¬åœ°èŠ‚ç‚¹ä¸Šçš„å†…å­˜ï¼Œæå‡æ€§èƒ½ã€‚</p><h1 id="Abstractæ‘˜è¦"><a href="#Abstractæ‘˜è¦" class="headerlink" title="Abstractæ‘˜è¦"></a>Abstractæ‘˜è¦</h1><p>éšç€ç”±å„ç§ç±»å‹çš„å†…å­˜ç»„æˆçš„åˆ†å±‚å†…å­˜ç³»ç»Ÿçš„åˆ°æ¥ï¼Œå¦‚DRAMå’ŒSCM(storage class memory)ï¼Œæ“ä½œç³»ç»Ÿå¯¹å†…å­˜ç®¡ç†çš„æ”¯æŒæ­£å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚ç„¶è€Œï¼Œç›®å‰æ“ä½œç³»ç»Ÿç®¡ç†é¡µé¢çš„æ–¹å¼æ˜¯åœ¨å‡è®¾æ‰€æœ‰çš„å†…å­˜éƒ½å…·æœ‰åŸºäºDRAMçš„ç›¸åŒèƒ½åŠ›çš„æƒ…å†µä¸‹è®¾è®¡çš„ã€‚è¿™ç§è¿‡åº¦ç®€åŒ–çš„åšæ³•å¯¼è‡´äº†åˆ†å±‚å†…å­˜ç³»ç»Ÿä¸­éæœ€ä½³çš„å†…å­˜è¢«ä½¿ç”¨ã€‚æœ¬ç ”ç©¶æ·±å…¥åœ°åˆ†æäº†åœ¨ç›®å‰çš„Linuxè®¾è®¡ä¸­é¡µé¢ç®¡ç†æ–¹æ¡ˆï¼Œå°†NUMAæ‰©å±•åˆ°æ”¯æŒåŒæ—¶é…å¤‡DRAMå’ŒSCMçš„ç³»ç»Ÿï¼ˆè‹±ç‰¹å°”çš„DCPMMï¼‰ã€‚åœ¨è¿™æ ·çš„å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å‘ç°å½±å“æ€§èƒ½çš„å…³é”®å› ç´ ä¸ä»…æ˜¯è®¿é—®ä½ç½®ï¼Œè€Œä¸”è¿˜æœ‰å†…å­˜çš„è®¿é—®å±‚ã€‚å½“è€ƒè™‘åˆ°è¿™ä¸¤ä¸ªç‰¹æ€§æ—¶ï¼Œæœ‰å‡ ç§æ›¿ä»£é¡µæ”¾ç½®çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œç›®å‰çš„è¿è¡Œç³»ç»Ÿåªä¼˜å…ˆè€ƒè™‘äº†è®¿é—®ä½ç½®ã€‚æœ¬æ–‡æ¢è®¨äº†é¡µé¢ç®¡ç†æ–¹æ¡ˆçš„è®¾è®¡ç©ºé—´ï¼Œ ç§°ä¸ºAutoTieringï¼Œä»¥æœ‰æ•ˆä½¿ç”¨å¤šå±‚å†…å­˜ç³»ç»Ÿã€‚æˆ‘ä»¬çš„è¯„ä¼°ç»“æœè¡¨æ˜ï¼Œä¸ç°æœ‰çš„Linuxå†…æ ¸ç›¸æ¯”ï¼Œæˆ‘ä»¬æå‡ºçš„æŠ€æœ¯å¯ä»¥é€šè¿‡é‡Šæ”¾å¤šå±‚å†…å­˜å±‚æ¬¡ç»“æ„çš„æ½œåŠ›ï¼Œæ˜¾è‘—æé«˜å„ç§å·¥ä½œè´Ÿè½½çš„æ€§èƒ½ã€‚</p><h1 id="1-Introductionç®€ä»‹"><a href="#1-Introductionç®€ä»‹" class="headerlink" title="1 Introductionç®€ä»‹"></a>1 Introductionç®€ä»‹</h1><p>éšç€å†…å­˜è®¡ç®—çš„å‡ºç°ï¼Œå¦‚æ•°æ®åˆ†æã€é”®å€¼å­˜å‚¨å’Œå›¾å½¢å¤„ç†ï¼Œå¯¹é«˜å¯†åº¦DRAMçš„éœ€æ±‚åœ¨æœ€è¿‘å‡ å¹´ä¸€ç›´åœ¨ç¨³æ­¥å¢é•¿[27]ã€‚ç„¶è€Œï¼Œç”±äºæ‰©å¤§DRAMå¯†åº¦çš„æŒ‘æˆ˜ï¼Œä¸€ç§æ–°çš„å†…å­˜ç±»åˆ«å·²ç»å—åˆ°å…³æ³¨ï¼Œä»¥å¼¥è¡¥DRAMå’ŒSSDä¹‹é—´çš„æ€§èƒ½å·®è·ã€‚ä¾‹å¦‚ï¼Œè‹±ç‰¹å°”æœ€è¿‘å‘å¸ƒäº†å…¶åŸºäº3DXpointæŠ€æœ¯çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼Œç§°ä¸ºOptane DC Persistent Memory Moduleï¼ˆDCPMMï¼‰ï¼Œå®ƒæä¾›äº†æ¯”DRAMæ›´é«˜çš„å¯†åº¦ï¼ŒåŒæ—¶æ€§èƒ½è¶…è¿‡äº†åŸºäºé—ªå­˜çš„SSD[23]ã€‚è°·æ­Œã€ç”²éª¨æ–‡ã€å¾®è½¯å’Œç™¾åº¦ç­‰äº‘å‚å•†å·²ç»åœ¨å…¶äº‘æœåŠ¡ä¸­é‡‡ç”¨äº†è¿™ç§å­˜å‚¨ç±»å†…å­˜ï¼ˆSCMï¼‰[4, 14, 17,25]ã€‚</p><p>ç”±äºç°ä»£æœåŠ¡å™¨ç³»ç»Ÿæ˜¯ç”¨éç»Ÿä¸€å†…å­˜è®¿é—®ï¼ˆNUMAï¼‰æ¶æ„æ„å»ºçš„ï¼Œæœªæ¥çš„å¤§å†…å­˜ç³»ç»Ÿå°†é‡‡ç”¨ä¼ ç»ŸNUMAæ¶æ„ä¸Šçš„åˆ†å±‚å†…å­˜çš„å½¢å¼ï¼Œç§°ä¸ºå¤šå±‚å†…å­˜ã€‚å›¾1å±•ç¤ºäº†æœ¬ç ”ç©¶ä¸­ä½¿ç”¨çš„ä¸€ä¸ªçœŸå®ä¸–ç•Œçš„å¤šå±‚å†…å­˜ç³»ç»Ÿã€‚æ¯ä¸ªè®¡ç®—èŠ¯ç‰‡æœ‰ä¸¤ç§ç±»å‹çš„å†…å­˜ï¼šDRAMï¼ˆä¸Šå±‚ï¼‰å’Œè‹±ç‰¹å°”çš„DCPMMï¼ˆä¸‹å±‚ï¼‰ã€‚æˆ‘ä»¬å°†DRAMå’ŒDCPMMé…ç½®ä¸ºå®Œå…¨æš´éœ²ç»™è½¯ä»¶çš„å†…å­˜ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/080d36e6d55a472597e75b673d907ee2.png"></p><p>æœ¬æ–‡æå‡ºï¼Œæœ€è¿‘åœ¨Linux[15]å’Œåˆ†å±‚å†…å­˜ç ”ç©¶[16,20,35]ä¸­çš„è¿›å±•å¹¶æ²¡æœ‰å¯¼è‡´å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­çš„æœ€ä½³é¡µé¢æ”¾ç½®ã€‚éšç€æ–°çš„å†…å­˜ç±»åˆ«æˆä¸ºä¸»å†…å­˜çš„ä¸€éƒ¨åˆ†ï¼Œå½±å“æ€§èƒ½çš„å…³é”®å› ç´ ä¸ä»…æ˜¯è®¿é—®ä½ç½®ï¼Œè€Œä¸”æ˜¯å†…å­˜çš„è®¿é—®å±‚ã€‚ç„¶è€Œï¼Œç›®å‰çš„é¡µé¢æ”¾ç½®æ–¹æ¡ˆæ˜¯ä¸ºçº¯DRAMçš„NUMAæ¶æ„å»ºç«‹çš„ï¼Œåªè€ƒè™‘çº¿ç¨‹å’Œå†…å­˜ä¹‹é—´çš„ä½ç½®[2,8,12,13,21,38]ã€‚å› æ­¤ï¼Œç›®å‰çš„è®¾è®¡è¿œè¿œæ²¡æœ‰å‘æŒ¥å‡ºå¤šå±‚å†…å­˜ç³»ç»Ÿçš„æ½œåœ¨ä¼˜åŠ¿ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä»ä½å±‚ï¼ˆDCPMMï¼‰å‘é«˜å±‚ï¼ˆDRAMï¼‰å†…å­˜å‡çº§é¡µé¢æ—¶ï¼Œæœ¬åœ°DRAMå˜å¾—æ»¡äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›®å‰çš„æŠ€æœ¯çŠ¶å†µæ˜¯å°†é¡µé¢ç•™åœ¨ä¸‹å±‚å†…å­˜ä¸Šï¼Œè€Œä¸ç®¡è¿œç¨‹DRAMï¼ˆä¸Šå±‚çš„ï¼‰æ˜¯å¦å¯ç”¨ã€‚å¯¹äºçº¯DRAMçš„NUMAç³»ç»Ÿæ¥è¯´ï¼Œè¿™æ ·çš„å†³å®šæ˜¯åˆç†çš„ï¼Œ å› ä¸ºæ›¿ä»£æ–¹æ¡ˆä¹‹é—´æ²¡æœ‰åŒºåˆ«ã€‚ç„¶è€Œï¼Œåœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­æˆ‘ä»¬ä¸èƒ½è€ƒè™‘ä¸è®¿é—®å±‚ç›¸å½“çš„æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©ã€‚åœ¨æ”¾ç½®é¡µé¢æ—¶ï¼Œåº”è¯¥å…ˆè€ƒè™‘å†…å­˜çš„è®¿é—®å±‚ï¼Œå†è€ƒè™‘è®¿é—®ä½ç½®ï¼Œå› ä¸ºè®¿é—®å±‚å¯¹æ€§èƒ½æœ‰æ›´å¤§çš„å½±å“ã€‚</p><p>è¿™ä¸ªé™åˆ¶ä¿ƒä½¿æˆ‘ä»¬é‡æ–°å®¡è§†å•†ç”¨æ“ä½œç³»ç»Ÿçš„é¡µé¢ç®¡ç†æ–¹æ¡ˆï¼Œå¹¶æ¢ç´¢å¤šå±‚å†…å­˜ç³»ç»Ÿçš„é¡µé¢ç®¡ç†çš„è®¾è®¡ç©ºé—´ã€‚åœ¨è¿™é¡¹ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç»„æ–°çš„é¡µé¢ç®¡ç†æ–¹æ¡ˆã€‚æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ–¹æ¡ˆï¼Œç§°ä¸ºAutoTiering-CPMï¼Œåœ¨æ‰¾ä¸åˆ°æœ€ä½³å†…å­˜èŠ‚ç‚¹ï¼ˆå¦‚æœ¬åœ°DRAMï¼‰æ—¶ï¼Œä½¿ç”¨è®¿é—®å±‚å’Œå®šä½åº¦é‡ï¼ˆlocality metricï¼‰ä¿å®ˆåœ°å¯»æ‰¾å‡çº§æˆ–è¿ç§»çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p><p>è™½ç„¶è¿™ç§ä¿å®ˆçš„æ–¹æ³•å¯ä»¥é€šè¿‡è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆæ¥å®ç°æ›´å¥½çš„æ€§èƒ½ï¼Œä½†è¿™æ ·çš„è®¾è®¡å¹¶æ²¡æœ‰é‡Šæ”¾å‡ºè½¯ä»¶ç®¡ç†çš„åˆ†å±‚å†…å­˜çš„å…¨éƒ¨æ½œåŠ›ã€‚ä¸ºäº†æœ‰æ•ˆåœ°åˆ©ç”¨ä¸Šå±‚å†…å­˜çš„æœ‰é™å®¹é‡æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªä¸ºå¤šå±‚å†…å­˜ç³»ç»Ÿé‡èº«å®šåšçš„é¡µé¢å›æ”¶æ–¹æ¡ˆã€‚æˆ‘ä»¬çš„ç¬¬äºŒé¡¹æŠ€æœ¯æ˜¯æœ‰æœºä¼šçš„é¡µé¢æå‡æˆ–è¿ç§»ï¼Œç§°ä¸ºAutoTiering-OPMï¼Œå®ƒå¯ä»¥æ˜æ™ºåœ°å°†é¡µé¢ä»ä¸Šå±‚å†…å­˜ä¸­å‰”é™¤ã€‚ä¸ºäº†æœ‰æ•ˆåœ°å›æ”¶ï¼Œæˆ‘ä»¬é€šè¿‡ä¼°è®¡é¡µé¢çš„è®¿é—®é¢‘ç‡æ¥é¢„æµ‹ä¸Šå±‚å†…å­˜ä¸­è®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢ä½œä¸ºå—å®³è€…ã€‚å½“å†³å®šæå‡å“ªä¸€é¡µæ—¶ï¼Œæˆ‘ä»¬çš„OPMå°†è¯¥é¡µä¸å—å®³è€…è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šå“ªä¸€é¡µçš„è®¿é—®é‡ç›¸å¯¹è¾ƒå¤§ã€‚é€šè¿‡OPMï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡å°‘å¯¹ä½å±‚å†…å­˜çš„è®¿é—®çš„åŒæ—¶ï¼Œå®ç°ä¸Šå±‚å†…å­˜çš„æ›´å¥½çš„æœ‰æ•ˆæ€§ã€‚</p><p>é™¤éä¸Šå±‚å†…å­˜ä¸­æœ‰ç©ºé—²ç©ºé—´ï¼Œå¦åˆ™å‡çº§æ“ä½œè¦ç­‰åˆ°é™çº§æ“ä½œå®Œæˆåæ‰è¿›è¡Œã€‚ä¸ºäº†ä»å…³é”®è·¯å¾„ä¸Šéšè—é™çº§é¡µçš„å»¶è¿Ÿï¼Œæˆ‘ä»¬åœ¨ä¸Šå±‚å†…å­˜ä¸­ä¿ç•™äº†ä¸€ç»„ç©ºé—²é¡µï¼Œä»¥ä¾¿ç«‹å³æ»¡è¶³å‡çº§è¯·æ±‚ã€‚å½“ä¿ç•™é¡µçš„æ•°é‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œæˆ‘ä»¬çš„<code>kdemoted</code>ä¼šå”¤é†’å¹¶åœ¨åå°å°†è®¿é—®é‡æœ€å°çš„é¡µé¢å›æ”¶åˆ°ç©ºé—²é¡µæ± ä¸­ã€‚<code>kdemoted</code>ä¸ä¼ ç»Ÿçš„å›æ”¶æ–¹å¼ä¸åŒï¼Œ å› ä¸ºå®ƒåªè´Ÿè´£å°†é¡µé¢é™çº§åˆ°ä¸‹å±‚å†…å­˜è€Œä¸æ˜¯å­˜å‚¨ã€‚</p><p>åœ¨è¿™é¡¹ç ”ç©¶ä¸­ï¼Œ æˆ‘ä»¬åœ¨Linuxå†…æ ¸v5.3çš„åŸºç¡€ä¸Šå®ç°äº†æˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆã€‚æˆ‘ä»¬åˆ©ç”¨AutoNUMAè®¾æ–½ï¼Œå®ƒå®šæœŸæ‰«æå†…å­˜é¡µé¢å¹¶æ ‡è®°ä¸ºä¸å¯è®¿é—®ï¼Œä»¥æ•è·éæœ¬åœ°DRAMè®¿é—®ã€‚ä¸€æ—¦è¿™äº›é¡µé¢è¢«é‡æ–°è®¿é—®ï¼Œå®ƒå°±ä¼šäº§ç”Ÿä¸€ä¸ªç¼ºé¡µï¼Œç§°ä¸ºNUMAæš—ç¤ºç¼ºé¡µã€‚æˆ‘ä»¬æŠŠNUMAç¼ºé¡µä½œä¸ºæ¥è‡ªDCPMMèŠ‚ç‚¹çš„é¡µé¢å‡çº§æˆ–æ¥è‡ªè¿œç¨‹DRAMèŠ‚ç‚¹çš„è¿ç§»çš„éœ€æ±‚ä¿¡å·ã€‚æˆ‘ä»¬ç”¨åŸºäºæ•…éšœçš„è®¾æ–½å»ºç«‹æ¯ä¸ªé¡µé¢çš„è®¿é—®å†å²ï¼Œå¹¶åœ¨é™çº§é¡µé¢æ—¶ä½¿ç”¨è¿™äº›ä¿¡æ¯ã€‚</p><p>å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„AutoTieringå¯ä»¥æ˜¾è‘—æé«˜å„ç§åº”ç”¨çš„æ€§èƒ½ã€‚ä¸åŸºçº¿Linuxå†…æ ¸[15]ç›¸æ¯”ï¼ŒGraphMatå’Œgraph500çš„æ€§èƒ½åˆ†åˆ«æé«˜äº†2.3å€å’Œ6.9å€å·¦å³ã€‚å¤§å¤šæ•°SPECAccelå·¥ä½œè´Ÿè½½æ˜¾ç¤ºå‡º2å€çš„é€Ÿåº¦æå‡ã€‚ä¸è‹±ç‰¹å°”æœ€è¿‘çš„æ–¹æ³•[36]ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ€§èƒ½æ”¹è¿›æ˜¾ç¤ºå‡ºé«˜è¾¾3.5å€çš„é€Ÿåº¦æå‡ã€‚</p><h1 id="2-Background-and-MotivationèƒŒæ™¯å’ŒåŠ¨æœº"><a href="#2-Background-and-MotivationèƒŒæ™¯å’ŒåŠ¨æœº" class="headerlink" title="2 Background and MotivationèƒŒæ™¯å’ŒåŠ¨æœº"></a>2 Background and MotivationèƒŒæ™¯å’ŒåŠ¨æœº</h1><h2 id="2-1-Large-Memory-Systemså¤§å‹å†…å­˜ç³»ç»Ÿ"><a href="#2-1-Large-Memory-Systemså¤§å‹å†…å­˜ç³»ç»Ÿ" class="headerlink" title="2.1 Large Memory Systemså¤§å‹å†…å­˜ç³»ç»Ÿ"></a>2.1 Large Memory Systemså¤§å‹å†…å­˜ç³»ç»Ÿ</h2><p>æ•°æ®ä¸­å¿ƒé€šå¸¸é‡‡ç”¨å¤šèŠ¯ç‰‡NUMAæ¶æ„æ¥æé«˜å…·æœ‰é«˜å†…æ ¸æ•°å’Œå†…å­˜å®¹é‡çš„å•†ç”¨æœåŠ¡å™¨çš„æ€§èƒ½ã€‚è™½ç„¶è¿™å¯ä»¥å¢åŠ æ¯å°æœåŠ¡å™¨çš„DIMMæ’æ§½çš„æ•°é‡ï¼Œä½†æ‰©å±•DRAMå¯†åº¦ä»ç„¶æ˜¯ä¸€ä¸ªé‡å¤§éšœç¢ã€‚å®ƒå¯¹ç»æµæœ‰æ•ˆåœ°æ„å»ºå¤§å‹å†…å­˜ç³»ç»Ÿæå‡ºäº†æŒ‘æˆ˜ã€‚åŒæ—¶ï¼Œç”±äºSCMæä¾›äº†å­—èŠ‚å¯»å€å’Œéæ˜“å¤±æ€§çš„ç‰¹æ€§ï¼Œå®ƒåœ¨å¼¥åˆDRAMå’ŒSSDä¹‹é—´çš„æ€§èƒ½å·®è·æ–¹é¢æ­£è·å¾—è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ã€‚è‹±ç‰¹å°”æœ€è¿‘å‘å¸ƒäº†3DXPointéæ˜“å¤±æ€§å†…å­˜ï¼ˆDCPMMï¼‰ ï¼Œå¯ä»¥ä¸ç»ä¿®æ”¹å®‰è£…åœ¨DIMMä¸Š[23]ã€‚è®¸å¤šäº‘è®¡ç®—ä¾›åº”å•†ï¼Œå¦‚è°·æ­Œã€å¾®è½¯ã€ç”²éª¨æ–‡å’Œç™¾åº¦å·²ç»åœ¨å…¶äº‘è®¡ç®—æœåŠ¡ä¸­é‡‡ç”¨äº†è‹±ç‰¹å°”çš„DCPMM[4,14,17,25]ã€‚æœ€è¿‘ï¼Œ</p><div class="note info">ä¸‰æ˜Ÿå…¬å¸é€éœ²äº†ä¸€ç§åŸºäºCXLï¼ˆCompute Express Linkï¼‰çš„DRAMæ¨¡å—è¿æ¥åˆ°ç³»ç»Ÿä¸­ï¼Œå½¢æˆåˆ†å±‚çš„å†…å­˜ç³»ç»Ÿ[1]ã€‚ç”±äºè¿™ç§æ–°å‹å†…å­˜çš„é€Ÿåº¦ä¸å¦‚DRAMï¼Œå®ƒä»¬ä¸èƒ½å®Œå…¨å–ä»£DRAM</div> ã€‚ç›¸åï¼Œæœªæ¥çš„è®¡ç®—æœºç³»ç»Ÿå°†æä¾›ä¸€ç§å¸¦æœ‰DRAMå’ŒSCMçš„åˆ†å±‚å†…å­˜æ¶æ„å½¢å¼ã€‚<p></p><p>åœ¨è¿™é¡¹ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨DCPMMä½œä¸ºDRAMå’ŒSSDä¹‹é—´çš„ä¸€ä¸ªæ–°å±‚çº§ã€‚è‹±ç‰¹å°”DCPMMæä¾›äº†ä¸¤ç§ç±»å‹çš„åˆ†å±‚å†…å­˜ç³»ç»Ÿï¼Œå¯åˆ†ä¸ºç¡¬ä»¶è¾…åŠ©å‹å’Œè½¯ä»¶ç®¡ç†å‹ã€‚åœ¨ç¡¬ä»¶è¾…åŠ©æ¨¡å¼ä¸‹ï¼ŒDCPMMä½œä¸ºä¸»å†…å­˜æš´éœ²ç»™è½¯ä»¶è€ŒDRAMä½œä¸ºç¡¬ä»¶ç®¡ç†çš„ç¼“å­˜ï¼Œå¯¹è½¯ä»¶æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚å†…å­˜æ§åˆ¶å™¨è‡ªåŠ¨åœ°å°†ç»å¸¸è®¿é—®çš„æ•°æ®æ”¾åœ¨DRAMç¼“å­˜ä¸­ï¼Œè€Œå…¶ä½™çš„æ•°æ®åˆ™ä¿å­˜åœ¨å®¹é‡å¤§ä½†é€Ÿåº¦æ…¢çš„DCPMMä¸Šã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„æ”¯æŒä¸‹ï¼ŒDRAMå’ŒDCPMMéƒ½å¯ä»¥ä½œä¸ºæ­£å¸¸çš„å†…å­˜æš´éœ²å‡ºæ¥ï¼Œå¯¹è½¯ä»¶å¯è§ï¼Œå°†å†…å­˜åˆ†ä¸ºå¿«æ…¢ä¸¤ç±»[15]ã€‚æˆ‘ä»¬æŠŠè¿™ç§°ä¸ºè½¯ä»¶ç®¡ç†çš„åˆ†å±‚å†…å­˜ç³»ç»Ÿã€‚åœ¨è¿™ç§ç¯å¢ƒä¸‹ï¼Œæ“ä½œç³»ç»Ÿçš„æ”¯æŒå¯ä»¥æœ‰æ•ˆåœ°ä½¿ç”¨DRAMå’ŒDCPMMï¼Œå› ä¸ºå®Œå…¨ç”±è½¯ä»¶æ¥æ§åˆ¶ã€‚æœ¬æ–‡é€šè¿‡äº†è§£ç¡¬ä»¶çš„ç»„ç»‡æ–¹å¼ï¼Œé‡ç‚¹è®¨è®ºåˆ†å±‚å†…å­˜ç³»ç»Ÿçš„ç³»ç»Ÿè½¯ä»¶æ–¹é¢ã€‚</p><h2 id="2-2-Performance-Characteristicsæ€§èƒ½ç‰¹ç‚¹"><a href="#2-2-Performance-Characteristicsæ€§èƒ½ç‰¹ç‚¹" class="headerlink" title="2.2  Performance Characteristicsæ€§èƒ½ç‰¹ç‚¹"></a>2.2  Performance Characteristicsæ€§èƒ½ç‰¹ç‚¹</h2><p>æˆ‘ä»¬æè¿°äº†ä¸€ä¸ªä¸Linuxæ“ä½œç³»ç»Ÿä¸€èµ·è¿è¡Œçš„ ã€ç”±è½¯ä»¶ç®¡ç†çš„åˆ†å±‚å†…å­˜ç³»ç»Ÿçš„æ˜æ˜¾æ€§èƒ½ç‰¹å¾ã€‚å›¾1å±•ç¤ºäº†æœ¬ç ”ç©¶ä¸­ä½¿ç”¨çš„ç³»ç»Ÿç»“æ„ã€‚è¯¥ç³»ç»Ÿæœ‰ä¸¤ä¸ªCPU socketã€‚å¯¹äºæ¯ä¸ªCPU socketï¼Œéƒ½æœ‰ä¸€ä¸ªDRAMèŠ‚ç‚¹å’Œä¸€ä¸ªDCPMMèŠ‚ç‚¹æ•´ä¸ªç‰©ç†åœ°å€ç©ºé—´æ˜¯ç”±DRAMå’ŒDCPMMèŠ‚ç‚¹ç»„æˆçš„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/4a382593ca9b41e8bd9675935b8b5456.png"></p><p>åœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œå½±å“æ€§èƒ½çš„å…³é”®å› ç´ ä¸ä»…æ˜¯è®¿é—®ä½ç½®ï¼Œè€Œä¸”è¿˜æœ‰å†…å­˜çš„è®¿é—®å±‚æ•°ã€‚å›¾2a æ˜¾ç¤ºäº†ä»MLC[18]æµ‹å¾—çš„å››ä¸ªå†…å­˜èŠ‚ç‚¹ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„è¯»è®¿é—®å»¶è¿Ÿå’Œå¸¦å®½ã€‚è®¿é—®æœ¬åœ°DRAMçš„æ€§èƒ½ä¼˜äºå…¶ä»–ä¸‰ä¸ªå†…å­˜èŠ‚ç‚¹ï¼Œè¿™åœ¨ä¼ ç»Ÿçš„NUMAæ¶æ„ä¸­æ˜¯å…¬è®¤çš„ã€‚å¦ä¸€æ–¹é¢ ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ç”±äºè®¾å¤‡çš„ç‰¹æ€§ï¼Œæœ¬åœ°DCPMMï¼ˆI-DCPMMï¼‰æ¯”è¿œç¨‹DRAMï¼ˆR-DRAMï¼‰è¦æ…¢ã€‚è¿™ä¸æœ¬åœ°å†…å­˜æ€»æ˜¯æ¯”è¿œç¨‹å†…å­˜å¿«çš„ä¼ ç»Ÿè§‚ç‚¹å½¢æˆäº†é²œæ˜çš„å¯¹æ¯”ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨å¸¦å®½æµ‹é‡ä¸­ä¹Ÿè§‚å¯Ÿåˆ°ç±»ä¼¼çš„æ¨¡å¼ã€‚</p><p>åŒæ ·ï¼Œå›¾2bæ˜¾ç¤ºäº†å¯¹å››ä¸ªCPUï¼ˆIntel Xeon Gold 6242ï¼‰socketå’Œåªä½¿ç”¨DRAMçš„ç³»ç»Ÿè¿›è¡Œçš„åŒç±»å‹è¯„ä¼°ã€‚åœ¨è®¿é—®ä»»ä½•è¿œç¨‹DRAMèŠ‚ç‚¹çš„å»¶è¿Ÿå’Œå¸¦å®½æ–¹é¢æ²¡æœ‰æ˜æ˜¾çš„å·®å¼‚ã€‚å› æ­¤ï¼Œåœ¨çº¯DRAMç³»ç»Ÿä¸­ï¼Œåœ¨è¿œç¨‹DRAMèŠ‚ç‚¹ä¸Šæ”¾ç½®é¡µé¢æ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ä»»åŠ¡ã€‚</p><p>è¿™äº›æ˜æ˜¾çš„ç‰¹å¾ä¿ƒä½¿æˆ‘ä»¬å»æ¢ç´¢æ“ä½œç³»ç»Ÿä¸­é¡µé¢ç®¡ç†çš„è®¾è®¡ç©ºé—´ã€‚æ“ä½œç³»ç»Ÿéœ€è¦æœ‰èƒ½åŠ›é€šè¿‡äº†è§£å¤šå±‚å†…å­˜ç³»ç»Ÿçš„æ€§èƒ½ç‰¹å¾æ¥æœ‰æ•ˆåœ°ã€åŠ¨æ€åœ°ï¼ˆé‡æ–°ï¼‰å®šä½å†…å­˜ã€‚ä¸çº¯DRAMç³»ç»Ÿä¸åŒï¼Œç”±äºè®¿é—®å±‚çš„åŸå› ï¼Œä¸æ˜¯æ‰€æœ‰çš„è¿œç¨‹å†…å­˜èŠ‚ç‚¹éƒ½å¯ä»¥è¢«è®¤ä¸ºæ˜¯å¹³ç­‰çš„ã€‚</p><h2 id="2-3-OS-Support-of-Multi-Tiered-Memoryæ“ä½œç³»ç»Ÿå¯¹å¤šå±‚æ¬¡å†…å­˜çš„æ”¯æŒ"><a href="#2-3-OS-Support-of-Multi-Tiered-Memoryæ“ä½œç³»ç»Ÿå¯¹å¤šå±‚æ¬¡å†…å­˜çš„æ”¯æŒ" class="headerlink" title="2.3 OS Support of Multi-Tiered Memoryæ“ä½œç³»ç»Ÿå¯¹å¤šå±‚æ¬¡å†…å­˜çš„æ”¯æŒ"></a>2.3 OS Support of Multi-Tiered Memoryæ“ä½œç³»ç»Ÿå¯¹å¤šå±‚æ¬¡å†…å­˜çš„æ”¯æŒ</h2><p>æœ¬æ–‡æ‰€å…³æ³¨çš„å¤šå±‚å†…å­˜å±‚æ¬¡ç»“æ„ä¸ä¼ ç»Ÿçš„ä¸¤å±‚å†…å­˜ä¸åŒã€‚å°½ç®¡å¦‚æ­¤ï¼Œç›®å‰çš„Linuxä»ç„¶ä¾èµ–äºç°æœ‰çš„NUMAæ¡†æ¶æ¥æ”¯æŒå¤šå±‚å†…å­˜ç³»ç»Ÿã€‚è¿™ç§æœ‰é™çš„æ“ä½œç³»ç»Ÿæ”¯æŒä½¿å¾—é¡µé¢æ”¾ç½®åœ¨å¤šå±‚å†…å­˜æ¶æ„ä¸­æˆä¸ºæ¬¡ä¼˜çš„ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥æ ¹æ®è®¿é—®å»¶è¿Ÿé‡æ–°å®šä¹‰NUMAè·ç¦»è¡¨ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å……åˆ†æŒ–æ˜å‡ºå¤šå±‚å†…å­˜ç³»ç»Ÿçš„æ½œåŠ›ã€‚é¦–å…ˆï¼ŒLinuxä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å°†å†…å­˜èŠ‚ç‚¹åˆ†ç±»ä¸ºæœ¬åœ°æˆ–è¿œç¨‹ã€‚å½“å‡çº§æˆ–è¿ç§»é¡µé¢æ—¶ï¼Œå®Œå…¨ä¸è€ƒè™‘è¿œç¨‹èŠ‚ç‚¹ä¹‹é—´çš„å‡ ç§é€‰æ‹©ã€‚å…¶æ¬¡ï¼ŒLinuxä¸æ”¯æŒä»ä¸Šå±‚å†…å­˜å‘ä¸‹å±‚å†…å­˜è¿ç§»ï¼ˆæˆ–å›æ”¶ï¼‰é¡µé¢ã€‚åœ¨è¿™é¡¹ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è€ƒè™‘è·¨è®¿é—®å±‚ä»¥åŠè®¿é—®ä½ç½®çš„æ€§èƒ½ç‰¹å¾ï¼Œé‡æ–°å®¡è§†äº†é¡µé¢æ”¾ç½®ç­–ç•¥ã€‚</p><h1 id="3-Analysis-of-Page-Management-to-Multi-Tiered-Memory-Systemså¯¹å¤šå±‚æ¬¡å†…å­˜ç³»ç»Ÿçš„é¡µé¢ç®¡ç†åˆ†æ"><a href="#3-Analysis-of-Page-Management-to-Multi-Tiered-Memory-Systemså¯¹å¤šå±‚æ¬¡å†…å­˜ç³»ç»Ÿçš„é¡µé¢ç®¡ç†åˆ†æ" class="headerlink" title="3 Analysis of Page Management to Multi-Tiered Memory Systemså¯¹å¤šå±‚æ¬¡å†…å­˜ç³»ç»Ÿçš„é¡µé¢ç®¡ç†åˆ†æ"></a>3 Analysis of Page Management to Multi-Tiered Memory Systemså¯¹å¤šå±‚æ¬¡å†…å­˜ç³»ç»Ÿçš„é¡µé¢ç®¡ç†åˆ†æ</h1><p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†ç°æœ‰çš„Linuxé¡µé¢ç®¡ç†æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯æ˜¯ä¸ºçº¯DRAMçš„NUMAç³»ç»Ÿè®¾è®¡çš„ã€‚ç„¶åï¼Œæˆ‘ä»¬å‘ç°å¯¹äºåˆ†å±‚å†…å­˜ç³»ç»Ÿç¼ºä¹è¶³å¤Ÿçš„æ”¯æŒã€‚å°½ç®¡AutoNUMA[33]å¯ä»¥ç”¨äºè¿™ç§å¤šå±‚å†…å­˜ï¼Œä½†æˆ‘ä»¬è§‚å¯Ÿåˆ°å®ƒæœªèƒ½å……åˆ†åˆ©ç”¨å¤šå±‚å†…å­˜çš„ä¼˜åŠ¿ã€‚</p><h2 id="3-1-Initial-Page-Placementæœ€åˆçš„é¡µé¢æ”¾ç½®"><a href="#3-1-Initial-Page-Placementæœ€åˆçš„é¡µé¢æ”¾ç½®" class="headerlink" title="3.1 Initial Page Placementæœ€åˆçš„é¡µé¢æ”¾ç½®"></a>3.1 Initial Page Placementæœ€åˆçš„é¡µé¢æ”¾ç½®</h2><p>éšç€å­˜å‚¨ç±»å†…å­˜ï¼ˆå¦‚Optane DCPMMï¼‰åœ¨ä¸»å†…å­˜ä¸­çš„å¼•å…¥ï¼Œä¼ ç»Ÿçš„ä»…åŸºäºè®¿é—®ä½ç½®çš„é¡µé¢æ”¾ç½®å¯¹æ€§èƒ½äº§ç”Ÿäº†è´Ÿé¢å½±å“ï¼Œ å› ä¸ºæ€§èƒ½çš„æœ€å…³é”®å› ç´ ä¸ä»…æ˜¯ä½ç½®ï¼Œè€Œä¸”è¿˜æœ‰å†…å­˜å±‚ã€‚åŒæ—¶ï¼Œç›®å‰æ“ä½œç³»ç»Ÿä¸­çš„é¡µé¢æ”¾ç½®æ–¹æ¡ˆå·²ç»åœ¨åŸºäºDRAMçš„NUMAæ¶æ„ä¸­å¾—åˆ°äº†å¾ˆå¥½çš„ç¡®ç«‹ï¼Œåªè€ƒè™‘çº¿ç¨‹å’Œå†…å­˜ä¹‹é—´çš„è®¿é—®ä½ç½®[8,13,21]ã€‚åœ¨Linuxä¸­ï¼Œ é»˜è®¤çš„é¡µé¢åˆ†é…ç­–ç•¥è¯•å›¾å°½å¯èƒ½åœ°ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œä»¥å‡å°‘è®¿é—®è¿œç¨‹å†…å­˜æ‰€å¸¦æ¥çš„æ€§èƒ½æŸå¤±ã€‚åªæœ‰åœ¨æœ¬åœ°å†…å­˜æ²¡æœ‰ç©ºé—²ç©ºé—´çš„æƒ…å†µä¸‹ï¼Œå†…å­˜åˆ†é…å™¨æ‰ä¼šåœ¨è¢«ç§°ä¸ºfallbackè·¯å¾„çš„è¿œç¨‹å†…å­˜èŠ‚ç‚¹ä¸Šå¯»æ‰¾ç©ºé—²ç©ºé—´[9]ã€‚</p><p>å› æ­¤ï¼Œåœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œé»˜è®¤çš„ï¼ˆæœ¬åœ°ä¼˜å…ˆï¼‰åˆ†é…ç­–ç•¥è¢«è®¤ä¸ºæ˜¯æœ‰å®³çš„ã€‚å›¾1aä¸­çš„æ•°å­—ä»‹ç»äº†å½“çº¿ç¨‹åœ¨CPU-0ä¸Šè¿è¡Œæ—¶ï¼Œä»…è€ƒè™‘ç‰©ç†è·ç¦»ï¼Œé»˜è®¤å›è½è·¯å¾„ä¸­ä½¿ç”¨çš„é¡ºåºã€‚å¦‚æœæœ¬åœ°DRAMèŠ‚ç‚¹æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—²ç©ºé—´ï¼Œå†…å­˜åˆ†é…å™¨å°±ä¼šæ£€æŸ¥å›é€€è·¯å¾„ï¼Œä»¥ç¡®å®šåˆ†é…è¯·æ±‚åº”è¯¥è¢«å‘é€åˆ°å“ªä¸ªå†…å­˜èŠ‚ç‚¹æˆ‘ä»¬é¢„è®¡åˆ†é…å™¨åº”è¯¥è¦æ±‚è¿œç¨‹DRAMèŠ‚ç‚¹è·å¾—ä¸€ä¸ªç©ºé—²é¡µï¼Œå› ä¸ºè¿™ä¸ªèŠ‚ç‚¹æ¯”æœ¬åœ°DCPMMèŠ‚ç‚¹æä¾›æ›´å¥½çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œæœ€å…ˆè¿›çš„Linuxå†…æ ¸ä¸­çš„fallbackè·¯å¾„æ˜¾ç¤ºäº†æœ¬åœ°DCPMMï¼ˆä½å±‚ï¼‰ã€‚å®ƒæ²¡æœ‰è€ƒè™‘åˆ°ä¸€ä¸ªæ˜æ˜¾çš„ç‰¹ç‚¹ï¼Œå³åœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œå†…å­˜ç±»å‹å¯¹æ€§èƒ½æ¯”è®¿é—®ä½ç½®æ›´æ•æ„Ÿã€‚</p><p>Problem: If the local DRAM is full, the fallback prioritizes allocating from the local DCPMM (lower-tier), even though the remote DRAM (upper-tier) performs better.</p><h2 id="3-2-Dynamic-PlacementåŠ¨æ€æ”¾ç½®"><a href="#3-2-Dynamic-PlacementåŠ¨æ€æ”¾ç½®" class="headerlink" title="3.2 Dynamic PlacementåŠ¨æ€æ”¾ç½®"></a>3.2 Dynamic PlacementåŠ¨æ€æ”¾ç½®</h2><p>å°½ç®¡æœ€åˆçš„é¡µé¢æ”¾ç½®åœ¨ç»™å®šçš„å†…å­˜ç©ºé—´ä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œä½†è¿™ä¸ªå†³å®šå¯èƒ½ä¸ä»£è¡¨æœ€ä½³æ€§èƒ½ï¼Œ å› ä¸ºå®ƒå–å†³äºè¿è¡Œæ—¶çš„å†…å­˜è®¿é—®æµé‡ã€‚ä¸ºäº†æ ¹æ®è®¿é—®æ¨¡å¼è°ƒæ•´é¡µé¢çš„ä½ç½®ï¼ŒAutoNUMA è®¾æ–½å·²è¢«çº³å…¥Linuxçš„ä¸€éƒ¨åˆ†ï¼Œè‡ªåŠ¨å°†é¡µé¢è¿ç§»åˆ°åœ¨è¿è¡Œæ—¶ç¦»è¿è¡Œçš„çº¿ç¨‹æ›´è¿‘çš„å†…å­˜èŠ‚ç‚¹[33]ã€‚æ“ä½œç³»ç»Ÿæ£€æŸ¥è®¿é—®ä½ç½®ä»¥å‘ç°è¢«è®¿é—®çš„é¡µé¢æ˜¯æ”¾åœ¨æœ¬åœ°å†…å­˜è¿˜æ˜¯è¿œç¨‹å†…å­˜ä¸Šã€‚å¦‚æœæ˜¯åœ¨è¿œç¨‹å†…å­˜ä¸Šï¼Œè¯¥é¡µå°±ä¼šè¢«è¿ç§»åˆ°æœ¬åœ°å†…å­˜ä¸Šï¼Œä»¥é¿å…æ¬¡è¦è¯·æ±‚çš„è¿œç¨‹è®¿é—®ã€‚è¿™ç§æ–¹æ³•æé«˜äº†è¿è¡Œåœ¨çº¯DRAMçš„NUMAç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/25e5b24a332942eda1d936b3f8790096.png"></p><p>ç„¶è€Œï¼Œæˆ‘ä»¬å‘ç°ï¼Œç›®å‰çš„è®¾è®¡å¹¶æ²¡æœ‰åˆ©ç”¨å¤šå±‚å†…å­˜å±‚æ¬¡çš„ä¼˜åŠ¿ã€‚å›¾3æ˜¾ç¤ºäº†éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒGraph500çš„å†…å­˜èŠ‚ç‚¹å¯¹128GBæ•°æ®é›†çš„å†…å­˜ä½¿ç”¨ç‡ã€‚ç¬¬5èŠ‚å¯¹å®éªŒè®¾ç½®è¿›è¡Œäº†ç»†èŠ‚è§£é‡Šã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸Šå±‚å†…å­˜æ²¡æœ‰å¾—åˆ°æœ‰æ•ˆåˆ©ç”¨ï¼Œå› ä¸ºæ›´é¢‘ç¹è®¿é—®çš„é¡µé¢ï¼ˆæ·±çº¢è‰²ï¼‰ä¸»è¦é©»ç•™åœ¨ä¸‹å±‚å†…å­˜ï¼ˆèŠ‚ç‚¹2ï¼‰ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè®¿é—®é¢‘ç‡è¾ƒä½çš„é¡µé¢è¢«æ”¾ç½®åœ¨ä¸Šå±‚å†…å­˜ä¸­ã€‚å…¶ä¸»è¦åŸå› æ˜¯ï¼Œå½“å‰çš„å†…å­˜ç®¡ç†ä¸å…è®¸åœ¨æ²¡æœ‰ç©ºé—²ç©ºé—´çš„æƒ…å†µä¸‹å°†é¡µé¢å‡çº§æˆ–è¿ç§»åˆ°ä¸Šå±‚å†…å­˜ã€‚å°½ç®¡è¿™æ ·çš„è®¾è®¡å†³å®šå¯¹äºçº¯DRAMç³»ç»Ÿæ¥è¯´æ˜¯åˆç†çš„ï¼Œä½†æ˜¯å¯¹äºå¤šå±‚å†…å­˜ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è€ƒè™‘è¿™ä¸ªå‡è®¾ã€‚å›¾4æè¿°äº†ä¸‰ç§æƒ…å†µï¼Œå³AutoNUMAç”±äºæœ¬åœ°DRAMç¼ºä¹ç©ºé—²ç©ºé—´è€Œå¯¼è‡´é¡µé¢å‡çº§æˆ–è¿ç§»å¤±è´¥ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/3eaa55b57d7d44b7925221a4b1cf7dcc.png"></p><p>å³ä½¿ä¸èƒ½å°†é¡µé¢å‡çº§æˆ–è¿ç§»åˆ°æ»¡è¶³è®¿é—®å±‚å’Œè®¿é—®ä½ç½®çš„æœ€ä½³å†…å­˜èŠ‚ç‚¹ä¸Šï¼Œåœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ä¹Ÿæœ‰æœ‰æ•ˆçš„æ›¿ä»£æ”¾ç½®æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå½“ä»è¿œç¨‹DCPMMåˆ°æœ¬åœ°DRAMçš„é¡µé¢å‡çº§å¤±è´¥æ—¶ï¼Œ æˆ‘ä»¬æœ‰ä¸¤ç§å¯èƒ½çš„è§£å†³æ–¹æ³•:å°†é¡µé¢æ”¾åœ¨è¿œç¨‹DRAMä¸Šæˆ–æœ¬åœ°DCPMMä¸Šã€‚</p><p>Problem: Pages in the lower-tier are not promoted whenthe upper-tier is fully utilized</p><p>ç¬¬äºŒï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°åœ¨ä½å±‚å†…å­˜çš„å†…å­˜èŠ‚ç‚¹ä¸Šï¼Œé¡µçš„åˆ†å¸ƒæ˜¯å€¾æ–œçš„ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç›®å‰çš„Linuxæ“ä½œç³»ç»Ÿä¸­æ²¡æœ‰è€ƒè™‘åˆ°å‘CPU-lessèŠ‚ç‚¹ï¼ˆDCPMMï¼‰çš„é¡µé¢ç§»åŠ¨ã€‚å› ä¸ºä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿæ˜¯åœ¨å‡è®¾å†…å­˜è®¿é—®æ€§èƒ½å—CPUå’Œå†…å­˜èŠ‚ç‚¹ä¹‹é—´çš„è®¿é—®å®šä½å½±å“å¾ˆå¤§çš„æƒ…å†µä¸‹è®¾è®¡çš„ï¼Œæ‰€ä»¥å°†é¡µé¢ç§»åŠ¨åˆ°CPU-lessèŠ‚ç‚¹çš„æƒ…å†µä¸ä¼šå‘ç”Ÿã€‚åªæœ‰å½“ç›®æ ‡ä¸Šå±‚å†…å­˜æœ‰ç©ºé—²ç©ºé—´æ—¶ï¼Œé©»ç•™åœ¨CPU-lessèŠ‚ç‚¹ï¼ˆä¸‹å±‚å†…å­˜ï¼‰çš„é¡µé¢æ‰èƒ½é€šè¿‡AutoNUMAè¿›è¡Œå‡çº§ã€‚å›¾1aæ˜¾ç¤ºäº†ç›®å‰Linuxå†…æ ¸æ”¯æŒçš„æ‰€æœ‰å¯èƒ½çš„é¡µå‡çº§å’Œè¿ç§»è·¯å¾„çš„ç®­å¤´ã€‚å³ä½¿ä¸Šå±‚å†…å­˜å·²ç»æ»¡äº†ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿä¸èƒ½æŠŠé¡µæ”¾åœ¨é¦–é€‰è®¿é—®å±‚ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦é€šè¿‡è‡ªç”±åœ°å…è®¸é¡µåœ¨ä»»ä½•CPU-lessçš„èŠ‚ç‚¹ä¸Šç§»åŠ¨æ¥ä¿æŒä¸‹å±‚å†…å­˜çš„è®¿é—®ä½ç½®æ€§ã€‚</p><p>Problem: Pages are never migrated to the CPU-less (lower-tier) nodes due to a NUMA policy that does not apply to multi-tiered memory systems.</p><h2 id="3-3-Page-Reclamationé¡µå›æ”¶"><a href="#3-3-Page-Reclamationé¡µå›æ”¶" class="headerlink" title="3.3 Page Reclamationé¡µå›æ”¶"></a>3.3 Page Reclamationé¡µå›æ”¶</h2><p>ç›®å‰çš„é¡µé¢å›æ”¶ä¹Ÿæ˜¯ä¸ºåŸºäºå­˜å‚¨çš„äº¤æ¢è®¾å¤‡æ”¯æŒçš„çº¯DRAMç³»ç»Ÿè®¾è®¡çš„ï¼Œè€Œä¸æ˜¯åˆ†å±‚çš„å†…å­˜ç³»ç»Ÿã€‚ä¼ ç»Ÿä¸Šï¼Œå½“å†…å­˜èŠ‚ç‚¹è€—å°½æ—¶ï¼Œ<code>kswapd</code>ä¼šå°†å†…å­˜ä¸­ä¸æ´»åŠ¨çš„é¡µé¢ç›´æ¥å›æ”¶åˆ°å­˜å‚¨ä¸­ï¼Œè€Œä¸è€ƒè™‘å†…å­˜å±‚ã€‚å°†ä½å±‚å†…å­˜ä¸­çš„é¡µé¢å›æ”¶åˆ°å­˜å‚¨è®¾å¤‡ä¸Šæ˜¯åˆç†çš„ã€‚ç„¶è€Œï¼Œå½“ä¸‹å±‚å†…å­˜æœ‰è¶³å¤Ÿçš„ç©ºé—´æ—¶ï¼Œ è¿™å¯¹ä¸Šå±‚å†…å­˜é¡µæ¥è¯´å¹¶ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ä¸ªé™åˆ¶ä¸ç¬¬3.2èŠ‚ä¸­è§£é‡Šçš„ä¸¤ä¸ªé—®é¢˜äº¤ç»‡åœ¨ä¸€èµ·ã€‚</p><p>Problem: Frequently accessed pages from the lower-tier cannot be promoted without demoting less frequently accessed pages from the upper-tier.</p><p>åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä¸€éƒ¨åˆ†å¯ä»¥è¢«æ˜ å°„ï¼Œå³æ–‡ä»¶æ”¯æŒåŒºæˆ–åŒ¿ååŒºã€‚åœ¨æ–‡ä»¶å¤‡ä»½åŒºåŸŸçš„é¡µåŒ…å«äº†å†…å­˜ä¸­ç°æœ‰æ–‡ä»¶çš„å†…å®¹è¿™æ ·ä»¥åå¯¹åŒä¸€æ–‡ä»¶çš„I/Oæ“ä½œå°±å¯ä»¥ç”¨å†…å­˜è®¿é—®ä»£æ›¿ã€‚å¦ä¸€æ–¹é¢ï¼Œå±äºåŒ¿ååŒºåŸŸçš„é¡µé¢ä¸ä»£è¡¨ä»»ä½•æ–‡ä»¶å†…å®¹ã€‚è¿™ç”¨äºåœ¨å†…å­˜ä¸­ä¿ç•™ä»»æ„æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œmallocï¼‰ã€‚å¯¹äºæ¯ä¸ªå†…å­˜åŒºåŸŸï¼ŒLinuxæ“ä½œç³»ç»Ÿå°†å†…å­˜é¡µåˆ†ä¸ºæ´»è·ƒå’Œä¸æ´»è·ƒå†…æ ¸æœ‰éæ´»åŠ¨åˆ—è¡¨ï¼ŒåŒ…å«å¯èƒ½ä¸ä½¿ç”¨çš„é¡µé¢ï¼ŒåŒæ—¶å°†æœ€è¿‘è®¿é—®çš„é¡µé¢ä¿ç•™åœ¨æ´»åŠ¨åˆ—è¡¨ä¸­ã€‚ ç„¶è€Œï¼Œç›®å‰çš„é¡µé¢åˆ†ç±»è¿‡äºä¿å®ˆï¼Œæ— æ³•ä»æ´»åŠ¨å’Œéæ´»åŠ¨åˆ—è¡¨ä¸­ï¼Œç²¾ç¡®åŒºåˆ†å“ªäº›é¡µé¢æ˜¯ç»å¸¸è¢«è®¿é—®çš„ï¼Œå“ªäº›æ˜¯ä¸ç»å¸¸è¢«è®¿é—®çš„ã€‚</p><p>Problem: Binary page classification (either active or inactive) is too coarse-grained to be used for tiering.</p><p>æœ€åï¼Œå½“å‰çš„é¡µé¢å›æ”¶æ˜¯åœ¨åå°å°å¿ƒæ‰§è¡Œçš„ï¼Œä»¥éšè—ä»å…³é”®è·¯å¾„è®¿é—®å¤–å­˜è®¾å¤‡çš„èŠ±é”€ã€‚åœ¨åˆ†å±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œå°†é¡µé¢é™çº§åˆ°ä½å±‚å†…å­˜çš„æˆæœ¬æ¯”å°†é¡µé¢æ¢å‡ºåˆ°å­˜å‚¨è®¾å¤‡çš„æˆæœ¬æ›´ä½ã€‚æˆ‘ä»¬éœ€è¦å°†é™çº§åˆ°ä½å±‚å†…å­˜ä¸ä¼ ç»Ÿçš„å›æ”¶åˆ°å­˜å‚¨è®¾å¤‡çš„åšæ³•è„±é’©ã€‚</p><h1 id="4-Automatic-Multi-Tiered-Memoryè‡ªåŠ¨å¤šå±‚å†…å­˜"><a href="#4-Automatic-Multi-Tiered-Memoryè‡ªåŠ¨å¤šå±‚å†…å­˜" class="headerlink" title="4 Automatic Multi-Tiered Memoryè‡ªåŠ¨å¤šå±‚å†…å­˜"></a>4 Automatic Multi-Tiered Memoryè‡ªåŠ¨å¤šå±‚å†…å­˜</h1><p>æœ¬èŠ‚æ¢è®¨äº†é¡µé¢ç®¡ç†å¯¹åˆ†å±‚å†…å­˜ç³»ç»Ÿçš„è®¾è®¡ç©ºé—´ã€‚æˆ‘ä»¬çš„é¡µé¢ç®¡ç†çš„ç›®æ ‡æ˜¯æ˜¯å……åˆ†åˆ©ç”¨å¤šå±‚å†…å­˜çš„ä¼˜åŠ¿ï¼Œä»¥æé«˜è¯æ˜å¤§å†…å­˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚ä¸ºäº†ä¿æŒæˆ‘ä»¬çš„è®¾è®¡ç®€å•æˆ‘ä»¬çš„è®¾è®¡ä»¥AutoNUMAè®¾æ–½ä¸ºåŸºç¡€ã€‚è¡¨1æ€»ç»“äº†æ¯ä¸ªè®¾è®¡ç©ºé—´çš„æ”¯æŒæœºåˆ¶ã€‚åœ¨ä¸‹é¢çš„å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬è§£é‡Šæ¯ä¸ªæ–¹æ¡ˆçš„è®¾è®¡å’Œå®ç°ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/4fedc098d9c04b1b8a7b139292ecea75.png"></p><h2 id="4-1-Exploiting-Multi-Tiered-Memoryå¤šå±‚æ¬¡å†…å­˜å¼€å‘"><a href="#4-1-Exploiting-Multi-Tiered-Memoryå¤šå±‚æ¬¡å†…å­˜å¼€å‘" class="headerlink" title="4.1 Exploiting Multi-Tiered Memoryå¤šå±‚æ¬¡å†…å­˜å¼€å‘"></a>4.1 Exploiting Multi-Tiered Memoryå¤šå±‚æ¬¡å†…å­˜å¼€å‘</h2><p>åˆ©ç”¨å¤šå±‚æ¬¡çš„å†…å­˜å¦‚å›¾4æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†NUMAæ•…éšœä½œä¸ºDCPMMèŠ‚ç‚¹æˆ–è¿œç¨‹DRAMèŠ‚ç‚¹çš„é¡µé¢å‡çº§æˆ–è¿ç§»çš„éœ€æ±‚ä¿¡å·ã€‚è¯·æ³¨æ„ï¼Œç›®å‰çš„AutoNUMAåªåœ¨ä¸Šå±‚ï¼ˆæœ¬åœ°DRAMï¼‰å†…å­˜æœ‰ç©ºé—²ç©ºé—´çš„æƒ…å†µä¸‹æ‰å¤„ç†å‡çº§å’Œè¿ç§»è¯·æ±‚ã€‚å¦åˆ™ï¼Œè¯¥è¯·æ±‚å°†è¢«ä¸¢å¼ƒï¼Œè€Œæ•…éšœé¡µå°†é‡æ–°å‡ºç°åœ¨åŸå§‹å†…å­˜ä¸­ã€‚å½“æœ¬åœ°DRAMè¢«å®Œå…¨å ç”¨æ—¶ï¼Œæˆ‘ä»¬æå‡ºçš„è®¾è®¡å…è®¸é¡µé¢è¢«æå‡æˆ–è¿ç§»åˆ°å¤šå±‚å†…å­˜å±‚æ¬¡ç»“æ„ä¸­çš„ä¸‹ä¸€ä¸ªæœ€ä½³å†…å­˜èŠ‚ç‚¹ã€‚è¿™ç§æ–¹æ³•å¯ä»¥åˆ©ç”¨å¤šå±‚å†…å­˜å±‚æ¬¡ç»“æ„çš„ä¼˜åŠ¿ï¼Œ æä¾›æ¯”ç°æœ‰Linuxå†…æ ¸æ›´é«˜çš„æ€§èƒ½ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/5642f9ffa89d45269910ea0e188cfbbc.png"></p><p>å›¾5æè¿°äº†å½“æœ¬åœ°DRAMæ»¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¦‚ä½•ååº”ã€‚åœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸‰ä¸ªéœ€æ±‚æ¥æºï¼Œå³é¡µé¢è¿ç§»æˆ–å‡çº§åˆ°æœ¬åœ°DRAMã€‚å¤šå±‚çš„å±‚æ¬¡ç»“æ„ä¸ºè®¾è®¡å†…å­˜å¸ƒå±€æä¾›äº†æ–°çš„æœºä¼šã€‚é¦–å…ˆï¼Œï¼ˆ5aï¼‰å½“æ•…éšœé¡µé©»ç•™åœ¨æœ¬åœ°DCPMMä¸­æ—¶â‘ ï¼Œæˆ‘ä»¬å°†è¯¥é¡µå‡çº§è¿œç¨‹DRAMä¸­ï¼Œä½œä¸ºç¬¬äºŒæœ€ä½³ä½ç½®â‘¡ã€‚ç”±äºè¿œç¨‹DRAMæä¾›äº†æ¯”æœ¬åœ°DCPMMæ›´ä½çš„å»¶è¿Ÿå’Œæ›´é«˜çš„å¸¦å®½ï¼Œæˆ‘ä»¬å¯ä»¥æé«˜é‚£äº›æœ€åˆåœ¨ä½å±‚å†…å­˜ä¸­åˆ†é…å†…å­˜çš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚ç¬¬äºŒï¼Œ ï¼ˆ5bï¼‰å¦‚æœå‡ºé”™çš„é¡µé¢ä½äºåœ¨è¿œç¨‹DCPMMâ‘ ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œ å³å¼€å‘åˆ©ç”¨å¤šå±‚å†…å­˜å±‚æ¬¡ç»“æ„çš„ä¼˜åŠ¿ã€‚æˆ‘ä»¬è¯•å›¾å°†è¯¥é¡µæå‡åˆ°è¿œç¨‹DRAMâ‘¡ã€‚å¦‚æœå¦‚æœè¿œç¨‹DRAMä¹Ÿæ²¡æœ‰ç©ºé—²ç©ºé—´ï¼Œæˆ‘ä»¬å°±å°è¯•å°†è¯¥é¡µè¿ç§»åˆ°æœ¬åœ°DCPMMâ‘¢ã€‚ä¸ç°æœ‰çš„Linuxå†…æ ¸ä¸åŒï¼Œæˆ‘ä»¬ä¿®æ”¹åçš„å†…æ ¸æ”¯æŒå°†é¡µé¢è¿ç§»åˆ°CPU-lessçš„èŠ‚ç‚¹ï¼ˆæœ¬åœ°DCPMMï¼‰ã€‚æˆ‘ä»¬ç§°è¿™ç§AutoTiering ä¸ºä¿å®ˆçš„å‡çº§å’Œè¿ç§»ï¼ˆCPMï¼‰ã€‚æœ€åï¼Œï¼ˆ5cï¼‰ å‘ç”Ÿæ•…éšœçš„é¡µé¢åœ¨è¿œç¨‹DRAMä¸­â‘ ã€‚è¿™æ„å‘³ç€è¯¥é¡µå·²ç»åœ¨æ’ç¬¬äºŒçš„æœ€ä½³ä½ç½®äº†ã€‚ç°æœ‰çš„AutoNUMAæ— æ³•å®Œæˆä¸Šå±‚å†…å­˜èŠ‚ç‚¹ä¹‹é—´çš„é¡µé¢è¿ç§»æ“ä½œã€‚å› æ­¤ï¼Œå®ƒå¯¼è‡´äº†æ¬¡ä¼˜çš„æ€§èƒ½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è€ƒè™‘é‡‡ç”¨é¡µé¢äº¤æ¢çš„æ–¹å¼æ¥æ»¡è¶³å¯¹å†…å­˜äº²å’Œæ€§çš„éœ€æ±‚â‘¡ã€‚ä¹‹å‰çš„ç ”ç©¶æå‡ºäº†åˆ†å±‚å†…å­˜çš„é¡µé¢äº¤æ¢æœºåˆ¶[35]ã€‚æˆ‘ä»¬é‡æ–°åˆ©ç”¨è¿™ä¸ªæœºåˆ¶æ¥è§£å†³åŒå±‚å†…å­˜èŠ‚ç‚¹ä¹‹é—´çš„è¿ç§»æ•…éšœã€‚åœ¨å†…éƒ¨ï¼Œå¯¹äºæ¯ä¸ªå†…å­˜èŠ‚ç‚¹ï¼Œæˆ‘ä»¬è·Ÿè¸ªå“ªäº›é¡µé¢ä¸èƒ½è¢«è¿ç§»ã€‚ç„¶åæˆ‘ä»¬åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥ç¡®å®šå¯ä»¥é€šè¿‡äº¤æ¢æ“ä½œè§£å†³çš„è¿ç§»éœ€æ±‚ã€‚æˆ‘ä»¬å°†æ­¤ç§°ä¸ºAutoTiering CPM with Exchangeï¼ˆCPMXï¼‰ã€‚</p><p>ç”±äºè¿™ç§è®¾è®¡ä¸éœ€è¦å¯¹åœ¨ç°æœ‰çš„Linuxæ“ä½œç³»ç»Ÿçš„åŸºç¡€ä¸Šï¼Œå®ƒå¾ˆå®¹æ˜“é›†æˆåˆ°AutoNUMAè®¾æ–½ä¹‹ä¸Šã€‚æˆ‘ä»¬é¢„è®¡ï¼Œæˆ‘ä»¬çš„æ„æ¶å¼è®¾è®¡å¯ä»¥æˆä¸ºè¿™ç§è½¯ä»¶ç®¡ç†çš„åˆ†å±‚å†…å­˜ç³»ç»Ÿçš„å®ç”¨è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="4-2-Opportunistic-Promotion-and-Migrationæœºä¼šæ€§çš„å‡çº§å’Œè¿ç§»"><a href="#4-2-Opportunistic-Promotion-and-Migrationæœºä¼šæ€§çš„å‡çº§å’Œè¿ç§»" class="headerlink" title="4.2  Opportunistic Promotion and Migrationæœºä¼šæ€§çš„å‡çº§å’Œè¿ç§»"></a>4.2  Opportunistic Promotion and Migrationæœºä¼šæ€§çš„å‡çº§å’Œè¿ç§»</h2><p>ç”±äºæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªä¿å®ˆçš„æ–¹æ³•æ¥å¯»æ‰¾æœ€ä½³çš„æ›¿ä»£æ–¹æ¡ˆï¼Œè¿™ä»…é™äºæå–è½¯ä»¶ç®¡ç†çš„åˆ†å±‚å†…å­˜çš„å…¨éƒ¨æ€§èƒ½ä¼˜åŠ¿ã€‚åœ¨æˆ‘ä»¬çš„ä¿å®ˆè®¾è®¡ä¸­ï¼Œç»å¸¸ä½¿ç”¨çš„é¡µé¢å¯ä»¥é©»ç•™åœ¨ä½å±‚ï¼ˆDCPMMï¼‰å†…å­˜ä¸­ï¼Œè€Œä¸Šå±‚ï¼ˆDRAMï¼‰å†…å­˜åˆ™å­˜æ”¾ä¸ç»å¸¸è®¿é—®çš„æ•°æ®ã€‚ä¸ºäº†ç¼“è§£è¿™ç§ä¸ç†æƒ³çš„å†…å­˜ä½ç½®ï¼Œæˆ‘ä»¬æ¢ç´¢äº†ä¸€ç§æ¸è¿›å¼çš„ç­–ç•¥ï¼Œå³ä»ä¸Šå±‚å†…å­˜ä¸­æœºä¼šä¸»ä¹‰åœ°é™çº§ä¸€ä¸ªé¡µé¢ï¼Œä»¥åˆ›é€ è‡ªç”±ç©ºé—´ã€‚è¿™æ˜¯ä¿å®ˆè®¾è®¡å’Œæ¸è¿›æ€§è®¾è®¡ä¹‹é—´çš„ä¸»è¦åŒºåˆ«ã€‚é€šè¿‡é™çº§é¡µé¢ï¼Œé¡µé¢å‡çº§çš„è¯·æ±‚å¯ä»¥æˆåŠŸã€‚å¯¹äºé¡µé¢é™çº§çš„æ•ˆç‡ï¼Œæˆ‘ä»¬éœ€è¦æœ‰èƒ½åŠ›é€‰æ‹©ä¸€ä¸ªåœ¨çŸ­æ—¶é—´å†…æä¸å¯èƒ½è¢«é‡ç”¨çš„é¡µé¢ã€‚å¦åˆ™ï¼Œé”™è¯¯çš„é€‰æ‹©ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚æˆ‘ä»¬åœ¨ä¸‹é¢çš„å°èŠ‚ï¼ˆ4.2.1ï¼‰ ä¸­è§£é‡Šæˆ‘ä»¬å¦‚ä½•é€‰æ‹©é™çº§çš„é¡µé¢ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/1234890e7c7c4e7a8e08f26aa480b00b.png"></p><p>å›¾6æè¿°äº†æˆ‘ä»¬çš„æ¸è¿›å¼æ–¹æ³•æ˜¯å¦‚ä½•è¿›è¡Œé¡µé¢é™çº§çš„ã€‚å½“NUMAé¡µé¢æ•…éšœå‘ç”Ÿæ—¶â‘ ï¼Œ æˆ‘ä»¬ä»ä¸Šå±‚ï¼ˆæœ¬åœ°DRAMï¼‰å†…å­˜ä¸­æ‰¾åˆ°è®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢ï¼Œå¹¶æ¯”è¾ƒè®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢å’Œæ•…éšœé¡µé¢çš„è®¿é—®é¢‘ç‡ã€‚å¦‚æœæ‰€é€‰é¡µé¢çš„è®¿é—®é¢‘ç‡ç›¸å¯¹ä½äºæ•…éšœé¡µé¢ï¼Œæˆ‘ä»¬å°±æŠŠæ‰€é€‰é¡µé¢é™çº§ï¼ŒæŠŠæ•…éšœé¡µé¢æ”¾åœ¨æ›´é«˜å±‚æ¬¡çš„å†…å­˜èŠ‚ç‚¹ä¸Šã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ä¼šé˜»æ­¢é¡µé¢å‡çº§æˆ–è¿ç§»è¯·æ±‚ï¼Œä»¥ä¿æŒä¸Šå±‚å†…å­˜æœ‰æ›´é¢‘ç¹çš„è®¿é—®é¡µé¢ã€‚</p><p>ä¸ºäº†ä»æœ¬åœ°DCPMMï¼ˆ6aï¼‰æˆ–è¿œç¨‹DCPMMï¼ˆ6bï¼‰ä¸­æå‡ä¸€ä¸ªé¡µé¢ï¼Œ æˆ‘ä»¬å°†è®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢é™çº§åˆ°ä½å±‚å†…å­˜â‘¡aæˆ–è€…â‘¡bã€‚é¡µé¢é™çº§ç›®çš„åœ°å–å†³äºè¯¥é¡µä¹‹å‰è¢«è®¿é—®çš„åœ°æ–¹ï¼Œä»¥ä¿æŒå…¶ä½ç½®æ€§ã€‚ä¹‹åï¼Œâ‘¢æˆ‘ä»¬å¯ä»¥æœ€ç»ˆå°†è¯¥é¡µæå‡åˆ°æœ¬åœ°DRAMèŠ‚ç‚¹ã€‚æ­¤å¤–ï¼Œå›¾6cæ˜¾ç¤ºäº†å¦‚ä½•ä»è¿œç¨‹DRAMè¿›è¡Œé¡µé¢è¿ç§»çš„è¯·æ±‚ã€‚æˆ‘ä»¬æŠŠè¿™ç§ç§°ä¸ºAutoTieringçš„æœºä¼šæ€§æ¨å¹¿å’Œè¿ç§»ï¼ˆOPMï¼‰ ã€‚</p><p>æˆ‘ä»¬è¿›ä¸€æ­¥ä¼˜åŒ–æˆ‘ä»¬çš„æ¸è¿›å¼è®¾è®¡ ï¼Œå°†é™çº§å’Œå‡çº§ï¼ˆæˆ–è¿ç§»ï¼‰èåˆåˆ°ä¸€ä¸ªäº¤æ¢æ“ä½œä¸­ï¼Œç§°ä¸ºAutoTiering OPM with Exchangeï¼ˆOPMXï¼‰ã€‚å½“é™çº§çš„ç›®çš„åœ°ä¸æ™‹å‡æˆ–è¿ç§»çš„æ¥æºç›¸åŒæ—¶ï¼Œæˆ‘ä»¬åˆ©ç”¨äº¤æ¢æ“ä½œï¼Œè€Œä¸æ˜¯å•ç‹¬çš„æ™‹å‡å’Œè¿ç§»ã€‚ä¾‹å¦‚ï¼ˆ6aï¼‰ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªé€‰å®šçš„é¡µé¢é™çº§åˆ°æœ¬åœ°DCPMMâ‘¡aï¼Œ å¹¶å°†è¯¥é¡µé¢æå‡åˆ°æœ¬åœ°DRAMâ‘¢ï¼Œä¸¤ä¸ªå•ç‹¬çš„æ“ä½œè¢«èåˆã€‚è¯¥äº¤æ¢æ“ä½œæ¶ˆé™¤äº†ä¸å¿…è¦çš„é¡µé¢åˆ†é…å’Œé‡Šæ”¾æ“ä½œã€‚</p><p>ä¸‡ä¸€æˆ‘ä»¬æ‰¾ä¸åˆ°è¦ä»ä¸Šå±‚å†…å­˜ä¸­é™çº§çš„é¡µé¢ï¼Œæˆ‘ä»¬ä¼šå°è¯•å°†è¯¥é¡µé¢å‡çº§åˆ°ä¸‹ä¸€ä¸ªæœ€ä½³ä½ç½®â€”â€”è¿œç¨‹DRAMâ€”â€”å°±åƒé€šå¸¸çš„æƒ…å†µä¸€æ ·ã€‚ç”±äºæˆ‘ä»¬æ˜¯ä»¥æœºä¼šä¸»ä¹‰çš„æ–¹å¼è¿›è¡Œé¡µé¢å‡çº§å’Œè¿ç§»ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘è¿‡åº¦çš„é¡µé¢å‡çº§å’Œé™çº§å¯¼è‡´çš„ç›¸å…³æ€§èƒ½å¼€é”€â€”â€”é¡µè¡¨æ“ä½œå’ŒTLB shootdownã€‚</p><h3 id="4-2-1-Predicting-the-Least-Accessed-Pageé¢„æµ‹è®¿é—®é‡æœ€å°‘çš„é¡µé¢"><a href="#4-2-1-Predicting-the-Least-Accessed-Pageé¢„æµ‹è®¿é—®é‡æœ€å°‘çš„é¡µé¢" class="headerlink" title="4.2.1 Predicting the Least Accessed Pageé¢„æµ‹è®¿é—®é‡æœ€å°‘çš„é¡µé¢"></a>4.2.1 Predicting the Least Accessed Pageé¢„æµ‹è®¿é—®é‡æœ€å°‘çš„é¡µé¢</h3><p>ä¸ºäº†ä½¿æ¸è¿›å¼è®¾è®¡æœ‰æ•ˆï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä»ä¸Šå±‚å†…å­˜ä¸­æ‰¾åˆ°è®¿é—®æœ€å°‘çš„é¡µé¢ã€‚æ­£å¦‚ç¬¬3.3èŠ‚æ‰€è§£é‡Šçš„ï¼ŒLinuxæ“ä½œç³»ç»Ÿå°†å†…å­˜åˆ†ä¸ºæ–‡ä»¶æ”¯æŒçš„å’ŒåŒ¿åçš„é¡µé¢ï¼Œä½œä¸ºLRUåˆ—è¡¨ã€‚å½“é¡µé¢å‡çº§æˆ–è¿ç§»ç”±äºä¸Šå±‚å†…å­˜ç¼ºä¹å¯ç”¨ç©ºé—´è€Œå¤±è´¥æ—¶ï¼Œæˆ‘ä»¬ä¼šä¼˜å…ˆè°ƒæŸ¥æ–‡ä»¶æ”¯æŒåŒºåŸŸçš„é¡µé¢ï¼Œå¦‚æœæˆ‘ä»¬æ— æ³•ä»æ–‡ä»¶æ”¯æŒåŒºåŸŸæ‰¾åˆ°è®¿é—®é‡æœ€å°çš„é¡µé¢ï¼Œåˆ™ä¼šè½¬ç§»åˆ°åŒ¿ååŒºåŸŸã€‚</p><p>â‘ æ–‡ä»¶æ”¯æŒçš„é¡µé¢ã€‚æˆ‘ä»¬ç ”ç©¶æ˜¯å¦å¯ä»¥é€šè¿‡é™ä½å±äºæ–‡ä»¶æ”¯æŒåŒºåŸŸçš„é¡µé¢çš„ç­‰çº§æ¥è…¾å‡ºç©ºé—´ã€‚ç”±äºæ–‡ä»¶æ”¯æŒçš„é¡µé¢è¢«ç»´æŠ¤åœ¨ä¸¤ä¸ªLRUåˆ—è¡¨ä¸­ï¼Œæ´»åŠ¨å’Œéæ´»åŠ¨ï¼Œ æˆ‘ä»¬å°†éæ´»åŠ¨åˆ—è¡¨ä¸­æœ€è€çš„é¡µé¢è§†ä¸ºè®¿é—®é‡æœ€å°çš„é¡µé¢ã€‚æ¯å½“æ–‡ä»¶æ”¯æŒçš„é¡µé¢è¢«é‡æ–°è®¿é—®æ—¶ï¼ˆä¾‹å¦‚ï¼Œ<code>sys_read</code>æˆ–<code>sys_write</code>ï¼‰ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†è¯¥é¡µé¢æ ‡è®°ä¸ºè¢«è®¿é—®ï¼Œå¹¶å°†å…¶ç§»è‡³æ´»åŠ¨åˆ—è¡¨ã€‚ç”±äºæ“ä½œç³»ç»Ÿå¯ä»¥è·Ÿè¸ªæ–‡ä»¶æ”¯æŒçš„é¡µé¢çš„è®¿é—®æƒ…å†µï¼Œæˆ‘ä»¬é€šè¿‡æŸ¥çœ‹éæ´»åŠ¨åˆ—è¡¨æ¥ä¼°è®¡è®¿é—®æœ€å°‘çš„é¡µé¢ã€‚å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±è½¬åˆ°æ´»åŠ¨åˆ—è¡¨ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä¿ç•™åœ¨å†…æ ¸å‚æ•°ä¸­é…ç½®çš„é¡µé¢ç¼“å­˜çš„éƒ¨åˆ†ï¼ˆä¾‹å¦‚ï¼Œ<code>vfs_cache_pressure</code>ï¼‰ã€‚å¦‚æœæˆ‘ä»¬ä¸èƒ½åœ¨æ–‡ä»¶æ”¯æŒåŒºåŸŸæ‰¾åˆ°å¯é‡ç”¨çš„ç©ºé—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åœ¨åŒ¿ååŒºåŸŸå¯»æ‰¾ä¸€ä¸ªé¡µé¢ä½œä¸ºåå¤‡è·¯å¾„ã€‚</p><p>â‘¡åŒ¿åé¡µé¢ã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¿ç•™æ¯ä¸ªé¡µé¢çš„è®¿é—®ï¼ˆæ•…éšœï¼‰ä¿¡æ¯ï¼Œä»¥æ˜æ™ºåœ°é€‰æ‹©åŒ¿ååŒºåŸŸä¸­è®¿é—®æœ€å°‘çš„é¡µé¢ã€‚ä¸ºäº†å°½é‡å‡å°‘ç›‘æ§å¼€é”€ï¼Œæˆ‘ä»¬åˆ©ç”¨AutoNUMAä½¿ç”¨çš„é¡µé¢æ‰«æå·¥å…·ï¼Œè·Ÿè¸ªé¡µé¢åœ¨ç»™å®šçš„æ—¶é—´çª—å£å†…æ˜¯å¦è¢«è®¿é—®ã€‚ç„¶åï¼Œæˆ‘ä»¬ç”¨Næ¯”ç‰¹å‘é‡ä¸ºæ¯ä¸ªé¡µé¢å»ºç«‹è®¿é—®å†å²ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬è¦ä¿æŒåˆ°æœ€åNæ¬¡çš„è®¿é—®å†å²ã€‚æˆ‘ä»¬å°†Nè®¾ç½®ä¸º8ã€‚åŸºäºè®¿é—®å†å²ï¼Œæˆ‘ä»¬å°†é¡µé¢åˆ†ä¸ºNä¸ªçº§åˆ«ï¼ˆæœ€å°‘è®¿é—®çš„é¡µé¢åˆ—è¡¨ï¼‰ï¼Œå…¶ä¸­Næ˜¯è¢«è®¾ç½®çš„æ¯”ç‰¹æ•°ï¼Œå¦‚å›¾7æ‰€ç¤ºã€‚ä¸€æ—¦éœ€è¦è¿›è¡Œé¡µé¢é™çº§ï¼Œæˆ‘ä»¬åœ¨LAP[0]åˆ—è¡¨ä¸­æ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªé¡µé¢ï¼Œå› ä¸ºè¿™äº›é¡µé¢è‡³å°‘æœ‰Næ¬¡æ²¡æœ‰è¢«è®¿é—®äº†ã€‚å¦‚æœLAP[0]åˆ—è¡¨æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬å°è¯•ä»LAP[1]åˆ—è¡¨æ‰¾ä¸€ä¸ªï¼Œç­‰ç­‰ã€‚è¿™ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½é€‰æ‹©åœ¨é«˜å±‚æœ€å°‘è¢«è®¿é—®çš„é¡µé¢ï¼Œå¹¶ä¸”å®æ–½é¡µé¢é™çº§å»åº•å±‚å†…å­˜ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c4a1f0a968e442a9880a2d9da44d6095.png"></p><h2 id="4-3-Hiding-Latency-of-Page-Demotionéšè—é¡µé¢é™çº§çš„å»¶æ—¶"><a href="#4-3-Hiding-Latency-of-Page-Demotionéšè—é¡µé¢é™çº§çš„å»¶æ—¶" class="headerlink" title="4.3  Hiding Latency of Page Demotionéšè—é¡µé¢é™çº§çš„å»¶æ—¶"></a>4.3  Hiding Latency of Page Demotionéšè—é¡µé¢é™çº§çš„å»¶æ—¶</h2><p>ä¸ºäº†æ‰§è¡Œé¡µé¢å‡çº§ï¼Œæˆ‘ä»¬åº”è¯¥å°†ä¸€ä¸ªé¡µé¢ä»ç›®æ ‡èŠ‚ç‚¹ä¸Šé™çº§ã€‚åœ¨å®Œæˆé¡µé¢é™çº§ä¹‹å‰ï¼Œç”±äºç¼ºä¹ç©ºé—´ï¼Œæˆ‘ä»¬ä¸èƒ½ç»§ç»­è¿›è¡Œå‡çº§è¯·æ±‚ã€‚æ•…éšœå¤„ç†æ—¶é—´æ˜¯å…³é”®è·¯å¾„ä¸­ä¸¤ä¸ªæ“ä½œçš„æ€»å’Œï¼šé¡µé¢é™çº§å’Œå‡çº§ã€‚ä¸ºäº†ä»å…³é”®è·¯å¾„ä¸­ç§»é™¤é¡µé¢é™çº§ï¼Œæˆ‘ä»¬æ¢ç´¢äº†ä¸€ç§è½¯ä»¶ä¼˜åŒ–æŠ€æœ¯ã€‚</p><p>æˆ‘ä»¬ä¿æŒä¸€ä¸ªç”±å‡ ä¸ªä¿ç•™é¡µç»„æˆçš„é¡µé¢æ± ã€‚æˆ‘ä»¬æŠŠ4KBå’Œ2MBçš„ä¿ç•™é¡µåˆ†åˆ«ç¡®å®šä¸º16å’Œ4ã€‚ä¿ç•™é¡µå…è®¸æˆ‘ä»¬åœ¨ä¸éœ€è¦é™çº§è¿‡ç¨‹çš„æƒ…å†µä¸‹ç«‹å³ä¸ºå‡çº§è¯·æ±‚æä¾›æœåŠ¡ï¼Œå³ä½¿ä¸Šå±‚å†…å­˜å·²æ»¡ã€‚è¿™ç§æ–¹æ³•æ¯”é¡µé¢äº¤æ¢æ–¹æ¡ˆ[35]æ›´å…·æˆæœ¬æ•ˆç›Šï¼Œå› ä¸ºå®ƒå°†é¡µé¢é™çº§çš„å»¶è¿Ÿéšè—åœ¨å…³é”®è·¯å¾„ä¸­ã€‚é¡µé¢é™çº§åˆ°ä¸‹å±‚å†…å­˜æ¯”é¡µé¢æ™‹å‡åˆ°ä¸Šå±‚å†…å­˜éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œå› ä¸ºç”¨äºä¸‹å±‚å¤–å­˜æä¾›äº†æ›´å¥½çš„è¯»å–æ€§èƒ½è€Œä¸æ˜¯å†™æ€§èƒ½ã€‚ä¸ºäº†åœ¨åå°æœ‰æ•ˆåœ°é™çº§é¡µé¢ï¼Œæˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ªæ–°çš„å†…æ ¸çº¿ç¨‹ï¼Œç§°ä¸º<code>kdemoted</code>ï¼Œåœ¨ä¸€ä¸ªæ‰¹æ¬¡ä¸­é™çº§æœ€å°‘æ¥å—çš„é¡µé¢ã€‚ä¸€æ—¦ä¿ç•™é¡µçš„æ•°é‡ä½äºæŸä¸ªé˜ˆå€¼ï¼Œæˆ‘ä»¬å°±å”¤é†’å†…æ ¸çº¿ç¨‹ï¼Œå¼€å§‹é™çº§è¿‡ç¨‹ã€‚é€šè¿‡æ•æ„Ÿæ€§ç ”ç©¶ï¼Œè¯¥é˜ˆå€¼è¢«è®¾å®šä¸º4ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/4f2ba49324264133bedc6c4d123f4641.png"></p><p>å›¾8æè¿°äº†ç®€å•çš„ä¼˜åŒ–å¦‚ä½•éšè—äº†é¡µé¢é™çº§çš„å»¶è¿Ÿã€‚å¯¹äºæ¯ä¸€ä¸ªæ™‹å‡è¯·æ±‚â‘ é»‘ï¼Œå³ä½¿ä¸Šå±‚å†…å­˜å·²æ»¡â‘¡é»‘ ï¼Œè¯¥é¡µä¹Ÿå¯ä»¥è¢«æ™‹å‡ã€‚åœ¨å®Œæˆå‡çº§åï¼ŒNUMAæ•…éšœå¤„ç†ç¨‹åºè¢«è¿”å›ï¼Œæ²¡æœ‰é™çº§è¿‡ç¨‹ï¼Œè€Œæœªæ¥å¯¹è¯¥é¡µé¢çš„è®¿é—®â‘¢é»‘å°‡åœ¨ä¸Šå±‚å†…å­˜å‘ç”Ÿã€‚åŒæ—¶<code>kdemoted</code>å°†é™çº§è®¿é—®é‡æœ€å°çš„é¡µé¢ä½œä¸ºä¸€ä¸ªæ‰¹æ¬¡â‘ å›æ”¶åˆ°å†…å­˜æ± â‘¡çš„éœ€æ±‚ã€‚æˆ‘ä»¬å°†æ­¤ç§°ä¸ºOPM-BDï¼ˆèƒŒæ™¯é™çº§ï¼‰ã€‚</p><h1 id="5-Evaluationè¯„ä¼°"><a href="#5-Evaluationè¯„ä¼°" class="headerlink" title="5 Evaluationè¯„ä¼°"></a>5 Evaluationè¯„ä¼°</h1><h2 id="5-1-Experimental-Setupå®éªŒè®¾ç½®"><a href="#5-1-Experimental-Setupå®éªŒè®¾ç½®" class="headerlink" title="5.1 Experimental Setupå®éªŒè®¾ç½®"></a>5.1 Experimental Setupå®éªŒè®¾ç½®</h2><p>ä¸ºäº†è¯„ä¼°æˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€å°é…å¤‡äº†ä¸¤ä¸ªè‹±ç‰¹å°”è‡³å¼ºé»„é‡‘5218å¤„ç†å™¨çš„NUMAæœåŠ¡å™¨ï¼Œå¹¶ä¸ºæ¯ä¸ªCPU socketé…ç½®äº†ä¸€ä¸ª16GBDDR4-2666 DIMMå’Œä¸€ä¸ª128GBè‹±ç‰¹å°”Optane DCæŒä¹…å†…å­˜ï¼ˆDCPMMï¼‰ çš„å¤šå±‚å†…å­˜å±‚æ¬¡ç»“æ„ã€‚æœåŠ¡å™¨ç³»ç»Ÿæ€»å…±æœ‰32GB DRAMå’Œ256GB DCPMMä½œä¸ºä¸»å†…å­˜ã€‚<strong>ä¸ºäº†å°½é‡å‡å°‘æµ‹é‡å˜åŒ–ï¼Œæˆ‘ä»¬å…³é—­äº†ç¡¬ä»¶åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¶…çº¿ç¨‹ã€ DVFSã€Turbo-Boostå’Œé¢„å–</strong>ã€‚æˆ‘ä»¬ä½¿ç”¨Linuxå†…æ ¸5.3å’ŒUbuntu18.04æœåŠ¡å™¨ä½œä¸ºæˆ‘ä»¬çš„åŸºçº¿ï¼Œå¹¶åœ¨å†…æ ¸ä¹‹ä¸Šå®ç°æˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆã€‚æˆ‘ä»¬çš„ä»£ç å¯åœ¨<a href="https://github.com/csl-ajou/AutoTiering%E3%80%82%E6%88%91%E4%BB%AC%E8%BF%90%E8%A1%8C%E6%9D%A5%E8%87%AAgraph500%E3%80%81SpecACCEL%EF%BC%88OpenMP%EF%BC%89%E3%80%81">https://github.com/csl-ajou/AutoTieringã€‚æˆ‘ä»¬è¿è¡Œæ¥è‡ªgraph500ã€SpecACCELï¼ˆOpenMPï¼‰ã€</a> Graph-Mat[32]å’ŒLiblinear[22]çš„åŸºå‡†ï¼Œè¿™äº›åŸºå‡†åœ¨æœ€è¿‘çš„å¤§å†…å­˜ç³»ç»Ÿä¸­ä½¿ç”¨[2,35]ã€‚æˆ‘ä»¬ä¸ºæ‰€æœ‰çš„åŸºå‡†æµ‹è¯•é…ç½®äº†å®ƒä»¬ï¼Œåœ¨ä¸¤ä¸ªsocketä¸Šä½¿ç”¨æ‰€æœ‰çš„32ä¸ªå†…æ ¸å’Œè¶…è¿‡64GBçš„å†…å­˜ï¼Œä»¥å……åˆ†å¼ºè°ƒå¤šå±‚å†…å­˜ç³»ç»Ÿã€‚ç”±äºé¡µé¢å¤§å°ä¼šä»¥å„ç§æ–¹å¼å½±å“æ€§èƒ½æˆ‘ä»¬è¯„ä¼°äº†å¤§é¡µé¢ï¼ˆ2MBï¼‰å’ŒåŸºæœ¬é¡µé¢ï¼ˆ4KBï¼‰çš„æ€§èƒ½ã€‚</p><h2 id="5-2-Experimental-Resultså®éªŒç»“æœ"><a href="#5-2-Experimental-Resultså®éªŒç»“æœ" class="headerlink" title="5.2 Experimental Resultså®éªŒç»“æœ"></a>5.2 Experimental Resultså®éªŒç»“æœ</h2><p><strong>ä½¿ç”¨æˆ‘ä»¬çš„ä¿å®ˆæ–¹æ³•(CPM)çš„æ€§èƒ½</strong>ã€‚å›¾9æ˜¾ç¤ºäº†æ¯”åŸç‰ˆLinuxå†…æ ¸ï¼ˆç¬¬ä¸€æ¡ï¼‰çš„åŠ é€Ÿç»“æœã€‚è¯·æ³¨æ„ï¼Œåœ¨é»˜è®¤çš„Linuxå†…æ ¸ä¸­ï¼ŒAutoNUMAå·²ç»å¯ç”¨ã€‚å›¾9ä¸­çš„ç¬¬äºŒæ¡æ˜¾ç¤ºäº†æˆ‘ä»¬ä¿å®ˆçš„å‡çº§å’Œè¿ç§»ï¼ˆCPMï¼‰çš„é€Ÿåº¦ï¼Œç¬¬ä¸‰æ¡æ˜¾ç¤ºäº†åº”ç”¨ä¿å®ˆçš„äº¤æ¢ï¼ˆCPMXï¼‰æ—¶çš„æ€§èƒ½å˜åŒ–ã€‚å¯¹äºæˆ‘ä»¬è¯„ä¼°çš„å¤§å¤šæ•°å·¥ä½œè´Ÿè½½ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„CPMæœ‰æ˜æ˜¾çš„æ€§èƒ½æ”¹å–„ã€‚åœ¨503.postencilï¼Œ553.pclvrleafå’Œ560.pilbdcä¸­ï¼Œä¸åŸºçº¿ç›¸æ¯”ï¼Œé€Ÿåº¦æé«˜äº†2å€ä»¥ä¸Šã€‚å¦å¤–ï¼Œ559.pmniGhostæ˜¾ç¤ºäº†1.6å€çš„æ€§èƒ½æå‡ã€‚æˆ‘ä»¬çš„ä¿å®ˆè®¾è®¡ï¼ˆCPMï¼‰å¯ä»¥å°†é¡µé¢ä»ä½å±‚ï¼ˆDCPMMï¼‰å†…å­˜èŠ‚ç‚¹å‡çº§åˆ°è¿œç¨‹DRAMèŠ‚ç‚¹ï¼Œå°½ç®¡ç”±äºè¿œç¨‹DRAMæ¯”æœ¬åœ°DCPMMæ›´å¿«ï¼Œæ‰€ä»¥å±€éƒ¨æ€§æ²¡æœ‰å¾—åˆ°ä¿ç•™ã€‚æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ä¸¤ä¸ªDCPMMèŠ‚ç‚¹ä¹‹é—´è¿ç§»é¡µé¢ï¼Œä»¥ä¾¿åœ¨è®¿é—®ä½å±‚å†…å­˜æ—¶æœ‰æ›´å¥½çš„è®¿é—®å±€éƒ¨æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨å¤šå±‚å†…å­˜ç³»ç»Ÿï¼Œæé«˜æ€§èƒ½ã€‚å¯¹äºgraph500å’ŒGraphMatï¼Œæˆ‘ä»¬çœ‹ä¸€ ä¸‹ï¼Œå…¶é€Ÿåº¦åˆ†åˆ«ä¸º17%å’Œ19%å·¦å³ã€‚GraphMatå’ŒLiblinearå°†å¤§å‹æ•°æ®é›†ä»æ–‡ä»¶ä¸­è¯»å–åˆ°å…¶å†…å­˜æ•°æ®ç»“æ„ä¸­ã€‚æ–‡ä»¶æ”¯æŒçš„é¡µé¢å æ®äº†DRAMèŠ‚ç‚¹çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œè€Œå…³é”®çš„æ•°æ®ç»“æ„ä½äºDCPMMèŠ‚ç‚¹ä¸­ã€‚ä¹‹åï¼Œå®ƒæ‰§è¡ŒPagerankç®—æ³•è¿›è¡Œåˆ†æã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•è§‚å¯Ÿåˆ°è°ƒç”¨kswapdæ¥é‡Šæ”¾ä¸æ´»åŠ¨çš„æ–‡ä»¶å¤‡ä»½é¡µã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„CPMå’ŒCPMXæ²¡æœ‰æœºä¼šæœ‰æ•ˆåˆ©ç”¨DRAMèŠ‚ç‚¹ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°555.pseismicçš„æ€§èƒ½å®Œå…¨æ²¡æœ‰æé«˜ã€‚è¿™è¡¨æ˜ï¼Œåœ¨åŸºçº¿ä¸­ï¼Œå†…å­˜æ”¾ç½®åœ¨ä¸Šå±‚å’Œä¸‹å±‚å†…å­˜ä¹‹é—´æ˜¯å¾ˆå¹³è¡¡çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ— æ³•åˆ©ç”¨å‡çº§å’Œè¿ç§»çš„æœºä¼šã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d3a9355909c84c6c906d8538b4fc4f30.png"></p><p><strong>ä½¿ç”¨æˆ‘ä»¬çš„æ¸è¿›å¼æ–¹æ³•(OPM)çš„æ€§èƒ½</strong>ã€‚æˆ‘ä»¬åœ¨ç¬¬4.2èŠ‚ä¸­æè¿°äº†æˆ‘ä»¬çš„æ¸è¿›å¼è®¾è®¡ï¼Œå®ƒä»ä¸Šå±‚ï¼ˆæœ¬åœ°DRAMï¼‰èŠ‚ç‚¹ä¸­æ‰¾åˆ°è®¿é—®é‡æœ€å°çš„é¡µé¢ï¼Œå¹¶å°†å…¶é™çº§åˆ°ä¸‹å±‚å†…å­˜ä¸­ã€‚å¦‚å›¾9æ‰€ç¤ºï¼ŒOPMXåœ¨å¤§å¤šæ•°å·¥ä½œè´Ÿè½½ä¸­éƒ½æ¯”CPMXæœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ç‰¹åˆ«æ˜¯graph500ï¼ŒGraphMatï¼ŒLiblinearå’Œ559.pmniGhostæ˜¾ç¤ºå‡ºæ¯”CPMXæ˜æ˜¾çš„é€Ÿåº¦æå‡ã€‚503.postencilï¼Œ553.pclvrleafå’Œ560.pilbdcçš„æ€§èƒ½ç•¥æœ‰ä¸‹é™ï¼Œå¤§çº¦ä¸‹é™äº†7%åˆ°8%ã€‚560.pilbdcæœªèƒ½æ‘Šé”€é¡µé¢å‡çº§å’Œé™çº§çš„å¼€é”€ï¼Œè€Œ553.pclvrleafæ˜¾ç¤ºé¡µé¢äº¤æ¢çš„æœºä¼šå‡å°‘äº†ã€‚</p><p>æˆ‘ä»¬åˆ†æäº†graph500çš„è¿è¡Œè¡Œä¸ºï¼Œä»¥äº†è§£æ€§èƒ½çš„æé«˜ã€‚åœ¨æ‰§è¡Œæ ¸å¿ƒå›¾ç®—æ³•ä¹‹å‰ï¼Œå®ƒäº§ç”Ÿäº†å¤§é‡çš„ä¸­é—´æ•°æ®ï¼Œå æ®äº†DRAMç©ºé—´ã€‚å› æ­¤ï¼ŒåŸºçº¿å’Œæˆ‘ä»¬çš„CPMXåœ¨è¿è¡ŒBFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰æ—¶èŠ±äº†å¤§éƒ¨åˆ†æ—¶é—´è®¿é—®ä½å±‚å†…å­˜ã€‚æœ‰è¶£çš„æ˜¯ï¼Œå®ƒåœ¨åœ°å€ç©ºé—´çš„ä¸€å°éƒ¨åˆ†ä¸Šè¡¨ç°å‡ºäº†å†…å­˜è®¿é—®ä½ç½®æ€§ï¼Œå°½ç®¡æ•´ä¸ªåœ°å€ç©ºé—´æ˜¯å·¨å¤§çš„ã€‚æœ‰äº†OPMXï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¿é—®é¢‘ç‡è¾ƒä½çš„æ•°æ®é™çº§ã€‚åˆ°ä½å±‚å†…å­˜ï¼Œå¹¶å°†é«˜å±‚å†…å­˜ç©ºé—´ç”¨äºæ›´é¢‘ç¹è®¿é—®çš„æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¤§å¹…åº¦åœ°æé«˜æ€§èƒ½ã€‚</p><p>å¯¹äºGraphMatæ¥è¯´ï¼Œæˆ‘ä»¬çœ‹åˆ°æ˜¾è‘—çš„æ€§èƒ½æ”¹å–„æ¥è‡ªäºæ–‡ä»¶æ”¯æŒçš„é¡µé¢çš„é™çº§ã€‚é€šè¿‡é»˜è®¤ï¼Œæ–‡ä»¶æ”¯æŒçš„é¡µé¢æœ€åˆè¢«æ”¾åœ¨éæ´»åŠ¨åˆ—è¡¨ä¸­ã€‚åœ¨è¯¥é¡µé¢è¢«é‡æ–°è®¿é—®åï¼Œå®ƒå°†ä»éæ´»åŠ¨åˆ—è¡¨ç§»è‡³æ´»åŠ¨åˆ—è¡¨ã€‚é€šè¿‡å°†è®¿é—®é‡æœ€å°çš„é¡µé¢ä»æ–‡ä»¶æ”¯æŒçš„é¡µé¢ä¸­é™çº§ï¼Œæˆ‘ä»¬å¯ä»¥æé«˜ä¸Šå±‚å†…å­˜çš„åˆ©ç”¨ç‡ã€‚</p><p>é€šè¿‡OPMï¼ˆBDï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æé«˜å¤§å¤šæ•°å·¥ä½œè´Ÿè½½çš„æ€§èƒ½ã€‚ä¸OPMXç›¸æ¯”ï¼Œgraph500å’ŒGraphMatçš„æ”¹è¿›æ˜¯ç›¸å½“å¤§çš„ã€‚555.pseismicå’Œ559.pmniGhostæ˜¾ç¤ºå‡ºæ˜æ˜¾çš„æ”¹å–„ï¼Œå…¶ä»–SPECå·¥ä½œè´Ÿè½½ä¹Ÿæ¢å¤äº†äº¤æ¢ç‰ˆæœ¬çš„é€€åŒ–æ€§èƒ½ã€‚åŒæ—¶ï¼ŒLiblinearæ˜¾ç¤ºå‡ºè½»å¾®çš„æ€§èƒ½ä¸‹é™ã€‚</p><p><strong>å†…å­˜ä½¿ç”¨çš„åˆ†å¸ƒ</strong>ã€‚æˆ‘ä»¬åˆ†æäº†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¤šå±‚æ¬¡çš„å†…å­˜æ˜¯å¦‚ä½•è¢«åˆ©ç”¨çš„ã€‚å›¾10æ¯”è¾ƒäº†åŸºçº¿å’Œæˆ‘ä»¬å¯¹é€‰å®šå·¥ä½œè´Ÿè½½çš„æ¸è¿›å¼è®¾è®¡çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè¿™ä»æˆ‘ä»¬çš„CPMä¸­å—ç›Šã€‚å¯¹äºä¸‰ä¸ªSPECå·¥ä½œè´Ÿè½½ï¼Œä½å±‚å†…å­˜ä¸CPMçš„å¹³è¡¡æ€§æ›´å¥½ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å…è®¸é¡µé¢è¢«è¿ç§»åˆ°CPU-lessçš„èŠ‚ç‚¹ä¸Šã€‚å°½ç®¡CPMæ— æ³•ä»¥æ»¡è¶³æ‰€éœ€çš„è®¿é—®å±‚ï¼Œå®ƒå¯ä»¥ä¿ç•™ä½å±‚å†…å­˜çš„è®¿é—®å±€éƒ¨æ€§ã€‚å¯¹äºGraphMatæ¥è¯´ï¼Œä¸SPECå·¥ä½œè´Ÿè½½ç›¸æ¯”ï¼Œæ€§èƒ½æ”¹å–„ç›¸å¯¹è¾ƒå°ï¼Œ555.pseismicä¹Ÿæ²¡æœ‰æ”¹å–„ã€‚åŸå› æ˜¯åŸºçº¿å·²ç»åœ¨è¾ƒä½çº§åˆ«çš„DIMMä¸Šä¿æŒå†…å­˜å¹³è¡¡ã€‚åœ¨ä¸‹ä¸€æ®µä¸­ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æˆ‘ä»¬åŸºäºOPMçš„æ–¹æ¡ˆå¯¹è¿™ä¸¤ä¸ªå·¥ä½œè´Ÿè½½çš„æœ‰æ•ˆæ€§ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/bf26e3ef51dd4cc3b632f01088b2e185.png"></p><p><strong>LAPåˆ†ç±»çš„æœ‰æ•ˆæ€§</strong>ã€‚ä¸ºäº†è¯„ä¼°æˆ‘ä»¬çš„LAPæ–¹æ¡ˆçš„æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„é¡µé¢åˆ†è§£åˆ°æ¯ä¸ªLAPçº§åˆ«ï¼Œå¹¶éšç€æ—¶é—´çš„æ¨ç§»å»ºç«‹ä¸€ä¸ªç›´æ–¹å›¾ã€‚å›¾11æ˜¾ç¤ºäº†é€‰å®šçš„ä¸‰ä¸ªå·¥ä½œè´Ÿè½½ï¼Œä¸CPMç›¸æ¯”ï¼ŒOPMXæ˜¾ç¤ºäº†æ˜æ˜¾çš„æ”¹å–„ã€‚å¯¹äºgraph500ï¼ŒGraphMatå’Œ559.pmniGhostï¼Œç›¸å¯¹é¢‘ç¹è®¿é—®çš„é¡µé¢ï¼ˆæ·±çº¢è‰²ï¼‰å¯¹åº”äºç¬¬7çº§æˆ–ç¬¬8çº§è¢«æ”¾ç½®åœ¨DRAMèŠ‚ç‚¹ä¸Šï¼Œè€ŒDCPMMèŠ‚ç‚¹æœåŠ¡äºç›¸å¯¹è¾ƒå°‘è®¿é—®çš„é¡µé¢ã€‚è¿™ä¸ªç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„OPMXå¯¹äºå·¥ä½œé›†é€‚åˆäºä¸Šå±‚å†…å­˜çš„åº”ç”¨æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>ä¸ºäº†å®ç°æˆ‘ä»¬çš„LAPæ–¹æ¡ˆï¼Œæ¯ä¸ªé¡µé¢éƒ½éœ€è¦é¢å¤–çš„ç©ºé—´æ¥ä¿å­˜è®¿é—®å†å²ï¼ˆ8Bï¼‰ã€ä¸¤ä¸ªåˆ—è¡¨æŒ‡é’ˆï¼ˆ16Bï¼‰ã€é¡µé¢å¸§å·ï¼ˆ8Bï¼‰å’Œæœ€åæ•…éšœçš„CPUç¼–å·ï¼ˆ1Bï¼‰ã€‚ä¸åŸºçº¿ç›¸æ¯”ï¼Œç”±äº8å­—èŠ‚çš„å¯¹é½æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦æ¯é¡µ32å­—èŠ‚çš„å…ƒæ•°æ®ï¼Œå®ƒå¯¼è‡´ç³»ç»Ÿå†…å­˜32GBçš„288MB DRAMä¸256GB DCPMMã€‚å®ƒç¨å¾®å‡å°‘äº†0.91%çš„æœ‰æ•ˆDRAMå†…å­˜ç©ºé—´ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/41fc75455ce841e8a5d9b6049aba02c1.png"></p><p><strong>ä½¿ç”¨åå°é™çº§çš„å»¶è¿Ÿéšè—</strong>ã€‚æˆ‘ä»¬æµ‹é‡äº†æ™‹å‡å’Œäº¤æ¢å»¶è¿Ÿåœ¨é¡µé¢ä¸Šçš„åˆ†å¸ƒæˆ‘ä»¬ç”¨ftraceä»¥åŠå†…æ ¸å’Œç”¨æˆ·æ—¶é—´æ¥æµ‹é‡é¡µé¢æ•…éšœè·¯å¾„ä¸­çš„æ¨å¹¿å’Œäº¤æ¢å»¶è¿Ÿåˆ†å¸ƒã€‚å›¾12æ˜¾ç¤ºäº†ä¸ºOPMï¼ˆBDï¼‰çš„é¡µé¢æ¨å¹¿å’ŒOPMXçš„é¡µé¢äº¤æ¢æœåŠ¡çš„å»¶è¿ŸCDFOPMï¼ˆBDï¼‰å’ŒOPMXçš„é¡µé¢äº¤æ¢çš„å»¶è¿ŸCDFã€‚å®çº¿æ˜¯åˆ†å¸ƒï¼ŒåŒ…æ‹¬å»¶è¿Ÿéšè—æ–¹æ¡ˆï¼ˆOPMï¼ˆBDï¼‰ï¼‰ï¼Œè€Œè™šçº¿æ˜¯OPMXæ–¹æ¡ˆã€‚è¿™ä¸¤ç§æ–¹æ¡ˆçš„æ•…éšœå»¶è¿Ÿéƒ½ä¸åŒã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼ŒOPMï¼ˆBDï¼‰åœ¨æ‰€æœ‰å·¥ä½œè´Ÿè½½ä¸­éƒ½æ˜¾ç¤ºå‡ºæ¯”äº¤æ¢ç‰ˆæœ¬æ›´å¥½çš„å»¶è¿Ÿåˆ†å¸ƒï¼Œå› ä¸ºé™çº§æ˜¯åœ¨å…³é”®è·¯å¾„ä¹‹å¤–ã€‚ç‰¹åˆ«æ˜¯graph500å’Œ555.pseismicå¯¹åå°é™çº§æœ‰åˆ©ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/177121b8fad946a08ce966a4d8c602c3.png"></p><p>å¦ä¸€æ–¹é¢ï¼ŒLiblinearçš„æœ€ç»ˆè¡¨ç°åœ¨å›¾9ä¸­æ˜¾ç¤ºï¼ŒLiblinearçš„æœ€ç»ˆæ€§èƒ½æ²¡æœ‰å¾—åˆ°æ”¹å–„ã€‚å³ä½¿å»¶è¿Ÿå‡å°‘äº†ï¼Œå†…æ ¸çš„æ‰§è¡Œæ—¶é—´ä¹Ÿæ²¡æœ‰æ˜æ˜¾æ”¹å˜ã€‚æ—¶é—´å¹¶æ²¡æœ‰æ˜¾è‘—æ”¹å˜ã€‚è¿™æ˜¯ç”±äºæœ‰å¯èƒ½å¼•èµ·åº”ç”¨ç¨‹åºçº¿ç¨‹å’Œåå°å†…æ ¸çº¿ç¨‹ä¹‹é—´çš„å†…å­˜è®¿é—®äº‰å¤ºã€‚æˆ‘ä»¬è®¡åˆ’åœ¨æˆ‘ä»¬æœªæ¥çš„å·¥ä½œä¸­ç”¨ä¸¥æ ¼çš„kdemotedè°ƒåº¦æ¥è§£å†³ä¸å¸Œæœ›å‡ºç°çš„åå°é™çº§æƒ…å†µã€‚</p><p><strong>å¤šç¨‹åºå·¥ä½œè´Ÿè½½çš„æ€§èƒ½</strong>ã€‚æˆ‘ä»¬è¯„ä¼°äº†æˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆåœ¨æ¯ä¸ªå¥—æ¥å­—å’Œè·¨å¥—æ¥å­—ä¸¤ç§æƒ…å†µä¸‹å¯¹å¤šç¨‹åºå·¥ä½œè´Ÿè½½çš„å·¥ä½œæƒ…å†µã€‚å›¾13æ˜¾ç¤ºäº†ä¸¤ä¸ªåº”ç”¨ç¨‹åºåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶ï¼ŒCPMå’ŒOPMï¼ˆBDï¼‰çš„é€Ÿåº¦æå‡ã€‚æˆ‘ä»¬ç”¨å·¥ä½œè´Ÿè½½çš„ç»„åˆæ¨¡æ‹Ÿäº†å››ç§å¤šç¨‹åºçš„åœºæ™¯ï¼ˆmix-1åˆ°4ï¼‰ã€‚å½“åŸºäºå¥—æ¥å­—ï¼ˆæ¯ä¸ªå¥—æ¥å­—ï¼‰éš”ç¦»åº”ç”¨ç¨‹åºæ—¶ï¼ŒCPMæ²¡æœ‰æä¾›ä»»ä½•é¢„æœŸçš„æ€§èƒ½æ”¹è¿›ï¼Œå› ä¸ºå®ƒç¼ºä¹åˆ©ç”¨å†…å­˜çš„å¤šå±‚æ¬¡ç»“æ„çš„æœºä¼šã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°OPMï¼ˆBDï¼‰åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æœ‰æ˜æ˜¾çš„æ€§èƒ½æ”¹è¿›ï¼Œé™¤äº†553.pclvrleafåœ¨mix-2ä¸­ï¼Œå› ä¸ºæ›´å¤šç»å¸¸è®¿é—®çš„é¡µé¢å¯ä»¥è¢«æ”¾åœ¨ä¸Šå±‚å†…å­˜ä¸Šã€‚å½“å…è®¸åº”ç”¨ç¨‹åºè·¨å¥—æ¥å­—è¿è¡Œæ—¶ï¼Œå®ƒä»¬å¯èƒ½æ— æ³•æœ‰æ•ˆåœ°åˆ©ç”¨ä¸Šå±‚å†…å­˜èŠ‚ç‚¹ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºçš„çº¿ç¨‹ä¹‹é—´çš„å†…å­˜ä½¿ç”¨å¹¶ä¸æ˜¯å‡åŒ€åˆ†å¸ƒçš„ã€‚åœ¨è·¨å¥—æ¥å­—è®¾ç½®ä¸­ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°CPMå¯ä»¥é€šè¿‡åˆ©ç”¨å¤šå±‚å†…å­˜å±‚æ¬¡ç»“æ„è€Œå‘æŒ¥ä½œç”¨ã€‚æ­¤å¤–ï¼Œä¸CPMç›¸æ¯”ï¼ŒOPMï¼ˆBDï¼‰å¯ä»¥è¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚ä¸CPMç›¸æ¯”ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½èƒ½è¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/3bfb0281431041f1b389b5061fd5f563.png"></p><p><strong>å·¥ä½œé›†çš„æ•æ„Ÿæ€§</strong>ã€‚å›¾14æ˜¾ç¤ºäº†å·¥ä½œé›†å¤§å°ä»32GBåˆ°160GBå˜åŒ–æ—¶çš„æ€§èƒ½ã€‚160GBçš„é€‰å®šå·¥ä½œè´Ÿè½½çš„æ€§èƒ½ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œgraph500å’Œ559.pmni,Ghostçš„æ€§èƒ½è¢«CPMå’ŒOPMï¼ˆBDï¼‰æ˜¾è‘—æé«˜ã€‚å¯¹äº503.postencilå’Œç„¶è€Œï¼Œå¯¹äº503.postencilå’Œ553.pclvrleafï¼ŒOPMï¼ˆBDï¼‰å’ŒCPMæ˜¾ç¤ºå‡ºç±»ä¼¼çš„éšç€å·¥ä½œé›†å¤§å°çš„å¢åŠ ï¼ŒOPMï¼ˆBDï¼‰å’ŒCPMè¡¨ç°å‡ºç±»ä¼¼çš„æ€§èƒ½æ”¹è¿›ã€‚æ­£å¦‚åœ¨LAPåˆ†ç±»æ®µè½ä¸­æ‰€è§£é‡Šçš„ï¼Œåœ¨è¿™äº›åŸºå‡†ä¸­ï¼Œå¤§éƒ¨åˆ†çš„<br>åœ¨é‚£äº›å¯¹OPMï¼ˆBDï¼‰ä¸å¤ªæœ‰åˆ©çš„åŸºå‡†ä¸­ï¼Œå¤§éƒ¨åˆ†é¡µé¢éƒ½æ˜¯å‡åŒ€è®¿é—®çš„ã€‚å¯¹OPMï¼ˆBDï¼‰æœ‰åˆ©ã€‚è¯·æ³¨æ„ï¼Œä¸åŸç‰ˆLinuxï¼ˆBaselineï¼‰ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ–¹æ³•çš„æé€Ÿæ˜¯æ˜¾è‘—çš„ï¼Œè€Œä¸”ä»ç„¶æœ‰æ•ˆã€‚ç”±äºå…¶ä»–å·¥ä½œè´Ÿè½½ï¼Œå¦‚GraphMatå’ŒLiblinearã€‚æœ‰å›ºå®šçš„é—®é¢˜è¾“å…¥å¤§å°ï¼Œæˆ‘ä»¬æ— æ³•è¯„ä¼°å·¥ä½œé›†çš„æ•æ„Ÿæ€§ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b3f99c46e51c414c81c4860c205caa19.png"></p><p><strong>ä¸å…ˆå‰ç ”ç©¶çš„æ€§èƒ½æ¯”è¾ƒ</strong>ã€‚å›¾15å±•ç¤ºäº†ä¸è‹±ç‰¹å°”æœ€è¿‘æå‡ºçš„åä¸ºTieringv0.6[36]çš„æ€§èƒ½æ¯”è¾ƒç»“æœã€‚è¯·æ³¨æ„ï¼ŒTieringv0.6æ˜¯åŸºäºLinuxå†…æ ¸5.9ç‰ˆæœ¬çš„ï¼Œä½†æ²¡æœ‰å¹¶å…¥ä¸»çº¿ã€‚æˆ‘ä»¬è¡¨æ˜ï¼Œæˆ‘ä»¬çš„OPMï¼ˆBDï¼‰åœ¨å¤§å¤šæ•°å·¥ä½œè´Ÿè½½ä¸­çš„æ€§èƒ½è¶…è¿‡äº†Tiering v0.6ã€‚å¯¹äºåŒ¿åå†…å­˜åŒºåŸŸï¼ŒTieringv0.6é€šè¿‡ä½¿ç”¨AutoNUMAæ¡†æ¶ï¼Œå°†é¡µé¢å‡çº§åˆ°ä¸Šå±‚å®šæ—¶å™¨å†…å­˜ã€‚é€šè¿‡ç›‘æ§è®¾æ–½ï¼Œä»–ä»¬è°ƒæŸ¥è¯¥é¡µæ˜¯å¦åœ¨æœ€è¿‘ä¸¤æ¬¡è¿ç»­æ‰«æä¸­è¢«è®¿é—®ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œä»–ä»¬è®¤ä¸ºè¯¥é¡µæ˜¯çƒ­çš„ï¼Œå¹¶å‡çº§å®ƒã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬çš„OPMï¼ˆBDï¼‰ä¿æŒäº†è¿‡å»Nï¼ˆ8ï¼‰æ¬¡çš„è®¿é—®å†å²ã€‚è¿™ä¸ªå†³å®šæ¯”çœ‹å‰ä¸¤æ¬¡è®¿é—®æ›´å‡†ç¡®æ­¤å¤–ï¼ŒTieringv0.6ä¹Ÿç»§æ‰¿äº†ä¼ ç»ŸAutoNUMAçš„é™åˆ¶ã€‚ä¸€æ—¦æœ¬åœ°DRAMæ»¡äº†ï¼Œå®ƒå°±ä¸å…è®¸å°†é¡µé¢æ¨å¹¿åˆ°è¿œç¨‹DRAMæˆ–æœ¬åœ°DCPMMä¸Šã€‚ç›¸åï¼Œ<code>kswapd</code>ä¼šè¢«è§¦å‘ï¼Œå°†é¡µé¢å›æ”¶åˆ°è¾ƒä½å±‚çš„å†…å­˜ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„LAPæ–¹æ¡ˆé€šè¿‡æœ‰é€‰æ‹©åœ°æ‰§è¡Œå‡çº§å’Œé™çº§ï¼Œä½¿ä¸Šå±‚å†…å­˜å¾—åˆ°æ›´å¥½çš„åˆ©ç”¨ã€‚å¯¹äºgraph500ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°Tieringv0.6æ¯”OPMï¼ˆBDï¼‰è¡¨ç°å¾—æ›´å¥½ã€‚æˆ‘ä»¬çš„æ–¹æ¡ˆåœ¨æ‰§è¡Œå‰æ„å»ºå›¾å½¢çš„æ—¶é—´ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨éå†å›¾å½¢æ—¶ï¼Œä¸Tieringv0.6ç›¸æ¯”é‡‡ç”¨OPMï¼ˆBDï¼‰çš„graph500è®¿é—®äº†æ›´å¤šçš„ä½å±‚å†…å­˜ä¸­çš„é¡µé¢ã€‚åœ¨Liblinearä¸­ï¼Œå®ƒè¡¨æ˜Tieringv0.6æ›´ç§¯æåœ°å°†æ–‡ä»¶æ”¯æŒçš„é¡µé¢é™çº§ï¼Œå¯¼è‡´ä¸Šå±‚å†…å­˜çš„æ›´å¥½åˆ©ç”¨ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/5bfcb18fbfea4bcfb1cc5b9fc8a65689.png"></p><p><strong>å¤§é¡µçš„æ€§èƒ½</strong>ã€‚ä¸ºäº†å°½é‡å‡å°‘å¤§å†…å­˜åº”ç”¨çš„TLBç¼ºå¤±çš„å¼€é”€ï¼Œç°ä»£è®¡ç®—æœºç³»ç»Ÿæä¾›äº†å¤§é¡µé¢é€‰é¡¹ã€‚å›¾16æ˜¾ç¤ºäº†å½“æˆ‘ä»¬åˆ©ç”¨å¤§é¡µé¢ï¼ˆ2MBï¼‰è€Œä¸æ˜¯åŸºæœ¬é¡µé¢å¤§å°ï¼ˆ4KBï¼‰æ—¶çš„é€Ÿåº¦æå‡ç»“æœã€‚å¯¹äºGraphMatå’Œ553.pclvrleafï¼Œåœ¨OPM ï¼ˆBDï¼‰æ–¹æ¡ˆä¸­å¯ä»¥è§‚å¯Ÿåˆ°å¤§é¡µé¢çš„æ€§èƒ½æ”¹è¿›ã€‚å¦ä¸€æ–¹é¢ï¼Œå¤§å¤šæ•°çš„å·¥ä½œè´Ÿè½½å¹¶æ²¡æœ‰å‡ºç°æ˜æ˜¾çš„å·®å¼‚ã€‚559.pmniGhostå’Œ560.pilbdcçš„æ€§èƒ½æœ‰æ‰€ä¸‹é™ã€‚å½“åˆ†æå…·æœ‰å¤§é¡µé¢çš„SPECå·¥ä½œè´Ÿè½½çš„LAPç›´æ–¹å›¾æ—¶ï¼Œä¸åŸºç¡€é¡µé¢ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆå¯ä»¥å¿«é€Ÿå°†é¡µé¢åˆ†ç¦»åˆ°LAPçº§åˆ«ã€‚ç„¶è€Œï¼Œç”±äºåœ¨ç§»åŠ¨å¤§é¡µé¢æ—¶ï¼Œé¡µé¢é™çº§çš„å¼€é”€ä¼šå¢åŠ ï¼Œæ‰€ä»¥ä¼šå‡ºç°æ€§èƒ½ä¸‹é™çš„æƒ…å†µã€‚ä¸ºäº†å‡å°‘å¼€é”€ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†å¤åˆ¶é¡µé¢çš„å¤šçº¿ç¨‹ï¼ˆMTï¼‰ç‰ˆæœ¬çš„ä¼˜åŠ¿[35]ã€‚559.pmniGhoståªæ˜¾ç¤ºäº†æ”¹è¿›çš„æ€§èƒ½ï¼Œä½†å…¶ä»–å·¥ä½œè´Ÿè½½å˜å¾—æ›´å·®ã€‚æ­£å¦‚å‰é¢ä¸€æ®µæåˆ°çš„ï¼ˆå»¶è¿Ÿéšè—ï¼‰ï¼Œæˆ‘ä»¬å°†åœ¨æœªæ¥çš„å·¥ä½œä¸­è¿›ä¸€æ­¥ç ”ç©¶å¦‚ä½•æ‰©å±•æˆ‘ä»¬çš„æ–¹æ¡ˆä»¥å‡è½»æ€§èƒ½å¼€é”€ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/0193ff1662d8412b825f712b723451d3.png"></p><h1 id="6-ç›¸å…³å·¥ä½œ"><a href="#6-ç›¸å…³å·¥ä½œ" class="headerlink" title="6 ç›¸å…³å·¥ä½œ"></a>6 ç›¸å…³å·¥ä½œ</h1><p>åœ¨æ•´ä¸ªç¡¬ä»¶å’Œè½¯ä»¶æ–¹é¢ï¼Œä¸ºæœ‰æ•ˆä½¿ç”¨åˆ†å±‚ï¼ˆæˆ–å¼‚è´¨ï¼‰å†…å­˜ç³»ç»Ÿåšå‡ºäº†å·¨å¤§åŠªåŠ›ã€‚æˆ‘ä»¬å°†æˆ‘ä»¬çš„æ–¹æ¡ˆä¸ä¹‹å‰çš„æ–¹æ³•è¿›è¡Œæ¯”è¾ƒã€‚é¦–å…ˆï¼Œä»¥å‰çš„ç ”ç©¶å¤§å¤šé›†ä¸­åœ¨è®¾è®¡ä¸¤å±‚å†…å­˜ç³»ç»Ÿçš„åˆ†é¡µæœºåˆ¶å’Œç­–ç•¥[3, 10, 11, 19, 20, 24, 26, 29, 35]ä¸ä¹‹å‰çš„å·¥ä½œä¸åŒï¼Œæœ¬ç ”ç©¶å°†é—®é¢˜ç©ºé—´æ‰©å±•åˆ°åˆ†å±‚å†…å­˜åœ¨ä¼ ç»Ÿçš„NUMAæ¶æ„ä¸Šå¢åŠ äº†ä¸€ä¸ªå¤šå±‚æ¬¡çš„å†…å­˜ç³»ç»Ÿã€‚ç”±äºåœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œ æœ‰å‡ ç§æ›¿ä»£æ€§çš„é¡µé¢æ”¾ç½®æ–¹å¼æœ¬æ–‡åœ¨æ”¾ç½®ã€å‡çº§å’Œåˆ é™¤é¡µé¢æ—¶åˆ©ç”¨äº†è¿™äº›æœºä¼šã€‚ç¬¬äºŒï¼ŒAutoTiering å¹¶æ²¡æœ‰ç”¨å…ˆå‰å·¥ä½œä¸­ä½¿ç”¨çš„é¢„å®šä¹‰é˜ˆå€¼å°†é¡µé¢åŒºåˆ†ä¸ºçƒ­å’Œå†·[3,19,20]ã€‚åœ¨è¿™é¡¹ç ”ç©¶ä¸­ï¼Œæ™‹å‡å’Œé™çº§çš„å†³å®šæ˜¯æ ¹æ®æ•´ä¸ªå†…å­˜å±‚çš„ç›¸å¯¹è®¿é—®é¢‘ç‡å’Œé‡å¤æ€§åšå‡ºçš„ã€‚ä¸ºäº†ä¼°è®¡é¡µé¢è®¿é—®æ´»åŠ¨ï¼Œæˆ‘ä»¬ä¾é AutoNUMAè®¾æ–½ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçœŸå®ä¸–ç•Œçš„åŸºç¡€è®¾æ–½æ¥è¯„ä¼°æˆ‘ä»¬æå‡ºçš„åŸºäºè‹±ç‰¹å°”çš„OptanePersistentMemoryï¼ˆDCPMMï¼‰çš„æƒ³æ³•ï¼Œå®ƒæœ€è¿‘å¼•èµ·äº†å…³æ³¨ã€‚ä¹‹å‰çš„å·¥ä½œæ¨¡æ‹Ÿæˆ–ä»¿çœŸäº†åŸºäºDRAMçš„ä¸¤çº§å†…å­˜ç³»ç»Ÿ[3,11,1.9,20,35]ã€‚å°½ç®¡ç°å®ä¸–ç•Œä¸­çš„å­˜å‚¨ç±»å†…å­˜ï¼ˆSCMï¼‰åœ¨è¯»å†™æ€§èƒ½ä¸Šæ˜¾ç¤ºå‡ºä¸å¯¹ç§°æ€§ï¼Œä½†åœ¨ç”¨DRAMæ¨¡æ‹Ÿåˆ†å±‚å†…å­˜<br>æ—¶ï¼Œå®ƒå¹¶æ²¡æœ‰è¢«æ­£ç¡®å»ºæ¨¡ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†ä»‹ç»æ“ä½œç³»ç»Ÿç•Œä»¥å‰åœ¨è½¯ä»¶æ–¹é¢çš„åŠªåŠ›ä¸ºäº†äº†è§£Linuxä¸­å†…å­˜ç³»ç»Ÿçš„å¼‚è´¨æ€§ï¼ŒACPI6.2è§„èŒƒå¼•å…¥äº†å¼‚è´¨æ€§å†…å­˜å±æ€§è¡¨ï¼ˆHMATï¼‰ï¼Œä¸ºç”¨æˆ·æä¾›å„ç§å†…å­˜ç±»å‹çš„æ€§èƒ½ä¿¡æ¯[39]ã€‚ä»Linuxå†…æ ¸5.0-rc1å¼€å§‹ï¼ŒæŒä¹…æ€§å†…å­˜ï¼ˆè¿™é‡ŒæŒ‡è‹±ç‰¹å°”çš„DCPMMï¼‰å¯ä»¥è¢«ç”¨ä½œæ˜“å¤±æ€§ä¸»å†…å­˜ï¼Œå°½ç®¡å®ƒæ¯”DRAMæ…¢[15]ã€‚å®ƒå¯ä»¥æä¾›ä¸°å¯Œçš„ä¸»å†…å­˜ç©ºé—´ï¼Œ ä½†æ”¯æŒåˆ†å±‚å†…å­˜å±‚æ¬¡çš„ç­–ç•¥å’Œæœºåˆ¶è¿˜å¤„äºèµ·æ­¥é˜¶æ®µã€‚æœ€è¿‘ï¼Œä¸€ä¸ªæ–°çš„ç”¨äºç¡¬ä»¶ç®¡ç†çš„DRAMç¼“å­˜çš„å†…å­˜åˆ†é…å™¨è¢«ç§°ä¸ºshuffle page allocatorï¼Œåœ¨Linuxå†…æ ¸ä¸­è¢«å¼•å…¥[34]ã€‚ ç„¶è€Œï¼Œå®ƒä¸è¶³ä»¥æå–åˆ†å±‚å†…å­˜çš„å…¨éƒ¨æ€§èƒ½ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è€ƒè™‘å†…å­˜èŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»å’ŒNUMAç±»å‹ã€‚å¦å¤–ï¼Œå·²ç»æœ‰ä¸€äº›åŠªåŠ›æ¥æœ‰æ•ˆåœ°æ”¯æŒå¿«å†…å­˜å’Œæ…¢å†…å­˜ä¹‹é—´çš„é¡µé¢è¿ç§»ï¼Œä½†æ˜¯è¿™äº›ä»ç„¶ä¾èµ–äºæ´»åŠ¨å’Œéæ´»åŠ¨åˆ—è¡¨ç®¡ç†[5,16,30]ï¼Œç›´åˆ°ç°åœ¨è¿˜æ²¡æœ‰è¢«åˆå¹¶åˆ°Linuxå†…æ ¸çš„ä¸»çº¿ä¸­ã€‚åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œä»–ä»¬é€šè¿‡Mi ComputeNumaCostæµ‹é‡ç³»ç»Ÿåˆå§‹åŒ–æ—¶å„ç§é¡µé¢æ“ä½œçš„æˆæœ¬ï¼Œ å¹¶å»ºç«‹-ä¸ªç±»ä¼¼äºLinuxçš„NUMAdis-tanceçš„è¡¨æ ¼ï¼Œä½†è¿™åæ˜ çš„æ˜¯è®¿é—®æˆæœ¬[37]ã€‚ ç”±äºWindowsæ“ä½œç³»ç»Ÿçš„ä¿¡æ¯æœ‰é™ï¼Œæˆ‘ä»¬æ— æ³•æ‰¾åˆ°å®ƒä»¬å¯¹å¤šå±‚å†…å­˜çš„ä½œç”¨ã€‚</p><p>æ¶æ„ç•Œçš„ç ”ç©¶äººå‘˜ä»‹ç»äº†æœ‰æ•ˆåˆ©ç”¨ä¸¤å±‚å†…å­˜ç³»ç»Ÿçš„ç¡¬ä»¶æŠ€æœ¯ï¼ŒåŒæ—¶å°†ä¼°è®¡è®¿é—®é¢‘ç‡çš„æ€§èƒ½å¼€é”€é™åˆ°æœ€ä½[7,28,29,31]ã€‚Choeç­‰äººæå‡ºäº†ç¡¬ä»¶è¾…åŠ©çš„å¤šå±‚å†…å­˜ç³»ç»Ÿçš„å†…å­˜åˆ†é…æ–¹æ¡ˆï¼Œå…¶ä¸­DRAMèŠ‚ç‚¹å¯¹è½¯ä»¶æ˜¯ä¸å¯è§çš„[6]ã€‚é™¤æ­¤ä»¥å¤–ï¼Œæ²¡æœ‰ä¸€é¡¹å·¥ä½œè€ƒè™‘åˆ°å¤šå±‚å†…å­˜ç³»ç»Ÿçš„æƒ…å†µã€‚é€šè¿‡æ¶æ„çš„æ”¯æŒï¼Œè·Ÿè¸ªå’Œè¿ç§»é¡µé¢ç­‰å¼€é”€å¯ä»¥å¤§å¤§å‡å°‘ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æ”¾ç½®çš„æ›¿ä»£æ–¹æ¡ˆï¼Œåšå‡ºæ™‹å‡å’Œé™çº§å†³å®šçš„çµæ´»æ€§æ˜¯æœ‰é™çš„ã€‚</p><h1 id="7-Conclusion-æ€»ç»“"><a href="#7-Conclusion-æ€»ç»“" class="headerlink" title="7 Conclusion æ€»ç»“"></a>7 Conclusion æ€»ç»“</h1><p>è¿™é¡¹å·¥ä½œæ¢ç´¢äº†ä¸€å¥—åä¸ºAutoTieringçš„æ–°çš„é¡µé¢ç®¡ç†æ–¹æ¡ˆï¼Œå®ƒä»å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­è·ç›Šã€‚æˆ‘ä»¬å‘ç°ï¼ŒLinuxæ“ä½œç³»ç»Ÿå…³æ³¨çš„æ˜¯NUMAæ‰€å¸¦æ¥çš„è®¿é—®å±€éƒ¨æ€§ï¼Œè€Œä¸æ˜¯å†…å­˜å±‚ã€‚ç„¶è€Œï¼Œåœ¨å¤šå±‚å†…å­˜ç³»ç»Ÿä¸­ï¼Œè®¿é—®å†…å­˜çš„æˆæœ¬å¹¶ä¸åªä¸å±€éƒ¨æ€§æˆæ­£æ¯”ã€‚æˆ‘ä»¬é€šè¿‡è€ƒè™‘ä¸¤ä¸ªå› ç´ ï¼Œå³è®¿é—®å±‚å’Œå±€éƒ¨æ€§ï¼Œå…¨é¢è§£å†³äº†åˆ©ç”¨å¤šå±‚å†…å­˜ç³»ç»Ÿçš„ä¸åŒæ–¹é¢ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªçœŸå®ä¸–ç•Œçš„åˆ†å±‚å†…å­˜ç³»ç»Ÿå»ºç«‹äº†ä¸€ä¸ªæ¦‚å¿µéªŒè¯ã€‚æˆ‘ä»¬çš„è¯„ä¼°æ˜¾ç¤ºï¼Œåœ¨å„ç§åŸºå‡†æµ‹è¯•ä¸­ï¼Œä¸ç°æœ‰çš„Linuxå†…æ ¸5.3ç‰ˆæœ¬å’Œè‹±ç‰¹å°”çš„Tieringv0.6ä¹‹å‰çš„æ–¹æ³•ç›¸æ¯”ï¼Œæ€§èƒ½æœ‰äº†æ˜æ˜¾çš„æ”¹å–„ã€‚</p><p>æœªæ¥çš„åˆ†å±‚å­˜å‚¨ç³»ç»Ÿé¢„è®¡ä¼šæ›´åŠ å¤šæ ·åŒ–å’Œå¼‚è´¨åŒ–ã€‚ä¸ºäº†ä½¿æˆ‘ä»¬çš„æ–¹æ³•æ›´åŠ æ™®éï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªæè¿°å¯èƒ½çš„æ›¿ä»£å®‰ç½®çš„è¡¨æ ¼ã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­åˆå§‹åŒ–å†…å­˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹é‡å„å†…å­˜èŠ‚ç‚¹çš„å®é™…æ€§èƒ½ã€‚æœ‰äº†è¿™æ ·ä¸€ä¸ªæ–°çš„è¡¨æ ¼ï¼Œ AutoTiering å¯ä»¥è°ƒæ•´é¡µé¢éœ€è¦æ™‹å‡ã€é™çº§æˆ–è¿ç§»çš„åœ°æ–¹ï¼Œæ­£å¦‚æ‰€è§£é‡Šçš„é‚£æ ·ï¼Œæ²¡æœ‰ä¸€ä¸ªé™æ€çš„å†³å®šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> NUMA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Micronâ€™s Perspective on Impact of CXL on DRAM Bit Growth Rate</title>
      <link href="/2023/10/13/Micron%E2%80%99s-Perspective-on-Impact-of-CXL-on-DRAM-Bit-Growth-Rate/"/>
      <url>/2023/10/13/Micron%E2%80%99s-Perspective-on-Impact-of-CXL-on-DRAM-Bit-Growth-Rate/</url>
      
        <content type="html"><![CDATA[<p>CXLï¼ˆCompute Express Linkâ„¢ï¼‰æ˜¯ä¸€ç§é«˜é€Ÿäº’è¿ã€è¡Œä¸šæ ‡å‡†æ¥å£ï¼Œç”¨äºå¤„ç†å™¨ã€åŠ é€Ÿå™¨ã€å†…å­˜ã€å­˜å‚¨å’Œå…¶ä»–IOè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚CXLé€šè¿‡å…è®¸å¼‚æ„å’Œåˆ†å¸ƒå¼è®¡ç®—æ¶æ„çš„å¯ç»„åˆæ€§ã€å¯æ‰©å±•æ€§å’Œçµæ´»æ€§æ¥æé«˜æ•ˆç‡ã€‚CXLçš„ä¸»è¦ä¼˜åŠ¿æ˜¯è®¡ç®—èŠ‚ç‚¹çš„å†…å­˜æ‰©å±•ï¼Œå¡«è¡¥äº†éœ€è¦é«˜å¸¦å®½ã€å®¹é‡å’Œä½å»¶è¿Ÿçš„æ•°æ®å¯†é›†å‹åº”ç”¨ç¨‹åºçš„ç©ºç™½ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é˜è¿°ç¾å…‰ç§‘æŠ€çš„è§‚ç‚¹ï¼šå†…å­˜å¸‚åœºæä¾›å¼ºåŠ²çš„å¢é•¿å‰æ™¯ï¼ŒCompute Express Linkâ„¢ ï¼ˆCXLï¼‰ å°†ä¸ºDRAM bitéœ€æ±‚å¢é•¿å’Œå¯å¯»å€å¸‚åœº ï¼ˆTAM,total addressable marketï¼‰å¢é•¿å¸¦æ¥å‡€ç§¯æå½±å“ã€‚</p><p>æˆ‘ä»¬å°†é¦–å…ˆè®¨è®ºå½“ä»ŠITç³»ç»Ÿä¸­çš„ä¸¤ä¸ªæŒ‘æˆ˜ï¼Œç„¶åè®¨è®ºCXLå¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ã€‚æœ€åï¼Œæˆ‘ä»¬å°†è§£é‡Šæˆ‘ä»¬è®¤ä¸ºCXLå°†å¯¹å†…å­˜å¸‚åœºäº§ç”Ÿçš„å½±å“ã€‚</p><h2 id="å†…å­˜å¢™é—®é¢˜"><a href="#å†…å­˜å¢™é—®é¢˜" class="headerlink" title="å†…å­˜å¢™é—®é¢˜"></a>å†…å­˜å¢™é—®é¢˜</h2><p>ç°ä»£å¹¶è¡Œè®¡ç®—æœºæ¶æ„å¾ˆå®¹æ˜“å‡ºç°ç³»ç»Ÿçº§ç“¶é¢ˆï¼Œä»è€Œé™åˆ¶åº”ç”¨ç¨‹åºå¤„ç†çš„æ€§èƒ½ã€‚å†å²ä¸Šï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¸ºâ€œå†…å­˜å¢™â€ï¼Œå¾®å¤„ç†å™¨æ€§èƒ½çš„æé«˜é€Ÿåº¦è¿œè¿œè¶…è¿‡DRAMå†…å­˜é€Ÿåº¦çš„æé«˜é€Ÿåº¦ã€‚åœ¨è¿‡å»çš„åå¹´ä¸­ï¼ŒCPUæ ¸å¿ƒæ•°é‡çš„å¢é•¿é€Ÿåº¦å¯¼è‡´CPUå’Œå†…å­˜æ€§èƒ½ä¹‹é—´çš„å·®è·è¶Šæ¥è¶Šå¤§ï¼ˆå›¾ 1ï¼‰ï¼Œä»è€Œé˜»ç¢äº†å¤æ‚çš„è®¡ç®—æŒ‘æˆ˜ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/82284a0bb0484aba83155e934c0f2760.png"></p><p>æ·»åŠ å¤„ç†å™¨æ ¸å¿ƒåªæ˜¯è§£å†³è®¸å¤šåº”ç”¨è®¡ç®—æŒ‘æˆ˜çš„ä¸€éƒ¨åˆ†ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‹¥æœ‰è¶³å¤Ÿçš„å†…å­˜å¸¦å®½æ¥ä¸ºè¿™äº›å¤„ç†å™¨å†…æ ¸æä¾›æ•°æ®è‡³å…³é‡è¦ã€‚CPUä¾›åº”å•†è¯•å›¾é€šè¿‡å¢åŠ æ›´å¤šå†…å­˜é€šé“å¹¶æé«˜æ–°ä¸€ä»£CPUä¸­è¿™äº›é€šé“çš„æ•°æ®é€Ÿç‡æ¥é€æ­¥æ”¹è¿›ï¼Œä»è€Œç¼“è§£æ‰©å±•å·®è·é—®é¢˜ã€‚æ–°ä¸€ä»£DRAMæŠ€æœ¯ä¸ºå†…å­˜æ•°æ®é€Ÿç‡çš„å‘å±•æä¾›äº†æš‚æ—¶çš„ç¼“è§£ã€‚</p><p>è¡¨1æ˜¾ç¤ºäº†è¿‡å»åå¹´ä¸­CPUæ ¸å¿ƒæ•°é‡å’ŒDDR DRAMæ•°æ®é€Ÿç‡éšç€2011å¹´ã€2017å¹´ã€2021å¹´å’Œ2023å¹´æ›´å¤šå†…å­˜é€šé“çš„å¢åŠ è€Œå¢åŠ çš„è¿›å±•ã€‚ç„¶è€Œï¼Œå³ä½¿æœ‰äº†ç†è®ºå†…å­˜æ•°æ®é€Ÿç‡å’Œæ›´å¤šå†…å­˜é€šé“ï¼Œå†…å­˜å¸¦å®½è¦è·Ÿä¸ŠCPUæ ¸å¿ƒæ•°é‡çš„å¢é•¿å¹¶éšç€æ—¶é—´çš„æ¨ç§»ä¿æŒæ¯ä¸ªæ ¸å¿ƒ4GB/sæ˜¯ä¸€é¡¹æŒ‘æˆ˜ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c7bb70cbebb94edd8bb4cc227a450588.png"></p><p>ä»¥CPUæ ¸å¿ƒæ•°é‡è¡¡é‡çš„å¹³å°å¤„ç†èƒ½åŠ›ä¸å¯ç”¨å†…å­˜å®¹é‡æ‰©å±•ä¹‹é—´çš„å…³ç³»ä¹ŸåŒæ ·å—åˆ°æŒ‘æˆ˜ã€‚å¦‚å›¾2ä¸­çš„å†å²è¶‹åŠ¿æ•°æ®æ‰€ç¤ºï¼Œå¤„ç†å™¨æ ¸å¿ƒæ•°é‡å¢é•¿ç›¸å½“è¿…é€Ÿï¼Œè€Œæ¯ä¸ªæ ¸å¿ƒçš„ç³»ç»Ÿå†…å­˜å®¹é‡å¢é•¿å´ç¨³æ­¥ä¸‹é™ã€‚å°†å†…å­˜æ§åˆ¶å™¨é›†æˆåˆ°CPUä¸­é€šå¸¸ä¼šå¯¼è‡´å¤„ç†å™¨ä¸å†…å­˜å®¹é‡æ¯”ç‡æ›´åŠ ç›´æ¥å’Œå—é™ã€‚å¯ä»¥é€šè¿‡ä¸ºæ¯ä¸ªé€šé“æ·»åŠ æ›´å¤šDIMMæ¥å¢åŠ å®¹é‡ã€‚ç„¶è€Œï¼Œç”±äºé€šé“è´Ÿè½½å¢åŠ ï¼Œä¸ºæ¯ä¸ªé€šé“æ·»åŠ æ›´å¤šDIMMé€šå¸¸éœ€è¦é™ä½å†…å­˜æ—¶é’Ÿé€Ÿåº¦ï¼Œä»è€Œå‡å°‘å†…å­˜å¸¦å®½ï¼Œä»è€ŒåŠ å‰§å‰é¢è®¨è®ºçš„å†…å­˜å¢™é—®é¢˜ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/85106b4286dd43de958c0f23847650cd.png"></p><h2 id="ITèµ„æºæ•ˆç‡æœ€å¤§åŒ–é—®é¢˜"><a href="#ITèµ„æºæ•ˆç‡æœ€å¤§åŒ–é—®é¢˜" class="headerlink" title="ITèµ„æºæ•ˆç‡æœ€å¤§åŒ–é—®é¢˜"></a>ITèµ„æºæ•ˆç‡æœ€å¤§åŒ–é—®é¢˜</h2><p>åº”ç”¨ç¨‹åºå’ŒæœåŠ¡è¢«åˆ†è§£ä¸ºå¾®æœåŠ¡ï¼Œä½¿å¾—å¯ä»¥éšç€å·¥ä½œè´Ÿè½½éœ€æ±‚çš„èµ·ä¼è€Œä¼˜åŒ–å¯ç”¨èµ„æºã€‚ITæ•ˆç‡çš„ä¸»è¦é™åˆ¶å› ç´ ä¹‹ä¸€æ˜¯æ²¡æœ‰ä¸€ç§åŸºç¡€è®¾æ–½èµ„æºçš„ç»„åˆé€‚åˆæ‰€æœ‰å·¥ä½œè´Ÿè½½ã€‚å·¥ä½œè´Ÿè½½å¯¹è®¡ç®—èƒ½åŠ›ã€å†…å­˜ã€å­˜å‚¨ã€å»¶è¿Ÿå’ŒIOå¸¦å®½æœ‰åŠ¨æ€éœ€æ±‚ã€‚éšç€ç®—æ³•çš„æ€§è´¨å’Œå¤æ‚æ€§å‘ç”Ÿå˜åŒ–ï¼Œå·¥ä½œè´Ÿè½½å’ŒæœåŠ¡ç»è¿‡ä¼˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å·²å®‰è£…ä¸”ä¸å˜çš„å…¬å…±å’Œç§æœ‰äº‘ç¡¬ä»¶åŸºç¡€è®¾æ–½æ¥äº¤ä»˜ã€‚</p><p>ITå·¥ä½œè´Ÿè½½å†æ¥éƒ½æ˜¯é’ˆå¯¹é«˜å³°éœ€æ±‚è¿›è¡Œé…ç½®çš„ã€‚æ¶æ„å¸ˆå’ŒæœåŠ¡è§„åˆ’äººå‘˜é¢„æµ‹åœ¨ä¸€æ®µæ—¶é—´å†…æä¾›ç»™å®šæœåŠ¡çº§åˆ«æ‰€éœ€çš„æœ€å¤§èµ„æºéœ€æ±‚ï¼Œç„¶åç¡®ä¿æä¾›é€‚å½“çš„å³°å€¼çº§åˆ«ï¼ˆä»¥åŠä¸€äº›é¢å¤–çš„ç¼“å†²åŒºï¼‰è®¡ç®—ã€å†…å­˜ã€å­˜å‚¨å’Œç½‘ç»œèµ„æºç»™å®šæœåŠ¡å™¨æˆ–æœåŠ¡å™¨æœºæ¶ä¸Šçš„å·¥ä½œè´Ÿè½½ï¼ŒåŒ…æ‹¬æ»¡è¶³å³°å€¼æ°´å¹³éœ€æ±‚çš„åŠŸç‡ã€‚ç„¶è€Œï¼Œè¿™é€šå¸¸æ„å‘³ç€èµ„æºçš„ä¸¥é‡è¿‡åº¦é…ç½®ï¼Œå› ä¸ºå·¥ä½œè´Ÿè½½éœ€æ±‚å¾ˆå°‘åœ¨å³°å€¼æ°´å¹³è¿è¡Œã€‚åœ¨æœ€è¿‘çš„å¤§éƒ¨åˆ†æ—¶é—´é‡Œï¼Œè¯¥è¡Œä¸šçš„æ•´ä½“æ•°æ®ä¸­å¿ƒèµ„æºåˆ©ç”¨ç‡éƒ½éå¸¸ä½ï¼ˆä½äº50%ï¼Œå¹¶ä¸”é€šå¸¸è¿œä½äº2ï¼‰ã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè™šæ‹ŸåŒ–å’Œäº‘åŸºç¡€è®¾æ–½æä¾›äº†é‡è¦çš„åŠŸèƒ½ï¼Œé€šè¿‡å¢å¼ºçš„è‡ªåŠ¨åŒ–ã€å·¥ä½œè´Ÿè½½è¿ç§»å’Œæ”¾ç½®ä»¥åŠå…¶ä»–æŠ€æœ¯ï¼Œå¸®åŠ©èŠ‚çœç”šè‡³å›æ”¶å› è¿‡åº¦é…ç½®å’Œåˆ©ç”¨ä¸è¶³è€ŒæŸå¤±çš„èµ„æºã€‚è®¸å¤šäººè®¤ä¸ºè¿™å°†å¤§å¤§å‡å°‘æ•°æ®ä¸­å¿ƒæœåŠ¡å™¨åŸºç¡€è®¾æ–½çš„TAMã€‚è¿™äº§ç”Ÿäº†å®Œå…¨ç›¸åçš„æ•ˆæœï¼Œäº§ç”Ÿäº†å¯¹æ›´é«˜å¯†åº¦CPUè®¡ç®—å¹³å°çš„éœ€æ±‚ï¼Œå› ä¸ºæé«˜æ•ˆç‡å¯ä»¥èŠ‚çœå…¶ä»–æ–¹é¢çš„æˆæœ¬ï¼Œå¦‚ç”µæºå’Œè¿è¡Œç®¡ç†ã€‚å› æ­¤ï¼Œå¼ºåŒ–äº†æ°æ–‡æ–¯æ‚–è®ºâ€œèµ„æºæ•ˆç‡çš„æé«˜å°†å¯¼è‡´èµ„æºæ¶ˆè€—çš„å¢åŠ è€Œä¸æ˜¯å‡å°‘â€ã€‚</p><p>äººä»¬å¯¹æé«˜çµæ´»æ€§å’Œæ•ˆç‡çš„æ¸´æœ›ä»æœªå¦‚æ­¤å¼ºçƒˆï¼Œä¸šç•Œä¸€ç›´åœ¨è®¨è®ºå¦‚ä½•å®ç°å¯ç»„åˆçš„â€œæœªæ¥æ•°æ®ä¸­å¿ƒâ€ã€‚ä¸‹ä¸€ä»£æ•°æ®ä¸­å¿ƒå¯¹èµ„æºçš„ä½¿ç”¨è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬é‡æ–°æ€è€ƒå¦‚ä½•ä¸ä»…åœ¨æ•°æ®ä¸­å¿ƒçº§åˆ«å…±äº«èµ„æºï¼Œè€Œä¸”è¿˜è·¨æœºæ¶å…±äº«èµ„æºç”šè‡³åœ¨æœåŠ¡å™¨å†…ã€‚</p><h2 id="CXLæ¶æ„æ•°æ®ä¸­å¿ƒçš„æ¼”å˜"><a href="#CXLæ¶æ„æ•°æ®ä¸­å¿ƒçš„æ¼”å˜" class="headerlink" title="CXLæ¶æ„æ•°æ®ä¸­å¿ƒçš„æ¼”å˜"></a>CXLæ¶æ„æ•°æ®ä¸­å¿ƒçš„æ¼”å˜</h2><p>CXLå·²æˆä¸ºä¸€ç§ç»æµé«˜æ•ˆã€çµæ´»ä¸”å¯æ‰©å±•çš„æ¶æ„è§£å†³æ–¹æ¡ˆï¼Œå°†å¡‘é€ æœªæ¥çš„æ•°æ®ä¸­å¿ƒã€‚ CXLå°†æ”¹å˜æœåŠ¡å™¨å’Œå…‰çº¤äº¤æ¢æœºçš„ä¼ ç»Ÿæœºæ¶å’Œå †æ ˆæ¶æ„åœ¨æ•°æ®ä¸­å¿ƒçš„éƒ¨ç½²æ–¹å¼ã€‚æ‹¥æœ‰ç”±CPUã€å†…å­˜ã€ç½‘ç»œå’Œå­˜å‚¨ç»„ä»¶ç»„æˆçš„ä¸“ç”¨å›ºå®šèµ„æºçš„ä¸“ç”¨æœåŠ¡å™¨å°†è®©ä½äºæ›´çµæ´»å’Œå¯æ‰©å±•çš„æ¶æ„ã€‚å¦‚æœæœºæ¶ä¸­çš„æœåŠ¡å™¨ä¸ç½‘ç»œã€å­˜å‚¨å’Œè®¡ç®—çš„å›ºå®šèµ„æºäº’è¿ï¼Œå°±èƒ½é€šè¿‡è½¯ä»¶ç®¡ç†åŸºç¡€è®¾æ–½åŠ¨æ€ç»„åˆï¼Œä»¥æ»¡è¶³äººå·¥æ™ºèƒ½å’Œæ·±åº¦å­¦ä¹ ç­‰ç°ä»£å’Œæ–°å…´å·¥ä½œè´Ÿè½½çš„éœ€æ±‚ã€‚</p><p>ä¸šç•Œä¸€ç›´å…³æ³¨å¯é€šè¿‡å…·æœ‰å†…å­˜è®¿é—®åŠŸèƒ½çš„CXLè®¾å¤‡ï¼ˆå¦‚CXLè¿æ¥å†…å­˜è®¾å¤‡ï¼‰é‡Šæ”¾çš„æ½œåŠ›ã€‚å†…å­˜é™„åŠ èŠ‚ç‚¹æä¾›é«˜å®¹é‡å†…å­˜æ‰©å±•ï¼Œå¯ç”¨äºå¯†é›†å‹æœåŠ¡å™¨å·¥ä½œè´Ÿè½½ï¼Œå¹¶å…·æœ‰å¢åŠ çš„å†…å­˜å¸¦å®½ã€ä½å»¶è¿Ÿå’Œå†…å­˜ä¸€è‡´æ€§ï¼Œä»¥å®ç°å¼‚æ„è®¡ç®—/å¤„ç†ï¼Œå¹¶å®ç°å†…å­˜åŸºç¡€è®¾æ–½çš„åˆ†å±‚ã€‚å†…å­˜åˆ†å±‚çš„å¼•å…¥æ–¹å¼ä¸è¿‡å»å‡ åå¹´å­˜å‚¨åˆ†å±‚çš„å¼•å…¥æ–¹å¼å¤§è‡´ç›¸åŒï¼Œæœ€ç»ˆå°†åŒ…æ‹¬ç›´è¿å†…å­˜æ‰©å±•ã€å†…å­˜æ± å’Œå†…å­˜å…±äº«ã€‚</p><p>æ•°æ®ä¸­å¿ƒå°†æ›´åŠ ä»¥å†…å­˜ä¸ºä¸­å¿ƒï¼Œèƒ½å¤ŸåŠ¨æ€ç»„åˆå…·æœ‰é«˜Terabyteå­—èŠ‚ï¼ˆTBï¼‰ä»¥ä¸Šå†…å­˜æ± çš„æœåŠ¡å™¨ï¼Œä»è€Œä½¿æ›´å¤šåº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨å†…å­˜ä¸­è¿è¡Œã€‚å­˜å‚¨çº§å†…å­˜æˆä¸ºæ–°çš„ä¸»è¦æ´»åŠ¨æ•°æ®å­˜å‚¨å±‚ï¼ŒNANDå’Œç£ç›˜é©±åŠ¨å™¨ç”¨äºåœ¨å¤šä¸ªä¸»æœºä¹‹é—´å…±äº«çƒ­æ•°æ®å’Œéæ´»åŠ¨æ•°æ®ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/65fa682280034b73a0741413825ee9e2.png"></p><p>æœ€ç»ˆï¼Œæ•°æ®ä¸­å¿ƒå°†å‡çº§åˆ°æ‰€æœ‰æœåŠ¡å™¨å…ƒç´ å®Œå…¨åˆ†è§£ï¼ˆåŒ…æ‹¬è®¡ç®—ã€å†…å­˜ã€ç½‘ç»œå’Œå­˜å‚¨ï¼‰çš„çŠ¶æ€ã€‚å¤§è§„æ¨¡éƒ¨ç½²çš„å®¹å™¨å’Œå¾®æœåŠ¡å°†æ¨åŠ¨åŠ¨æ€é…ç½®æ‰€éœ€çš„åº•å±‚èµ„æºï¼Œä»¥å®ç°å…·æœ‰<strong>å¹³è¡¡è®¡ç®—å’Œå†…å­˜æ¯”ç‡</strong>ä¸”æ— æ€§èƒ½æŸå¤±çš„ä¼˜åŒ–è§£å†³æ–¹æ¡ˆã€‚å€ŸåŠ©CXLï¼Œéšç€å¯ç»„åˆæ€§ç®¡ç†è½¯ä»¶çš„å‡ºç°ï¼ŒæŒ‰éœ€é…ç½®ä¸­ä½¿ç”¨çš„æœåŠ¡å’Œåº•å±‚ç¡¬ä»¶çš„éƒ¨ç½²å°†æ˜¾å¾—æ— ç¼ä¸”å¿«é€Ÿï¼Œä»è€Œåœ¨å¼‚æ„ç¯å¢ƒä¸­çš„å³æœåŠ¡æ¨¡å‹ä¸­åˆ›é€ æ›´é«˜çš„æ•ˆç‡ã€‚</p><h2 id="CXL-å¦‚ä½•è§£å†³å†…å­˜å¢™é—®é¢˜"><a href="#CXL-å¦‚ä½•è§£å†³å†…å­˜å¢™é—®é¢˜" class="headerlink" title="CXL å¦‚ä½•è§£å†³å†…å­˜å¢™é—®é¢˜"></a>CXL å¦‚ä½•è§£å†³å†…å­˜å¢™é—®é¢˜</h2><p>ç”¨äºå†…å­˜è®¾å¤‡å‡èšå’Œä¸€è‡´æ€§çš„CXLåè®®å±æ€§å°†é€šè¿‡æ”¯æŒå°†å†…å­˜æ‰©å±•åˆ°æœåŠ¡å™¨DIMMæ’æ§½ä¹‹å¤–æ¥è§£å†³â€œå†…å­˜å¢™â€é—®é¢˜ã€‚CXLå†…å­˜æ‰©å±•æ˜¯ä¸€ç§åŒç®¡é½ä¸‹çš„æ–¹æ³•ï¼Œé€šè¿‡å¢åŠ å¸¦å®½æ¥å…‹æœâ€œå†…å­˜å¢™â€é—®é¢˜ï¼Œå¹¶ä¸ºæ”¯æŒCXLçš„æœåŠ¡å™¨å¢åŠ æ•°æ®å¯†é›†å‹å·¥ä½œè´Ÿè½½çš„å®¹é‡ã€‚</p><p>å¯¹äºå…¸å‹çš„å·¥ä½œè´Ÿè½½ï¼Œä¿æŒæ¯ä¸ªCPUæ ¸å¿ƒçš„å¸¦å®½ä»¥è·å¾—ç†æƒ³çš„æ•ˆç‡éå¸¸é‡è¦ã€‚éšç€æ ¸å¿ƒæ•°é‡è¿…é€Ÿå¢åŠ ï¼Œå¸¦å®½ä¼šå‡ºç°ä¸è¶³ï¼ˆå‚è§è¡¨ 1ï¼‰ã€‚ç›´æ¥è¿æ¥CXLå†…å­˜æ‰©å±•å…è®¸æœåŠ¡å™¨å¹³å°è¿›è¡Œæ‰©å±•å¹¶ç¼©å°é¢å¤–å¸¦å®½çš„å·®è·ä»¥ä¿æŒå¹³è¡¡ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/aacf6242525244268488b272ffbfa75f.png"></p><p>å¦ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„å› ç´ æ˜¯ï¼Œéšç€æ ¸å¿ƒæ•°é‡çš„å¢åŠ ï¼Œæ¯ä¸ªæ ¸å¿ƒçš„å®¹é‡ä¼šå‡å°‘ã€‚åº”ç”¨ç¨‹åºçš„å·¥ä½œè´Ÿè½½éœ€æ±‚ä¸æ–­å¢é•¿ï¼Œéœ€è¦å¿«é€Ÿåˆ†ææ”¶é›†çš„æ•°æ®å¹¶å°†ç»“æœç”¨äºæœ‰ç”¨çš„ä¸šåŠ¡æ´å¯Ÿã€‚è¿™äº›é«˜ä»·å€¼å·¥ä½œè´Ÿè½½ï¼ˆå³<strong>æœºå™¨å­¦ä¹ ã€NLPã€è®¡ç®—æœºè§†è§‰ã€æ¨èç³»ç»Ÿã€å†…å­˜æ•°æ®åº“</strong>ç­‰ï¼‰å¯ä»¥é€šè¿‡æ¯ä¸ªç³»ç»Ÿä¸­æ›´é«˜çº§åˆ«çš„å†…å­˜æ¥ç»æµåœ°è¿è¡Œã€‚CXLå†…å­˜æ¨¡å—å¯ä»¥ç›´æ¥æ’å…¥æœåŠ¡å™¨ï¼Œä¸ºå¤„ç†å™¨æä¾›è¶…å‡ºç›´æ¥è¿æ¥å†…å­˜é€šé“çš„æ›´å¤šå¸¦å®½å’Œå®¹é‡ï¼Œå¹¶ä¸”<strong>å»¶è¿Ÿæ—¶é—´ä¸åŒæ’æ§½æœåŠ¡å™¨ä¸­å¤„ç†å™¨ä¹‹é—´çš„NUMAé“¾è·¯ç›¸å½“</strong>ã€‚</p><h2 id="CXLå¦‚ä½•åº”å¯¹Iâ€‹â€‹Tæ•ˆç‡å’Œå¯æŒç»­å‘å±•æŒ‘æˆ˜"><a href="#CXLå¦‚ä½•åº”å¯¹Iâ€‹â€‹Tæ•ˆç‡å’Œå¯æŒç»­å‘å±•æŒ‘æˆ˜" class="headerlink" title="CXLå¦‚ä½•åº”å¯¹Iâ€‹â€‹Tæ•ˆç‡å’Œå¯æŒç»­å‘å±•æŒ‘æˆ˜"></a>CXLå¦‚ä½•åº”å¯¹Iâ€‹â€‹Tæ•ˆç‡å’Œå¯æŒç»­å‘å±•æŒ‘æˆ˜</h2><p>è·¨åº”ç”¨å‚ç›´é¢†åŸŸçš„å„ç§å·¥ä½œè´Ÿè½½å¯¹è®¡ç®—æ“ä½œã€å†…å­˜å®¹é‡ã€å¸¦å®½å’Œå»¶è¿Ÿé«˜åº¦æ•æ„Ÿã€‚åœ¨äº‘ã€ä¼ä¸šæˆ–è¾¹ç¼˜æ•°æ®ä¸­å¿ƒçš„ä¼ ç»Ÿæœºæ¶æœåŠ¡å™¨ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºå¿…é¡»æ»¡è¶³æœåŠ¡çº§åˆ«åè®®ï¼ˆSLAï¼‰ã€‚ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯å°†è¿™äº›ç±»å‹çš„åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½åˆ†å¸ƒåˆ°å¤šä¸ªç³»ç»Ÿä¸Šã€‚æ„å»ºITåŸºç¡€è®¾æ–½å¹¶ä¸æ€»æ˜¯éµå¾ªç®€å•çš„ç»éªŒæ³•åˆ™æ¥å®ç°è®¡ç®—å’Œè®¾å¤‡èµ„æºä¹‹é—´çš„ç³»ç»Ÿå¹³è¡¡ã€‚å¹³è¡¡è¿™äº›èµ„æºå–å†³äºå·¥ä½œè´Ÿè½½ï¼Œè¿™äº›å·¥ä½œè´Ÿè½½å¯ä»¥æ˜¯è®¡ç®—é™åˆ¶ã€å†…å­˜é™åˆ¶æˆ–IOé™åˆ¶ã€‚</p><p>åŸºäºCXLçš„ç³»ç»Ÿçš„åˆå§‹éƒ¨ç½²æä¾›äº†æ€§èƒ½å’Œå®¹é‡çš„æ‰©å±•é€‰é¡¹ï¼Œä»¥åŒ¹é…åŸºäºå·¥ä½œè´Ÿè½½éœ€æ±‚çš„è®¡ç®—èµ„æºçš„æ‰©å±•ã€‚å†…å­˜ã€å­˜å‚¨ã€ç½‘ç»œå’Œéšç€å¤–å½¢å’Œè¿æ¥çš„æ ‡å‡†åŒ–ï¼ŒåŠ é€Ÿå™¨æˆä¸ºå¯äº’æ¢çš„æ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®å·¥ä½œè´Ÿè½½éœ€æ±‚æ¥ç»„åˆæœåŠ¡å™¨ã€‚è¿™ç§æ–¹æ³•å…è®¸æœåŠ¡å™¨åˆ¶é€ å•†ï¼ˆåŒ…æ‹¬äº‘æä¾›å•†ï¼‰å‡å°‘ä»–ä»¬éœ€è¦å¼€å‘å’Œç»´æŠ¤çš„æœåŠ¡å™¨SKUçš„æ•°é‡ï¼Œä»¥æ»¡è¶³å…¶å®¢æˆ·ç¾¤çš„æ— æ•°åº”ç”¨ç¨‹åºã€‚å®ƒè¿˜å¯ä»¥å¸®åŠ©ITç®¡ç†å‘˜æ­£ç¡®è°ƒæ•´å…·æœ‰è¶³å¤Ÿèµ„æºçš„æœåŠ¡å™¨çš„å¤§å°ï¼Œä»¥å‡å°‘å•ä¸ªå·¥ä½œè´Ÿè½½å¿…é¡»åˆ†å¸ƒçš„æœåŠ¡å™¨æ•°é‡ï¼Œä»è€Œæé«˜æ•ˆç‡å’Œæ€§èƒ½ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/a8ca37be3e8a473e81e8b4f6dffe46a3.png"></p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒCXLæ¶æ„çš„ä»·å€¼å°†æ‰©å±•åˆ°æœºæ¶ï¼Œä»è€Œå®ç°å¯ç»„åˆæ€§ã€‚å¯ç»„åˆæ€§æ˜¯æŒ‡åœ¨æ”¯æŒä¸€ä¸ªæˆ–å¤šä¸ªå·¥ä½œè´Ÿè½½çš„ä¸€å°æˆ–å¤šå°æœåŠ¡å™¨ä¸­æ›´çµæ´»åœ°é…ç½®å†…å­˜ä¸è®¡ç®—èµ„æºæ¯”ç‡çš„èƒ½åŠ›ã€‚èµ„æºå¹³è¡¡å¯ä»¥é€šè¿‡å†…å­˜æ‰©å±•ã€å†…å­˜æ± æˆ–å†…å­˜å…±äº«æ¥å®ç°ã€‚åœ¨æœºæ¶ä¸Šï¼Œæ¨ªå‘æ‰©å±•æ–¹æ³•å…è®¸æ ¹æ®åº”ç”¨ç¨‹åºçš„è¦æ±‚åŠ¨æ€åˆ†é…èµ„æºæ± ï¼ˆè®¡ç®—ã€ç½‘ç»œã€å†…å­˜ã€å­˜å‚¨å’ŒIOï¼‰å¹¶è¿›è¡Œæ— ç¼é›†æˆã€‚å½“å®ä¾‹é€šè¿‡ä½¿ç”¨æœºæ¶å†…æœ¬æœºè®¾å¤‡çº§å‘ç°çš„ç»„åˆç®¡ç†è½¯ä»¶ä¸Šçº¿æ—¶ï¼Œè®¡ç®—ã€å†…å­˜ã€ç½‘ç»œå’Œå­˜å‚¨è¢«åˆ†é…ç»™åº”ç”¨ç¨‹åºæˆ–å¾®æœåŠ¡ã€‚åœ¨é«˜å³°éœ€æ±‚æœŸé—´ï¼Œå¯ä»¥ä¸ºåº”ç”¨ç¨‹åºåŠ¨æ€åˆ†é…é¢å¤–çš„èµ„æºä»¥æ»¡è¶³SLAã€‚å½“åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½éœ€æ±‚ç¼“å’Œæ—¶ï¼Œå¯ä»¥é‡Šæ”¾é¢å¤–çš„èµ„æºå¹¶å°†å…¶é‡æ–°åˆ†é…ç»™å…¶ä»–æœåŠ¡ã€‚èµ„æºå…±äº«æˆ–æ± æä¾›äº†æ›´é«˜çš„åˆ©ç”¨ç‡ï¼Œè€Œæ— éœ€è¿‡åº¦é…ç½®ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ„å‘³ç€æ›´é«˜çš„æ€§èƒ½ã€é™ä½çš„è½¯ä»¶å †æ ˆå¤æ‚æ€§å’Œæ›´ä½çš„æ€»ä½“ç³»ç»Ÿæˆæœ¬ã€‚</p><p>å½“ç„¶ï¼Œå°†å¤šå°‘å…±äº«ï¼ˆå› æ­¤å¯ç»„åˆï¼‰èµ„æºèšåˆåˆ°ä»»ä½•ç»™å®šå·¥ä½œè´Ÿè½½æ€»æ˜¯å­˜åœ¨é™åˆ¶ï¼Œå› ä¸ºå®¢æˆ·éœ€è¦è€ƒè™‘å®‰å…¨å’Œå®¹é”™å› ç´ ä»¥åŠå·¥ä½œè´Ÿè½½æ•ˆç‡å’Œåˆ©ç”¨ç‡é—®é¢˜ã€‚å°½ç®¡å†…å­˜æ± åˆ›å»ºäº†æ»¡è¶³å³°å€¼æ°´å¹³æ‰€éœ€çš„èµ„æºï¼Œä½†85%çš„ç»„ç»‡éœ€è¦99.99%çš„æ­£å¸¸è¿è¡Œæ—¶é—´æ‰èƒ½æ»¡è¶³SLAï¼ˆservice level agreementsæœåŠ¡çº§åè®®ï¼‰ï¼Œè¿™å¿…é¡»åœ¨æœºæ¶å†…çš„å†…å­˜æ± ä¸­è€ƒè™‘åˆ°ï¼Œå³ä½¿åœ¨æ± åŒ–CXLè¿æ¥å†…å­˜æ—¶ï¼Œä¹Ÿä¼šå¯¼è‡´ä¸€å®šç¨‹åº¦çš„è¶…é¢è®¢é˜…è¢«é‡‡çº³ã€‚æ­¤å¤–ï¼Œè™½ç„¶å†…å­˜æ± å¯ä»¥ç¼“è§£è¿‘æœŸå†…å­˜è¿‡åº¦é…ç½®çš„é—®é¢˜ï¼Œä½†å¿…é¡»ä»”ç»†è€ƒè™‘å†…å­˜æ± æ‰©å±•æ•…éšœï¼Œä»¥é¿å…æ•´ä¸ªæœºæ¶çš„æœåŠ¡å™¨æ•…éšœï¼Œä»è€Œé©±åŠ¨å†—ä½™ä»¥é¿å…åœæœºã€‚ä¸€ç§å—åˆ°é’ççš„æ–¹æ³•æ˜¯åˆ›å»ºèµ„æºåŒºæˆ–Podï¼Œåœ¨æœ‰æ•ˆä½¿ç”¨å…±äº«èµ„æºä¸æœ€å¤§é™åº¦åœ°å‡å°‘æœåŠ¡ä¸­æ–­çš„å½±å“ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œå¹¶æä¾›é€‚å½“çš„å®‰å…¨æ€§å’Œåˆè§„æ€§åŠŸèƒ½ã€‚</p><p>æ•°æ®ä¸­å¿ƒæœ€å¤§çš„ä¸¾æªä¹‹ä¸€æ˜¯æ¨åŠ¨net-zeroæ’æ”¾ã€‚æ•ˆç‡æ˜¯æ•°æ®ä¸­å¿ƒå¯æŒç»­å‘å±•æ–¹ç¨‹ä¸­çš„ä¸€ä¸ªå…³é”®å˜é‡ã€‚å°±åƒæœåŠ¡å™¨è™šæ‹ŸåŒ–ä¸€æ ·ï¼Œæ‰©å¤§è®¾å¤‡å…±äº«å’Œèµ„æºæ± é€šå¸¸ä¼šå‡å°‘æ•°æ®ä¸­å¿ƒçš„è¿‡åº¦é…ç½®ï¼Œä½†è§„æ¨¡æ›´å¤§ã€‚å°†ä¸“ç”¨è®¾å¤‡èµ„æºè½¬æ¢ä¸ºå…±äº«æ± èµ„æºå¹¶å°†å…¶è¿›è¡ŒåŠ¨æ€åˆ†é…å¯é™ä½è®¡ç®—èŠ‚ç‚¹çš„åŠŸè€—ã€‚ä¸ä»…å‡å°‘äº†æ¯ä¸ªè®¡ç®—èŠ‚ç‚¹çš„åŠŸè€—ï¼Œè¿˜æ”¹å–„äº†æ°”æµå’Œçƒ­é‡ï¼Œä»¥å®ç°æœºæ¶å†…æ›´é«˜æ•ˆçš„å†·å´ï¼Œå‡å°‘å¯¹HVACç³»ç»Ÿçš„éœ€æ±‚ï¼Œä»è€Œè¿›ä¸€æ­¥é™ä½æ•°æ®ä¸­å¿ƒçš„åŠŸè€—ã€‚</p><h2 id="CXLå¯¹DRAM-bitéœ€æ±‚å¢é•¿çš„å½±å“"><a href="#CXLå¯¹DRAM-bitéœ€æ±‚å¢é•¿çš„å½±å“" class="headerlink" title="CXLå¯¹DRAM bitéœ€æ±‚å¢é•¿çš„å½±å“"></a>CXLå¯¹DRAM bitéœ€æ±‚å¢é•¿çš„å½±å“</h2><p>ç°åœ¨è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹CXLå°†å¦‚ä½•å½±å“DRAM bitéœ€æ±‚å¢é•¿ã€‚</p><p>CXLæ”¯æŒçš„æ± åŒ–å’ŒCXLæ”¯æŒçš„å†…å­˜å¸¦å®½æ‰©å±•å¯¹æ¯”ç‰¹éœ€æ±‚å¢é•¿çš„å‡€å½±å“å°†æ˜¯ç§¯æçš„ã€‚æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬é¢„è®¡CXLå°†åœ¨ä¸­çŸ­æœŸå†…å¸®åŠ©ç»´æŒæ•°æ®ä¸­å¿ƒæ¯”ç‰¹20%çš„é«˜å¢é•¿ã€‚</p><p>è¿‘æœŸCXLå†…å­˜å¸‚åœºå–å†³äºæ”¯æŒCXLçš„æœåŠ¡å™¨å¹³å°å‘å¹¿æ³›è¡Œä¸šæ¨å‡ºçš„é€Ÿåº¦ã€‚ç”±äºCXLå†…å­˜æ˜¯ä¸€ä¸ªæ–°å…´å¸‚åœºï¼ŒCXLä¸Šçš„å†…å­˜å¢é•¿å°†éå¸¸å¿«ï¼Œä½†ç›´åˆ°2026å¹´æ‰ä¼šå¯¹æ•´ä¸ªDRAMå¸‚åœºäº§ç”Ÿå·¨å¤§å½±å“ã€‚Yole Intelligenceå¸‚åœºç ”ç©¶å°ç»„é¢„æµ‹ï¼Œåˆ°2028å¹´ï¼ŒCXLä¸Šçš„DRAM bitéœ€æ±‚å°†å¢é•¿åˆ°æ¥è¿‘100è‰¾æ¯”ç‰¹ã€‚Yole Intelligence é¢„æµ‹ï¼Œåˆ°2028å¹´ï¼ŒCXLä½å°†å æœåŠ¡å™¨DRAMä½æ€»æ•°çš„31%ã€‚</p><p>å¡å†…åŸºæ¢…éš†å¤§å­¦/å¾®è½¯æœ€è¿‘å‘è¡¨çš„ä¸€ç¯‡è®ºæ–‡è®¨è®ºäº†æ± åŒ–å¦‚ä½•å½±å“CXL TCOèŠ‚çœã€‚è¯¥è®ºæ–‡æå‡ºäº†ä¸€ç§åŸºäºCXLçš„æ± è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å°†ç»™å®šè¶…å¤§è§„æ¨¡å·¥ä½œè´Ÿè½½é›†çš„å†…å­˜éœ€æ±‚å‡å°‘9-10%ï¼Œå¯ä»¥èŠ‚çœ4-5%çš„TCOã€‚æ•°æ®ä¸­å¿ƒDRAMä½å¢é•¿å¤åˆå¹´å¢é•¿ç‡ï¼ˆCAGRï¼‰ä»ä¿æŒåœ¨20%çš„èŒƒå›´å†…ï¼Œå…¶ä¸­åŒ…æ‹¬CXLçš„å½±å“ã€‚å³ä½¿æ·»åŠ äº†å†…å­˜æ± ï¼Œè¿™å¯¹æ•´ä¸ªæ•°æ®ä¸­å¿ƒDRAMä½å¢é•¿çš„å½±å“ä¹Ÿå¾ˆå°ã€‚é€šè¿‡ç²—ç•¥æ•°å­¦è®¡ç®—ï¼Œå°†9-10%çš„å‡å°‘é‡ä¹˜ä»¥20-30%çš„é¢„æœŸå¤åˆå¹´å¢é•¿ç‡å³å¯å®ç°è¿™ä¸€æ•ˆæœã€‚ç†è®ºä¸Šæœ€åæƒ…å†µçš„è®¡ç®—è¡¨æ˜ï¼Œç”±äºåˆå¹¶ï¼ŒæŸå¤±ä¼šå‡å°‘2-3ä¸ªç™¾åˆ†ç‚¹ã€‚å½“ç„¶ï¼Œè¿™ç§ç†è®ºåœºæ™¯æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæ± åŒ–ä¼´éšç€å»¶è¿Ÿæƒè¡¡å’Œè½¯ä»¶ä¼˜åŒ–è¦æ±‚ï¼Œå¹¶ä¸”<strong>æ± åŒ–å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰å·¥ä½œè´Ÿè½½</strong>ã€‚å…¶æ¬¡ï¼Œæ± çš„é€‚ç”¨æ€§å’Œæ‰©å±•å—åˆ°ä¸€å®šç¨‹åº¦å†—ä½™çš„å®¹é”™éœ€æ±‚ä»¥åŠè·¨å¤šä¸ªæ‰˜ç®¡æœåŠ¡å™¨çº§è”å†…å­˜æ± æ•…éšœçš„é£é™©çš„é™åˆ¶ã€‚æœ€åï¼Œé€æ­¥é‡‡ç”¨CXLä¼šå‡å¼±ä»»ä½•å½±å“ã€‚æ”¯æŒCXLçš„æ± å°†æ— æ³•è§£å†³å½“å‰éCXLæ•°æ®ä¸­å¿ƒå®‰è£…åŸºç¡€çš„é—®é¢˜ã€‚</p><h2 id="CXL-å¯¹è¡Œä¸šæ”¶å…¥çš„å½±å“-TAM-å’Œç¾å…‰çš„è´¢åŠ¡æ¨¡å‹"><a href="#CXL-å¯¹è¡Œä¸šæ”¶å…¥çš„å½±å“-TAM-å’Œç¾å…‰çš„è´¢åŠ¡æ¨¡å‹" class="headerlink" title="CXL å¯¹è¡Œä¸šæ”¶å…¥çš„å½±å“ TAM å’Œç¾å…‰çš„è´¢åŠ¡æ¨¡å‹"></a>CXL å¯¹è¡Œä¸šæ”¶å…¥çš„å½±å“ TAM å’Œç¾å…‰çš„è´¢åŠ¡æ¨¡å‹</h2><p>å†…å­˜çš„æ”¶å…¥TAMå¢é•¿å–å†³äºä½æ•°å’Œä»·æ ¼ï¼Œè€Œä»·æ ¼å–å†³äºä¾›éœ€å¹³è¡¡ã€‚ CXLæ˜¯ä¸€ç§äº’è¿è§£å†³æ–¹æ¡ˆï¼Œå…¶æŠ€æœ¯é‡‡ç”¨æœ¬èº«å¹¶ä¸ä¼šå¢åŠ å¸‚åœºä¾›åº”ã€‚CXLæœ¬èº«ä¸åº”æˆä¸ºè¡Œä¸šä¾›éœ€çš„ç ´åæ€§å› ç´ ï¼Œå®šä»·é¢„è®¡å°†ä¿ƒè¿›TAMçš„å¢é•¿ã€‚åœ¨æŸäº›é…ç½®ä¸­ï¼Œè¿æ¥åˆ°CXLæ¥å£çš„å†…å­˜ä¸æ ‡å‡†å†…å­˜æ’æ§½ç›¸æ¯”æ›´å…·æˆæœ¬æ•ˆç›Šï¼Œä½¿æœåŠ¡å™¨ç³»ç»Ÿçš„æ„å»ºå’Œéƒ¨ç½²è§„æ¨¡è¶…å‡ºé¢„ç®—ç›®æ ‡ã€‚CXLçš„ç¬¬ä¸€ä¸ªç”¨ä¾‹å›´ç»•å•ä¸»æœºé…ç½®çš„å†…å­˜æ‰©å±•ã€‚å†…å­˜æ‰©å±•å¯æ¢å¤å†…å­˜é™åˆ¶å·¥ä½œè´Ÿè½½çš„è®¡ç®—å’Œå†…å­˜ä¹‹é—´çš„å¹³è¡¡ï¼Œå¦åˆ™è¿™äº›å·¥ä½œè´Ÿè½½å°†åˆ†å¸ƒåœ¨å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´ï¼Œå¹¶å°†å†…å­˜ä»è¿™äº›æœåŠ¡å™¨æ•´åˆåˆ°CXLæ‰©å±•æ’æ§½ã€‚èƒ½å¤Ÿæ”¯æŒCXL 1.1+ çš„æ–°å‹æœåŠ¡å™¨å°†äº2023å¹´ä¸Šå¸‚ï¼Œä½†ä¸»è¦ç”¨ä½œCXLæ–°å…´å†…å­˜è§£å†³æ–¹æ¡ˆçš„æ¦‚å¿µéªŒè¯ã€‚çœŸæ­£çš„éƒ¨ç½²å°†äº2024å¹´åº•å¼€å§‹ï¼Œå±Šæ—¶æ”¯æŒCXL 2.0çš„æœåŠ¡å™¨å°†æä¾›æ›´å¤šå†…å­˜æ‰©å±•é€‰é¡¹ï¼Œå¹¶æ ‡å¿—ç€æœåŠ¡å™¨ä¸­å¹³å‡DRAMå†…å®¹é‡å¼€å§‹å¢åŠ ã€‚æˆ‘ä»¬é¢„è®¡è¿™å°†æ˜¯CXLæ¥å£æ”¶å…¥å¢é•¿çš„å¼€å§‹ï¼Œå¹¶é¢„è®¡åˆ°2025å¹´è¯¥å¸‚åœºå°†è¾¾åˆ°20äº¿ç¾å…ƒã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/e31421c95c7f41d4893436c06e38d3f6.png"></p><p>èµ„æºæ‰©å±•æ˜¯CXLæ¼”è¿›çš„ç¬¬ä¸€æ­¥ï¼Œç„¶åå†è½¬å‘å®Œå…¨å¯ç»„åˆæ€§å’Œå†…å­˜æ± ï¼Œæˆ‘ä»¬ç›®å‰é¢„è®¡è¿™å°†åœ¨2026å¹´å¼€å§‹å¢é•¿ã€‚2026å¹´ï¼Œè®¸å¤šæ–°æœåŠ¡å™¨å°†æ”¯æŒCXL 3.0ï¼ŒæœåŠ¡å™¨å¸‚åœºé¢„è®¡å°†å¢é•¿åˆ°2100ä¸‡ä¸ªå•ä½ï¼Œä¸ºåˆ†è§£æä¾›å¿…è¦çš„æ”¯æŒã€‚å½±å“å†…å­˜æ± é‡‡ç”¨ç‡çš„å› ç´ åŒ…æ‹¬CXLäº¤æ¢æœºä»¥åŠå¯ä»¥å¤„ç†åˆ†å±‚å†…å­˜æ± å’Œè·¨å¤šä¸ªä¸»æœºåˆ†é…ä»¥æœ€å¤§é™åº¦å‡å°‘å»¶è¿Ÿçš„è½¯ä»¶ã€‚è¶…å¤§è§„æ¨¡ä¼ä¸šå°†åœ¨çŸ­æœŸå†…æˆä¸ºå†…å­˜æ± æ‰©å±•çš„æ—©æœŸé‡‡ç”¨è€…ã€‚å®ƒä»¬å¾ˆå¯èƒ½åœ¨å•ä¸»æœºå†…å­˜æ‰©å±•å’Œæœºæ¶å†…å†…å­˜æ± ä¹‹é—´å‡åŒ€åˆ†é…å¢é•¿ã€‚æˆ‘ä»¬ä»¥åŠè¡Œä¸šåˆ†æå¸ˆYole Intelligenceé¢„è®¡ï¼Œåˆ°2030å¹´ï¼ŒCXLé™„åŠ å†…å­˜å¸‚åœºå°†è¶…è¿‡200äº¿ç¾å…ƒï¼Œæ•°æ®ä¸­å¿ƒå†…å­˜å¸‚åœºé¢„è®¡å°†è¾¾åˆ°1000äº¿ç¾å…ƒï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å¢é•¿å°†åœ¨2025å¹´ä¹‹åã€‚</p><p>æˆ‘ä»¬å¯¹CXLå½±å“çš„çœ‹æ³•å’Œé¢„æœŸå·²çº³å…¥æˆ‘ä»¬çš„é•¿æœŸæ¨¡å‹å’Œè·¨å‘¨æœŸè´¢åŠ¡æ¨¡å‹ä¸­ï¼Œå› æ­¤å¯¹CXLæŠ€æœ¯é‡‡ç”¨çš„é¢„æœŸä¸åº”æ”¹å˜æŠ•èµ„è€…å¯¹æˆ‘ä»¬è´¢åŠ¡ä¸šç»©çš„é¢„æœŸã€‚</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>CXLæä¾›äº†å¹³è¡¡â€œå†…å­˜å¢™â€é—®é¢˜æ‰€éœ€çš„æ¶æ„ï¼Œå¹¶ä¸ºé€šè¿‡å†…å­˜æ‰©å±•å®ç°ç»æµçš„å†…å­˜è§£å†³æ–¹æ¡ˆæä¾›äº†æ–°çš„å‘é‡ã€‚æ­¤å¤–ï¼ŒCXLçµæ´»ä¸”å¯æ‰©å±•çš„æ¶æ„å¯æé«˜è®¡ç®—å’Œå†…å­˜èµ„æºçš„åˆ©ç”¨ç‡å’Œè¿è¡Œæ•ˆç‡ï¼Œä»¥ä¾¿æ ¹æ®å·¥ä½œè´Ÿè½½éœ€æ±‚çºµå‘æ‰©å±•æˆ–æ¨ªå‘æ‰©å±•èµ„æºã€‚ CXL é™„åŠ å†…å­˜ä¸ºåˆ†å±‚å†…å­˜å­˜å‚¨çš„æ–°é¢†åŸŸæä¾›äº†å·¨å¤§çš„å¢é•¿æœºä¼šï¼Œå¹¶å®ç°äº†ç‹¬ç«‹äºCPUå†…æ ¸çš„å†…å­˜æ‰©å±•ã€‚ CXLå°†æœ‰åŠ©äºç»´æŒæ¯”æ²¡æœ‰å®ƒæ—¶æ›´é«˜çš„DRAM bitå¢é•¿ç‡ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬é¢„è®¡CXLä¸ä¼šå¯¼è‡´DRAM bitå¢é•¿åŠ é€Ÿï¼Œä½†å®ƒå¯¹DRAMå¢é•¿å…·æœ‰å‡€ç§¯æä½œç”¨ã€‚</p><p>ç¾å…‰å¯¹ CXL æŠ€æœ¯çš„æ‰¿è¯ºä½¿å®¢æˆ·å’Œä¾›åº”å•†èƒ½å¤Ÿæ¨åŠ¨å†…å­˜åˆ›æ–°è§£å†³æ–¹æ¡ˆçš„ç”Ÿæ€ç³»ç»Ÿã€‚è¦äº†è§£æœ‰å…³ç¾å…‰å¦‚ä½•å®ç°ä¸‹ä¸€ä»£æ•°æ®ä¸­å¿ƒåˆ›æ–°çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® micron.com/solutions/serverã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Livre blanc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CXL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Characterizing the Performance of Intel Optane Persistent Memory</title>
      <link href="/2023/10/13/Characterizing-the-Performance-of-Intel-Optane-Persistent-Memory/"/>
      <url>/2023/10/13/Characterizing-the-Performance-of-Intel-Optane-Persistent-Memory/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://blog.csdn.net/Tian_pp/article/details/124859309%E8%BF%99%E7%AF%87%E6%80%BB%E7%BB%93%E7%9A%84%E6%9B%B4%E5%8A%A0%E7%BB%86%E8%87%B4%EF%BC%8C%E5%9C%A8%E8%AE%BE%E8%AE%A1%E6%97%B6%E5%8F%AF%E4%BB%A5%E8%80%83%E8%99%91%E8%BF%99%E4%BA%9B%E5%BB%BA%E8%AE%AE">https://blog.csdn.net/Tian_pp/article/details/124859309è¿™ç¯‡æ€»ç»“çš„æ›´åŠ ç»†è‡´ï¼Œåœ¨è®¾è®¡æ—¶å¯ä»¥è€ƒè™‘è¿™äº›å»ºè®®</a></p></blockquote><h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªProceedings of the Seventeenth European Conference on Computer Systems, (EuroSys), 2022</li><li>Characterizing the Performance of Intel Optane Persistent Memoryâ€”â€”â€”â€”A Close Look at its On-DIMM Buffering</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Lingfeng Xiang, Xingsheng Zhao, Jia Rao, Song Jiang, Hong Jiang, å¾·å…‹è¨æ–¯å¤§å­¦é˜¿çµé¡¿åˆ†æ ¡(UTA)</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>æœ€è¿‘çš„ç ”ç©¶[8,13,23,26,30,32,35,36]å‘ç°Optane DCPMMä¸åº”ç®€å•åœ°è¢«è§†ä¸ºé€Ÿåº¦è¾ƒæ…¢çš„æŒä¹…DRAMã€‚ä¸DRAMç›¸æ¯”ï¼ŒOptane DCPMMè¡¨ç°å‡ºå¤æ‚çš„è¡Œä¸ºï¼Œå¹¶ä¸”æ€§èƒ½ä¼šæ ¹æ®è®¿é—®å¤§å°ã€è®¿é—®ç±»å‹å’Œæ¨¡å¼è€Œå‘ç”Ÿå·¨å¤§å˜åŒ–ã€‚</p><p>è¿æ¥Optane DCPMMå’Œé›†æˆå†…å­˜æ§åˆ¶å™¨ï¼ˆiMCï¼‰çš„æ–°DDR-Tåè®®æ”¯æŒå¼‚æ­¥å­˜å‚¨ï¼Œä»¥éšè—é•¿å†™å…¥å»¶è¿Ÿï¼›è€ŒDRAMä½¿ç”¨çš„DDR4åè®®å¯¹äºåŠ è½½å’Œå­˜å‚¨æ˜¯åŒæ­¥çš„ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>ç›®æ ‡æ˜¯äº†è§£DIMMç¼“å†²å¦‚ä½•å½±å“åº”ç”¨ç¨‹åºæ„ŸçŸ¥çš„æ€§èƒ½ã€‚æˆ‘ä»¬ä½¿ç”¨å¾®åŸºå‡†è¯„ä¼°äº†ç°æœ‰çš„ä¸¤ä»£Optane DCPMMï¼Œå¹¶å¾—å‡ºäº†ä»¥ä¸‹ä»¥å‰æœªæŠ¥é“è¿‡çš„å‘ç°ï¼š</p><ul><li>åœ¨å•ç‹¬çš„DIMMè¯»ç¼“å†²åŒºå’Œå†™ç¼“å†²åŒºä¸­å¯¹è¯»å’Œå†™çš„ç®¡ç†æ–¹å¼ä¸åŒã€‚è¯»å–ç¼“å†²åŒºæä¾›æ›´é«˜çš„å¹¶å‘æ€§å’Œæœ‰æ•ˆçš„DIMMé¢„å–ï¼Œä»è€Œå®ç°é«˜è¯»å–å¸¦å®½å’Œå“è¶Šçš„é¡ºåºæ€§èƒ½ï¼Œä½†æ— åŠ©äºéšè—åª’ä½“è®¿é—®å»¶è¿Ÿã€‚å†™å…¥ç¼“å†²åŒºæä¾›çš„å¹¶å‘æ€§æœ‰é™ï¼Œä½†å´æ˜¯æ”¯æŒDDR-Tåè®®ä¸­å¼‚æ­¥å†™å…¥çš„ç®¡é“ä¸­çš„å…³é”®é˜¶æ®µã€‚</li><li>é™¤äº†å†™å…¥åˆå¹¶ä¹‹å¤–ï¼Œå†™å…¥ç¼“å†²åŒºè¿˜æä¾›ä½äºè¯»å–çš„å»¶è¿Ÿå’Œä¸€è‡´çš„å†™å…¥å»¶è¿Ÿï¼Œæ— è®ºå·¥ä½œé›†å¤§å°ã€å†™å…¥ç±»å‹ã€è®¿é—®æ¨¡å¼æˆ–æŒä¹…æ€§æ¨¡å‹å¦‚ä½•ã€‚</li><li>ç¼“å­˜è¡Œè®¿é—®ç²’åº¦å’Œ3D-Xpointåª’ä½“è®¿é—®ç²’åº¦ä¹‹é—´çš„ä¸åŒ¹é…ä¼šå¯¹ CPUç¼“å­˜é¢„å–çš„æœ‰æ•ˆæ€§äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œå¹¶å¯¼è‡´æŒä¹…å†…å­˜å¸¦å®½çš„æµªè´¹ã€‚</li><li>ç”±äºå¼‚æ­¥DDR-Tåè®®ï¼Œç¼“å­˜è¡Œåˆ·æ–°æˆ–æ™®é€šå†™å…¥åœ¨åˆ°è¾¾iMCä¸­çš„å†™å…¥æŒ‚èµ·é˜Ÿåˆ—æ—¶è¿”å›ï¼Œä»¥éšè—è¾ƒé•¿çš„ä»‹è´¨å†™å…¥å»¶è¿Ÿã€‚æ …æ æŒ‡ä»¤å¯¹è¯»å†™æ“ä½œè¿›è¡Œæ’åºä»¥å®ç°å´©æºƒä¸€è‡´æ€§ï¼Œä»…ä¿è¯åˆ·æ–°å…¨å±€å¯è§ï¼Œä½†ä¸ä¸€å®šå®Œæˆã€‚å› æ­¤ï¼Œåœ¨æ …æ æŒ‡ä»¤è¿”å›åè¯»å–æœ€è¿‘åˆ·æ–°çš„ç¼“å­˜è¡Œå¯èƒ½ä¼šç»å†å‡ ä¹ä¸€ä¸ªæ•°é‡çº§çš„å»¶è¿Ÿï¼Œå› ä¸ºè¯»å–éœ€è¦ç­‰å¾…åˆ·æ–°å®Œæˆã€‚</li></ul><div class="note info">ä½†æ˜¯å®é™…åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå»¶è¿Ÿçš„å·®è·å¸¦æ¥çš„æ€§èƒ½å½±å“å¹¶ä¸æ˜¯å¾ˆä¸¥é‡ï¼Œä¸»è¦è¿˜æ˜¯å¸¦å®½å½±å“äº†TPSç³»ç»Ÿååï¼ˆæ¯ç§’å¤„ç†çš„æ•°é‡ï¼‰ï¼Œè™½ç„¶å»¶è¿Ÿå’Œå¸¦å®½æ˜¯æœ‰ç“œè‘›ä¸èƒ½å®Œå…¨åˆ†å¼€çš„ã€‚</div> <h2 id="4-ç»“è®º"><a href="#4-ç»“è®º" class="headerlink" title="4. ç»“è®º"></a>4. ç»“è®º</h2><p>è¿™é‡Œç›´æ¥çºªå½•ä¸€äº›ä¸ªäººæ¯”è¾ƒæ„Ÿå…´è¶£çš„è¿™ç¯‡è®ºæ–‡çš„è§‚å¯Ÿç»“è®ºï¼š</p><p>æµ‹è¯•å°å…è®¸é€šè¿‡BIOSé…ç½®å•ç‹¬å¯ç”¨/ç¦ç”¨è‹±ç‰¹å°”å¯æ‰©å±•å¤„ç†å™¨ä¸­çš„ä¸‰ä¸ªCPUç¼“å­˜é¢„å–å™¨ã€‚æˆ‘ä»¬é¦–å…ˆç¦ç”¨æ‰€æœ‰ä¸‰ä¸ªCPUé¢„å–å™¨ï¼Œä»¥ç ”ç©¶æ˜¯å¦å­˜åœ¨ç‹¬ç«‹äºCPUé¢„å–çš„DIMMé¢„å–æœºåˆ¶ã€‚å›¾6ï¼ˆaï¼‰å’Œï¼ˆeï¼‰æ˜¾ç¤ºï¼Œåœ¨G1å’ŒG2 Optane DCPMMä¸­ï¼ŒOptane DCPMMå’ŒiMCçš„è¯»å–æ¯”ç‡å‡æ¥è¿‘1ï¼Œè¿™è¡¨æ˜æ²¡æœ‰è§‚å¯Ÿåˆ°æ˜æ˜¾çš„DIMMä¸Šé¢„å–æ´»åŠ¨ã€‚ç›¸åï¼Œå½“åˆ†åˆ«ä½¿èƒ½å„ä¸ªCPUé¢„å–å™¨æ—¶ï¼ŒDCPMMçš„è¯»å–æ¯”ç‡ä¸iMCçš„è¯»å–æ¯”ç‡ä¸åŒã€‚æ ¹æ®WSSï¼Œæ¯ä¸ªå›¾ä¸­éƒ½æœ‰ä¸‰ä¸ªåŒºåŸŸã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/303687a65e5d422588e1d496884118e5.png"></p><ul><li><p>WSSï¼ˆworking set sizesï¼‰å°äºè¯»ç¼“å†²åŒº16KBã€‚ WSSå®Œå…¨é€‚åˆè¯»ç¼“å†²åŒºï¼Œå¹¶ä¸”CPUé¢„å–å™¨é¢„å–åˆ°è¯»ç¼“å†²åŒºçš„æ‰€æœ‰æ•°æ®éƒ½ä¼šå¯¼è‡´åç»­è®¿é—®ä¸­çš„ç¼“å†²åŒºå‘½ä¸­ã€‚å› æ­¤ï¼Œé™¤äº†ç¨‹åºè¦æ±‚çš„æ•°æ®ä¹‹å¤–ï¼Œä¸ä»ä»‹è´¨åŠ è½½ä»»ä½•é™„åŠ æ•°æ®ã€‚</p></li><li><p>WSSå¤§äºè¯»ç¼“å†²åŒºä½†å°äºL3ç¼“å­˜ã€‚å·¥ä½œé›†ä¸å†é€‚åˆè¯»ç¼“å†²åŒºï¼Œä½†ä»é€‚åˆæœ€åä¸€çº§ç¼“å­˜LLCï¼ˆG1æœåŠ¡å™¨ä¸Šä¸º27.5MBï¼ŒG2æœåŠ¡å™¨ä¸Šä¸º 36MBï¼‰ã€‚è™½ç„¶iMCçš„è¯»å–æ¯”ç‡ä¿æŒä¸º 1ï¼Œå› ä¸ºæ‰€æœ‰CPUé¢„å–æ•°æ®éƒ½ä¼šå¯¼è‡´LLCå‘½ä¸­ï¼Œä½†Optane DCPMMçš„è¯»å–æ¯”ç‡æ˜¾ç€å¢åŠ ã€‚ç”±äºWSSå¤§äºè¯»å–ç¼“å†²åŒºå¤§å°ï¼Œå› æ­¤é¢„å–æ•°æ®åœ¨å‘½ä¸­ç¼“å†²åŒºä¹‹å‰å°±ä¼šè¢«é€å‡ºï¼Œä»è€Œå¯¼è‡´ä»‹è´¨çš„æµªè´¹å’Œé‡å¤åŠ è½½ã€‚</p></li><li><p>WSSå¤§äºL3ç¼“å­˜ã€‚ç”±äºå¤§å‹WSSä¼šè°ƒç”¨é¢‘ç¹çš„CPUé¢„å–ï¼Œå¯¼è‡´LLCæœªå‘½ä¸­ï¼Œå¹¶å¯¼è‡´Optane DCPMMå’ŒiMCä¸­çš„è¯»å–æ¯”ç‡å¢é•¿ã€‚ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„è§‚å¯Ÿç»“æœæ˜¯DCPMMè¯»å–ç‡æ˜æ˜¾é«˜äºiMCã€‚å¯¹äº256Bçš„è®¿é—®å—ï¼ˆå³4ä¸ªé«˜é€Ÿç¼“å­˜è¡Œï¼‰ï¼Œå½“DCPMMä»ä»‹è´¨åŠ è½½æ•´ä¸ªXPLineæ—¶ï¼ŒiMCæœ€å¤šä¼šåœ¨è®¿é—®å—çš„è¾¹ç•Œè¯¯é¢„å–ä¸€ä¸ªé¢å¤–çš„é«˜é€Ÿç¼“å­˜è¡Œã€‚</p></li></ul><p>Optane DIMMä¸­çš„é¢„å–æ´»åŠ¨æ˜¯ç”±CPUé¢„å–å†³å®šçš„ï¼ŒDCPMMä¸­çš„è¯¯é¢„å–æŸå¤±æ¯”DRAMä¸­çš„é¢„å–æŸå¤±ç‰¹åˆ«é«˜ã€‚ CPUé¢„å–ä¸­çš„é«˜é€Ÿç¼“å­˜è¡Œç²’åº¦ä¸åª’ä½“è®¿é—®ç²’åº¦ä¹‹é—´çš„ä¸åŒ¹é…éœ€è¦åœ¨é¢„å–é”™è¯¯é¢„æµ‹æ—¶ä»åª’ä½“åŠ è½½4ä¸ªé«˜é€Ÿç¼“å­˜è¡Œæˆ–ä¸€ä¸ªXPLineã€‚å¯¹äºé’ˆå¯¹XPLineå¤§å°å’Œå¯¹é½æ•°æ®è®¿é—®è¿›è¡Œä¼˜åŒ–çš„å·¥ä½œè´Ÿè½½ï¼ŒCPUé¢„å–å¯èƒ½ä¼šå DCPMMå¸¦å®½çš„ä¸€åŠã€‚å»ºè®®ç¨‹åºå‘˜ä»”ç»†æƒè¡¡åœ¨æ­¤ç±»å·¥ä½œè´Ÿè½½ä¸­é¢„å–çš„å¥½å¤„å’Œæˆæœ¬ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Optane NVDIMMs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>An empirical guide to the behavior and use of scalable persistent memory</title>
      <link href="/2023/10/12/An-empirical-guide-to-the-behavior-and-use-of-scalable-persistent-memory/"/>
      <url>/2023/10/12/An-empirical-guide-to-the-behavior-and-use-of-scalable-persistent-memory/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ª18th USENIX Conference on File and Storage Technologies, (FAST), 2020</li><li>An Empirical Guide to the Behavior and Use of Scalable Persistent Memory</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Jian Yang, Juno Kim, Morteza Hoseinzadeh, Steven Swanson. åŠ å·å¤§å­¦åœ£è¿­æˆˆåˆ†æ ¡UCSD</li><li>Joseph Izraelevitz. ç§‘ç½—æ‹‰å¤šå¤§å­¦åšå°”å¾·åˆ†æ ¡</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>Optane DIMMè¿™ç§æ–°å‹éæ˜“å¤±æ€§DIMMæ”¯æŒå­—èŠ‚ç²’åº¦è®¿é—®ï¼Œè®¿é—®æ—¶é—´ä¸DRAMç›¸å½“ï¼ŒåŒæ—¶è¿˜æä¾›æ–­ç”µåä»å¯ä¿å­˜çš„æ•°æ®å­˜å‚¨ã€‚åœ¨è¿‡å»çš„åå¹´ä¸­ï¼Œç ”ç©¶äººå‘˜æ’°å†™äº†å¤§é‡è®ºæ–‡ï¼Œæå‡ºäº†æ–°çš„ç¼–ç¨‹æ¨¡å‹ã€æ–‡ä»¶ç³»ç»Ÿã€åº“å’Œåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨åˆ©ç”¨NVDIMMæ‰¿è¯ºæä¾›çš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚è¿™äº›è®ºæ–‡å¾—å‡ºç»“è®ºå¹¶åšå‡ºè®¾è®¡å†³ç­–ï¼Œä½†æ²¡æœ‰è¯¦ç»†äº†è§£çœŸæ­£çš„NVDIMMçš„è¡Œä¸ºæ–¹å¼æˆ–è¡Œä¸šå¦‚ä½•å°†å®ƒä»¬é›†æˆåˆ°è®¡ç®—æœºæ¶æ„ä¸­ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ä¸ºè¿™äº›ç³»ç»Ÿçš„ç¨‹åºå‘˜æä¾›è¯¦ç»†çš„æ€§èƒ½æ•°æ®å’Œå…·ä½“æŒ‡å¯¼ï¼Œé‡æ–°è¯„ä¼°ç°æœ‰æŠ€æœ¯çš„æ€§èƒ½ï¼Œå¹¶ä¸ºçœŸæ­£çš„Optane DIMMé‡æ–°ä¼˜åŒ–æŒä¹…å†…å­˜è½¯ä»¶ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>ä»å¾®è§‚å’Œå®è§‚å±‚é¢æ¢è®¨äº†è‹±ç‰¹å°”Optane DIMMçš„æ€§èƒ½ç‰¹æ€§ã€‚ç‰¹åˆ«æ³¨æ„å…¶æ€§èƒ½ç›¸å¯¹äºä¼ ç»ŸDRAMæˆ–è¿‡å»ç”¨äºæ¨¡æ‹ŸNVMçš„å…¶ä»–æ–¹æ³•çš„ç‰¹æ®Šæ€§ã€‚</p><p>æˆ‘ä»¬å‘ç°Optane DIMMçš„å®é™…è¡Œä¸ºæ¯”â€œè¾ƒæ…¢ã€æŒä¹… DRAMâ€æ ‡ç­¾æ‰€æš—ç¤ºçš„æ›´ä¸ºå¤æ‚å’Œç»†è‡´ã€‚ä¸DRAMæ€§èƒ½ç›¸æ¯”ï¼ŒOptane DIMMæ€§èƒ½æ›´ä¾èµ–äºè®¿é—®å¤§å°ã€è®¿é—®ç±»å‹ï¼ˆè¯»ä¸å†™ï¼‰ã€æ¨¡å¼å’Œå¹¶å‘ç¨‹åº¦ã€‚æ­¤å¤–ï¼ŒOptane DIMMçš„æŒä¹…æ€§ä¸è‹±ç‰¹å°”æœ€æ–°å¤„ç†å™¨æä¾›çš„æ¶æ„æ”¯æŒç›¸ç»“åˆï¼Œä¸ºè½¯ä»¶è®¾è®¡äººå‘˜å¸¦æ¥äº†æ›´å¹¿æ³›çš„è®¾è®¡é€‰æ‹©</p><p>æ ¹æ®è¿™äº›è§‚å¯Ÿç»“æœï¼Œæˆ‘ä»¬æ¨èäº†ä¸€ç»„æœ€ä½³å®è·µï¼Œä»¥æœ€å¤§é™åº¦åœ°æé«˜è®¾å¤‡çš„æ€§èƒ½ã€‚éšç€æˆ‘ä»¬åŠ æ·±ç†è§£ï¼Œæˆ‘ä»¬éšåæ¢ç´¢å¹¶é‡æ–°ä¼˜åŒ–æŒä¹…å†…å­˜åº”ç”¨çº§è½¯ä»¶ä¸­ç°æœ‰æŠ€æœ¯çš„æ€§èƒ½ã€‚</p><h2 id="4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="4. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>4. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><h3 id="4-1-Optane-DIMMæ¶æ„è¯¦ç»†ä¿¡æ¯"><a href="#4-1-Optane-DIMMæ¶æ„è¯¦ç»†ä¿¡æ¯" class="headerlink" title="4.1 Optane DIMMæ¶æ„è¯¦ç»†ä¿¡æ¯"></a>4.1 Optane DIMMæ¶æ„è¯¦ç»†ä¿¡æ¯</h3><blockquote><p>å½“PMåšå†…å­˜ï¼šç›´æ¥è®¿é—®ï¼ˆDirect Accessï¼ŒDAXï¼‰ æœºåˆ¶æ˜¯ä¸€ç§æ”¯æŒç”¨æˆ·æ€è½¯ä»¶ç›´æ¥è®¿é—®å­˜å‚¨äºæŒä¹…å†…å­˜ï¼ˆPersistent Memoryï¼ŒPMï¼‰ çš„æ–‡ä»¶çš„æœºåˆ¶ï¼Œç”¨æˆ·æ€è½¯ä»¶æ— éœ€å…ˆå°†æ–‡ä»¶æ•°æ®æ‹·è´åˆ°é¡µé«˜é€Ÿç¼“å­˜ï¼ˆPage Cacheï¼‰</p></blockquote><p> ä¸ä¼ ç»ŸDRAM DIMMä¸€æ ·ï¼ŒOptane DIMMä½äºå†…å­˜æ€»çº¿ä¸Šï¼Œå¹¶è¿æ¥åˆ°å¤„ç†å™¨çš„é›†æˆå†…å­˜æ§åˆ¶å™¨ï¼ˆiMCï¼‰ã€‚è‹±ç‰¹å°”çš„Cascade Lakeå¤„ç†å™¨æ˜¯ç¬¬ä¸€ä¸ªï¼ˆä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªï¼‰æ”¯æŒ Optane DIMMçš„CPUã€‚åœ¨æ­¤å¹³å°ä¸Šï¼Œæ¯ä¸ªå¤„ç†å™¨åŒ…å«ä¸€ä¸ªæˆ–ä¸¤ä¸ªå¤„ç†å™¨èŠ¯ç‰‡ï¼Œå…¶ä¸­åŒ…å«å•ç‹¬çš„NUMAèŠ‚ç‚¹ã€‚æ¯ä¸ªå¤„ç†å™¨èŠ¯ç‰‡æœ‰ä¸¤ä¸ªiMCï¼Œæ¯ä¸ªiMCæ”¯æŒä¸‰ä¸ªé€šé“ã€‚å› æ­¤ï¼Œå¤„ç†å™¨èŠ¯ç‰‡æ€»å…±å¯ä»¥åœ¨å…¶ä¸¤ä¸ªiMCä¸Šæ”¯æŒå…­ä¸ªOptane DIMMã€‚</p><p> ä¸ºäº†ç¡®ä¿æŒä¹…æ€§ï¼ŒiMCä½äºå¼‚æ­¥DRAMåˆ·æ–°ï¼ˆADRï¼‰åŸŸå†…Intelçš„ADRåŠŸèƒ½å¯ç¡®ä¿åˆ°è¾¾ADRåŸŸçš„CPU storesèƒ½å¤Ÿåœ¨ç”µæºæ•…éšœä¸­å¹¸å­˜ä¸‹æ¥ï¼ˆå³ï¼Œå°†åœ¨ä¿æŒæ—¶é—´å†…åˆ·æ–°åˆ°NVDIMMï¼Œ&lt;100 Âµsï¼‰ã€‚ iMCä¸ºæ¯ä¸ª Optane DIMMç»´æŠ¤è¯»å–å’Œå†™å…¥æŒ‚èµ·é˜Ÿåˆ—ï¼ˆRPQå’ŒWPQï¼‰ï¼ˆå›¾1(b)ï¼‰ï¼Œå¹¶ä¸”ADRåŸŸåŒ…æ‹¬WPQã€‚ä¸€æ—¦æ•°æ®åˆ°è¾¾WPQï¼ŒADRå°†ç¡®ä¿iMCåœ¨ç”µæºæ•…éšœæ—¶å°†æ›´æ–°åˆ·æ–°åˆ°3D-XPointä»‹è´¨ã€‚ADRåŸŸä¸åŒ…æ‹¬å¤„ç†å™¨ç¼“å­˜ï¼Œå› æ­¤å­˜å‚¨ä»…åœ¨åˆ°è¾¾WPQåæ‰ä¼šæŒä¹…ã€‚</p><p> <strong>iMCä½¿ç”¨é«˜é€Ÿç¼“å­˜çº¿ï¼ˆ64å­—èŠ‚ï¼‰ç²’åº¦çš„DDR-Tæ¥å£ä¸Optane DIMMè¿›è¡Œé€šä¿¡ï¼Œè¯¥æ¥å£ä¸DDR4å…±äº«æœºæ¢°å’Œç”µæ°”æ¥å£ï¼Œä½†ä½¿ç”¨ä¸åŒçš„åè®®æ¥å®ç°å¼‚æ­¥å‘½ä»¤å’Œæ•°æ®è®¡æ—¶ã€‚</strong></p><p> <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/adac8e025a634145a7ffef40338f51f9.png"></p><p> å¯¹NVDIMMï¼ˆå›¾1(b)ï¼‰çš„å†…å­˜è®¿é—®é¦–å…ˆåˆ°è¾¾DIMMæ§åˆ¶å™¨ï¼ˆæœ¬æ–‡ä¸­ç§°ä¸ºXPControllerï¼‰è¯¥æ§åˆ¶å™¨åè°ƒå¯¹Optaneä»‹è´¨çš„è®¿é—®ã€‚ä¸SSDç±»ä¼¼ï¼ŒOptane DIMMæ‰§è¡Œå†…éƒ¨åœ°å€è½¬æ¢ä»¥è¿›è¡Œç£¨æŸå‡è¡¡å’Œåå—ç®¡ç†ï¼Œå¹¶ä¸ºæ­¤è½¬æ¢ç»´æŠ¤ä¸€ä¸ªåœ°å€é—´æ¥è¡¨ï¼ˆAITï¼‰ã€‚åœ°å€è½¬æ¢ä¹‹åï¼Œå°±å‘ç”Ÿå¯¹å­˜å‚¨ä»‹è´¨çš„å®é™…è®¿é—®ã€‚ç”±äº3D-XPointç‰©ç†ä»‹è´¨è®¿é—®ç²’åº¦ä¸º256å­—èŠ‚ï¼ˆæœ¬æ–‡ä¸­ç§°ä¸º XPLineï¼‰ï¼ŒXPControllerå°†è¾ƒå°çš„è¯·æ±‚è½¬æ¢ä¸ºè¾ƒå¤§çš„256 å­—èŠ‚è®¿é—®ï¼Œå¯¼è‡´å†™å…¥æ”¾å¤§ï¼Œå› ä¸ºå°å‹å­˜å‚¨å˜æˆäº†è¯»-ä¿®æ”¹-å†™æ“ä½œã€‚ XPControlleræœ‰ä¸€ä¸ªå°çš„å†™åˆå¹¶ç¼“å†²åŒºï¼ˆæœ¬æ–‡ç§°ä¸ºXPBufferï¼‰ï¼Œç”¨äºåˆå¹¶ç›¸é‚»çš„å†™æ“ä½œã€‚</p><p> Optaneå†…å­˜å¯ä»¥ï¼ˆå¯é€‰ï¼‰è·¨é€šé“å’ŒDIMMsäº¤é”™ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾ï¼š<br> <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d0857fcda1134f34a2ec95d566c57664.png"></p><h3 id="4-2-Optane-DIMMä¸DRAMçš„ä¸åŒä¹‹å¤„"><a href="#4-2-Optane-DIMMä¸DRAMçš„ä¸åŒä¹‹å¤„" class="headerlink" title="4.2 Optane DIMMä¸DRAMçš„ä¸åŒä¹‹å¤„"></a>4.2 Optane DIMMä¸DRAMçš„ä¸åŒä¹‹å¤„</h3><p> è¿™äº›æµ‹é‡åæ˜ äº†è½¯ä»¶çœ‹åˆ°çš„åŠ è½½å’Œå­˜å‚¨å»¶è¿Ÿï¼Œè€Œä¸æ˜¯è¿™äº›åº•å±‚å†…å­˜è®¾å¤‡çš„åŠ è½½å’Œå­˜å‚¨å»¶è¿Ÿï¼š<br> <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/451bbc5df2304383a25a93ef1a2fe1b4.png" alt="å’Œç¡¬ç›˜é—´çš„è¯»å†™IOå»¶è¿Ÿ"></p><blockquote><p>å°¾å»¶è¿Ÿæ˜¯æŒ‡åœ¨è¯»å–æˆ–å†™å…¥æ•°æ®æ—¶ï¼Œä¸€äº›æ“ä½œæ‰€éœ€çš„æ—¶é—´æ˜æ˜¾è¶…è¿‡äº†å¤§å¤šæ•°æ“ä½œçš„å¹³å‡æ—¶é—´ã€‚è¿™ç§æƒ…å†µå¯èƒ½å¯¼è‡´ä¸€äº›è¯·æ±‚çš„å“åº”æ—¶é—´æ˜æ˜¾å»¶é•¿ï¼Œä»è€Œå½±å“ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚</p></blockquote><blockquote><p>99.9ç™¾åˆ†ä½å»¶è¿Ÿï¼šè¿™æ˜¯åœ¨ä¸€ç»„æ“ä½œä¸­ï¼Œæœ‰99.9%çš„æ“ä½œæ‰€ç»å†çš„å»¶è¿Ÿæ—¶é—´çš„é˜ˆå€¼ã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰0.1%çš„æ“ä½œä¼šåœ¨è¿™ä¸ªå»¶è¿Ÿæ—¶é—´ä¹‹ä¸Šã€‚é€šå¸¸ï¼Œè¿™ä¸ªåº¦é‡æ ‡å¿—ç€ç»å¤§å¤šæ•°æ“ä½œçš„å»¶è¿Ÿæƒ…å†µï¼Œä½†å…è®¸ä¸€å°éƒ¨åˆ†æç«¯æƒ…å†µçš„å‡ºç°ã€‚</p></blockquote><blockquote><p>99.99ç™¾åˆ†ä½å»¶è¿Ÿï¼šè¿™æ˜¯æ›´ä¸¥æ ¼çš„å»¶è¿Ÿåº¦é‡ï¼Œè¡¨ç¤ºåœ¨ä¸€ç»„æ“ä½œä¸­ï¼Œæœ‰99.99%çš„æ“ä½œæ‰€ç»å†çš„å»¶è¿Ÿæ—¶é—´çš„é˜ˆå€¼ã€‚åªæœ‰0.01%çš„æ“ä½œä¼šåœ¨è¿™ä¸ªå»¶è¿Ÿæ—¶é—´ä¹‹ä¸Šã€‚è¿™ä¸ªåº¦é‡ç”¨äºæ›´å¼ºè°ƒå»¶è¿Ÿçš„å¯é æ€§ï¼Œç¡®ä¿ç»å¤§å¤šæ•°æ“ä½œéƒ½åœ¨éå¸¸çŸ­çš„æ—¶é—´å†…å®Œæˆã€‚</p></blockquote><blockquote><p>æœ€å¤§å»¶è¿Ÿï¼šè¿™æ˜¯ä¸€ç»„æ“ä½œä¸­çš„æœ€é•¿å»¶è¿Ÿæ—¶é—´ï¼Œè¡¨ç¤ºæœ€æ…¢çš„æ“ä½œéœ€è¦å¤šé•¿æ—¶é—´æ‰èƒ½å®Œæˆã€‚æœ€å¤§å»¶è¿Ÿæ˜¯æœ€æç«¯çš„æƒ…å†µï¼Œé€šå¸¸ç”¨äºè¯„ä¼°ç³»ç»Ÿçš„æœ€åæƒ…å†µè¡Œä¸ºã€‚åœ¨ä¸€äº›å®æ—¶åº”ç”¨å’ŒæœåŠ¡ä¸­ï¼Œå°¤å…¶æ˜¯éœ€è¦ä½å»¶è¿Ÿçš„æƒ…å¢ƒä¸‹ï¼Œæœ€å¤§å»¶è¿Ÿéå¸¸é‡è¦ï¼Œå› ä¸ºå³ä½¿åªæœ‰æå°‘æ•°æ“ä½œçš„å»¶è¿Ÿè¶…å‡ºé¢„æœŸï¼Œä¹Ÿå¯èƒ½å¯¹ç³»ç»Ÿçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒäº§ç”Ÿé‡å¤§å½±å“ã€‚</p></blockquote><p> å°¾éƒ¨å»¶è¿Ÿä¸€é¡¹æ˜¾ç¤ºé¡ºåºå†™å…¥ä¸€å°å—å†…å­˜åŒºåŸŸï¼ˆçƒ­ç‚¹ï¼‰çš„å°¾éƒ¨å»¶è¿Ÿçš„å®éªŒã€‚Optaneå†…å­˜å…·æœ‰ç½•è§çš„â€œå¼‚å¸¸å€¼â€ï¼Œå…¶ä¸­å°‘é‡å†™å…¥éœ€è¦é•¿è¾¾50Âµsæ‰èƒ½å®Œæˆï¼ˆæ¯”é€šå¸¸çš„å»¶è¿Ÿå¢åŠ äº†100å€ï¼‰</p><p>  <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/521c5119e9214b84ad2290110aa03cc0.png"></p><p>  DRAMå¸¦å®½ä¸ä»…é«˜äºOptaneï¼Œè€Œä¸”éšçº¿ç¨‹æ•°å¯é¢„æµ‹ï¼ˆä¸”å•è°ƒï¼‰æ‰©å±•ï¼Œç›´è‡³DRAMå¸¦å®½é¥±å’Œï¼Œè€Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¸è®¿é—®å¤§å°æ— å…³ã€‚é¦–å…ˆï¼Œå¯¹äºå•ä¸ªDIMMï¼Œæœ€å¤§è¯»å–å¸¦å®½æ˜¯æœ€å¤§å†™å¸¦å®½çš„2.9å€ï¼Œè€ŒDRAMåªæœ‰1.3å€çš„å·®è·ã€‚é™¤äº†äº¤é”™è¯»å–ä¹‹å¤–ï¼ŒOptaneæ€§èƒ½éšç€çº¿ç¨‹æ•°çš„å¢åŠ è€Œå‘ˆç°éå•è°ƒæ€§ã€‚å¯¹äºéäº¤é”™ï¼ˆå³å•DIMMï¼‰æƒ…å†µï¼Œæ€§èƒ½åœ¨1åˆ°4ä¸ªçº¿ç¨‹ä¹‹é—´è¾¾åˆ°å³°å€¼ï¼Œç„¶åé€æ¸ä¸‹é™ã€‚</p><p>   <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/74c2552a0c1c429ca5d497c61f411c81.png" alt="å¸¦å®½ä¸çº¿ç¨‹æ•° è¯¥å®éªŒæ˜¾ç¤ºäº†æœ¬åœ°DRAMã€éäº¤é”™å¼å’Œäº¤é”™å¼ Optaneå†…å­˜ä¸Šçº¿ç¨‹æ•°å¢åŠ ï¼ˆä»å·¦åˆ°å³ï¼‰æ—¶çš„æœ€å¤§å¸¦å®½ã€‚æ‰€æœ‰çº¿ç¨‹éƒ½ä½¿ç”¨256Bè®¿é—®å¤§å°ã€‚ï¼ˆæ³¨æ„å‚ç›´åˆ»åº¦çš„å·®å¼‚ï¼‰"></p><p>   <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b2704fb5d70b40a6bfe34bf494accd34.png" alt="è®¿é—®å¤§å°çš„å¸¦å®½ å®éªŒæ˜¾ç¤ºï¼ˆä»å·¦åˆ°å³ï¼‰æœ¬åœ°DRAMã€äº¤é”™å’Œéäº¤é”™Optaneå†…å­˜ä¸Šä¸åŒè®¿é—®å¤§å°çš„æœ€å¤§å¸¦å®½ã€‚å›¾è¡¨æ ‡é¢˜åŒ…æ‹¬æ¯ä¸ªå®éªŒä¸­ä½¿ç”¨çš„çº¿ç¨‹æ•°ï¼ˆè¯»/å†™ï¼ˆntstoreï¼‰/å†™ï¼ˆclwbï¼‰ï¼‰"></p><h3 id="4-3-Optane-DIMMä¸å…¶ä»–ä»¿çœŸæŠ€æœ¯çš„ä¸åŒä¹‹å¤„"><a href="#4-3-Optane-DIMMä¸å…¶ä»–ä»¿çœŸæŠ€æœ¯çš„ä¸åŒä¹‹å¤„" class="headerlink" title="4.3 Optane DIMMä¸å…¶ä»–ä»¿çœŸæŠ€æœ¯çš„ä¸åŒä¹‹å¤„"></a>4.3 Optane DIMMä¸å…¶ä»–ä»¿çœŸæŠ€æœ¯çš„ä¸åŒä¹‹å¤„</h3><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/3773889806b14aa9bba6d6952daa2a06.png"></p><p> è¿™äº›å›¾ä¸­çš„æ•°æ®è¡¨æ˜ï¼Œæ²¡æœ‰ä¸€ç§æ¨¡æ‹Ÿæœºåˆ¶èƒ½å¤Ÿæ•è· Optane è¡Œä¸ºçš„ç»†èŠ‚â€”â€”æ‰€æœ‰æ–¹æ³•éƒ½ä¸çœŸå®çš„ Optane å†…å­˜æœ‰å¾ˆå¤§çš„åå·®ã€‚ä»–ä»¬æ— æ³•æ•æ‰å‚²è…¾å†…å­˜å¯¹é¡ºåºè®¿é—®å’Œè¯»/å†™ä¸å¯¹ç§°æ€§çš„åå¥½ï¼Œå¹¶å¯¹è®¾å¤‡å»¶è¿Ÿå’Œå¸¦å®½ç»™å‡ºéå¸¸ä¸å‡†ç¡®çš„çŒœæµ‹ã€‚</p><h3 id="4-4-Optane-DIMMæœ€ä½³å®è·µ"><a href="#4-4-Optane-DIMMæœ€ä½³å®è·µ" class="headerlink" title="4.4 Optane DIMMæœ€ä½³å®è·µ"></a>4.4 Optane DIMMæœ€ä½³å®è·µ</h3><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/9c439f09a06947798a73788207f85a40.png" alt="å•ä¸ª DIMM ä¸Šçš„ EWR å’Œååé‡ä¹‹é—´çš„å…³ç³» æ¯ä¸ªç‚¹ä»£è¡¨ä¸åŒè®¿é—®å¤§å°ã€çº¿ç¨‹æ•°å’ŒåŠŸç‡é¢„ç®—é…ç½®çš„å®éªŒã€‚æ³¨æ„æŒ‡æ ‡ä¹‹é—´çš„ç›¸å…³æ€§"></p><p> å›¾8ç»˜åˆ¶äº†æˆ‘ä»¬ç³»ç»Ÿæ€§åœ°æ‰«æOptaneæ€§èƒ½çš„æ‰€æœ‰æµ‹é‡ç»“æœä¸­å•ä¸ªDIMMçš„EWRå’Œæœ‰æ•ˆè®¾å¤‡å¸¦å®½ï¼ˆdramå’Œcpuä¹‹é—´çš„ï¼ï¼‰ä¹‹é—´çš„å¼ºç›¸å…³æ€§ã€‚åŸºäºè¿™ç§å…³ç³»ï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼ŒåŠªåŠ›æœ€å¤§åŒ–EWRï¼ˆEffective Write Ratioï¼‰æ˜¯æœ€å¤§åŒ–å¸¦å®½çš„å¥½æ–¹æ³•ã€‚</p><p> è€Œä¸”ç”±äºæœ€å°ç²’åº¦æ˜¯256Bï¼Œä½†æ˜¯iMCå‘å‡º64Bçš„è¯ï¼Œå°±ä¼šåœ¨ç¼“å†²åŒºè¢«åˆå¹¶ä¸º256Bï¼Œæ‰€ä»¥ä¸‹å›¾æ¢ç©¶äº†æ¯æ¬¡å†™å…¥æ›´æ–°å¤šå°‘å¤§å°åˆé€‚ã€‚<span class="label primary">é¿å…å°å‹çš„storesè¶…è¿‡16KBä¹Ÿä¸åˆé€‚ã€‚</span><br> <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b2618ae65fc840ee9e2bfca3cca67d6b.png"></p><p> ç»˜åˆ¶iMCäº‰ç”¨å›¾ã€‚åœ¨å›ºå®šæ•°é‡6ä¸ªçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œ<span class="label primary">éšç€æ¯ä¸ªçº¿ç¨‹è®¿é—®çš„DIMMæ•°é‡çš„å¢åŠ ï¼Œå¸¦å®½ä¼šä¸‹é™</span>ã€‚ä¸ºäº†è·å¾—æœ€å¤§å¸¦å®½ï¼Œçº¿ç¨‹åº”å›ºå®šåˆ°DIMMã€‚å›¾15è¯´æ˜äº†å½“å¤šä¸ªæ ¸å¿ƒé’ˆå¯¹å•ä¸ªDIMMæ—¶ï¼ŒiMCä¸­æœ‰é™çš„é˜Ÿåˆ—å®¹é‡å¦‚ä½•å½±å“æ€§èƒ½ã€‚è¯¥å›¾æ˜¾ç¤ºäº†ä½¿ç”¨å›ºå®šæ•°é‡çš„çº¿ç¨‹ï¼ˆ24ä¸ªç”¨äºè¯»å–ï¼Œ6ä¸ªç”¨äº ntstoreï¼‰å‘6ä¸ªäº¤é”™ Optane DIMM è¯»å–/å†™å…¥æ•°æ®çš„å®éªŒã€‚æˆ‘ä»¬è®©æ¯ä¸ªçº¿ç¨‹éšæœºè®¿é—®Nä¸ª DIMMï¼ˆè·¨çº¿ç¨‹å‡åŒ€åˆ†å¸ƒï¼‰ã€‚éšç€Nçš„å¢åŠ ï¼Œé’ˆå¯¹æ¯ä¸ªDIMMçš„å†™å…¥å™¨æ•°é‡ä¼šå¢åŠ ï¼Œä½†æ¯ä¸ªDIMMçš„å¸¦å®½ä¼šä¸‹é™ã€‚å¯èƒ½çš„ç½ªé­ç¥¸é¦–æ˜¯XP Bufferçš„å®¹é‡æœ‰é™ï¼Œä½†EWRä»ç„¶éå¸¸æ¥è¿‘1ï¼Œå› æ­¤æ€§èƒ½é—®é¢˜è‚¯å®šå‡ºåœ¨iMCä¸Šã€‚</p><p> <span class="label primary">é¿å…å¯¹è¿œç¨‹ NUMA èŠ‚ç‚¹è¿›è¡Œæ··åˆæˆ–å¤šçº¿ç¨‹è®¿é—®</span>PMæ€§èƒ½ä¸‹é™ç‡ä¸è¿œç¨‹DRAMä¸æœ¬åœ° DRAMçš„æ€§èƒ½ä¸‹é™ç‡ç±»ä¼¼ã€‚ç„¶è€Œï¼Œå½“çº¿ç¨‹æ•°é‡å¢åŠ æˆ–è¯»/å†™æ··åˆå·¥ä½œè´Ÿè½½æ—¶ï¼ŒOptaneå†…å­˜çš„å¸¦å®½ä¼šæ€¥å‰§ä¸‹é™ã€‚æ ¹æ®æˆ‘ä»¬çš„ç³»ç»Ÿæ‰«æç»“æœï¼Œç›¸åŒå·¥ä½œè´Ÿè½½ä¸‹ï¼Œæœ¬åœ°å’Œè¿œç¨‹Optaneå†…å­˜ä¹‹é—´çš„å¸¦å®½å·®è·å¯èƒ½è¶…è¿‡30å€ï¼Œè€Œæœ¬åœ°å’Œè¿œç¨‹DRAMä¹‹é—´çš„å·®è·æœ€å¤§ä»…ä¸º3.3 å€ã€‚<br> <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/125f5e3edb7949c0811862d4532ac6cd.png"></p><h2 id="5-å¦‚ä½•æ‰©å±•åˆ°æœªæ¥å‡ ä»£-NVM"><a href="#5-å¦‚ä½•æ‰©å±•åˆ°æœªæ¥å‡ ä»£-NVM" class="headerlink" title="5.å¦‚ä½•æ‰©å±•åˆ°æœªæ¥å‡ ä»£ NVM"></a>5.å¦‚ä½•æ‰©å±•åˆ°æœªæ¥å‡ ä»£ NVM</h2><p> å¢åŠ æˆ–å‡å°‘ 256 B å†…éƒ¨å†™å…¥å¤§å°å¯èƒ½ä¼šå¾ˆæ˜‚è´µã€‚äººä»¬æ™®éè®¤ä¸ºOptaneæ˜¯ç›¸å˜å­˜å‚¨å™¨ï¼Œç”±äºåŠŸç‡é™åˆ¶ï¼Œè¾ƒå°çš„å†…éƒ¨é¡µé¢å°ºå¯¸é•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯ç›¸å˜å­˜å‚¨å™¨çš„æ ‡å¿—[2]ã€‚è¾ƒå°çš„å†…éƒ¨é¡µé¢å¤§å°ä¸å¤ªå¯èƒ½ï¼Œå› ä¸ºç”±æ­¤äº§ç”Ÿçš„å­˜å‚¨å™¨å¯†åº¦è¾ƒä½ã€‚ä¸åŒçš„åº•å±‚å­˜å‚¨å•å…ƒæŠ€æœ¯ï¼ˆä¾‹å¦‚è‡ªæ—‹æ‰­çŸ© MRAMï¼‰å°†å¸¦æ¥æ›´å½»åº•çš„æ”¹å˜ã€‚äº‹å®ä¸Šï¼Œç”µæ± ä¾›ç”µçš„ DRAM æ˜¯ä¸€ç§ä¼—æ‰€å‘¨çŸ¥ä¸”å¹¿æ³›éƒ¨ç½²çš„æŒä¹…å†…å­˜æŠ€æœ¯ï¼ˆå°½ç®¡å¯æ‰©å±•æ€§æˆ–æˆæœ¬æ•ˆç›Šä¸é«˜ï¼‰ã€‚å¯¹äºå®ƒï¼Œæˆ‘ä»¬çš„å¤§å¤šæ•°æŒ‡å—éƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œå°½ç®¡ç”±äºç¼“å­˜ä¸€è‡´æ€§æ¨¡å‹çš„é™åˆ¶ï¼Œéä¸´æ—¶å­˜å‚¨å¯¹äºå¤§å‹ä¼ è¾“ä»ç„¶æ›´æœ‰æ•ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Optane NVDIMMs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Summary of hybrid main memory systems</title>
      <link href="/2023/10/09/A-Summary-of-hybrid-main-memory-systems/"/>
      <url>/2023/10/09/A-Summary-of-hybrid-main-memory-systems/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼‚æ„å†…å­˜è®¾å¤‡"><a href="#å¼‚æ„å†…å­˜è®¾å¤‡" class="headerlink" title="å¼‚æ„å†…å­˜è®¾å¤‡"></a>å¼‚æ„å†…å­˜è®¾å¤‡</h2><p>ä¸‹é¢æ”¶é›†äº†ç›®å‰ç”¨äºåšå¼‚æ„å†…å­˜çš„è®¾å¤‡ä»¥åŠä»–ä»¬çš„ç‰¹ç‚¹ï¼š<br>ç¼©å†™ åç§° è®¿é—®æ–¹å¼<br>RDMA é€šè¿‡å†…å­˜æ€»çº¿å’Œå¤„ç†å™¨ç›´æ¥ç›¸è¿ DDR4<br>PCM å˜ç›¸å­˜å‚¨å™¨ é€šè¿‡å†…å­˜æ€»çº¿å’Œå¤„ç†å™¨ç›´æ¥ç›¸è¿<br>ReRAM ç”µé˜»å¼å­˜å‚¨å™¨ é€šè¿‡å†…å­˜æ€»çº¿å’Œå¤„ç†å™¨ç›´æ¥ç›¸è¿<br>Optane PM(3D-XPoint)  é€šè¿‡å†…å­˜æ€»çº¿å’Œå¤„ç†å™¨ç›´æ¥ç›¸è¿ DDR-T</p><p>DCPMMçš„ä¸€äº›ç‰¹æ€§åªä¸å®ƒçš„å†…éƒ¨ç»“æ„å’Œå­˜å‚¨æŠ€æœ¯æœ‰å…³ã€‚å› æ­¤ï¼Œè¿‘æœŸDCPMMç ”ç©¶å¾—å‡ºçš„æŒ‡å—å¹¶ä¸å¹¿æ³›é€‚ç”¨äºå…¶ä»–ç±»å‹çš„PMEMã€‚éµå¾ªè¿™äº›æŒ‡å¯¼æ–¹é’ˆå¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªé«˜åº¦ä¸“é—¨åŒ–çš„ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå¯ä»¥å¾ˆå¥½åœ°ä¸DCPMMä¸€èµ·å·¥ä½œï¼Œä½†ä¸å…¶ä»–PMEMä¸å…¼å®¹ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§è¿‡åº¦ä¸“ä¸šåŒ–ï¼Œè®¤ä¸ºç³»ç»Ÿè®¾è®¡è€…åº”è¯¥æ­£ç¡®åœ°ç†è§£è¿™äº›ç‰¹æ€§çš„æ ¹æœ¬åŸå› ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•é€‚ç”¨äºæœªæ¥ä¸åŒç±»åˆ«çš„PMEMã€‚</p><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>åœ¨è¿‡å»çš„å‡ åå¹´é‡Œï¼ŒDRAM(åŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨)çš„æ€§èƒ½å’Œå®¹é‡ä¸€ç›´éµå¾ªæ‘©å°”å®šå¾‹ï¼Œä»è€Œè·Ÿä¸Šäº†CPUæŠ€æœ¯çš„è¿›æ­¥ã€‚ç„¶è€Œï¼Œä¸€ä¸ªåŸºäºDRAMçš„ç³»ç»Ÿï¼Œä¼šå› ä¸ºå®¹é‡ã€æˆæœ¬å’Œç”µåŠ›æ¶ˆè€—çš„ç‰¹æ€§å—é™äºç°ä»£çš„å·¥ä½œé‡ã€‚æ–°å‹éæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼ˆNon-volatile Memoryï¼ŒNVMï¼‰å…·æœ‰ä¼ ç»Ÿå¤–å­˜ç³»ç»ŸæŒä¹…æ€§å’Œä¼ ç»Ÿå†…å­˜ç³»ç»Ÿå­—èŠ‚å¯å¯»å€çš„ç‰¹ç‚¹ï¼Œæœ‰æœ›å®ç°é«˜å¯†åº¦ã€æ¥è¿‘é›¶çš„é™æ€èƒ½æºæ¶ˆè€—å’Œæ›´ä½çš„æ¯å­—èŠ‚æˆæœ¬ã€‚è¿™ç¯‡æ–‡ç« å¯¹å½“å‰æ··åˆå†…å­˜ç³»ç»Ÿçš„è®¾è®¡è¿›è¡Œäº†æ€»ç»“ã€‚The survey covers different aspects of the Hybrid Main Memory Designï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ¶æ„ã€å†…å­˜ç®¡ç†ç²’åº¦ã€ç›‘æ§æ–¹æ³•ã€å’Œè¿ç§»ç®—æ³•ã€‚æ­¤å¤–åœ¨æŠ½è±¡æ··åˆå†…å­˜ç¡¬ä»¶è®¾å¤‡çš„åŸºç¡€ä¸Šï¼Œæœ¬æ–‡è¿˜æ€»ç»“äº†åº”ç”¨ç¨‹åºæ„ŸçŸ¥çš„æ··åˆå†…å­˜ç³»ç»Ÿï¼Œå¹¶ä¸”æŒ‡å‡ºç°æœ‰å·¥ä½œä¸­å­˜åœ¨çš„ä¸è¶³ã€‚</p><h2 id="Keywords"><a href="#Keywords" class="headerlink" title="Keywords"></a>Keywords</h2><p>Main Memoryï¼ŒHybrid Memoryï¼ŒHeterogeneous Memoryï¼ŒTiered Memory</p><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>The unrelenting growth of the memory needs of emerging datacenter applications.ä½†æ˜¯éšç€DRAMå®¹é‡å¢é€Ÿæ”¾ç¼“ï¼Œå•ä¸ªDRAMå®¹é‡æœ‰é™ï¼Œæ‰©å¤§å®¹é‡è§„æ¨¡éœ€è¦ä¾èµ–ä¸»æ¿æ’æ§½æ•°é‡çš„å¢åŠ ã€‚è€Œè¿™åˆå¸¦æ¥äº†å»¶è¿Ÿå’Œå¸¦å®½çš„æŸå¤±ã€‚ä¸æ­¤åŒæ—¶DRAMçš„æˆæœ¬ä¹Ÿé€å¹´ä¸Šå‡[X å›¾1]ï¼Œè¿™ä½¿å¾—å†…å­˜è®¾å¤‡çš„TCOå åˆ°äº†37.1ã€‚ç›®å‰æ–°å…´çš„éæ˜“å¤±æ€§ä¸»å­˜å‚¨å™¨æŠ€æœ¯å’Œnon-DDR memory bus technologiesçš„å‡ºç°ï¼Œæœ‰æ•ˆå‡ç¼“äº†DRAMä¸æ…¢é€ŸæŒä¹…å­˜å‚¨(å³ç£ç›˜å’ŒSSD)é—´å»¶è¿Ÿä¸å®¹é‡çš„å·®å¼‚ï¼Œæœ‰å¸Œæœ›ä»æ ¹æœ¬ä¸Šæ”¹å˜å­˜å‚¨ç³»ç»Ÿçš„æ ¼å±€ã€‚</p><p>å°½ç®¡æ–°å‹è®¡ç®—æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œä½†ç”±äºå…¶ç›¸å¯¹è¾ƒé«˜çš„å†™å…¥å»¶è¿Ÿã€å†™å…¥èƒ½è€—å’Œæœ‰é™çš„å†™å…¥æŒä¹…æ€§ï¼Œå®ƒç›®å‰è¿˜ä¸èƒ½ç›´æ¥æ›¿ä»£DRAMã€‚ä¸ºäº†å……åˆ†å‘æŒ¥ä¸¤è€…åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­çš„ä¼˜åŠ¿ï¼Œåœ¨æ€§èƒ½æå‡ã€èŠ‚èƒ½é™è€—ã€ç£¨æŸå‡è¡¡ã€æ•°æ®æŒä¹…æ€§ç­‰æ–¹é¢å­˜åœ¨è®¸å¤šå¼€æ”¾çš„ç ”ç©¶é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œè¿‘å¹´æ¥å·²ç»æœ‰è®¸å¤šå…³äºå†…å­˜å±‚æ¬¡ç»“æ„çš„è®¾è®¡[xxx]å’Œå†…å­˜ç®¡ç†[xxx]æ–¹æ¡ˆçš„ç ”ç©¶ã€‚è¿™äº›ç ”ç©¶æˆæœå¸¦æ¥äº†æ··åˆå†…å­˜æ¶æ„ã€æ“ä½œç³»ç»Ÿå’Œç¼–ç¨‹æ¨¡å‹çš„åˆ›æ–°ï¼Œæä¾›äº†ä¸°å¯Œçš„æ€è·¯å’Œå·¥å…·ã€‚</p><p>ç”±äºç¡¬ä»¶æŠ€æœ¯çš„è¿…é€Ÿå‘å±•ï¼Œä»¥å¾€çš„ç»¼è¿°å·²ç»ä¸èƒ½å®Œæ•´çš„ååº”æ•´ä¸ªé¢†åŸŸçš„ç°çŠ¶ã€‚éšç€intel å‚²è…¾æŒä¹…å†…å­˜ä»ä¸Šå¸‚åˆ°åœäº§å’ŒCXL1.0åˆ°CXL3.0åŠŸèƒ½çš„æ‰©å……ï¼Œå¯¹æ··åˆå†…å­˜ç ”ç©¶çš„æµ‹é‡ä¹Ÿæœ‰æ‰€ä¸åŒã€‚æœ¬æ–‡å¯¹ç°æœ‰å·¥ä½œçš„å›é¡¾å¯ä»¥å¸®åŠ©æ›´æ¸…æ™°çš„äº†è§£é¢†åŸŸçš„å‘å±•ä»¥åŠç°çŠ¶ã€‚è¯»è€…å¯ä»¥å°†ä¸€äº›ç°æœ‰å‘æ–¹æ³•å’Œå·¥å…·åº”ç”¨åˆ°å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ã€‚å¯¹ç›®å‰å·¥ä½œä¼˜ç‚¹å’Œå±€é™æ€§çš„è®¨è®ºä¹Ÿå°†å¸®åŠ©ç ”ç©¶äººå‘˜æ›´æ·±å…¥åœ°æ€è€ƒã€‚</p><p>æˆ‘å°†ä»ä»¥ä¸‹5ä¸ªè§’åº¦å¯¹ç°æœ‰å·¥ä½œè¿›è¡Œä»‹ç»ï¼š</p><ul><li>ç¬¬3æ®µä»‹ç»æ··åˆå†…å­˜çš„ç³»ç»Ÿæ¶æ„ï¼Œä½œä¸ºæ··åˆå†…å­˜ç³»ç»Ÿè®¾è®¡çš„åŸºçŸ³ã€‚</li><li>ç¬¬4æ®µä»‹ç»äº†æ··åˆå†…å­˜çš„ç®¡ç†ç²’åº¦ï¼Œå¤§è‡´åŒ…æ‹¬ä»¥å¯¹è±¡ã€æ•°æ®ç»“æ„ã€ç‰©ç†é¡µã€Hugepageç­‰å¤§å°ã€‚å†…å­˜ç®¡ç†ç²’åº¦çš„é€‰æ‹©å½±å“ç€ç¬¬5æ®µå’Œç¬¬6æ®µç›‘æ§æ–¹æ³•å’Œç®—æ³•çš„è®¾è®¡ã€‚ä¸åŒç®¡ç†ç²’åº¦å„æœ‰ä¼˜åŠ£ã€‚</li><li>   ç¬¬5æ®µä»‹ç»å¯¹æ··åˆå†…å­˜ä¸­å¯¹å†…å­˜å¯¹è±¡æˆ–è€…é¡µé¢çš„ç›‘æ§ï¼Œé€šè¿‡ç›‘æ§ä¿¡æ¯è¾…åŠ©ç®—æ³•å†³å®šå†…å­˜å¯¹è±¡æˆ–è€…é¡µé¢çš„è°ƒåº¦ï¼ˆåº”è¯¥åœ¨ä½•æ—¶ä½äºä½•ç§å†…å­˜ä»‹è´¨ä¸­ï¼‰ã€‚</li><li>   ç¬¬6æ®µä»‹ç»å†…å­˜è¿ç§»ç®—æ³•ã€‚</li><li>   ç¬¬7æ®µä»‹ç»åº”ç”¨ç¨‹åºæ„ŸçŸ¥çš„æ··åˆå†…å­˜ç³»ç»Ÿå¹¶è®¨è®ºç›®å‰æ­¤ç±»ç³»ç»Ÿå­˜åœ¨çš„æŒ‘æˆ˜å’Œå¯¹ä»Šåå·¥ä½œçš„å±•æœ›ã€‚</li></ul><h2 id="ç³»ç»Ÿæ¶æ„"><a href="#ç³»ç»Ÿæ¶æ„" class="headerlink" title="ç³»ç»Ÿæ¶æ„"></a>ç³»ç»Ÿæ¶æ„</h2><p>å¯¹ç³»ç»Ÿæ¶æ„çš„è®¨è®ºå¤§è‡´å¯åˆ†ä¸ºä¸¤ä¸ªè§’åº¦å’Œ4ä¸ªæ¨¡å¼ã€‚ä¸€ä¸ªè§’åº¦æ˜¯åªè€ƒè™‘å•ä¸ªsocketçš„æƒ…å†µï¼Œåœ¨è¿™ä¸ªæƒ…å†µä¸‹åˆåˆ†ä¸ºåˆ†å±‚å†…å­˜ã€ç¼“å­˜ã€ä»¥åŠå‰ä¸¤è€…æ··åˆçš„æ¶æ„æ¨¡å¼ã€‚å¦ä¸€ç§è§’åº¦æ˜¯è®¨è®ºæ–°åŠ å…¥çš„éCPUç»‘å®šçš„NUMAèŠ‚ç‚¹å¯¹ç°æœ‰NUMAæ¶æ„é€ æˆçš„å½±å“ï¼Œä¸€äº›ä»¥å‰è®¾è®¡çš„ä¼˜åŒ–ç­–ç•¥å¯èƒ½åè€Œå˜å¾—å¯¹ç³»ç»Ÿæœ‰å®³ã€‚</p><h3 id="åˆ†å±‚æ¶æ„"><a href="#åˆ†å±‚æ¶æ„" class="headerlink" title="åˆ†å±‚æ¶æ„"></a>åˆ†å±‚æ¶æ„</h3><p>åˆ†å±‚æ¶æ„æ˜¯æŒ‡NVMé€šå¸¸ä½œä¸ºDRAMçš„åå¤‡å­˜å‚¨ä½¿ç”¨,ä¸¤è€…æ„æˆå†…å­˜çš„åˆ†å±‚ç³»ç»Ÿã€‚è¿™æ ·åšå¯ä»¥æä¾›å¤§å®¹é‡çš„å­˜å‚¨,åŒæ—¶ä¿æŒDRAMçš„é«˜é€Ÿè®¿é—®æ€§èƒ½ã€‚ä½†æ˜¯ç®¡ç†å¤æ‚,ä¸ºäº†ä½¿å¾—åˆ†å±‚ç³»ç»Ÿçš„æ€§èƒ½æ›´æ¥è¿‘DRAMï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡æ›¿æ¢ç®—æ³•ã€‚</p><h3 id="ç¼“å­˜æ¶æ„è®¾è®¡"><a href="#ç¼“å­˜æ¶æ„è®¾è®¡" class="headerlink" title="ç¼“å­˜æ¶æ„è®¾è®¡"></a>ç¼“å­˜æ¶æ„è®¾è®¡</h3><p>DRAMè¢«ç”¨ä½œNVMçš„ç¼“å­˜ï¼Œæ˜ å°„éƒ¨åˆ†NVMå†…å®¹ä»¥æé«˜æ€§èƒ½ã€‚è¿™æ ·çš„ç®¡ç†ç›¸å¯¹ç®€å•,ä¸å¿…åƒåˆ†å±‚ç³»ç»Ÿé‚£æ ·åšé¡µé¢çš„è¿ç§»ï¼Œåˆ©ç”¨ç¨‹åºå±€éƒ¨æ€§æ©ç›–NVMè®¾å¤‡å»¶è¿Ÿå’Œå¸¦å®½çš„åŠ£åŠ¿ã€‚ä½†å½“ç¨‹åºæœ‰æå·®çš„å±€éƒ¨æ€§æ—¶ï¼Œå‘½ä¸­ç‡ä¸é«˜ï¼Œæ•ˆæœä¸ä½³ã€‚</p><p>ä¸¤ç§æ¶æ„å„æœ‰åˆ©å¼Š,ä¸ºè·å–äº’è¡¥ä¼˜åŠ¿,ä¸€ä¸ªæ€è·¯æ˜¯ç»“åˆåˆ†å±‚ç¼“å­˜çš„æ¦‚å¿µã€‚å³éƒ¨åˆ†DRAMç”¨ä½œNVMç¼“å­˜ï¼ŒåŒæ—¶å‰©ä½™çš„éƒ¨åˆ†DRAMä½œä¸ºNVMä¸Šä¸€å±‚çš„å¿«é€Ÿå†…å­˜å±‚ã€‚è¿™æ ·çš„åŠ¨æ€è®¾è®¡å¯ä»¥æ›´çµæ´»ä½¿ç”¨å†…å­˜ä»¥è¾¾åˆ°æ›´é«˜çš„æ•ˆç‡ï¼Œä½†è®¾è®¡å®ç°å¤æ‚åº¦å°†è¿œè¿œå¤§äºå‰é¢ä¸¤ç§å¹¶ä¸”ä¸åˆé€‚çš„è®¾è®¡ç”šè‡³å¸¦æ¥æ›´å·®çš„æ•ˆæœã€‚</p><h3 id="NUMAæ¶æ„ä¸‹çš„å¼‚æ„å†…å­˜"><a href="#NUMAæ¶æ„ä¸‹çš„å¼‚æ„å†…å­˜" class="headerlink" title="NUMAæ¶æ„ä¸‹çš„å¼‚æ„å†…å­˜"></a>NUMAæ¶æ„ä¸‹çš„å¼‚æ„å†…å­˜</h3><p>åœ¨NUMAç³»ç»Ÿä¸­,æ ¹æ®é¡µçš„ç‰©ç†åœ°å€æ˜ å°„å†³å®šå°†é¡µæ”¾ç½®åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Š,ä»¥ä¼˜åŒ–è®¿é—®å»¶è¿Ÿã€‚ä½†æ··åˆå†…å­˜ç³»ç»Ÿä¸­,ç”±äºNVMå’ŒDRAMçš„è®¿é—®å»¶è¿Ÿå·®å¼‚å¾ˆå¤§,é¡µæ”¾ç½®ä½ç½®çš„é€‰æ‹©ä¼šæ›´åŠ å¤æ‚,éœ€è¦è€ƒè™‘åŒºåˆ†é¡µçš„è®¿é—®ç‰¹æ€§æ¥å†³å®šæ”¾ç½®åœ¨NVMè¿˜æ˜¯DRAMä¸Šã€‚æ··åˆå†…å­˜çš„åŠ å…¥ä½¿å¾—NUMAç³»ç»Ÿçš„é¡µç®¡ç†é¢ä¸´æ›´å¤§çš„æŒ‘æˆ˜ã€‚éœ€è¦æ›´èªæ˜åœ°åŒºåˆ†é¡µçš„ç‰¹å¾,åŠ¨æ€åœ°åœ¨å†…å­˜å±‚çº§ä¹‹é—´è¿ç§»,ä»¥å‘æŒ¥å¤šå±‚å†…å­˜ä½“ç³»ç»“æ„åº”æœ‰çš„ä¼˜åŠ¿ã€‚</p><p>ä½†æ˜¯ç›®å‰å¯¹äºNUMAæ¶æ„çš„ç ”ç©¶å’Œå•ä¸ªsocketçš„ç ”ç©¶æ˜¯ç›¸éš”ç¦»çš„ï¼Œå•ä¸ªsocketç­–ç•¥å¿…ç„¶ä¼šå¯¹æ•´ä¸ªNUMAç­–ç•¥äº§ç”Ÿå½±å“ã€‚</p><h2 id="ç®¡ç†ç²’åº¦"><a href="#ç®¡ç†ç²’åº¦" class="headerlink" title="ç®¡ç†ç²’åº¦"></a>ç®¡ç†ç²’åº¦</h2><p>åœ¨x86æŒ‡ä»¤é›†æ¶æ„ä¸‹çš„ç³»ç»Ÿé»˜è®¤çš„ç®¡ç†ç²’åº¦æ˜¯4KBä¹Ÿå°±æ˜¯Pageç»“æ„ä½“çš„å¤§å°ã€‚ç„¶è€Œä¸€äº›ç ”ç©¶è€…ä»¬å‘ç°é‡‡ç”¨æ›´å¤§æˆ–è€…æ›´å°çš„ç®¡ç†ç²’åº¦å¯¹äºæ··åˆå†…å­˜ç³»ç»Ÿè€Œè¨€å¯ä»¥å–å¾—æ›´å¥½çš„æ€§èƒ½æ”¶ç›Šã€‚</p><p>å½“å†…å­˜å˜å¾—å¾ˆå¤§ä¹‹åï¼ŒTLBå¾ˆå°ç¼“å­˜çš„åœ°å€è½¬æ¢çš„æ¡ç›®ç›¸å¯¹è¦†ç›–ç‡å°±ä½äº†ï¼Œåœ°å€è½¬æ¢çš„å¼€é”€å¢å¤§ã€‚è½¬æ¢å¼€é”€ä¸»è¦æ˜¯ç”±äºTLBæœªå‘½ä¸­æ—¶ç¼“æ…¢çš„page table walké€ æˆçš„ã€‚TLBçš„å‘½ä¸­é€Ÿåº¦å¾ˆå¿«ï¼Œä½†page table walkå¯èƒ½éœ€è¦å››æ¬¡å†…å­˜è®¿é—®æ‰èƒ½æŸ¥è¯¢åˆ†å±‚é¡µè¡¨ã€‚è¾ƒæ–°çš„å¤„ç†å™¨ç”±äºé‡‡ç”¨äº†æ›´æ·±çš„é¡µè¡¨ç»“æ„ï¼Œéœ€è¦å¤šè¾¾äº”æ¬¡å†…å­˜è®¿é—®ã€‚å¤§é¡µé¢é€šè¿‡ä¸¤ç§æ–¹å¼å‡å°‘è½¬æ¢å¼€é”€ã€‚1.ç”±äºå¤§é¡µé¢çš„å•ä¸ªæ¡ç›®æ˜ å°„äº†æ›´å¤§çš„åœ°å€èŒƒå›´ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å¢åŠ TLBè¦†ç›–ç‡æ¥é™ä½TLBæœªå‘½ä¸­çš„é¢‘ç‡ã€‚2.é€šè¿‡å‡å°‘éœ€è¦è®¿é—®çš„é¡µè¡¨çº§æ•°ï¼ŒåŠ å¿«å•ä¸ªwalké€Ÿåº¦ã€‚</p><p>ä½†æ˜¯ä½¿ç”¨å¤§é¡µé¢å¾€å¾€å®¹æ˜“é€ æˆå†…å­˜è†¨èƒ€å’Œå†…å­˜ç¢ç‰‡ï¼ŒåŒæ—¶ä¸æ°å½“çš„è¿ç§»å¤§é¡µé¢å¸¦æ¥çš„å¼€é”€ä¹Ÿå®¹æ˜“ä½¿å¾—ç³»ç»Ÿå¼€é”€è¶…è¿‡åœ°å€è½¬æ¢çš„å¼€é”€èŠ‚çœã€‚æ¯”å¦‚æ¯ä¸ªé¡µé¢ä¸­çš„çƒ­æ•°æ®åªå åº”ç”¨ç¨‹åºæ€»å†…å­˜è¶³è¿¹çš„ä¸€å°éƒ¨åˆ†ï¼Œä½†å´å¯¼è‡´äº†åº”ç”¨ç¨‹åºæ€»å†…å­˜å¼•ç”¨çš„å¾ˆå¤§æ¯”ä¾‹ã€‚æ‰€ä»¥ä¹Ÿæœ‰äº›å·¥ä½œæå‡ºäº†å¦‚ä½•åœ¨é€‚å½“çš„æ—¶å€™æ‹†åˆ†å¤§é¡µé¢ä»¥åŠåªåœ¨è¾ƒæ…¢çš„å†…å­˜å±‚ä½¿ç”¨å¤§é¡µé¢ã€‚</p><p>ä¸€äº›ç ”ç©¶è€…å‘ç°ä¸€éƒ¨åˆ†åº”ç”¨å¯¹è±¡åœ¨ä¸åŒçš„æ‰§è¡Œé˜¶æ®µè¡¨ç°å‡ºé«˜åº¦çªå˜çš„å†…å­˜è®¿é—®é¢‘ç‡ã€‚å¾ˆå¤§ä¸€éƒ¨åˆ†çš„åº”ç”¨ç¨‹åºçš„å¯¹è±¡éƒ½æ¯”é¡µå°å¾—å¤šåŒæ—¶æ˜¾ç¤ºå‡ºè¾ƒé•¿çš„ç”Ÿå‘½å‘¨æœŸã€‚å› æ­¤ä»–ä»¬åœ¨ç¼–è¯‘é˜¶æ®µå¯¹ç¨‹åºä»£ç è¿›è¡Œåˆ†æï¼Œæå‰é¢„ä¼°è®¿é—®æ¨¡å¼ï¼Œå†³å®šå†…å­˜åº”è¯¥ä»å“ªç§å†…å­˜ä»‹è´¨è¢«åˆ†é…ã€‚åœ¨ç¨‹åºåŠ¨æ€è¿è¡Œæ—¶ï¼Œä¾æ®å‰ä¸€é˜¶æ®µçš„è®¿é—®æ¨¡å¼å¯¹åä¸€é˜¶æ®µè¿›è¡Œå¯¹è±¡ç²’åº¦çš„è¿ç§»ï¼ŒèŠ‚çº¦è¿ç§»æˆæœ¬ã€‚ä½†æ˜¯è¿™æ ·çš„åšæ³•ä¾èµ–äºæºç ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰æºç çš„æƒ…å†µä¸‹å¾ˆéš¾é€šè¿‡ä¿®æ”¹çš„ç¼–è¯‘å™¨å»æå‰æ•è·ç¨‹åºçš„ç‰¹å¾ã€‚</p><h2 id="å†…å­˜ç›‘æ§"><a href="#å†…å­˜ç›‘æ§" class="headerlink" title="å†…å­˜ç›‘æ§"></a>å†…å­˜ç›‘æ§</h2><p>å¯¹å¯¹è±¡ç²’åº¦çš„è®¿é—®é¢‘ç¹ç¨‹åº¦ç»Ÿè®¡ä¸»è¦ç”±è¿è¡Œæ—¶è¢«æŒ‡å‘çš„æŒ‡é’ˆåšåˆ†æã€‚è€Œå¯¹äºç‰©ç†é¡µé¢å¤§è‡´åˆ†æˆä»¥ä¸‹3ç§æ–¹æ³•æ¥ç›‘æ§çƒ­é¡µé¢ã€‚</p><p>ç¼ºé¡µå¼‚å¸¸æ—¶å°†é¡µé¢è¿›è¡Œè¿ç§»æˆ–è€…æ”¶é›†æ•°æ®ï¼Œä½†æ˜¯ç¼ºé¡µå¼‚å¸¸åœ¨ç¨‹åºæ‰§è¡Œçš„å…³é”®è·¯å¾„ä¸Šï¼Œæ­¤æ—¶å†å»æ‰§è¡Œå…¶ä»–çš„æ“ä½œå¾ˆå®¹æ˜“äº§ç”Ÿæ›´é«˜çš„å»¶è¿Ÿã€‚</p><p>åŸºäºé¡µè¡¨çš„é¡µé¢æ‰«æï¼Œåœ¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€è½¬æ¢çš„è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨é¡µè¡¨ï¼Œé¡µè¡¨ä¸Šæœ‰ä¸€ä¸ªAä½çš„è®¿é—®ä½ï¼Œæ¯æ¬¡é¡µé¢è¢«è®¿é—®åéƒ½ä¼šç½®ä½ã€‚é€šè¿‡å®šæœŸæ‰«æé¡µè¡¨ï¼Œæ‰«æåå†æ¸…ç©ºç½®ä½æ¥æœé›†é¡µé¢è®¿é—®ä¿¡æ¯ã€‚ä½†æ˜¯å¯¹é¡µè¡¨çš„æ‰«æé—´éš”ã€æ‰«æçš„é‡‡æ ·ç²’åº¦ä¼šå½±å“CPUå¼€é”€ä»¥åŠå‡†ç¡®åº¦ã€‚</p><p>åŸºäºç¡¬ä»¶çš„é‡‡æ ·ï¼Œä¸åŒè®¾å¤‡éƒ½ä¼šæœ‰ç¡¬ä»¶è®¡æ•°å™¨PMUä»¥åŠPEBSï¼Œè¿™äº›é‡‡æ ·æ—¶å¯ä»¥è®°å½•ç‰©ç†åœ°å€å’Œpidç­‰ä¿¡æ¯ï¼Œä¹Ÿä¼šéšç€é‡‡æ ·ç²’åº¦æ›´å°è€Œå¼€é”€æ›´å¤§ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœç¡¬ä»¶è®¾å¤‡æ›´æ¢,å®ƒçš„æ€§èƒ½ç›‘æ§è®¡æ•°å™¨ï¼ˆPMCï¼‰çš„å¯„å­˜å™¨åœ°å€å¯èƒ½ä¼šæœ‰å˜åŒ–ã€‚è¿™æ—¶éœ€è¦é‡æ–°æŸ¥çœ‹æ–°ç¡¬ä»¶çš„ç¼–ç¨‹æ‰‹å†Œ,ç¡®å®šPMCå¯„å­˜å™¨çš„æ–°åœ°å€,ç„¶åä¿®æ”¹è½¯ä»¶ç¨‹åºä¸­çš„å¯„å­˜å™¨è®¿é—®ä»£ç ,å°†å…¶æ˜ å°„åˆ°æ–°çš„åœ°å€ä¸Šã€‚</p><h2 id="è¿ç§»ç®—æ³•"><a href="#è¿ç§»ç®—æ³•" class="headerlink" title="è¿ç§»ç®—æ³•"></a>è¿ç§»ç®—æ³•</h2><p>é¡µé¢è¿ç§»ç®—æ³•å„ç§å„æ ·ï¼Œå¾ˆéš¾å°†ä»–ä»¬åˆ†ç±»ä¸ºä¸åŒç±»åˆ«ã€‚æ¯”è¾ƒå¸¸è§çš„æ˜¯æ ¹æ®ä¸Šæ¬¡æ˜¯å¦è¢«è®¿é—®æˆ–è€…æŸæ®µæ—¶é—´è¢«è®¿é—®çš„æ¬¡æ•°è¿›è¡Œè¿ç§»ã€‚ç›®å‰Linuxå†…æ ¸äºŒæ¬¡æœºä¼šLRUé“¾è¡¨å°±æ˜¯ä¾æ®æ­¤è¿›è¡Œçš„é¡µé¢å›æ”¶ã€‚åŸºäºé»˜è®¤çš„å•å±‚å†…å­˜ï¼Œäººä»¬å¾ˆå®¹æ˜“æƒ³åˆ°åœ¨ä¸¤å±‚å†…å­˜å±‚ç§éƒ½ä½¿ç”¨LRUé“¾è¡¨ã€‚ç¡®å®æœ‰å¤§éƒ¨åˆ†å·¥ä½œåŸºäºLRUé“¾è¡¨åšå‡ºæ”¹è¿›ï¼Œå¹¶ä¸”ä¹Ÿå–å¾—äº†æ˜¾è‘—çš„æ•ˆæœï¼Œæ¯”å¦‚å›¾4é€šè¿‡åœ¨åº•å±‚å¢åŠ ä¸€ä¸ªé“¾è¡¨ä½¿å¾—å±€éƒ¨æ€§æ›´å¥½çš„è¢«ä¿ç•™ï¼Œç³»ç»Ÿååé‡ç›¸æ¯”äºä¸åšè¿ç§»æœ€é«˜æå‡æ¥è¿‘2.5å€ã€‚ä½†æ˜¯å¦‚æœç¼ºå°‘æ—¶é—´å±€éƒ¨æ€§ï¼Œæˆ–è€…è¢«è®°å½•çš„æ—¶é—´ä¸å¤Ÿå°±ä¸èƒ½äº†è§£è¿™ä¸ªé¡µé¢å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„è®¿é—®å†å²ã€‚æƒ³è¦æ•è·é¡µé¢çš„è®¿é—®å†å²ï¼Œç›®å‰çš„æ–¹æ³•è¿˜æ¯”è¾ƒå±€é™ã€‚</p><p>è¿˜æœ‰çš„æ–¹æ³•é€šè¿‡è®¾ç½®ä¸€ä¸ªé˜ˆå€¼æ¥è¡¨ç¤ºé¡µé¢åˆ°åº•æ˜¯å†·çš„æˆ–è€…æ˜¯çƒ­çš„ã€‚å›ºå®šé˜ˆå€¼å¯èƒ½çš„ç¼ºé™·æ˜¯åœ¨ä¸åŒæ—¶åˆ»å®šä¹‰çš„çƒ­é¡µé¢å¤šäºDRAMï¼ˆå³é«˜æ€§èƒ½ä½†æœ‰é™çš„å¿«é€Ÿå†…å­˜ï¼‰æˆ–è€…çƒ­é¡µé¢è¿œè¿œå°äºDRAMï¼Œè¿™ä½¿å¾—å¾ˆå¤šä¸åŒç¨‹åº¦å†·çš„é¡µé¢ä¹Ÿæ··åˆåˆ°äº†å¿«é€Ÿå†…å­˜å±‚ï¼Œè¿™å°±äº§ç”Ÿäº†æ— æ•ˆçš„é¡µé¢åˆ†ç±»ã€‚ä¸ºäº†é¿å…å‡ºç°ä»¥ä¸Šæƒ…å†µï¼Œæœ€è¿‘çš„ç ”ç©¶é‡‡ç”¨äº†åŠ¨æ€é˜ˆå€¼çš„æ–¹å¼ï¼Œå°†é¡µé¢ä¾ç…§å®é™…ç³»ç»ŸDRAMé‡åˆ†ä¸ºä¸åŒç¨‹åº¦çš„å†·çƒ­é¡µé¢ï¼Œç”±äºæé«˜äº†DRAMå±‚çš„åˆ©ç”¨æ•ˆç‡ï¼Œæ•´ä¸ªæ€§èƒ½ä¹Ÿè·å¾—ä¸é”™æå‡ã€‚</p><p>ä½†å…¶å®ä½¿ç”¨çš„æ–¹æ³•çœŸæ²¡æ³•åˆ†ç±»ï¼Œå¤ªå¤šäº†éƒ½æ˜¯ä¾æ®å„è‡ªè¦è§£å†³çš„é—®é¢˜ä¸ºå‡ºå‘ç‚¹è®¾è®¡çš„ã€‚</p><h2 id="åº”ç”¨ç¨‹åºæ„ŸçŸ¥"><a href="#åº”ç”¨ç¨‹åºæ„ŸçŸ¥" class="headerlink" title="åº”ç”¨ç¨‹åºæ„ŸçŸ¥"></a>åº”ç”¨ç¨‹åºæ„ŸçŸ¥</h2><p>è®¾è®¡åº”ç”¨ç¨‹åºæ„ŸçŸ¥çš„æ··åˆç³»ç»Ÿä¸€ä¸ªå‰æåœ¨äºæœåŠ¡å™¨è¿è¡ŒåŒä¸€ç§æˆ–è€…æŸå‡ ç§ç‰¹å®šçš„å·¥ä½œè´Ÿè½½ã€‚è¿™äº›å·¥ä½œéƒ½å°è¯•ä»ä¸€äº›å…³é”®è§†è§’å…¥æ‰‹,æ¯”å¦‚å·¥ä½œè´Ÿè½½å’Œåº”ç”¨ç‰¹å¾ã€æ•°æ®æœ¬åœ°åŒ–ã€å†…å­˜è®¿é—®æ¨¡å¼ç­‰,åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸Šè¿›è¡Œæ•°æ®æ”¾ç½®ã€ä»»åŠ¡ Mapping å’Œå†…å­˜è®¿é—®ä¼˜åŒ–,ä»¥æœŸè·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</p><p>è€ƒè™‘ç‰¹å®šå·¥ä½œè´Ÿè½½ç‰¹å¾,è¿›è¡Œè´Ÿè½½å‡è¡¡æ„ŸçŸ¥çš„æ•°æ®æ”¾ç½®ã€‚å¦‚Merchandiseræå‡ºäº†é¢å‘ä»»åŠ¡å¹¶è¡ŒHPCåº”ç”¨çš„æ··åˆå†…å­˜æ•°æ®æ”¾ç½®æ–¹æ³•,å¯ä»¥æé«˜è´Ÿè½½å‡è¡¡ã€‚Liuåˆ†æå†…å­˜è®¿é—®ç›¸ä¼¼æ€§,æ”¹è¿›ä¸è§„åˆ™åº”ç”¨åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šçš„æ€§èƒ½ã€‚Wangæ ¹æ®åº”ç”¨é€‚åˆçš„çº¿ç¨‹æ•°ä»¥åŠå†…å­˜å±‚ä¼˜åŒ–äº†HPCç¨‹åºçš„æ•°æ®æ”¾ç½®ã€‚ HNgraphåœ¨NUMAç³»ç»Ÿä¸­è¿›è¡Œå›¾å¤„ç†ä»»åŠ¡çš„æ•°æ®å’Œä»»åŠ¡æ”¾ç½®ä¼˜åŒ–ã€‚<br>åœ¨äº‘æ•°æ®ä¸­å¿ƒè§„æ¨¡ä¸‹,æä¾›é€æ˜çš„å†…å­˜å¸è½½æœºåˆ¶,ä»¥å……åˆ†åˆ©ç”¨æ··åˆå†…å­˜ç³»ç»Ÿã€‚Googleå’ŒMetaåˆ†åˆ«ä»ç³»ç»Ÿæ¶æ„å’Œæ•°æ®ä¸­å¿ƒè§†è§’æ¢è®¨äº†è¿™ä¸€é—®é¢˜ã€‚</p><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p>:tear: å¯ä»¥åœ¨ç¬”è€…çš„è‹±æ–‡ç»¼è¿°é‡Œå¯¹ç…§ï¼Œä¸æƒ³æ”¾äº†30+ç¯‡</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Review </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>An Operating System Level Data Migration Scheme</title>
      <link href="/2023/10/05/An-Operating-System-Level-Data-Migration-Scheme/"/>
      <url>/2023/10/05/An-Operating-System-Level-Data-Migration-Scheme/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary">- æ–‡ç« æ¥è‡ªDesign, Automation &amp; Test in Europe (DATE), 2016- An Operating System Level Data Migration Scheme in Hybrid DRAM-NVM Memory Architecture</div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Reza Salkhordeh and Hossein Asadi, Data Storage Systems &amp; Networks (DSN) Lab, ä¼Šæœ—è°¢é‡Œå¤«ç†å·¥è®¡ç®—å·¥ç¨‹ç³»</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åœ¨ä¸»å­˜å‚¨å™¨ä¸­åŒæ—¶é‡‡ç”¨DRAMå’ŒNVMçš„æ··åˆå­˜å‚¨å™¨æ¶æ„ä¸­çš„æ•°æ®è¿ç§»æ–¹æ¡ˆã€‚æ‰€æå‡ºæ–¹æ¡ˆçš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘DRAMå’ŒNVMå­˜å‚¨å™¨ä¹‹é—´æ— ç›Šæ•°æ®è¿ç§»çš„æ•°é‡ï¼Œä»¥æé«˜æ€§èƒ½å’ŒåŠŸæ•ˆã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ä¸Clock-DWFä¸åŒçš„æ˜¯ï¼Œæ¯æ¬¡å†™å…¥å‘½ä¸­éƒ½ä¼šå¯¼è‡´å°†é¡µé¢ç§»åŠ¨åˆ°DRAMä¸»å­˜å‚¨å™¨ï¼Œåœ¨æ‰€æå‡ºçš„æ–¹æ¡ˆä¸­ï¼ŒNVM LRUä¸­çš„æ¯æ¬¡å‘½ä¸­éƒ½å°†è¢«ä¸LRUç®—æ³•ç±»ä¼¼åœ°å¤„ç†ï¼Œä½†æœ‰ä¸€ä¸ªåŒºåˆ«ã€‚å¦‚æœæŸä¸ªé¡µé¢åœç•™åœ¨LRUé¡¶éƒ¨é¡µé¢çš„æ—¶é—´è¶…è¿‡é˜ˆå€¼è®¿é—®æ¬¡æ•°ï¼Œåˆ™è¯¥é¡µé¢å°†è¢«è§†ä¸ºçƒ­é¡µé¢ï¼Œå¹¶å°†è¢«ç§»è‡³DRAMã€‚ç”±äºåœ¨ä¸¤ä¸ªå­˜å‚¨å™¨ä¹‹é—´ç§»åŠ¨æ•°æ®é¡µçš„æˆæœ¬å¾ˆé«˜ï¼Œå› æ­¤ä½¿ç”¨æ­¤é˜ˆå€¼å°†é˜²æ­¢åœ¨ä»¥å‰çš„ç ”ç©¶ï¼ˆä¾‹å¦‚Clock-DWFï¼‰ä¸­å¾ˆå¯èƒ½å‘ç”Ÿçš„æ— ç›Šè¿ç§»ã€‚</p><p> CLOCK-DWF ä½¿ç”¨ä¸¤ç§æ—¶é’Ÿç®—æ³•ï¼Œæ¯ä¸ªå†…å­˜æ¨¡å—ä½¿ç”¨ä¸€ç§æ—¶é’Ÿç®—æ³•ã€‚å½“å‘ç”Ÿé¡µé¢é”™è¯¯æ—¶ï¼Œå¦‚æœå¯¼è‡´é¡µé¢é”™è¯¯çš„è¯·æ±‚æ˜¯å†™å…¥ï¼Œåˆ™è¯¥é¡µé¢å°†è¢«ç§»åŠ¨åˆ°DRAMï¼Œå¦åˆ™å®ƒå°†è¢«ç§»åŠ¨åˆ°NVMã€‚æ—¶é’Ÿç®—æ³•çš„ä¿®æ”¹ä½¿ CLOCK-DWF èƒ½å¤Ÿæ‰¾åˆ°æ´»è·ƒçš„å¹¶ä¸”å†™å…¥ä¸ºä¸»çš„æ•°æ®é¡µå¹¶å°†å®ƒä»¬ç§»åŠ¨åˆ° DRAM å†…å­˜ã€‚å¦‚æœé’ˆå¯¹é©»ç•™åœ¨ NVM å­˜å‚¨å™¨ä¸­çš„æ•°æ®é¡µçš„å†™å…¥è¯·æ±‚åˆ°è¾¾ï¼Œåˆ™è¯¥æ•°æ®é¡µå°†è¢«ç§»åŠ¨åˆ° DRAMã€‚åœ¨ä¸¤ä¸ªå­˜å‚¨å™¨ä¹‹é—´è¿ç§»é¡µé¢éœ€è¦å¯¹ä¸¤ä¸ªå­˜å‚¨å™¨è¿›è¡Œå¤šæ¬¡è®¿é—®ã€‚ä½†CLOCK-DWFä¸­æ²¡æœ‰è€ƒè™‘è¿™ç§å½±å“ï¼Œè¿™å°†å¯¼è‡´å…¶æ¨¡å‹ä¸å‡†ç¡®</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>ä½¿ç”¨ä¸¤ä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰é˜Ÿåˆ—ï¼ˆä¸€ä¸ªç”¨äºDRAMï¼Œä¸€ä¸ªç”¨äºNVMï¼‰ï¼Œå¹¶ä¼˜åŒ–NVMçš„LRUé˜Ÿåˆ—ï¼Œä»¥é˜²æ­¢æ— ç›Šçš„è¿ç§»åˆ°DRAMã€‚LRUé˜Ÿåˆ—ä¸­çš„ä¼˜åŒ–æ˜¯æœ€å°çš„ï¼Œå› æ­¤æ‰€æå‡ºçš„æ–¹æ¡ˆå°†å…·æœ‰ä¸æœªä¿®æ”¹çš„LRUå‡ ä¹ç›¸åŒçš„å‘½ä¸­ç‡ã€‚</p><h3 id="1ï¼‰å»ºç«‹æ€§èƒ½èƒ½é‡æ¨¡å‹"><a href="#1ï¼‰å»ºç«‹æ€§èƒ½èƒ½é‡æ¨¡å‹" class="headerlink" title="1ï¼‰å»ºç«‹æ€§èƒ½èƒ½é‡æ¨¡å‹"></a>1ï¼‰å»ºç«‹æ€§èƒ½èƒ½é‡æ¨¡å‹</h3><p>18å¹´åç§‘çš„å¯¹è±¡çº§è¿ç§»çš„æ€§èƒ½èƒ½é‡å»ºæ¨¡å°±å’Œè¿™ä¸ªå·®ä¸å¤šã€‚ä½†æ˜¯è¿™é‡Œçš„æ€§èƒ½èƒ½é‡å»ºæ¨¡åªé€‚ç”¨äºè¯´æ˜ä¹‹å‰æ–¹æ¡ˆçš„ç¼ºé™·ï¼Œå’Œåé¢æ–¹æ¡ˆè®¾è®¡æ²¡å¤ªå¤§å…³ç³»ã€‚</p><p>æ€§èƒ½æ¨¡å‹å–å†³äºDRAMå’ŒNVMçš„å»¶è¿Ÿã€é©±é€çš„ç²’åº¦ä»¥åŠå­˜å‚¨å™¨ä¹‹é—´è¿ç§»çš„å»¶è¿Ÿã€‚ä¸ºäº†è¡¡é‡æ€§èƒ½ï¼Œæˆ‘ä»¬ä½¿ç”¨å¹³å‡å†…å­˜è®¿é—®æ—¶é—´(AMAT)ã€‚è¿ç§»çš„å¼€é”€å°†åœ¨å¯¹å†…å­˜çš„æ‰€æœ‰è®¿é—®ä¹‹é—´æŒ‰æ¯”ä¾‹åˆ†é…ã€‚å…¬å¼1æ˜¾ç¤ºäº†AMAT çš„å…¬å¼ã€‚è¡¨Iä¸­æä¾›äº†å‚æ•°çš„æè¿°ã€‚åœ¨è¯¥ç­‰å¼ä¸­ï¼Œå‰ä¸¤é¡¹è®¡ç®—DRAMæˆ–NVMä¸­æ‰€æœ‰å‘½ä¸­è®¿é—®çš„ AMATã€‚ç¬¬ä¸‰é¡¹è€ƒè™‘é¡µé¢é”™è¯¯ã€‚ç”±äºå°†æ•°æ®é¡µä»ç£ç›˜ä¼ è¾“åˆ°å†…å­˜å°†é€šè¿‡DMA å®Œæˆï¼Œå› æ­¤å°†æ•°æ®å—å†™å…¥å†…å­˜çš„å»¶è¿Ÿå°†ä¸ä»ç£ç›˜è¯»å–ä¸‹ä¸€ä¸ªæ•°æ®å—çš„å»¶è¿Ÿé‡å ã€‚å› æ­¤ï¼Œæ“ä½œç³»ç»Ÿåªçœ‹åˆ°ç£ç›˜å»¶è¿Ÿï¼Œåœ¨è¿™ä¸ªæœ¯è¯­ä¸­æˆ‘ä»¬åªè€ƒè™‘ç£ç›˜å»¶è¿Ÿã€‚æœ€åä¸¤é¡¹è®¡ç®—ä¸¤ä¸ªå­˜å‚¨å™¨ä¹‹é—´çš„è¿ç§»æˆæœ¬ã€‚å½“å‘ç”Ÿè¿ç§»æ—¶ï¼Œå°†ä»ä¸€ä¸ªå†…å­˜è¯»å–æ•°æ®é¡µå¹¶å°†å…¶å†™å…¥å¦ä¸€ä¸ªå†…å­˜ã€‚ç”±äºæ•°æ®é¡µçš„ç²’åº¦æ¯”å¯¹å†…å­˜çš„å®é™…è®¿é—®è¦å¤§å¾—å¤šï¼ˆé€šå¸¸ä¸º4åˆ°16Bï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨PageFactorï¼Œå®ƒæ˜¯ä¸€ä¸ªç³»æ•°ï¼Œå¯å°†æ•°æ®é¡µçš„ç§»åŠ¨è½¬æ¢ä¸ºè¦è¢«è®¿é—®çš„å†…å­˜æ•°é‡ã€‚</p><div class="note info no-icon">PageFactorè¿™ä¸ªè½¬æ¢å¤šä½™äº†å§ï¼ŒæŒ‰é¡µè¿ç§»ä¹Ÿæ²¡æ³•åªç§»åŠ¨è¿™å‡ Bçš„ï¼Œå±äºé™„å¸¦æ¶ˆè€—ã€‚è¿™ä½ä¼™è®¡å®šä¹‰çš„è¡¨æ ¼é‡Œçš„èƒ½è€—ä»€ä¹ˆçš„æ€ä¹ˆæ”¶é›†åˆ°çš„ï¼Œè¿˜æœ‰é‚£äº›æ¦‚ç‡</div> <p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b5b2cad055864692a88d2b9ecbb5485d.png"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/add1e59ff2e8473f8454f2bf31f34f89.png"></p><p>æ— è®ºåˆ°è¾¾å­˜å‚¨å™¨çš„è¯·æ±‚æ•°é‡å¦‚ä½•ï¼Œéƒ½ä¼šæ¶ˆè€—é™æ€åŠŸè€—ï¼Œè€Œæ¯ä¸ªå‘é€åˆ°å­˜å‚¨å™¨çš„è¯·æ±‚éƒ½ä¼šæ¶ˆè€—åŠ¨æ€åŠŸè€—ã€‚æˆ‘ä»¬çš„ç”µæºæ¨¡å‹è€ƒè™‘äº†ä¸¤ä¸ªå†…å­˜ä¹‹é—´çš„è¿ç§»ä»¥åŠå°†é¡µé¢ä»ç£ç›˜ç§»åŠ¨åˆ°ä»»ä¸€å†…å­˜æ¨¡å—ä»¥åŠæœåŠ¡è¯·æ±‚çš„é™æ€å’ŒåŠ¨æ€ç”µæºã€‚æ¯æ¬¡è®¿é—®å†…å­˜æ—¶éƒ½ä¼šè®¡ç®—åŠ¨æ€åŠŸè€—ã€‚è¿™å°†å¯¼è‡´åŠŸè€—æ¨¡å‹ç‹¬ç«‹äºåº”ç”¨ç¨‹åºè¿è¡Œæ—¶å’Œå†…å­˜å¤§å°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥æ¯ä¸ªè¯·æ±‚çš„å¹³å‡åŠŸç‡(APPR)ä½œä¸ºæµ‹é‡åŠŸç‡çš„æŒ‡æ ‡ï¼Œå¦‚å…¬å¼2æ‰€ç¤ºã€‚ä¸æ€§èƒ½æ¨¡å‹ç±»ä¼¼ï¼Œå‰ä¸¤é¡¹è®¡ç®—å¯¹å­˜å‚¨å™¨çš„æ‰€æœ‰å‘½ä¸­è®¿é—®çš„åŠŸç‡ã€‚ç¬¬ä¸‰é¡¹å’Œç¬¬å››é¡¹è€ƒè™‘å°†æ•°æ®é¡µä»ç£ç›˜ç§»åŠ¨åˆ°å†…å­˜æ¨¡å—çš„å†™å…¥åŠŸç‡ã€‚æœ€åä¸¤é¡¹è€ƒè™‘äº†ä¸¤ä¸ªå­˜å‚¨å™¨ä¹‹é—´è¿ç§»çš„åŠŸç‡æ•ˆåº”ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/78719c197cd24a28942ca867cf81a3a1.png"></p><p>ç”±äºé™æ€åŠŸè€—ä¸è¯·æ±‚æ— å…³ï¼Œå› æ­¤æˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªåä¸º AvgStaticPower çš„æ–°å‚æ•°ï¼Œè¯¥å‚æ•°æŒ‰æ¯”ä¾‹åˆ†é…ç»™å®šæ—¶é—´é—´éš”å†…åˆ°è¾¾å†…å­˜çš„æ‰€æœ‰è¯·æ±‚ä¹‹é—´çš„é™æ€åŠŸè€—ã€‚å¯¹æ‰€æœ‰è¯·æ±‚æŒ‰æ¯”ä¾‹åˆ†é…é™æ€åŠŸè€—çš„åŸå› æ˜¯ï¼Œä»æ“ä½œç³»ç»Ÿçš„è§’åº¦æ¥çœ‹ï¼Œä¸»å†…å­˜ä¼šæ¶ˆè€—åŠŸç‡ï¼ˆåŒ…æ‹¬é™æ€å’ŒåŠ¨æ€ï¼‰æ¥æœåŠ¡è¯·æ±‚ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªåŠŸè€—æ¥æºéƒ½åº”è¢«è§†ä¸ºæœåŠ¡æˆæœ¬çš„è¯·æ±‚ã€‚å¯¹äºç‰¹å®šå·¥ä½œè´Ÿè½½ï¼ŒAvgStaticPoweræ ¹æ®å…¬å¼3è®¡ç®—ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/1103cf68e870402d91ee88f71097d61c.png"></p><h3 id="2ï¼‰è¿ç§»æ–¹æ¡ˆ"><a href="#2ï¼‰è¿ç§»æ–¹æ¡ˆ" class="headerlink" title="2ï¼‰è¿ç§»æ–¹æ¡ˆ"></a>2ï¼‰è¿ç§»æ–¹æ¡ˆ</h3><p>ä¸ºäº†æ‰¾åˆ°åœ¨è¿ç§»æ—¶èƒ½å¤Ÿæ”¹å–„åŠŸè€—å’Œæ€§èƒ½çš„æ•°æ®é¡µï¼ˆç›¸å¯¹äºè¿ç§»æˆæœ¬ï¼‰ï¼Œæ‰€æå‡ºçš„æ–¹æ¡ˆå­˜å‚¨äº†ä¸€äº›å…³äºæ•°æ®é¡µçš„é™„åŠ ä¿¡æ¯ï¼Œä¾‹å¦‚NVM LRUé˜Ÿåˆ—ä¸­çš„è¯»å’Œå†™è®¡æ•°å™¨ã€‚è¯·æ³¨æ„ï¼Œæ­¤é™„åŠ ä¿¡æ¯ä¸ä¼šå¹²æ‰°LRUï¼Œå¹¶ä¸”ä¸éœ€è¦äº†è§£æ­¤å†…åŠ¡ä¿¡æ¯ã€‚å¯¹äºNVMé˜Ÿåˆ—ä¸­çš„æ¯ä¸ªæ•°æ®é¡µï¼Œå°†å­˜å‚¨ä¸¤ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºè®¡æ•°ä»æ•°æ®é¡µè¿›å…¥é˜Ÿåˆ—æ—¶èµ·å¯¹ç›¸åº”æ•°æ®é¡µçš„è¯»å†™è®¿é—®çš„æ¬¡æ•°ã€‚</p><p>å›¾ 3 æ˜¾ç¤ºäº†æ‰€æå‡ºçš„ç”±ä¸¤ä¸ª LRU é˜Ÿåˆ—ç»„æˆçš„æ•°æ®è¿ç§»æ–¹æ¡ˆçš„æ¶æ„ã€‚è™šçº¿è¡¨ç¤ºæ‰€æå‡ºçš„æŠ€æœ¯æ‰§è¡Œçš„æ“ä½œï¼Œå®çº¿è¡¨ç¤ºä¼ ç»Ÿçš„ LRU ç®¡ç†ç®—æ³•ã€‚æš—æ•°æ®é¡µè®¿é—®æ›´é¢‘ç¹ï¼Œè¢«è§†ä¸ºçƒ­æ•°æ®é¡µã€‚ä¸ CLOCK DWF å°†è¯»å–è¯·æ±‚å‘å‡ºçš„é¡µé¢é”™è¯¯æ”¾ç½®åœ¨ NVM ä¸Šç›¸åï¼Œæ‰€æå‡ºçš„æ–¹æ¡ˆå°†æ‰€æœ‰é¡µé¢ä»ç£ç›˜ç§»åŠ¨åˆ° DRAM åŒºåŸŸã€‚è¿™æ˜¯å› ä¸ºç§»åŠ¨åˆ° NVM æˆ– DRAM å°†å¯¼è‡´ NVM ä¸­çš„é¡µé¢å†™å…¥ï¼Œå› ä¸º DRAM å§‹ç»ˆå·²æ»¡ï¼Œå¹¶ä¸”å°†æ•°æ®é¡µé¢ç§»åŠ¨åˆ° DRAM ä¼šå‘ NVM å‘å‡ºé©±é€ã€‚å› æ­¤ï¼Œå°± NVM å†™å…¥è€Œè¨€ï¼Œè¿ç§»åˆ° NVM æˆ– DRAM çš„æˆæœ¬æ˜¯ç›¸åŒçš„ã€‚ä¸æ—§æ•°æ®é¡µç›¸æ¯”ï¼Œæ–°è®¿é—®çš„æ•°æ®é¡µå…·æœ‰æ›´é«˜çš„è®¿é—®æ¦‚ç‡ï¼Œå¹¶ä¸”å°†æ­¤æ–°é¡µç§»åŠ¨åˆ° DRAM å°†å¯¼è‡´ DRAM å‘½ä¸­ç‡è€Œä¸æ˜¯ NVM å‘½ä¸­ç‡çš„å¢åŠ ã€‚è¿™å°†æœ‰åŠ©äºæé«˜æ€§èƒ½å’Œç”µæºæ•ˆç‡ï¼Œå› ä¸º DRAM åœ¨åŠ¨æ€åŠŸè€—å’Œå»¶è¿Ÿæ–¹é¢å…·æœ‰ä¼˜è¶Šæ€§ã€‚å­˜å‚¨å†…åŠ¡ä¿¡æ¯çš„å¼€é”€å¹¶ä¸å¤§ï¼Œå¯¹äº 4KB æ•°æ®é¡µæ¥è¯´çº¦ä¸º 0.04%ã€‚ç„¶è€Œï¼Œåœ¨ NVM ä¸­ä¿ç•™æ‰€æœ‰é¡µé¢çš„è®¡æ•°å™¨æœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œå®ƒéœ€è¦ä¸€ä¸ªæ’åºæ–¹æ¡ˆï¼Œä»¥ä¾¿è¯†åˆ«å†·ä½†ä¼šåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…è®¿é—®ä¸€æ¬¡çš„æ•°æ®é¡µã€‚è¿™äº›æ•°æ®é¡µå°†åœ¨ NVM ä¸­é©»ç•™è¶³å¤Ÿé•¿çš„æ—¶é—´ä»¥å…·æœ‰è¾ƒé«˜çš„è®¡æ•°å™¨å€¼ï¼Œå› æ­¤å°†è¢«ç§»åŠ¨åˆ° DRAMï¼Œåœ¨é‚£é‡Œå®ƒä»¬æ— æ³•ä¸çƒ­æ•°æ®é¡µç«äº‰ï¼Œå¹¶ä¸”å°†è¿”å›åˆ° NVMï¼Œè¿™ä½¿å¾—å®ƒä»¬è¿ç§»åˆ° DRAM æ²¡æœ‰ä»»ä½•å¥½å¤„ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/26073db180a64a9c888e27b6f08665c5.png"></p><p>ç®—æ³• 1 æ˜¾ç¤ºäº†åœ¨æ”¶åˆ°è¯·æ±‚çš„æƒ…å†µä¸‹æ‰€æå‡ºæ–¹æ¡ˆçš„æµç¨‹ã€‚ç”±äº DRAM åŒ…å«æœ€çƒ­çš„æ•°æ®é¡µï¼Œå› æ­¤æ‰€æå‡ºçš„æ–¹æ¡ˆé¦–å…ˆæœç´¢ DRAMï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è½¬åˆ° NVMã€‚åœ¨ DRAM ä¸­æŸ¥æ‰¾æ•°æ®é¡µå°†å¯¼è‡´æ­£å¸¸çš„ LRU å†…åŠ¡å¤„ç†ã€‚å¦åˆ™ï¼ŒNVM ä¸­çš„é¢å¤–å†…åŠ¡ä¿¡æ¯å°†æ ¹æ®è¯·æ±‚ç±»å‹è¿›è¡Œæ›´æ–°ã€‚è¯»å–å’Œå†™å…¥è®¡æ•°å™¨å°†åˆ†åˆ«å­˜å‚¨åœ¨ NVM ä¸­çš„ readperc å’Œ writeperc é¡¶éƒ¨æ•°æ®é¡µã€‚å› æ­¤ï¼Œåœ¨å‘½ä¸­çš„æƒ…å†µä¸‹ï¼Œä»é¡¶éƒ¨æ•°æ®é¡µæ‰è½çš„æ•°æ®é¡µçš„è¯»å’Œå†™è®¡æ•°å™¨å°†è¢«æ¸…é™¤ã€‚ç¬¬ 10 è¡Œåˆ°ç¬¬ 22 è¡Œåˆå§‹åŒ–ç›¸åº”æ•°æ®é¡µçš„è®¡æ•°å™¨ã€‚å¦‚æœ NVM ä¸­æ•°æ®é¡µçš„è®¡æ•°å™¨å€¼è¶…è¿‡è¯»å–é˜ˆå€¼æˆ–å†™å…¥é˜ˆå€¼ï¼ˆå–å†³äºè¯·æ±‚ç±»å‹ï¼‰ï¼Œåˆ™ä¼šå°†å…¶è¿ç§»åˆ° DRAMã€‚å°†æ–°æ•°æ®é¡µæ’å…¥å†…å­˜å’Œé€å‡ºç­–ç•¥ä¸ LRU ç›¸æ¯”æ²¡æœ‰å˜åŒ–ï¼Œå› æ­¤ï¼Œä¸ºäº†ç®€æ´èµ·è§ï¼Œç®—æ³•ä¸­çœç•¥äº†è¿™äº›ç»†èŠ‚ã€‚è¯»å–é˜ˆå€¼å’Œå†™å…¥é˜ˆå€¼çš„å€¼å†³å®šäº†æˆ‘ä»¬è®¡åˆ’å¦‚ä½•ç§¯æåœ°é˜»æ­¢æœ‰ç”¨æ¦‚ç‡è¾ƒä½çš„è¿ç§»ã€‚å®ƒä¸ DRAM å’Œ NVM ä¹‹é—´çš„è¿ç§»æˆæœ¬å¯†åˆ‡ç›¸å…³ï¼Œè€Œè¿ç§»æˆæœ¬åˆä¸æ‰€é‡‡ç”¨çš„ NVM çš„æ€§èƒ½å’ŒåŠŸè€—ç‰¹æ€§æœ‰å…³ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c39c07a13b894e9ba202c0ea626bdc5b.png"></p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>å‘ç°äº†å…ˆå‰ç ”ç©¶çš„ç¼ºç‚¹ï¼Œå¹¶æå‡ºäº†ä¸€ç§æ–°é¢–çš„æ··åˆå†…å­˜æ•°æ®è¿ç§»æ–¹æ¡ˆã€‚åœ¨LRUä¸ŠåŠ äº†ä¸€äº›å°æ”¹åŠ¨ã€‚</p><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><p>åœ¨è¿‡å»å‡ å¹´æä¾›çš„å„ç§NVMä¸­ï¼Œç›¸å˜å­˜å‚¨å™¨(PCM)ã€è‡ªæ—‹è½¬ç§»æ‰­çŸ©(STT-RAM) å’Œç”µé˜»RAM(PRAM)è¢«è®¤ä¸ºæ˜¯ä¸»å­˜å‚¨å™¨ä¸­æœ€æœ‰å‰é€”çš„NVM[2] ã€‚</p><p>æœ¬æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨COTSonå…¨ç³»ç»Ÿæ¨¡æ‹Ÿå™¨[13]ã€‚</p><p>CLOCK-DWF ç»´æŠ¤ DRAM å’Œ NVM çš„ä¸¤ç§æ—¶é’Ÿç®—æ³•ã€‚ NVMä¸­çš„æ—¶é’Ÿç®—æ³•ä¸ä¼ ç»Ÿçš„æ—¶é’Ÿç®—æ³•æœ‰ä¸€ç‚¹ä¸åŒã€‚å¦‚æœå¯¹ NVM ä¸­çš„æ•°æ®é¡µè¿›è¡Œå†™è®¿é—®ï¼Œåˆ™ç›¸åº”çš„æ•°æ®é¡µå°†è¢«ç§»åŠ¨åˆ° DRAMã€‚å› æ­¤ï¼ŒNVM ä¸ä¼šå“åº”ä»»ä½•å†™è®¿é—®ã€‚è¯¥æ–¹æ³•çš„ä¸»è¦ç›®çš„æ˜¯å‡å°‘ NVM ä¸­çš„å†™å…¥æ¬¡æ•°ã€‚è™½ç„¶è¿™ä¼šé˜»æ­¢ä»»ä½•å†™å…¥åˆ°è¾¾ NVMï¼Œä½† NVM ä¸­æ•°æ®é¡µçš„æ¯æ¬¡å†™å…¥è®¿é—®éƒ½ä¼šå¯¼è‡´ä¸¤ä¸ªå­˜å‚¨å™¨ä¹‹é—´çš„æ•°æ®é¡µè¿ç§»ã€‚ç„¶è€Œï¼ŒDRAM çš„æ—¶é’Ÿç®—æ³•æœ‰æ‰€ä¸åŒï¼Œå®ƒå°è¯•å°†å†™ä¸»å¯¼çš„æ•°æ®é¡µä¿ç•™åœ¨ DRAM å†…å­˜ä¸­ï¼Œå¹¶é€å‡ºä¸»è¦è¯»ä¸»å¯¼çš„æ•°æ®é¡µã€‚è¿™æ˜¯å› ä¸ºä¸ NVMä¸­çš„å†™å…¥è¯·æ±‚ç›¸æ¯”ï¼Œåªè¯»é¡µé¢å…·æœ‰æ›´å¥½çš„æ€§èƒ½ä¸åŠŸè€—æƒè¡¡ã€‚å‘ç”Ÿé¡µé¢é”™è¯¯æ—¶ï¼Œå¦‚æœè¯·æ±‚æ˜¯è¯»ï¼Œåˆ™ç›¸åº”çš„æ•°æ®é¡µå°†è¢«ç§»åŠ¨åˆ°NVMï¼Œå¦‚æœæ˜¯å†™ï¼Œåˆ™æ•°æ®é¡µå°†è¢«ç§»åŠ¨åˆ°DRAMã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> B </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Characterizing and Optimizing Hybrid DRAMPM Main Memory System with Application Awareness</title>
      <link href="/2023/10/04/Characterizing-and-Optimizing-Hybrid-DRAMPM-Main-Memory-System-with-Application-Awareness/"/>
      <url>/2023/10/04/Characterizing-and-Optimizing-Hybrid-DRAMPM-Main-Memory-System-with-Application-Awareness/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªDesign, Automation &amp; Test in Europe(DATE), 2022</li><li>Characterizing and Optimizing Hybrid DRAM-PM Main Memory System with Application Awareness</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Yongfeng Wang, Yinjin Fu, Yubo Liu, Zhiguang Chen, Nong Xiaoä¸­å±±å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>PMå¤§å®¹é‡ä¹‹åï¼Œ<span class="label primary">å¤šä¸ªåº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½å¹¶å‘æ‰§è¡Œçš„æ•°æ®æ”¾ç½®ã€å†…å­˜å¹¶å‘å’Œå·¥ä½œè´Ÿè½½è°ƒåº¦æ–¹é¢å­˜åœ¨å…³é”®çš„ç®¡ç†æŒ‘æˆ˜</span>ä½œè€…æ€»ç»“åœ¨æ··åˆå†…å­˜ç³»ç»Ÿåœºæ™¯ä¸‹è®¨è®ºçš„3ä¸ªé—®é¢˜ï¼šæ•°æ®æ”¾ç½®ã€ä¼˜åŒ–çº¿ç¨‹åˆ†é…ã€å¹¶å‘ç¨‹åºæ‰§è¡Œé¡ºåºå¦‚è¡¨1</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c2fd2e2f7b514331a1be9c6f6fe7fcb0.png"></p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>æå‡ºäº†ä¸€ç³»åˆ—åº”ç”¨æ„ŸçŸ¥çš„æ“ä½œç­–ç•¥ï¼ŒåŒ…æ‹¬ï¼šåº”ç”¨æ„ŸçŸ¥çš„æ•°æ®æ”¾ç½®ã€è‡ªé€‚åº”çº¿ç¨‹åˆ†é…å’Œé¿å…åº”ç”¨é—´å¹²æ‰°ï¼Œä»¥æé«˜æ··åˆå­˜å‚¨å™¨ä¸Šå¤šä¸ªåº”ç”¨çš„å¹¶å‘æ€§èƒ½ã€‚</p><p><span class="label primary">1)å¦‚ä½•å°†åº”ç”¨å·¥ä½œè´Ÿè½½åˆ†é…åˆ°åˆé€‚çš„å†…å­˜è®¾å¤‡ä¸Šï¼Œä»¥æé«˜å¹¶å‘åº”ç”¨çš„æ•´ä½“ç³»ç»Ÿæ€§èƒ½?</span><br>2)å¦‚ä½•é€šè¿‡ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºåˆ†é…æœ€ä½³çš„çº¿ç¨‹æ•°æ¥ä¿è¯ä¸åŒå·¥ä½œè´Ÿè½½çš„å¹¶å‘æ‰§è¡Œçš„å…¬å¹³æ€§?<br>3)ä»€ä¹ˆæ ·çš„åº”ç”¨å·¥ä½œè´Ÿè½½è°ƒåº¦æ–¹æ¡ˆå¯ä»¥é¿å…æˆ–å‡è½»ä¸¤ä¸ªæˆ–å¤šä¸ªåŒæ—¶è¿è¡Œçš„åº”ç”¨ä¹‹é—´çš„å¹²æ‰°ï¼Œä»¥å®ç°æ›´é«˜çš„æ€§èƒ½?</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ä½†æ˜¯è¿™äº›æ–¹æ¡ˆæ²¡æœ‰å»å…·ä½“è€ƒè™‘å¹¶å‘åº”ç”¨çš„ä¸ªåˆ«éœ€æ±‚(åº”ç”¨æ„ŸçŸ¥)ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><h3 id="1ï¼‰å°†åº”ç”¨æ„ŸçŸ¥è§£é‡Šä¸ºå¸¦å®½æ•æ„Ÿæˆ–è€…å»¶è¿Ÿæ•æ„Ÿã€‚"><a href="#1ï¼‰å°†åº”ç”¨æ„ŸçŸ¥è§£é‡Šä¸ºå¸¦å®½æ•æ„Ÿæˆ–è€…å»¶è¿Ÿæ•æ„Ÿã€‚" class="headerlink" title="1ï¼‰å°†åº”ç”¨æ„ŸçŸ¥è§£é‡Šä¸ºå¸¦å®½æ•æ„Ÿæˆ–è€…å»¶è¿Ÿæ•æ„Ÿã€‚"></a>1ï¼‰å°†åº”ç”¨æ„ŸçŸ¥è§£é‡Šä¸ºå¸¦å®½æ•æ„Ÿæˆ–è€…å»¶è¿Ÿæ•æ„Ÿã€‚</h3><p>æ ¹æ®ç³»ç»Ÿèµ„æºéœ€æ±‚çš„ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¡ç®—æœåŠ¡å™¨çš„åº”ç”¨å·¥ä½œè´Ÿè½½åˆ†ä¸ºCPUç»‘å®šå’Œå†…å­˜ç»‘å®šã€‚ä¸ºäº†å°†æˆ‘ä»¬çš„å·¥ä½œé‡ç‚¹æ”¾åœ¨å†…å­˜èµ„æºç®¡ç†ä¸Šï¼Œç»‘å®šå†…å­˜çš„åº”ç”¨è¢«è¿›ä¸€æ­¥åˆ†ä¸ºå¯¹å¸¦å®½æ•æ„Ÿçš„åº”ç”¨å’Œå¯¹å»¶æ—¶æ•æ„Ÿçš„åº”ç”¨ã€‚æˆ‘ä»¬çš„åˆ†ç±»ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ¸…æ¥šåœ°åŒºåˆ†å·¥ä½œè´Ÿè½½ç±»åˆ«ï¼Œå› ä¸ºæ¯ä¸ªå·¥ä½œè´Ÿè½½ç±»åˆ«éƒ½å½¢æˆäº†è‡ªå·±ç‹¬ç‰¹çš„é›†ç¾¤ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/cddfdfc49de643f0b30cf713269f15c8.png"></p><p>å›¾1æ˜¾ç¤ºäº†æ‰€æœ‰å·¥ä½œè´Ÿè½½çš„å»¶è¿Ÿå’Œå†…å­˜å¸¦å®½éœ€æ±‚çš„æ•æ„Ÿæ€§ã€‚å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨xè½´å’Œyè½´ä¸Šçš„æ•°å€¼éƒ½å¾ˆä½æ—¶ï¼Œå®ƒ<br>å°±æ˜¯ä¸€ä¸ªå—CPUçº¦æŸçš„åº”ç”¨ç¨‹åºã€‚å¯¹æ€§èƒ½è¦æ±‚é«˜çš„æ•°æ®åº“å·¥ä½œè´Ÿè½½å¯¹å»¶è¿Ÿæœ€æ•æ„Ÿï¼Œè€Œå¯¹å¸¦å®½çš„æ•æ„Ÿåº¦ä½ã€‚è€Œå¤§æ•°æ®<br>åˆ†æçš„å·¥ä½œè´Ÿè½½ï¼Œå¦‚OLAPã€Lu cbå’Œfacesim,å¯¹å¸¦å®½å’Œå»¶è¿Ÿçš„æ•æ„Ÿæ€§å¤„äºä¸­é—´æ°´å¹³ã€‚HPCGã€Graph500å’Œä¸€äº›æ•°æ®å¯†<br>é›†å‹å·¥ä½œè´Ÿè½½å¯¹å¸¦å®½çš„æ•æ„Ÿæ€§æœ€é«˜ï¼Œå¯¹å»¶è¿Ÿçš„æ•æ„Ÿæ€§æœ€ä½ç»‘å®šCPUçš„å·¥ä½œè´Ÿè½½ï¼Œå¦‚HPLã€swaptionså’Œfreqmine, å¯¹<br>å†…å­˜å»¶è¿Ÿæˆ–å¸¦å®½çš„æ•æ„Ÿæ€§ä¸é«˜ã€‚</p><div class="note info no-icon">ä¸è¿‡ï¼Œè¿™ä¸ªå›¾æ˜¯æ€ä¹ˆå¾—åˆ°çš„ï¼Ÿ</div> <p>ä¸‹å›¾è¡¨ç¤ºåº”ç”¨æ„ŸçŸ¥ä¼˜åŒ–åè¾¾åˆ°çš„æ•ˆæœï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b4675b4852e44b7cba5a23362663c62f.png"><br>å¤§è‡´çœ‹èµ·æ¥æ˜¯æƒ³è¯´ï¼Œç¬¬ä¸‰èŠ‚æ•°æ®æ”¾ç½®è¾¾åˆ°ç¼©çŸ­è¿è¡Œæ—¶é—´çš„æ•ˆæœã€ç¬¬å››èŠ‚çº¿ç¨‹åˆ†é…ã€ç¬¬äº”èŠ‚æ¥å£å†²çªã€‚</p><h3 id="2ï¼‰æ•°æ®æ”¾ç½®ç­–ç•¥"><a href="#2ï¼‰æ•°æ®æ”¾ç½®ç­–ç•¥" class="headerlink" title="2ï¼‰æ•°æ®æ”¾ç½®ç­–ç•¥"></a>2ï¼‰æ•°æ®æ”¾ç½®ç­–ç•¥</h3><p>åœ¨æ··åˆå†…å­˜ä¸­ï¼Œä¸¤ç§å†…å­˜ä»‹è´¨ä¸Šçš„åº”ç”¨æ€§èƒ½æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œè€Œä¸”è¿™ç§å½±å“çš„å¤§å°åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºåº”ç”¨çš„ç‰¹æ€§ä¸ºäº†è¯„ä¼°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»PARSEC[16]ã€splash2x[17]å’ŒNPB[18]é€‰æ‹©äº†å‡ ä¸ªæµ‹è¯•ã€‚</p><div class="note info no-icon">è¿™é‡Œé€‰æ‹©éƒ½æ˜¯å¹¶å‘çš„ç¨‹åºï¼Œè€Œä¸”ä¸¤ç§ä»‹è´¨å¯ä»¥å½±å“æ€§èƒ½çš„å·®åˆ«å°±æ˜¯å»¶è¿Ÿå’Œå¸¦å®½ï¼ˆè¿˜æœ‰å…¶ä»–ä»€ä¹ˆå—ï¼Ÿï¼‰ï¼Œç¨‹åºåˆæœ‰ä¸åŒçš„å»¶è¿Ÿå¸¦å®½æ•æ„Ÿã€‚åœ¨çº¯PMä¸Šè¿è¡Œï¼Œè¿™åªè¯´äº†ç‰©ç†æœºé…ç½®ï¼Œæ‰€ä»¥è¿™æ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ï¼Ÿ</div> <p>å›¾3æ˜¾ç¤ºäº†åœ¨PMä¸Šè¿è¡Œçš„8çº¿ç¨‹åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½ä¸DRAMä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½çš„æ€§èƒ½ä¸‹é™æƒ…å†µä»¥åŠå®Œæˆæ—¶é—´çš„æ¯”ç‡ã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºå°†åˆ†åˆ«åœ¨PMå’ŒDRAMä¸Šè¿è¡Œ10æ¬¡ï¼Œæˆ‘ä»¬è®°å½•å®ƒä»¬çš„å¹³å‡å®Œæˆæ—¶é—´ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/8b9d7567cae24be79b422c66b5289d60.png"></p><p><span class="label primary">æŒä¹…æ€§å­˜å‚¨å™¨çš„å¸¦å®½æ¯”DRAMä½ï¼Œè¿™ä½¿å¾—åº”ç”¨ç¨‹åºåœ¨PMä¸Šè¿è¡Œçš„æ—¶é—´æ›´é•¿ã€‚ä»¥ocean_cpä¸ºä¾‹ï¼Œå®ƒåœ¨è®¡ç®—çš„ä¸åŒé˜¶æ®µæµç»å…¶åˆ†å‰²çš„è®¸å¤šä¸åŒçš„ç½‘æ ¼ï¼Œéšç€é—®é¢˜å¤§å°çš„å¢åŠ ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„å®¹é‡å’Œå†²çªå¤±è¯¯[17]ã€‚å½“å·¥ä½œé›†è¶…è¿‡é«˜é€Ÿç¼“å­˜çš„<br>å¤§å°æ—¶ï¼Œå†…å­˜å¸¦å®½å°±ä¼šæˆä¸ºè¿™ä¸ªåº”ç”¨çš„ç“¶é¢ˆã€‚åœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œocean_cpåœ¨DRAMä¸Šçš„è¯»å’Œå†™åˆ†åˆ«æ¶ˆè€—äº†40.9GB/så’Œ<br>15.3GB/sçš„å¸¦å®½ï¼Œè€Œåœ¨PMä¸Šç”±äºå…¶å¸¦å®½è¾ƒä½ï¼Œåªæ¶ˆè€—äº†2.45GB/så’Œ0.8GB/sã€‚è¿™ä¸ª17å€çš„å¸¦å®½å·®è·å¯ä»¥è§£é‡Šocean_cpåœ¨PMä¸Šçš„å‡é€Ÿã€‚PMçš„æœ‰é™å¸¦å®½ä¹Ÿæ˜¯å¯¹å¸¦å®½æ•æ„Ÿçš„åº”ç”¨å‡é€Ÿçš„ä¸»è¦åŸå› ï¼Œå¦‚cannealã€radixã€NPB/FTã€NPB/MGå’Œ<br>NPB/SPã€‚æ­¤å¤–ï¼Œå…¶ä»–åº”ç”¨å·¥ä½œè´Ÿè½½åœ¨PMä¸Šçš„è¿è¡Œæ—¶é—´ä¸åˆ°DRAMä¸Šçš„1.5å€ï¼Œå¦‚freqmineå’Œswaptionã€‚ å®ƒä»¬éƒ½æ˜¯ä¸CPUç»‘å®šçš„åº”ç”¨ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨å†…å­˜çš„å±€éƒ¨æ€§æ¥å‡å°‘é«˜é€Ÿç¼“å­˜çš„missã€‚å› æ­¤ï¼Œå†…å­˜ä¸æ˜¯è¿™ç±»åº”ç”¨çš„ç“¶é¢ˆã€‚å› æ­¤,åœ¨ä¸åŒçš„å†…å­˜ä»‹è´¨ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºå¯¹è¿™äº›å·¥ä½œè´Ÿè½½çš„æ‰§è¡Œæ—¶é—´æœ‰ç€éš¾ä»¥å¯Ÿè§‰çš„å½±å“ã€‚</span></p><div class="note info no-icon">è¿™é‡Œçš„æ„æ€æ˜¯å¸¦å®½æ•æ„Ÿå’Œæ•°æ®æ”¾ç½®å…³ç³»æ›´ç´§å¯†ï¼Œå»¶è¿Ÿæ•æ„Ÿå’Œä¹‹åè¦è¯´çš„ä¼šæ¯”è¾ƒç›¸å…³ã€‚åé¢çš„åˆ†é…ç­–ç•¥å®Œå…¨ä¹Ÿä¸è€ƒè™‘çƒ­é¡µé¢è¿ç§»äº†ï¼Œç›´æ¥ä¸æ˜¯å¸¦å®½æ•æ„Ÿä¸¢ç»™PMã€‚ç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨å¾ˆå¤šå•Šï¼Œå¸¦å®½æ•æ„Ÿæ˜¯ç”¨å•¥è¡¨ç¤ºï¼Ÿè€Œä¸”ä½ åœ¨DRAMä¸å¤Ÿæ—¶æ€ä¹ˆåœ¨åˆ†é…ä¹‹å‰çŸ¥é“è¿™æ˜¯ä¸æ˜¯å¸¦å®½æ•æ„Ÿçš„ï¼Œé‚£å°±æ˜¯ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®šå˜›ï¼Œè¿è¡Œæ—¶ç¡¬ä»¶è®¡æ•°è‚¯å®šä¸èƒ½æå‰çŸ¥é“ï¼›å¦ä¸€æ–¹é¢æ­£åœ¨è¿è¡Œæ—¶çš„å†…å­˜åˆ†é…è¦æŒ‰ç…§ä¸åŒworkloadåšæ ‡è®°å’¯ï¼Œè¦ä¸ä½ ç°åœ¨è¦åˆ†é…çš„pageä½ ä¹Ÿä¸çŸ¥é“æ˜¯å“ªä¸ªç¨‹åºç”³è¯·çš„ï¼Œä»–è‡ªå·±æ˜¯ä¸æ˜¯å¸¦å®½æ•æ„Ÿ</div> <p>å½“åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½å¯åŠ¨æ—¶ï¼Œå¦‚æœæœ‰è¶³å¤Ÿçš„å¯ç”¨ç©ºé—´ï¼Œå®ƒé¦–å…ˆå°è¯•å°†å…¶åˆ†é…åˆ°DRAMä¸Šã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å¿…é¡»åˆ¤æ–­åº”ç”¨ç¨‹åºæ˜¯å¦å¯¹å¸¦å®½æ•æ„Ÿã€‚å¯¹äºå¸¦å®½æ•æ„Ÿçš„åº”ç”¨ç¨‹åºï¼Œå®ƒå¯ä»¥å°†CPU-Boundåº”ç”¨ç¨‹åºçš„ä¸€äº›å ç”¨çš„DRAMé¡µé¢è¿ç§»åˆ°PMï¼Œç„¶åä¸ºæ–°åº”ç”¨ç¨‹åºåˆ†é…è¿™äº›DRAMé¡µé¢ã€‚å¦‚æœDRAMä¸­çš„æ‰€æœ‰åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½éƒ½æ˜¯å¸¦å®½æ•æ„Ÿçš„ï¼Œæˆ‘ä»¬åªéœ€å°†æ–°åº”ç”¨ç¨‹åºåˆ†é…ç»™PMå³å¯ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å°†å¯¹å¸¦å®½ä¸æ•æ„Ÿçš„åº”ç”¨ç¨‹åºåˆ†é…ç»™æ€§èƒ½ä¸‹é™è¾ƒä½çš„PMã€‚ä¸ºäº†ä½¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ„ŸçŸ¥ç­–ç•¥åˆ‡å®å¯è¡Œï¼Œåº”ç”¨ç¨‹åºç±»å‹å¯ä»¥ç”±ç”¨æˆ·å®šä¹‰æˆ–æ ¹æ®ç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨çš„ä¿¡æ¯è‡ªåŠ¨åˆ†ç±»ã€‚</p><p>ä¸‹é¢è¿™ä¸ªå®éªŒè¡¨ç¤ºé€šè¿‡è¿™ç§æ–¹æ³•ç¨‹åºæ”¾ç½®å¯¹äº†ï¼Œè€Œä¸”èŠ‚çº¦äº†æ€»çš„æ‰§è¡Œæ—¶é—´ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/23f0d575dd7547d4902c544be540cd3a.png"></p><h3 id="3ï¼‰çº¿ç¨‹åˆ†é…ï¼ˆå†…å­˜å¹¶å‘ï¼‰"><a href="#3ï¼‰çº¿ç¨‹åˆ†é…ï¼ˆå†…å­˜å¹¶å‘ï¼‰" class="headerlink" title="3ï¼‰çº¿ç¨‹åˆ†é…ï¼ˆå†…å­˜å¹¶å‘ï¼‰"></a>3ï¼‰çº¿ç¨‹åˆ†é…ï¼ˆå†…å­˜å¹¶å‘ï¼‰</h3><p>åœ¨ä¸åŒä»‹è´¨ä¸Šï¼Œçº¿ç¨‹å¯æ‰©å±•æ€§ä¸åŒï¼Œåœ¨PMä¸Šè¿è¡Œçš„å¯¹å¸¦å®½æ•æ„Ÿçš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½ä¸èƒ½éšç€çº¿ç¨‹æ•°çš„å¢åŠ è€ŒåŒæ­¥æé«˜ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦ä¸ºè¿è¡Œåœ¨ä¸åŒå†…å­˜ä»‹è´¨ä¸Šçš„åº”ç”¨ç¨‹åºæ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å¹¶è¡Œå‚æ•°ã€‚</p><div class="note info no-icon">è¿™ä¸ªæ€ä¹ˆè¿˜èƒ½æ”¾å…ˆéªŒçŸ¥è¯†ï¼Œè€Œä¸”the remain thread resources can be allocated to other applicationsè¿™ä¸ªèµ„æºæ˜¯å¯ä»¥è¢«é‡åŒ–çš„å—ï¼Ÿ</div> <p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/f9dbccacad674d3b8eb4008a6a6113cc.png"><br>åœ¨ç¬¬1ç»„ä¸­ï¼Œå·¦ä¾§ç»“æœæ˜¾ç¤ºæ¯ä¸ªåº”ç”¨ç¨‹åºä¼ ç»Ÿå‡åŒ€åˆ†å¸ƒçš„8ä¸ªçº¿ç¨‹çš„æŒç»­æ—¶é—´ã€‚æ ¹æ®å…ˆéªŒçŸ¥è¯†ï¼Œæˆ‘ä»¬å‘ç°PMä¸Šçš„æœ€ä½³çº¿ç¨‹NPB/FTæ•°é‡ä¸º4ã€‚</p><h3 id="4ï¼‰å¸¦å®½äº‰ç”¨"><a href="#4ï¼‰å¸¦å®½äº‰ç”¨" class="headerlink" title="4ï¼‰å¸¦å®½äº‰ç”¨"></a>4ï¼‰å¸¦å®½äº‰ç”¨</h3><p>å½“ä¸¤ä¸ªæˆ–å¤šä¸ªåº”ç”¨ç¨‹åºåŒæ—¶è®¿é—®æ··åˆå†…å­˜æ—¶ï¼Œä¼šå‡ºç°å¸¦å®½äº‰ç”¨ï¼Œè¿™å°†å¯¼è‡´ä¸¥é‡çš„å¹²æ‰°å’Œå¹¶å‘æ€§èƒ½ä¸‹é™ã€‚è€Œä¸”æ··åˆå†…å­˜ä¸­çš„è¿™ç§å¹²æ‰°æ¯”çº¯DRAMå†…å­˜ç³»ç»Ÿä¸­çš„å¹²æ‰°æ›´ä¸ºå¤æ‚ã€‚ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•éå†æ‰€æœ‰å†…å­˜è®¿é—®æ¨¡å¼ã€‚æˆ‘ä»¬çš„æµ‹è¯•åŒ…æ‹¬4ç§ç±»å‹çš„å†…å­˜è®¿é—®æ¨¡å¼ï¼ˆ1ï¼‰SRï¼šé¡ºåºè¯»å–ï¼Œï¼ˆ2ï¼‰RRï¼šéšæœºè¯»å–ï¼Œï¼ˆ3ï¼‰SWï¼šé¡ºåºå†™å…¥ï¼Œï¼ˆ4ï¼‰RWï¼šéšæœºå†™å…¥1ã€2ã€4ã€8å’Œ10DRAMå’ŒPMä¸Šè¿è¡Œçš„çº¿ç¨‹ï¼Œå°†å½¢æˆ40ç§å†…å­˜è®¿é—®æ¨¡å¼ã€‚ç„¶åï¼Œæˆ‘ä»¬è¿è¡Œå¸¦å®½åŸºå‡†æµ‹è¯•å¹¶è·å¾—æ‰€æœ‰å†…å­˜è®¿é—®æ¨¡å¼çš„å¸¦å®½ï¼Œæ²¡æœ‰ä»»ä½•å¹²æ‰°ã€‚æœ€åï¼Œåˆ†åˆ«è¿è¡Œ40ç§å†…å­˜è®¿é—®æ¨¡å¼æ„å»º40ç§å¹²æ‰°ï¼Œå¯¹æ¯ç§å†…å­˜è®¿é—®æ¨¡å¼é‡æ–°è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œå¾—åˆ°æ¯ç§å¹²æ‰°ä¸‹çš„å¸¦å®½ç¼©å‡ç‡ã€‚ç»“æœå¦‚å›¾7æ‰€ç¤ºï¼Œæ¦‚æ‹¬ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/a4f8361713864c139a2c9e25be08ccb5.png" alt="Xè½´ä»£è¡¨å¹²æ¶‰ç±»å‹ï¼ŒYè½´ä»£è¡¨åŸºå‡†ç±»å‹ã€‚é¢œè‰²è¶Šæ·±æ„å‘³ç€ä¸æ²¡æœ‰å¹²æ‰°æ—¶ç›¸æ¯”ï¼Œå¸¦å®½å‡å°‘å¾—è¶Šå¤š"></p><p><span class="label primary">è®¿é—®DRAMå¯¹PMçš„å¸¦å®½å½±å“å¾ˆå°ï¼Œè€ŒPMçš„è¯»æˆ–å†™ä¼šæ˜¾ç€å‡å°‘DRAMçš„å¸¦å®½ã€‚</span> PMä¸Š10çº¿ç¨‹é¡ºåºè¯»å–çš„å¸¦å®½ä¸º13GB/sï¼Œç›¸å¯¹äº10çº¿ç¨‹DRAMè¯»å†™çš„å¹²æ‰°ï¼Œæœ€å¤šå¯ä»¥é™ä½15%ï¼ˆ11GB/sï¼‰ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒPMä¸Šæœ‰10ä¸ªå¹²æ‰°çº¿ç¨‹è¿›è¡Œé¡ºåºè¯»å–ï¼ŒDRAMä¸Šé¡ºåºè¯»å–çš„å¸¦å®½å¯å‡å°‘80%ï¼ˆ94GB/sè‡³18GB/sï¼‰ã€‚è€Œä¸”ï¼Œå¯¹äºDRAMçš„å¸¦å®½æ¥è¯´ï¼ŒPMè¯»å†™é€ æˆçš„å¹²æ‰°æ¯”DRAMä¸Šçš„å¹²æ‰°æ›´ä¸ºæ˜¾ç€ã€‚</p><p>å…¶æ¬¡ï¼Œçº¿ç¨‹æ•°é‡å’Œå†…å­˜è®¿é—®æ¨¡å¼å¯¹å¹¶å‘åº”ç”¨çš„å¹²æ‰°å½±å“å¾ˆå¤§ã€‚éšç€çº¿ç¨‹æ•°é‡çš„å¢åŠ ï¼Œå¹²æ‰°ä¼šå˜å¾—æ›´åŠ ä¸¥é‡ã€‚åœ¨å…·æœ‰1ã€2ã€4ã€8æˆ–10ä¸ªçº¿ç¨‹çš„PMä¸Šéšæœºå†™å…¥å°†ä½¿å…·æœ‰10ä¸ªçº¿ç¨‹çš„DRAMä¸Šçš„é¡ºåºå†™å…¥çš„å¸¦å®½å‡å°‘33.8%ã€68.2%ã€89.9%ã€96.7%ã€97.6%ï¼ˆ68GB/s è‡³ 1.7GB/sï¼‰ã€‚å¯¹äºå†…å­˜è®¿é—®æ¨¡å¼æ¥è¯´ï¼Œéšæœºå†™å…¥ä¼šå¯¹DRAMçš„å†™å…¥æ€§èƒ½äº§ç”Ÿæœ€ä¸¥é‡çš„å¹²æ‰°ã€‚è€ƒè™‘åˆ°PMä¸Šçš„å¯†é›†å†™å…¥ä¼šå‡å°‘å¸¦å®½95%ä»¥ä¸Šåœ¨ DRAM ä¸Šè¿è¡Œçš„å¸¦å®½æ•æ„Ÿåº”ç”¨ç¨‹åºä»ç„¶ä¼šå—åˆ°ä¸¥é‡å½±å“ã€‚<span class="label primary">PMä¸Šçš„å¯†é›†è®¿é—®å°†æ˜¾ç€å‡å°‘DRAMçš„å¸¦å®½ã€‚å¯¹PMçš„éšæœºå†™å…¥å’Œé¡ºåºè¯»å–åˆ†åˆ«å¯¹DRAMçš„å†™å…¥å’Œè¯»å–å¸¦å®½æœ‰æ›´ä¸¥é‡çš„å¹²æ‰°</span></p><p>è§£å†³æ–¹å¼å°±æ˜¯é€šè¿‡ä¸Šé¢çš„åˆ†æåŠ¨æ€è°ƒæ•´è¿™äº›åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½çš„æ‰§è¡Œé¡ºåº,ä¹Ÿæ˜¯é€šè¿‡å…ˆéªŒçŸ¥è¯†å»æŸ¥æ‰¾ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b406960826234fc8a2610dc1b7a2befd.png"></p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>è¿™ä¸ªåœ¨ä¸Šä¸€èŠ‚å·²ç»è¯´äº†ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>ä¹Ÿæ˜¯åœ¨5éƒ¨åˆ†åæ§½äº†ã€‚è§£å†³æ–¹æ¡ˆå¾ˆå¤šé å…ˆéªŒç»éªŒæˆ–è€…ç”¨æˆ·ç›´æ¥æŒ‡å®šï¼Œè€Œä¸”ç»†èŠ‚ä¹Ÿä¸å’‹æã€‚è™½ç„¶è¿™ä¸ªæ˜¯é’ˆå¯¹å¹¶å‘ç¨‹åºè®¾è®¡çš„ï¼Œä¹Ÿå¯ä»¥å’Œå…¶ä»–æ··åˆå†…å­˜ç³»ç»Ÿç›¸æ¯”è¾ƒä¸€ä¸‹å•Šã€‚</p><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>ä»å¸¦å®½æ•æ„Ÿè€ƒè™‘äº†å†…å­˜åˆ†é…ï¼Œè€Œä¸”æ€§èƒ½æå‡è¿˜ä¸é”™ã€‚</p><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><p>GPUå†…å­˜ç³»ç»Ÿä¸­ï¼Œåº”ç”¨æ„ŸçŸ¥çš„å†…å­˜è°ƒåº¦æ–¹æ¡ˆ[13], [14]å¯ä»¥é€šè¿‡å‡å°‘åœ°å€è½¬æ¢å’Œæ•°æ®è¯·æ±‚ä¹‹é—´çš„å¹²æ‰°æ¥æé«˜<br>å…¬å¹³æ€§å’Œæ•´ä½“ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>åº”ç”¨æ„ŸçŸ¥çš„å­˜å‚¨å™¨é€šé“åˆ’åˆ†ç®—æ³•[15]å¯ä»¥ä¸ºä¸åŒçš„åº”ç”¨åˆ†é…é¦–é€‰çš„å­˜å‚¨å™¨é€šé“ï¼Œä»¥å‡å°‘åº”ç”¨é—´çš„å­˜å‚¨å™¨å¹²æ‰°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> B </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Going Vertical in Memory Management</title>
      <link href="/2023/09/15/Going-Vertical-in-Memory-Management/"/>
      <url>/2023/09/15/Going-Vertical-in-Memory-Management/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªInternational Symposium on Computer Architectureï¼ŒISCAï¼Œ2014</li><li>Going Vertical in Memory Management: Handling Multiplicity by Multi-policy</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Lei Liuï¼ŒZehan Cuiï¼ŒYungang Baoï¼ŒMingyu Chenï¼ŒChengyong Wuï¼Œä¸­å›½ç§‘å­¦é™¢è®¡ç®—æœºç ”ç©¶æ‰€è®¡ç®—æœºä½“ç³»ç»“æ„å›½å®¶é‡ç‚¹å®éªŒå®¤</li><li>Yong LiåŒ¹å…¹å ¡å¤§å­¦ECEç³»</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>æ¥è‡ªä¸åŒé¢†åŸŸçš„è®¸å¤šæ–°å…´åº”ç”¨ç¨‹åºé€šå¸¸è¡¨ç°å‡ºå¼‚æ„å†…å­˜ç‰¹å¾ã€‚<span class="label primary">å½“åœ¨å¹¶è¡Œå¹³å°ä¸Šç»„åˆè¿è¡Œæ—¶ï¼Œè¿™äº›åº”ç”¨ç¨‹åºä¼šå‘ˆç°å‡ºä»¤äººç•æƒ§çš„å„ç§å·¥ä½œè´Ÿè½½è¡Œä¸º</span>ï¼Œè¿™å¯¹ä»»ä½•<span class="label primary">å†…å­˜åˆ†é…ç­–ç•¥çš„æœ‰æ•ˆæ€§</span>æå‡ºäº†æŒ‘æˆ˜ã€‚å…ˆå‰çš„åŸºäºåˆ†åŒºæˆ–éšæœºå†…å­˜åˆ†é…æ–¹æ¡ˆé€šå¸¸ä»…ç®¡ç†å†…å­˜å±‚æ¬¡ç»“æ„çš„ä¸€çº§ï¼Œå¹¶ä¸”é€šå¸¸é’ˆå¯¹ç‰¹å®šå·¥ä½œè´Ÿè½½ã€‚</p><p><strong>å…±äº«å†…å­˜èµ„æº</strong>çš„æœ‰æ•ˆç®¡ç†å¯¹äºåº”ç”¨ç¨‹åºæ€§èƒ½å’Œç³»ç»Ÿååé‡éå¸¸é‡è¦ã€‚ç„¶è€Œï¼Œå•†ä¸šåŒ–å¹¶è¡Œæœºä¸­ä½¿ç”¨çš„å¤§å¤šæ•°ç°æœ‰å†…å­˜å’Œç¼“å­˜ç®¡ç†æœºåˆ¶éƒ½é‡‡ç”¨é€šç”¨åœ°å€äº¤é”™æˆ–è°ƒåº¦/åˆ†åŒºæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¿½è§†äº†å½“ä»Šå¼‚æ„ç¯å¢ƒä¸­ä¸åŒçš„å†…å­˜åˆ©ç”¨ç‡ç‰¹å¾å’Œä¸åŒçš„èµ„æºéœ€æ±‚ã€‚è¿™é€šå¸¸ä¼šå¯¼è‡´ç¨‹åºé—´æ‰°åŠ¨ã€èµ„æºé¢ ç°¸ã€å†…å­˜/ç¼“å­˜åˆ©ç”¨ç‡ä½ä¸‹ï¼Œä»è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><p>å½“æ—¶æ¶æ„å…è®¸æ‰€æœ‰åº”ç”¨ç¨‹åºå…±äº«LLCï¼ˆæœ«çº§ç¼“å­˜ï¼‰å’ŒDRAMç»„ï¼Œä»è€Œåœ¨è®¸å¤šæƒ…å†µä¸‹å¯¼è‡´ä¸¥é‡çš„äº‰ç”¨ã€‚ä¸€èˆ¬ç”¨é¡µé¢ç€è‰²è§£å†³ï¼Œå­˜åœ¨ä¸¤ç§åŸºäºé¡µé¢ç€è‰²çš„åˆ†åŒºæŠ€æœ¯ï¼Œå³é«˜é€Ÿç¼“å­˜åˆ†åŒºå’ŒDRAMå­˜å‚¨ä½“åˆ†åŒºã€‚å¦‚å›¾ 1 æ‰€ç¤ºï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨æ“ä½œç³»ç»Ÿç‰©ç†é¡µåœ°å€ä¸­è¡¨ç¤ºLLCé›†ç´¢å¼•ï¼ˆLLCé¢œè‰²ä½ï¼‰çš„ä½ä½œä¸ºé¢œè‰²ä½æ¥å®ç°ç¼“å­˜åˆ†åŒºã€‚å½“ä¸ºåº”ç”¨ç¨‹åºåˆ†é…é¡µé¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ä¸ºç‰©ç†é¡µé¢åˆ†é…ç‰¹å®šçš„é¢œè‰²ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºåªèƒ½è®¿é—®æŒ‡å®šé¢œè‰²çš„ç¼“å­˜é›†ã€‚</p><div class="note info no-icon">è¯´äººè¯ï¼šè¿è¡Œçš„ç‰¹å®šæŸä¸ªç¨‹åºåªèƒ½ä½¿ç”¨é¢œè‰²Açš„DRAMåˆ†åŒºï¼Œæˆ–è€…åªèƒ½ç¼“å­˜åˆ°é¢œè‰²A'çš„LLCç¼“å­˜åˆ†åŒºä¸­</div><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/510d5e5c024448c78ccbc62c9e047875.png"></p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>å¤„ç†å„ç§åŠ¨æ€å˜åŒ–çš„å†…å­˜å’Œç¼“å­˜åˆ†é…éœ€æ±‚ã€‚éœ€è¦è®¾è®¡ä¸€ç§èƒ½å¤Ÿé€šè¿‡åŒºåˆ†å†…å­˜ç‰¹æ€§æ¥é€‰æ‹©åˆé€‚çš„åˆ†é…ç­–ç•¥çš„å†…å­˜ç®¡ç†ç³»ç»Ÿã€‚</p><p>ï¼ˆä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œç®€å•åœ°é›†æˆæœ€ä½³æ€§èƒ½çš„æœºåˆ¶æ˜¯ä¸åˆ‡å®é™…çš„ï¼Œå› ä¸ºå‡ ä¹æ‰€æœ‰æœ€å…ˆè¿›çš„æ–¹æ¡ˆéƒ½éœ€è¦å¯¹å†…å­˜æ§åˆ¶å™¨/åˆ†é…å™¨æˆ–ç¼“å­˜å±‚æ¬¡ç»“æ„è¿›è¡Œæ˜‚è´µçš„æ›´æ”¹ï¼Œæ›´ä¸ç”¨è¯´æ£€æµ‹å’Œé¢„æµ‹åº”ç”¨ç¨‹åºéœ€æ±‚å’Œå†²çªæ–¹é¢çš„æŒ‘æˆ˜äº†ã€‚ï¼‰</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>æœ€è¿‘çš„å‡ ç§è§£å†³æ–¹æ¡ˆå°è¯•é€šè¿‡å°†ä¸»å†…å­˜ï¼ˆDRAM ç»„ï¼‰[10,16,17,29] æˆ–ç¼“å­˜ [15,24,30,31,32] æ°´å¹³åˆ†åŒºä¸ºç‹¬å ç‰‡æ¥éš”ç¦»å…·æœ‰ä¸åŒå†…å­˜èµ„æºéœ€æ±‚çš„åº”ç”¨ç¨‹åºã€‚è¿™äº›æ–¹æ³•é¿å…äº†å¯¹å†…å­˜å ç”¨è¾ƒå°çš„ç¨‹åºçš„å¹²æ‰°ï¼Œä½†å¯èƒ½ä¼šé€šè¿‡æœ‰æ•ˆå‡å°‘å®¹é‡æ¥å½±å“è¾ƒå¤§å·¥ä½œè´Ÿè½½çš„æ€§èƒ½ã€‚æ“ä½œç³»ç»Ÿçº§åˆ«çš„åˆ†åŒºå’Œå…¶ä»–å†…å­˜åˆ†é…ä¼˜åŒ–æ›´åŠ çµæ´»ï¼Œå¹¶ä¸”åœ¨è®¸å¤šæ¡ˆä¾‹æ–¹é¢è¡¨ç°è‰¯å¥½ã€‚</p><p>å…ˆå‰çš„ç ”ç©¶å·¥ä½œ[12,29]è¡¨æ˜ï¼ŒLLCå’ŒDRAMäº‰ç”¨ä¼šæ˜¾ç€é™ä½æ•´ä½“ç³»ç»Ÿæ€§èƒ½ï¼Œå¹¶ä¸”å·²ç»æå‡ºäº†è®¸å¤šè§£å†³æ–¹æ¡ˆæ¥ç¼“è§£äº‰ç”¨é—®é¢˜ã€‚æœ€æœ‰æ•ˆçš„ä¼˜åŒ–ä¹‹ä¸€æ˜¯åŸºäºé¡µé¢ç€è‰²çš„è½¯ä»¶åˆ†åŒºï¼Œå®ƒå…è®¸æ“ä½œç³»ç»Ÿå†…æ ¸åˆ©ç”¨åº•å±‚æ¶æ„ä¿¡æ¯ï¼Œä¾‹å¦‚ LLC å’Œ DRAM çš„ç‰©ç†åœ°å€æ˜ å°„ã€‚é€šè¿‡é¡µé¢ç€è‰²ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹å†…æ ¸ä¼™ä¼´ç³»ç»Ÿæ¥ç¼“è§£äº‰ç”¨é—®é¢˜ [4,10,15,17,21,22,24,26]ï¼ŒåŒæ—¶é¿å…å¯¹å†…å­˜æ§åˆ¶å™¨æˆ–ç¼“å­˜å±‚æ¬¡ç»“æ„è¿›è¡Œæ˜‚è´µçš„ç¡¬ä»¶æ›´æ”¹ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>ä¸ºäº†å¤„ç†å¤šæ ·åŒ–ä¸”åŠ¨æ€å˜åŒ–çš„å†…å­˜å’Œç¼“å­˜åˆ†é…éœ€æ±‚ï¼Œæˆ‘ä»¬é€šè¿‡å‚ç›´åˆ†åŒºå¢å¼ºç°æœ‰çš„â€œæ°´å¹³â€ç¼“å­˜/DRAM å­˜å‚¨ä½“åˆ†åŒºï¼Œå¹¶æ¢ç´¢ç”±æ­¤äº§ç”Ÿçš„å¤šç­–ç•¥ç©ºé—´ã€‚ç€è‰²ä½åˆ†ä¸ºä¸‰ç±»ï¼šbank-onlyã€ä»…é«˜é€Ÿç¼“å­˜ä½ï¼ˆCä½ï¼‰å’Œé‡å ä½ï¼ˆOä½åœ¨å›¾ 1 ä¸­åŒæ—¶ç´¢å¼•bankå’Œé«˜é€Ÿç¼“å­˜ï¼‰ã€‚ç‰¹åˆ«æ˜¯ï¼ŒOä½å¯ç”¨å‚ç›´åˆ†åŒºï¼ˆVPï¼‰ï¼Œé€šè¿‡å†…å­˜å±‚æ¬¡ç»“æ„å‚ç›´åœ°å¯¹é«˜é€Ÿç¼“å­˜å’Œbankç»„è¿›è¡Œåˆ†åŒºã€‚ç»“åˆæ°´å¹³å’Œå‚ç›´åˆ†åŒºå½¢æˆäº†ä»¥å‰æœªç ”ç©¶è¿‡çš„åˆ†åŒºç­–ç•¥ç©ºé—´ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d82182ffc00c4216b76bef9a55d7bd4a.png" alt="ä»æ“ä½œç³»ç»Ÿå’Œå…¸å‹å¤šæ ¸æœºå™¨ä¸Šä¸‰ç±»é¢œè‰²ä½çš„è§’åº¦æ¥çœ‹çš„åœ°å€æ˜ å°„"></p><p>æ°´å¹³å†…å­˜å’Œç¼“å­˜åˆ†åŒºçš„å¥½å¤„æ˜¯å¦å¯ä»¥ç´¯ç§¯ï¼ˆå³ï¼Œæˆ‘ä»¬åº”è¯¥è¿›è¡Œå‚ç›´åˆ†åŒºå—ï¼Ÿï¼‰æ‰€ä»¥ä½œè€…æµ‹äº†æµ‹å¦‚ä¸‹è¡¨æ‰€ç¤ºçš„å‡ ç§æ­é…<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/26bbd7193c5f467c9dbd3405d6959b7c.png"></p><p>æŠŠ214ä¸ªworkloadæ ¹æ®æ€§èƒ½æå‡çš„åŸå› åšäº†å¯è§†åŒ–<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/93ea1c4e302d44109902c0078a399e3f.png"></p><p><strong>ä»ä¸Šè¿°å®šé‡ç ”ç©¶ä¸­å¯ä»¥å¾—å‡ºä¸€ä¸ªæ˜æ˜¾çš„ç»“è®ºï¼šå†…å­˜åˆ†é…ç­–ç•¥çš„æœ‰æ•ˆæ€§å–å†³äºç‰¹å®šçš„åº”ç”¨ç¨‹åºç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯ç¼“å­˜éœ€æ±‚ã€‚å®é™…ä¸Šï¼Œå·¥ä½œè´Ÿè½½å¯èƒ½åŒ…å«å¤šä¸ªåŒæ—¶è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œè¿™äº›åº”ç”¨ç¨‹åºå…·æœ‰ä¸åŒç‰¹å¾çš„ä»»æ„ç»„åˆï¼Œè¿™ä½¿å¾—ç¡®å®šé€‚å½“çš„å†…å­˜åˆ†é…ä»»åŠ¡å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</strong>ç„¶åæ€»ç»“äº†ä¸€ä¸‹å…¶ä»–å› ç´ å½±å“ä¸å¤§ï¼Œç¼“å­˜åˆ†åŒºæ€§èƒ½è¡¨ç°å‡ºçš„æ€§èƒ½å·®å¼‚æ›´å¤§ã€‚ä¸ºäº†éªŒè¯ç¼“å­˜åˆ©ç”¨ç‡ç‰¹å¾å¯¹ç¼“å­˜åˆ†åŒºç­–ç•¥çš„æ½œåœ¨å½±å“ï¼Œæˆ‘ä»¬æ”¶é›†äº†å½“ç¼“å­˜é…é¢ä»8/8ï¼ˆä½¿ç”¨æ•´ä¸ªç¼“å­˜ï¼‰å‡å°‘åˆ°1/8æ—¶å„ç§åº”ç”¨ç¨‹åºçš„æ€§èƒ½ä¸‹é™æƒ…å†µã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d6f56fdc5eca4311851b27a93bc66713.png"></p><p>æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½ä¼šæ‰§è¡Œå…«æ¬¡ï¼Œæ¯æ¬¡éƒ½ä¼šé€šè¿‡åŸºäºé¡µé¢ç€è‰²çš„ç¼“å­˜åˆ†åŒºåˆ†é…ä¸åŒæ•°é‡çš„ LLCã€‚æ ¹æ®ç»“æœâ€‹â€‹ï¼Œæˆ‘ä»¬å°†åº”ç”¨ç¨‹åºçš„ç¼“å­˜è¡Œä¸ºåˆ†ä¸ºå››ç±»ï¼šCore Cache Fittingï¼ˆCCFï¼‰ã€LLC High ï¼ˆLLCHï¼‰ã€LLC Middleï¼ˆLLCMï¼‰ å’ŒLLC Thrashingï¼ˆLLCTï¼‰ã€‚å›¾ 4 æŠ¥å‘Šäº†SPEC2006åŸºå‡†æµ‹è¯•å¥—ä»¶ä¸­å„ç§åŸºå‡†æµ‹è¯•çš„åˆ†ç±» [1]ã€‚CCFåº”ç”¨ç¨‹åºï¼ˆè¡¨ç¤ºä¸ºç»¿è‰²æ›²çº¿ï¼‰ï¼Œä¾‹å¦‚hmmerå’Œnamdï¼Œåœ¨ä½¿ç”¨è¾ƒå°‘çš„LLCèµ„æºæ—¶ä¸ä¼šæ˜¾ç€é™ä½æ€§èƒ½ï¼Œå› ä¸ºå®ƒä»¬çš„å·¥ä½œé›†å¤§å°è¶³å¤Ÿå°ï¼Œå¯ä»¥å®¹çº³L1å’ŒL2æ¯æ ¸ä¸“ç”¨ç¼“å­˜ã€‚LLCTåº”ç”¨ç¨‹åºï¼ˆé»‘è‰²æ›²çº¿ï¼‰ï¼Œä¾‹å¦‚libquantumï¼Œä¹Ÿå¯¹ç¼“å­˜é…é¢ä¸æ•æ„Ÿï¼Œä½†è¿™æ˜¯ç”±äºç¼“å­˜æŠ–åŠ¨è¡Œä¸ºè€Œä¸æ˜¯è¾ƒå°çš„å·¥ä½œé›†å¤§å°ã€‚LLCHåº”ç”¨ç¨‹åºï¼ˆçº¢è‰²æ›²çº¿ï¼‰ï¼ˆä¾‹å¦‚mcfï¼‰ç”±äºå…¶èµ„æºåŒ®ä¹çš„ç‰¹æ€§ï¼Œå› ç¼“å­˜é…é¢å‡å°‘è€Œé­å—æœ€ä¸¥é‡çš„æ€§èƒ½ä¸‹é™ã€‚ä¸LLCHç›¸æ¯”ï¼ŒLLCMï¼ˆè“è‰²æ›²çº¿ï¼‰åº”ç”¨ç¨‹åºä½¿ç”¨æ›´å°‘çš„ç¼“å­˜èµ„æºï¼Œå› æ­¤é€Ÿåº¦å‡æ…¢æ²¡æœ‰LLCHåº”ç”¨ç¨‹åºé‚£ä¹ˆå¤šã€‚ä¾‹å¦‚ï¼Œgccå’Œbzip2æ˜¯LLCMï¼Œå› ä¸ºå½“ç¼“å­˜ä»8/8å‡å°‘åˆ°4/8æ—¶ï¼Œå®ƒä»¬ä¸ä¼šé­å—æ˜æ˜¾çš„é™çº§ã€‚ç„¶è€Œï¼Œå½“ç¼“å­˜é…é¢é™è‡³3/8ä»¥ä¸‹æ—¶ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ã€‚</p><p>ä½†æ˜¯è¦åŠ¨æ€åˆ†ç±»ï¼šåšå›¾4æ—¶çš„é™æ€åˆ†æå‘ç°çƒ­é¡µé¢çš„æ•°é‡åœ¨å¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥åæ˜ åº”ç”¨ç¨‹åºçš„LLCéœ€æ±‚ã€‚å›¾5æ˜¾ç¤ºäº†å¤šä¸ªåŸºå‡†æµ‹è¯•çš„çƒ­é—¨é¡µæ•°é‡å’Œç¼“å­˜éœ€æ±‚ä¹‹é—´çš„ç›¸å…³æ€§ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/e10451bd578c4c58bbc3ceb565996949.png"></p><p>ç ”ç©¶äº†è¿™äº›ç­–ç•¥é’ˆå¯¹<strong>2000</strong>å¤šä¸ªå·¥ä½œè´Ÿè½½çš„æ€§èƒ½ï¼Œå¹¶é€šè¿‡<strong>æ•°æ®æŒ–æ˜æ–¹æ³•å°†ç»“æœä¸åº”ç”¨ç¨‹åºç‰¹å¾ç›¸å…³è”</strong>ã€‚åŸºäºè¿™ç§ç›¸å…³æ€§ï¼Œæˆ‘ä»¬å¾—å‡ºäº†å‡ ç§å®ç”¨çš„å†…å­˜åˆ†é…è§„åˆ™ï¼Œå¹¶å°†å…¶é›†æˆåˆ°ç»Ÿä¸€çš„å¤šç­–ç•¥æ¡†æ¶ä¸­ï¼Œä»¥æŒ‡å¯¼åŠ¨æ€å’Œå¤šæ ·åŒ–çš„å¤šç¼–ç¨‹/çº¿ç¨‹å·¥ä½œè´Ÿè½½çš„èµ„æºåˆ†åŒºå’Œåˆå¹¶ã€‚ï¼ˆç”Ÿæˆäº†ä¸€å¥—å®ç”¨çš„åˆ†åŒºå’Œèšåˆè§„åˆ™ä»¥åŠä¸€æ£µç­–ç•¥å†³ç­–æ ‘ï¼Œå¸®åŠ©HVRè‡ªåŠ¨é€‰æ‹©ç­–ç•¥ã€åŠ¨æ€èµ„æºåˆ†åŒºå’Œèšåˆã€‚ï¼‰</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c95f6f8820ec410285d3dadd9678cb5c.png"></p><p>ï¼ˆç½®ä¿¡åº¦å’Œæ”¯æŒåº¦æ˜¯æ•°æ®æŒ–æ˜ä¸­çš„æœ¯è¯­ã€‚åœ¨æˆ‘ä»¬çš„å·¥ä½œä¸­ï¼Œæ”¯æŒè¢«å®šä¹‰ä¸ºè§„åˆ™ä¸­åŒ…å«ç‰¹å®šç±»å‹åº”ç”¨ç¨‹åºçš„å·¥ä½œè´Ÿè½½çš„æ¯”ä¾‹ï¼›ç½®ä¿¡åº¦è¡¨æ˜è¯¥è§„åˆ™çš„å‡†ç¡®æ€§ã€‚ï¼‰</p><div class="note info no-icon">å…¶å®å°±æ˜¯å…ˆé‡‡æ ·çƒ­é¡µï¼Œåˆ¶å®šä¸€äº›é˜ˆå€¼ï¼Œå¾—åˆ°åˆ†ç±»ç®—æ³•ã€‚ç„¶åå°†workloadåç§°å’Œåˆ†ç±»ç»‘å®šæˆä¸€ä¸ªé”®å€¼å¯¹ï¼Œå†å°†åˆ†ç±»å’Œç€è‰²ä½çš„æ€§èƒ½ï¼ˆå°±æ˜¯æœ€åˆçš„æ•£ç‚¹å›¾ï¼‰å»ºç«‹ç›¸å…³è§„åˆ™ï¼ˆé€šè¿‡è§‚å¯Ÿå¾—åˆ°çš„ï¼Œæ¯”å¦‚ï¼šâ€œåŒ…å« LLCT å’Œå…¶ä»–åº”ç”¨ç¨‹åºï¼ˆLLCHã€LLCMã€CCFï¼‰çš„å·¥ä½œè´Ÿè½½åº”ä½¿ç”¨ C-VP æˆ– A-VPï¼ˆ37.1% æ”¯æŒï¼Œ94.4% ç½®ä¿¡åº¦ï¼‰â€ï¼‰ã€‚ï¼ï¼æ€»æ˜¯ä¸€å¼€å§‹ä½¿ç”¨bank-onlyç„¶åè¿ç§»ï¼ï¼</div><p>åœ¨ Linux å†…æ ¸ 2.6.32 ä¸­å°†æˆ‘ä»¬çš„æ–¹æ³•å®ç°ä¸ºé‡æ„çš„é¡µé¢ç´¢å¼•ç³»ç»ŸåŠ ä¸Šä¸€ç³»åˆ—å†…æ ¸æ¨¡å—ã€‚</p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>å¤§é‡å®éªŒè¡¨æ˜ï¼Œåœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬çš„æ¡†æ¶å¯ä»¥é€‰æ‹©é€‚å½“çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼Œå¹¶å§‹ç»ˆä¼˜äºæœªä¿®æ”¹çš„Linuxå†…æ ¸ï¼Œä¸ç°æœ‰æŠ€æœ¯ç›¸æ¯”ï¼Œæ€§èƒ½æå‡é«˜è¾¾11%ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>è¿è¡Œæ—¶é‡‡æ ·å¾—åˆ°åˆ†ç±»ï¼Œå†å’Œç€è‰²ä½ç»‘å®šå¤ªæ™šäº†å§ã€‚</p><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Chip on </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dancing in the Dark Profiling for Tiered Memory</title>
      <link href="/2023/09/15/Dancing-in-the-Dark-Profiling-for-Tiered-Memory/"/>
      <url>/2023/09/15/Dancing-in-the-Dark-Profiling-for-Tiered-Memory/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªIEEE International Parallel and Distributed Processing Symposium, (IPDPS), 2021</li><li>Dancing in the Dark: Profiling for Tiered Memory</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Jinyoung Choi, åŠ å·å¤§å­¦æ²³æ»¨åˆ†æ ¡ï¼ˆUC Riversideï¼‰</li><li>Sergey Blagodurov, ç¾å›½è¶…å¨åŠå¯¼ä½“å…¬å¸ï¼ˆAMDï¼‰</li><li>Hung-Wei Tseng, UC Riverside</li></ul><h2 id="2-Introduction-amp-Background"><a href="#2-Introduction-amp-Background" class="headerlink" title="2. Introduction &amp; Background"></a>2. Introduction &amp; Background</h2><ul><li>ç©¶ç«Ÿå¦‚ä½•å‘è½¯ä»¶å…¬å¼€æ¯ç§å†…å­˜ç±»å‹æ˜¯ä¸€ä¸ªæ‚¬è€Œæœªå†³çš„é—®é¢˜</li><li>å¤šç§å†…å­˜æŠ€æœ¯ååŒ-&gt;æ›´å¤šå†…å­˜ã€æ›´å°‘å»¶è¿Ÿã€æ›´å¤§å¸¦å®½</li><li>tiered memory architectures ï¼ˆTMAsï¼‰</li><li>ç¼“å­˜ä¼šç»™æ›´å¤šè®¾è®¡ç»™ç¡¬ä»¶ï¼Œå¹³é¢å¯»å€ä¼šæœ‰æ›´å¤šè½¯ä»¶ç­–ç•¥</li></ul><p><strong>è½¯ä»¶ç›‘æ§æ–¹æ³•ï¼Œé€šè¿‡TLBæ¡ç›®å’Œå†…å­˜é¡µçš„ç°çŠ¶ï¼š</strong></p><ol><li>é¡µé¢è®¿é—®ä¸å¯è§åªæœ‰ç¼ºé¡µæ—¶æ‰çŸ¥é“ï¼Œè¯†åˆ«è¢«å¤šæ¬¡è®¿é—®çš„ä»£ç æ®µå¾ˆéš¾ã€‚</li><li>ç¡¬ä»¶ç›‘æ§çš„å¤šæ ·æ€§ï¼Œæ˜¯ç”±ä¾›åº”å•†æä¾›ï¼Œæ²¡æœ‰æ ‡å‡†ã€‚</li><li>åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æå·¥å…·ï¼Œç»„åˆç¡¬ä»¶ç›‘æ§å™¨çš„ä¿¡æ¯ï¼ŒæŠ½è±¡å‡ºä¸€äº›äºŒçº§æŒ‡æ ‡ï¼Œå†é€šè¿‡ä¸€äº›ç­–ç•¥ï¼Œåšå‡ºé¡µé¢çƒ­åº¦æ’åä¹‹ç±»çš„ã€‚</li></ol><p><strong>ä¸ç¡¬ä»¶ç¼“å­˜ç›¸æ¯”ï¼Œè½¯ä»¶æ§åˆ¶çš„åˆ†å±‚å†…å­˜4ä¸ªä¼˜ç‚¹ï¼š</strong></p><ol><li>é¦–å…ˆï¼Œåˆ†å±‚å†…å­˜å…è®¸ç›´æ¥ä»æ•°æ®æ‰€åœ¨çš„å±‚è¿›è¡Œå°±åœ°å†…å­˜è®¿é—®ã€‚ä½¿ç”¨ç¡¬ä»¶ç¼“å­˜æ—¶ï¼Œè¯·æ±‚çš„å†…å­˜å—å°†ä»ç¬¬2å±‚å¯å¯»å€å†…å­˜å¼•å…¥ç¬¬1å±‚ç¼“å­˜ï¼Œä»è€Œå¯¼è‡´æµé‡å¢åŠ ã€‚è€Œä¸”ç¼ºé¡µå¯¼è‡´çš„è¿ç§»å¼€é”€å¤§ã€‚</li><li>å…¶æ¬¡ï¼Œåœ¨TMAä¸­ï¼Œå†…å­˜é¡µé¢å¯ä»¥åœ¨ä»»ä¸€å±‚ä¸­æ‰¾åˆ°ï¼›ç¼“å­˜ä¼šåœ¨å†…å­˜ä¸­åˆ›å»ºé‡å¤çš„ã€å¯èƒ½ä¸ä¸€è‡´çš„é¡µé¢å‰¯æœ¬ï¼Œå¹¶ä¸”éœ€è¦æœºåˆ¶æ¥ä¿æŒæ•°æ®ä¸€è‡´ã€‚RDMAåšç¼“å­˜å¸¦å®½æ•ˆç‡ä¼šæ¯”è¾ƒä½[2][10]</li><li>ç¬¬ä¸‰ï¼Œåˆ†å±‚å†…å­˜è§£å†³æ–¹æ¡ˆå…è®¸ç¼“å­˜ç­–ç•¥å¾®è°ƒï¼ˆé€šè¿‡å·¥ä½œè´Ÿè½½æ··åˆã€æœåŠ¡çº§åˆ«åè®®ç­‰ï¼‰ä»¥é€‚åº”é«˜å±‚ç­–ç•¥å†³ç­–å¹¶æ¶ˆé™¤è¿‡åº¦è¿ç§»ã€‚ï¼ˆä¸æ‡‚ï¼‰</li><li>ç¬¬å››ï¼Œç”±äºä¸æ ¹æ·±è’‚å›ºçš„NUMAæ¶æ„ç›¸ä¼¼ï¼Œåˆ†å±‚å†…å­˜å¯ä»¥åˆ©ç”¨NUMAå’Œå¼‚æ„å†…å­˜ç®¡ç†ï¼ˆHMMï¼‰[5]ç³»ç»ŸåŸºç¡€è®¾æ–½ã€‚ Linuxç¤¾åŒºä¸­å…³äºå¦‚ä½•å°†NVMæš´éœ²ç»™æ“ä½œç³»ç»Ÿä¸€ç›´å­˜åœ¨äº‰è®ºã€‚å½“å‰çš„ææ¡ˆå›´ç»•å°†NVMé…ç½®ä¸ºæ— CPUçš„NUMAèŠ‚ç‚¹ä»¥åŠä½¿ç”¨AutoNUMAæˆ–å…¶ä»–ç°æœ‰çš„ç®¡ç†NUMAæ–¹æ³•[11]ã€[12]ç®¡ç†TMAå¹³è¡¡ã€‚è¿™é‡Œå†æ¬¡å¼ºè°ƒçš„æ˜¯å†…å­˜å¦‚ä½•åˆ†é…å’Œç§»åŠ¨ï¼Œè€Œä¸æ˜¯å¦‚ä½•åˆ†æçƒ­åº¦ï¼ˆä¾‹å¦‚ï¼ŒAutoNUMA ä¸­çš„å®šæœŸå–æ¶ˆæ˜ å°„å’Œé¡µé”™è¯¯å¤„ç†å¦‚ä½•äº§ç”Ÿå¼€é”€ [13]ï¼‰ã€‚æˆ‘ä»¬çš„å·¥ä½œé‡ç‚¹æ˜¯æ¯”è¾ƒå„ç§ç›‘æ§æ–¹æ³•ï¼Œä»¥æœ€å°çš„å¼€é”€è·å¾—æœ€å¤§çš„çƒ­åº¦å¯è§æ€§ï¼Œè¿™å¯¹ NUMA å’Œåˆ†å±‚å†…å­˜éƒ½æœ‰å¥½å¤„ã€‚</li></ol><p><strong>å†…å­˜åˆ†ææ–¹æ³•ï¼š</strong></p><ol><li><span class="label info">é¡µè¡¨é¡¹PTEä½è·Ÿè¸ªã€‚PTEåŒ…æ‹¬å·²è®¿é—®Aä½å’Œè„Dä½ã€‚æ“ä½œç³»ç»Ÿå¯ä»¥æ¸…é™¤è¿™äº›PTEä½ï¼Œå¹¶ä¸”ç¡¬ä»¶é¡µè¡¨éå†å™¨PTWå°†è®¾ç½®å®ƒä»¬ã€‚</span>PTWåœ¨TLBæœªå‘½ä¸­æ—¶è®¾ç½®Aä½ã€‚Aä½ä¸åŒºåˆ†åœ¨åˆ†æé—´éš”æœŸé—´è®¿é—®ä¸€æ¬¡çš„é¡µé¢å’Œå¤šæ¬¡è®¿é—®çš„é¡µé¢ã€‚æ›´é¢‘ç¹çš„Aä½æ£€æŸ¥å¯ä»¥æé«˜åˆ†æçš„ä¿¡æ¯é‡ï¼Œä½†ä¹Ÿä¼šå¢åŠ å¼€é”€ã€‚</li><li><span class="label info">TBPèƒ½å¤Ÿä»åŠ è½½æˆ–å­˜å‚¨æŒ‡ä»¤æ”¶é›†åœ°å€è·Ÿè¸ª</span>ã€‚åœ¨AMDç³»ç»Ÿä¸Šï¼ŒåŸºäºæŒ‡ä»¤çš„é‡‡æ ·IBS[18]ã€[19]ä½¿CPUæŒ‡ä»¤èƒ½å¤Ÿåœ¨ç©¿è¿‡ç®¡é“æ—¶è¢«æ ‡è®°ï¼Œå…è®¸åœ¨æŒ‡ä»¤æ‰§è¡Œæ—¶æ”¶é›†æ•°æ®ï¼Œå¹¶åœ¨æŒ‡ä»¤é€€å‡ºæ—¶å¼•å‘ä¸­æ–­ã€‚</li><li>è½»é‡çº§åˆ†æï¼ˆLWPï¼‰ [20] æ˜¯AMD64ç³»åˆ—15h AMDå¤„ç†å™¨çš„ç¡¬ä»¶æ‰©å±•ï¼Œä¸IBSçš„ä¸åŒä¹‹å¤„åœ¨äºLWPåœ¨ç”Ÿæˆä¸­æ–­ä¹‹å‰æ”¶é›†å¤§é‡æ•°æ®ã€‚</li><li>è‹±ç‰¹å°”çš„å¤„ç†å™¨åŸºäºäº‹ä»¶çš„é‡‡æ ·ï¼ˆPEBSï¼‰æ˜¯ä¸€ç§åŸºäºè·Ÿè¸ªçš„åŠŸèƒ½ï¼Œç±»ä¼¼äºIBS/LWPï¼Œå…¶ä¸­å¤„ç†å™¨åœ¨æŒ‡å®šçš„å†…å­˜åŒºåŸŸä¸­è®°å½•æ ‡è®°çš„æ ·æœ¬ã€‚PEBSæ ·æœ¬å¯ä»¥æ ¹æ®è®¸å¤šäº‹ä»¶ï¼ˆä¾‹å¦‚ç¼“å­˜æœªå‘½ä¸­ï¼‰æ¥é€‰æ‹©ï¼Œæ¯ä¸ªPEBSè®°å½•åŒ…å«<span class="label info">æ—¶é—´æˆ³ã€çº¿æ€§åœ°å€å’Œç‰©ç†åœ°å€</span>ç­‰[21]</li><li>ç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨HWPCæ˜¯å¤§å¤šæ•°ç°ä»£CPUå’ŒGPUä¸Šå¯ç”¨çš„ç‰¹æ®Šç¡¬ä»¶å¯„å­˜å™¨ï¼Œä½œä¸ºæ€§èƒ½ç›‘æ§å•å…ƒPMUçš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡äº‹ä»¶å¤ç”¨ï¼Œperfå’Œpfmonç­‰è½¯ä»¶å·¥å…·å¯ä»¥ç›‘æ§æ¯”ç‰©ç†å¯„å­˜å™¨æ›´å¤šçš„äº‹ä»¶ã€‚HWPCæ˜¯ç²—ç²’åº¦çš„ï¼ˆæ‰€æœ‰è¿›ç¨‹é¡µé¢çš„ä¸€ä¸ªæŒ‡æ ‡ï¼‰ï¼Œå¹¶ä¸”ä¸èƒ½ç”¨äºè·å–å†…å­˜è®¿é—®è·Ÿè¸ª [25]</li><li>BadgerTrap[6]æ‹¦æˆªTLB Missï¼Œå¹¶ä¸”å¯¹TLBåšç›¸åº”ä¿®æ”¹ï¼Œç”¨é‡‡æ ·é¡µé¢„ä¼°æ€»ä½“æœªå‘½ä¸­æ¬¡æ•°ã€‚</li></ol><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>è¿™ç¯‡æ–‡ç« è¯„ä¼°äº†å¾ˆå¤šå†…å­˜ç›‘è§†å™¨ï¼Œæå‡ºä¸€ç§ç»Ÿä¸€çš„æ–¹æ³•ï¼Œä¸ºåˆ†å±‚å†…å­˜æä¾›è¯¦ç»†ã€ä½å¼€é”€çš„å¯è§æ€§ã€‚</p><p>(1) æå‡ºäº†ä¸€ç§ä½å¼€é”€ã€é«˜ç²¾åº¦çš„åˆ†ææœºåˆ¶ï¼Œå¯ä»¥ç¼“è§£TMAä¸­çš„æ€§èƒ½é—®é¢˜ã€‚<br>(2) æœ¬æ–‡äº§ç”Ÿçš„è§è§£å¯ä»¥æŒ‡å¯¼TMAçš„é«˜æ•ˆå†…å­˜ç®¡ç†ç­–ç•¥ã€‚<br>(3) æœ¬æ–‡ä½¿ç”¨æ‰€æå‡ºçš„åˆ†ææœºåˆ¶æ¥å®ç°å’Œè¯„ä¼°å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œä»¥åœ¨ä¸è¿›è¡Œä»»ä½•ç¡¬ä»¶ä¿®æ”¹çš„æƒ…å†µä¸‹å®ç°åŠ é€Ÿã€‚<br>(4) ä»‹ç»äº†ä¸€ç§åˆ†æå·¥å…·ä½œä¸ºå¯å‡çº§çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥æé«˜åˆ†å±‚å†…å­˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b3e4837a025a42dbaec15d17e0663308.png"></p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>figure1ç³»ç»Ÿçš„æ¶æ„å›¾ï¼Œè¯´æ˜äº†æ¯ä¸ªéƒ¨åˆ†çš„åŠŸèƒ½ï¼Œå…¶å®å°±æ˜¯å°†ä»¥ä¸Šæåˆ°çš„ç»„åˆäº†ä¸€ä¸‹ï¼Œå–é•¿è¡¥çŸ­ã€‚TMP ä½¿ç”¨å¤šç§äº’è¡¥çš„ç›‘æµ‹æ–¹æ³•ï¼Œæœ€å¤§é™åº¦åœ°æé«˜ä¿¡æ¯é‡å¹¶æœ€å¤§é™åº¦åœ°å‡å°‘å¼€é”€ï¼ˆè¡¨ Iï¼‰</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d1e3a9c929af46c796a7d2a5061b421c.png"><br>å®æ–½æ–¹æ¡ˆï¼Œéå¸¸ç»†èŠ‚å¯ä»¥å¯¹ç€ä»£ç çœ‹ã€‚</p><p>TMPåœ¨åˆ†å±‚å†…å­˜ä¸­çš„ä½¿ç”¨è¿˜æ˜¯è¯†åˆ«é¡µé¢å†·çƒ­ï¼Œå¹¶ä¸”æ’åºï¼Œç„¶åç¡®å®šå“ªäº›é¡µé¢æ˜¯å¯ä»¥è¿ç§»çš„ï¼Œè¿ç§»æ—¶è™šæ‹Ÿåœ°å€ä¸å˜ï¼Œé¡µé¢ç‰©ç†åœ°ç§»åŠ¨ï¼ˆè¿™ä¸€æ®µä»‹ç»ä¹Ÿå¾ˆç»†èŠ‚ï¼Œå¯ä»¥å¯¹ç€ä»£ç çœ‹ï¼‰ä½œè€…figure6çš„åˆ†æè¡¨æ˜ï¼Œæ˜¯æƒ³è¦å»æé«˜ç¬¬ä¸€å±‚çš„å‘½ä¸­ç‡çš„ã€‚</p><div class="note danger no-icon"> è¿ç§»ä¼šæ¶‰åŠTLB shootdownè¿™ä¸ªå¼€é”€å¤§ï¼Ÿ</div><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>é€‰ç”¨äº†äº‘å·¥ä½œè´Ÿè½½å’ŒHPCå·¥ä½œè´Ÿè½½ï¼Œä½†æ˜¯è¿™ä½æ€ä¹ˆåªç»™äº†è¡¨æ ¼æ²¡æœ‰å¼•ç”¨emmmï¼Œè€Œä¸”äº‘å·¥ä½œè´Ÿè½½çœ‹èµ·æ¥åƒè‡ªå·±å–çš„åå­—ã€‚</p><h2 id="7-ç¼ºé™·å’Œwuwuæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œwuwuæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œwuwuæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œwuwuæ”¹è¿›æ€è·¯</h2><p>ä½†æ˜¯æ•´ä¸ªç»„åˆä¼šå˜å¾—å¤æ‚ï¼Œåˆ°åº•åœ¨æ”¶é›†ä¿¡æ¯æ—¶å†…æ ¸è´Ÿæ‹…ä¼šä¸ä¼šå˜å¤§åè€Œæ•ˆç‡æ›´ä½ã€‚æ–‡ç« è¯´ï¼šä¿æŒå·¥ä½œè´Ÿè½½å¼€é”€ä½äºåº”ç”¨ç¨‹åºå¼€é”€çš„ 5%ã€‚</p><p>æœ‰çš„å¯¹ç¡¬ä»¶çš„é‡‡æ ·æ˜¯ä¸å…è®¸çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯èƒ½æœ‰çš„åœ°æ–¹æ”¶é›†ä¸äº†æ•°æ®ã€‚</p><p>æœ‰çš„é‡‡æ ·ç‡è¿˜æ˜¯å¾—æ‰‹åŠ¨è°ƒã€‚</p><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><p>æ•°æ®å¯†é›†å‹æœåŠ¡å™¨ï¼šå†…å­˜ä¸­é”®å€¼å­˜å‚¨ã€æ•°æ®åº“ã€æ•´åˆåœ¨å„ä¸ªäº‘æœåŠ¡å™¨ä¸Šçš„è™šæ‹Ÿæœºä»¥åŠéœ€è¦å¤§é‡å†…å­˜çš„é«˜æ€§èƒ½è®¡ç®—HPCåº”ç”¨ç¨‹åºã€‚</p><p>å¯¹å»¶è¿Ÿçš„ä¼˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å‘½ä¸­æ›´å¤šçš„çƒ­é¡µé¢ï¼Œå¸¸ç”¨çš„ä¼˜åŒ–å†…å­˜å»¶è¿Ÿçš„æ–¹å¼ã€‚</p><p>å†…å­˜æŠ€æœ¯åŠå…¶ç›¸å…³å­—èŠ‚å¯å¯»å€æ¥å£ï¼ˆä¾‹å¦‚ NVDIMM Pã€CXLã€3D XPoint DIMMã€CCIXå’ŒGen-Zï¼‰å…·æœ‰ä¸åŒçš„å»¶è¿Ÿã€å¸¦å®½ã€åŠŸè€—ã€æŒä¹…æ€§å’Œæ¯GBæˆæœ¬ç‰¹å¾ï¼ŒæˆåŠŸçš„åˆ†å±‚å†…å­˜æ¶æ„å¿…é¡»ä¾èµ–ç³»ç»Ÿæ¥æœ€å°åŒ–ä¸å†…å­˜å†…å®¹è®¿é—®å’Œæ¯ä¸ªå†…å­˜è¯·æ±‚çš„åœ°å€è½¬æ¢ç›¸å…³çš„å»¶è¿Ÿã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> B </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> å†…å­˜ç›‘æ§å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data Center Ethernet and RDMA Issues at Hyperscale</title>
      <link href="/2023/08/22/Data-Center-Ethernet-and-RDMA-Issues-at-Hyperscale/"/>
      <url>/2023/08/22/Data-Center-Ethernet-and-RDMA-Issues-at-Hyperscale/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªIEEE Computer Volume: 56, Issue: 7, July 2023</li><li>Data Center Ethernet and Remote Direct Memory Access: Issues at Hyperscale</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Torsten Hoefler , ETH ZÃ¼rich</li><li>Duncan Roweth, Keith Underwood, and Robert Alverson, Hewlett Packard Enterprise</li><li>Mark Griswold, Vahid Tabatabaee, Mohan Kalkunte, and Surendra Anubolu, Broadcom</li><li>Siyuan Shen, ETH ZÃ¼rich</li><li>Moray McLaren, Google</li><li>Abdul Kabbani and Steve Scott, Microsoft</li></ul><p>ä½¿æœåŠ¡å™¨åº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥æ“ä½œè¿œç¨‹æœåŠ¡å™¨çš„å†…å­˜,ä¸éœ€è¦ç»è¿‡æ“ä½œç³»ç»Ÿå’ŒCPUã€‚</p><p>Fabricï¼Œå°±æ˜¯æ”¯æŒRDMAçš„å±€åŸŸç½‘(LAN)ã€‚</p><p>æ€æ ·æ‰èƒ½å¯¹å†…å­˜è¿›è¡Œä¼ è¾“ï¼Œæ³¨å†Œã€‚ å› ä¸ºRDMAç¡¬ä»¶å¯¹ç”¨æ¥åšæ•°æ®ä¼ è¾“çš„å†…å­˜æ˜¯æœ‰ç‰¹æ®Šè¦æ±‚çš„ã€‚</p><p>åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨ç¨‹åºä¸èƒ½ä¿®æ”¹æ•°æ®æ‰€åœ¨çš„å†…å­˜ã€‚<br>æ“ä½œç³»ç»Ÿä¸èƒ½å¯¹æ•°æ®æ‰€åœ¨çš„å†…å­˜è¿›è¡Œpage outæ“ä½œâ€”â€”â€”â€”ç‰©ç†åœ°å€å’Œè™šæ‹Ÿåœ°å€çš„æ˜ å°„å¿…é¡»æ˜¯å›ºå®šä¸å˜çš„ã€‚<br>æ³¨æ„æ— è®ºæ˜¯DMAæˆ–è€…RDMAéƒ½è¦æ±‚ç‰©ç†åœ°å€è¿ç»­ï¼Œè¿™æ˜¯ç”±DMAå¼•æ“æ‰€å†³å®šçš„ã€‚</p><p>å‡ åå¹´æ¥ï¼Œä»¥å¤ªç½‘ä¸€ç›´åœ¨æœ‰çº¿å±€åŸŸç½‘é¢†åŸŸå æ®ä¸»å¯¼åœ°ä½ï¼ŒèŒƒå›´ä»ç§äººä½å®…çš„éƒ¨ç½²åˆ°æœ€å¤§çš„æ•°æ®ä¸­å¿ƒã€‚æ•°æ®ä¸­å¿ƒç»å†äº†å·¨å¤§çš„å¢é•¿åœ¨è¿‡å»çš„åå¹´ä¸­ï¼Œè”ç½‘æœºå™¨çš„æ•°é‡è¶…è¿‡äº†å½“ä»Šæœ€å¤§çš„è¶…çº§è®¡ç®—æœºçš„è§„æ¨¡ã€‚å°½ç®¡ä»å­˜åœ¨ä¸€äº›å·®å¼‚ï¼Œä½†æ­¤ç±»è¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒå’Œè¶…çº§è®¡ç®—æœºçš„ç½‘ç»œè¦æ±‚éå¸¸ç›¸ä¼¼ã€‚[1]ç„¶è€Œï¼Œè¶…çº§è®¡ç®—æœºä¼ ç»Ÿä¸Šä½¿ç”¨ä¸“ç”¨äº’è¿è¿›è¡Œè¿æ¥ï¼Œè€Œæ•°æ®ä¸­å¿ƒåˆ™å»ºç«‹åœ¨ä»¥å¤ªç½‘ä¸Šã€‚ç”±äºç±»ä¼¼éœ€æ±‚å’Œè§„æ¨¡ç»æµï¼Œéšç€æ¯ä¸€ä»£æ–°æŠ€æœ¯çš„äº§ç”Ÿï¼Œä¸¤è€…çš„ç»“åˆä¸æ–­ç´§å¯†ã€‚æˆ‘ä»¬è®¤ä¸ºç°åœ¨æ˜¯é‡æ–°æ€è€ƒèåˆäº’è¿çš„åŸºæœ¬å‡è®¾å’Œæ¶æ„çš„æœ€ä½³æ—¶æœºã€‚</p><h3 id="æ•°æ®ä¸­å¿ƒä»¥å¤ªç½‘çš„æ–°ç¯å¢ƒ"><a href="#æ•°æ®ä¸­å¿ƒä»¥å¤ªç½‘çš„æ–°ç¯å¢ƒ" class="headerlink" title="æ•°æ®ä¸­å¿ƒä»¥å¤ªç½‘çš„æ–°ç¯å¢ƒ"></a>æ•°æ®ä¸­å¿ƒä»¥å¤ªç½‘çš„æ–°ç¯å¢ƒ</h3><p>å¤šç§æŠ€æœ¯è¶‹åŠ¿æ­£åœ¨åŠ é€Ÿé«˜æ€§èƒ½äº’è¿çš„èåˆã€‚é¦–å…ˆï¼Œä¸æ–­å¢é•¿çš„ç½‘ç»œæ€§èƒ½è¦æ±‚æ¨åŠ¨äº†å¯æ”¯æŒTBçº§å¸¦å®½çš„æ›´é«˜æ•ˆçš„ä¸»æœºå †æ ˆçš„å‘å±•ï¼Œæ¯ç§’æ•°äº¿ç¾å…ƒçš„äº¤æ˜“ä»¥åŠæ–°å…´æ•°æ®å¯†é›†å‹åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰ï¼‰æ‰€éœ€çš„å•ä½å¾®ç§’å»¶è¿Ÿã€‚[2]è¿™äº›æç«¯è¦æ±‚è¿«ä½¿æ‰€æœ‰åè®®å’Œç¡¬ä»¶éƒ½å°½å¯èƒ½é«˜æ•ˆï¼Œä»¥è‡³äºå°½å¯èƒ½æœ‰æ•ˆæ’é™¤è®¸å¤šä¼ ç»Ÿä¸Šé©±åŠ¨æ•°æ®ä¸­å¿ƒç½‘ç»œçš„TCP/ IPçŠ¶å †æ ˆè¿œç¨‹ç›´æ¥å†…å­˜è®¿é—®ï¼ˆRDMAï¼‰æ˜¯å¤§çº¦ä¸‰åå¹´å‰ç”¨äºé«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰å·¥ä½œè´Ÿè½½çš„è¿œç¨‹å†…å­˜è®¿é—®ï¼ˆRDMAï¼‰ï¼Œåæ¥åˆå°†å…¶æ‰©å±•åˆ°InfiniBand(IB) verbs RDMAçš„ç›®æ ‡å­˜å‚¨ã€‚RDMAå¯ä»¥é€šè¿‡ç½‘ç»œå¯ç”¨CPUé‡Šæ”¾çš„ç¡¬ä»¶åŠ é€ŸDMAã€‚åœ¨è¿‡å»çš„10å¹´ä¸­ï¼Œå®ƒäº‹å®ä¸Šå·²æˆä¸ºä½å¼€é”€å’Œé«˜é€Ÿç½‘ç»œçš„æ ‡å‡†ã€‚</p><blockquote><p>InfiniBand verbs æ˜¯InfiniBandæ¶æ„ä¸­å®šä¹‰çš„ä¸€å¥—ç¼–ç¨‹æ¥å£(verbs),ç”¨äºåº”ç”¨ç¨‹åºè®¿é—®InfiniBandç½‘ç»œèµ„æºå¹¶åˆ©ç”¨RDMA(è¿œç¨‹ç›´æ¥å†…å­˜è®¿é—®)æŠ€æœ¯è¿›è¡Œé€šä¿¡ã€‚</p></blockquote><blockquote><p>åœ¨æ•°æ®ä¸­å¿ƒç½‘ç»œä¸­æ’é™¤ä¼ ç»ŸTCP/IPæ ˆçš„ä¸»è¦åŸå› æœ‰:</p></blockquote><ol><li>TCP/IPæ ˆå¼€é”€å¤§ã€‚TCP/IPæ ˆåœ¨ä¸»æœºå†…æ ¸ä¸­è¿è¡Œ,æ¯æ¬¡ç½‘ç»œIOéƒ½éœ€è¦ç»è¿‡å®Œæ•´çš„ç½‘ç»œåè®®å¤„ç†,åŒ…æ‹¬ç¼“å†²æ‹·è´ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€æ ¡éªŒè®¡ç®—ç­‰,å¢åŠ å»¶è¿Ÿå’ŒCPUä½¿ç”¨ã€‚</li><li>ä¸å¿…è¦çš„å†…å­˜å¤åˆ¶ã€‚æ•°æ®åœ¨åº”ç”¨ã€å†…æ ¸ã€NICé—´å¤šæ¬¡ç¼“å†²æ‹·è´,å½±å“ååé‡å’Œå»¶è¿Ÿã€‚</li><li>CPUåˆ©ç”¨ç‡é«˜ã€‚ç½‘ç»œæ ˆå¤„ç†å ç”¨å¤§é‡CPUèµ„æº,å¯¹è®¡ç®—å¯†é›†å‹åº”ç”¨å½±å“å¾ˆå¤§ã€‚</li><li>é€šä¿¡å †æ ˆé•¿ã€‚TCP/IPé€šä¿¡å †æ ˆåŒ…å«è¿‡å¤šå±‚,æ¯ä¸ªå±‚åœ¨ä¸»æœºå†…æ ¸å’ŒNICéƒ½è¦å¤„ç†,å¢å¤§å»¶è¿Ÿã€‚</li><li>éš¾ä»¥å®ç°kernel bypassã€‚ TCP/IPéš¾ä»¥å®ç°åº”ç”¨ç›´æ¥æ§åˆ¶ç½‘ç»œç¡¬ä»¶,æ— æ³•å®ç°kernel bypassæ¶æ„ã€‚</li><li>å¯æ‰©å±•æ€§å·®ã€‚TCPéš¾ä»¥å®ç°åº”ç”¨çº§çš„å¯æ‰©å±•æ€§å’Œè´Ÿè½½å‡è¡¡ã€‚ </li><li>ç¼ºä¹æ•°æ®ä¸­å¿ƒç½‘ç»œç‰¹æ€§ã€‚TCP/IPç¼ºä¹RDMAã€RoCEã€sr-iovã€overlayç½‘ç»œç­‰æ•°æ®ä¸­å¿ƒç‰¹æ€§ã€‚ï¼‰æ‰€ä»¥æ•°æ®ä¸­å¿ƒé‡‡ç”¨RDMAã€userspace network stackã€overlay networkç­‰æŠ€æœ¯,å¯ä»¥è·å¾—æ›´é«˜æ€§èƒ½ã€å¼¹æ€§å’Œæ•ˆç‡ï¼‰ã€‚</li></ol><p>å¦‚ä»Šï¼Œå‡ ä¹æ‰€æœ‰è¶…çº§è®¡ç®—æœºæ¶æ„ä»¥åŠé¢†å…ˆçš„æ•°æ®ä¸­å¿ƒæä¾›å•†éƒ½åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ RDMAã€‚å‡ åå¹´å‰å¯¹è´Ÿè½½å¹³è¡¡ã€æ‹¥å¡æ§åˆ¶å’Œé”™è¯¯å¤„ç†çš„ç®€å•å‡è®¾å¹¶ä¸é€‚ç”¨äºå½“ä»Šå¸¦å®½æé«˜100å€ã€æ¶ˆæ¯é€Ÿç‡æé«˜10å€ä»¥ä¸Šçš„ç½‘ç»œã€‚æ­¤å¤–ï¼Œç®€å•çš„RDMAç½‘ç»œæ¥å£å¡ï¼ˆNICï¼‰é€šå¸¸ä¼šé€šè¿‡é™„åŠ åŠŸèƒ½è¿›è¡Œå¢å¼ºã€‚ç”±æ­¤äº§ç”Ÿçš„â€œæ™ºèƒ½ç½‘å¡â€é€šå¸¸ä¼šå‡è½»å¤§é‡è´Ÿè½½ã€‚æœåŠ¡å¹¶å®æ–½ä¸“é—¨çš„ç½‘ç»œåè®®ã€‚ç°ä»£ç½‘ç»œäº¤æ¢æœºè¿˜å…·æœ‰æ”¹è¿›çš„åŠŸèƒ½ï¼Œä»å…ˆè¿›çš„ç½‘å†…é¥æµ‹å’Œç½‘å†…è®¡ç®—åŠŸèƒ½åˆ°ç½‘å†…è´Ÿè½½å¹³è¡¡å’Œæ‹¥å¡æ§åˆ¶ã€‚3æˆ‘ä»¬è®¤ä¸ºï¼Œå½“å‰ç°æœ‰çš„æ ‡å‡†å’Œéƒ¨ç½²çš„åŸºç¡€è®¾æ–½å­˜åœ¨æ ¹æœ¬å·®è·å¿…é¡»åœ¨ä¸ä¹…çš„å°†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»¥æ”¯æŒé«˜æ•ˆçš„é«˜æ€§èƒ½ç½‘ç»œã€‚</p><blockquote><p>é¥æµ‹æ•°æ®(Telemetry Data)æ˜¯æŒ‡ä»ç½‘ç»œè®¾å¤‡ä¸­é‡‡é›†ã€æ±‡æŠ¥çš„ä¸ç½‘ç»œè¿è¡ŒçŠ¶æ€ç›¸å…³çš„æ•°æ®ã€‚å®ƒé€šè¿‡å®æ—¶åæ˜ ç½‘ç»œçš„è¿è¡Œæƒ…å†µæ¥å¸®åŠ©ç½‘ç»œç®¡ç†å’Œè¿ç»´ã€‚å¸¸è§çš„ç½‘ç»œé¥æµ‹æ•°æ®åŒ…æ‹¬:</p></blockquote><ul><li>åŸºç¡€ä¿¡æ¯:è®¾å¤‡å‹å·ã€é…ç½®ã€è½¯ä»¶ç‰ˆæœ¬ç­‰é™æ€ä¿¡æ¯ã€‚</li><li>æµé‡æ•°æ®:æ¥å£æµé‡é€Ÿç‡ã€æ€»æµé‡ã€æµé‡æ–¹å‘ç­‰ã€‚</li><li>QoSæ•°æ®:æ¥å£é˜Ÿåˆ—é•¿åº¦ã€å»¶è¿Ÿã€ä¸¢åŒ…ã€æ‹¥å¡æƒ…å†µç­‰ã€‚ </li><li>è·¯ç”±ä¿¡æ¯:è·¯ç”±è¡¨ã€ä¸‹ä¸€è·³ç­‰åŠ¨æ€è·¯ç”±ä¿¡æ¯ã€‚</li><li>ä¼šè¯ä¿¡æ¯:æ´»åŠ¨çš„ä¼šè¯è¿æ¥æ•°ã€æ¥æº/ç›®çš„åœ°ç­‰ã€‚</li><li>èµ„æºåˆ©ç”¨ç‡:CPUä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€é“¾æ¥åˆ©ç”¨ç‡ç­‰ã€‚</li><li>ç¯å¢ƒæ•°æ®:è®¾å¤‡æ¸©åº¦ã€é£æ‰‡é€Ÿåº¦ç­‰ç¯å¢ƒä¿¡æ¯ã€‚</li><li>äº‹ä»¶å’Œè­¦æŠ¥:è®¾å¤‡æ•…éšœã€é“¾è·¯ä¸­æ–­ç­‰äº‹ä»¶ä¿¡æ¯ã€‚<br>é¥æµ‹æ•°æ®å¯ä»¥é€šè¿‡SNMPã€NETCONFç­‰ç®¡ç†åè®®è·å–,ä¹Ÿå¯ä»¥é€šè¿‡æµå¼é¥æµ‹æŠ€æœ¯åƒgRPC Streamingã€ Kafkaç­‰æœºåˆ¶è®¢é˜…è·å–ã€‚æ”¶é›†åˆ°çš„é¥æµ‹æ•°æ®å¯ä»¥ç”¨äºç½‘ç»œçŠ¶æ€åˆ†æã€äº‹ä»¶æ£€æµ‹ã€å®¹é‡è§„åˆ’ã€æµé‡å·¥ç¨‹ç­‰ã€‚</li></ul><blockquote><p>ç½‘å†…é¥æµ‹(In-band Telemetry, INT)æ˜¯ä¸€ç§ç½‘ç»œé¥æµ‹æŠ€æœ¯,å®ƒå¯ä»¥åœ¨ç½‘ç»œæ•°æ®åŒ…ä¸­æºå¸¦é¥æµ‹æ•°æ®,å¹¶éšç€æ•°æ®åŒ…ä¼ é€’é€šè¿‡ç½‘ç»œã€‚ç½‘å†…é¥æµ‹çš„ä¸»è¦ç‰¹å¾å’Œä¼˜åŠ¿åŒ…æ‹¬:</p></blockquote><ul><li>é¥æµ‹æ•°æ®ç›´æ¥åµŒå…¥æ•°æ®åŒ…ä¸­,ä¸éœ€è¦é¢å¤–çš„æ§åˆ¶æ¶ˆæ¯,æ›´åŠ é«˜æ•ˆã€‚</li><li>å¯ä»¥æä¾›æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­çš„å®æ—¶çŠ¶æ€,å¦‚å»¶è¿Ÿã€ä¸¢åŒ…ç­‰ä¿¡æ¯ã€‚</li><li>å¯ä»¥ç»†ç²’åº¦åœ°åæ˜ ç½‘ç»œçŠ¶æ€,æ¯ä¸€ä¸ªæ•°æ®åŒ…éƒ½æ˜¯æ¢é’ˆã€‚</li><li>å¯ä»¥å¿«é€Ÿå‘ç°ç½‘ç»œçƒ­ç‚¹,è¿›è¡Œè´Ÿè½½å‡è¡¡å’Œæ•…éšœå®šä½ã€‚</li><li>æ— éœ€ä¸“ç”¨ç›‘æ§ç½‘ç»œ,ä¸ä¼šå ç”¨é¢å¤–å¸¦å®½ã€‚</li><li>å¯ä»¥é…åˆè½¯ä»¶å®šä¹‰ç½‘ç»œ(SDN)å®ç°å¯ç¼–ç¨‹çš„é¥æµ‹æ§åˆ¶ã€‚<blockquote><p>ç½‘å†…é¥æµ‹é€šå¸¸éœ€è¦æ•°æ®å¹³é¢æ”¯æŒ,åœ¨äº¤æ¢æœºæˆ–ç½‘å¡ä¸­å®ç°é¥æµ‹å¤´æ’å…¥å’Œè§£æã€‚é€šè¿‡ç½‘å†…é¥æµ‹æŠ€æœ¯,å¯ä»¥æå¤§åœ°å¢å¼ºç½‘ç»œçš„å¯è§‚æµ‹æ€§, ä¸€äº›ä¸»æµçš„ç½‘å†…é¥æµ‹æŠ€æœ¯åŒ…æ‹¬: </p></blockquote></li><li>INT: IETFæ­£åœ¨æ¨è¿›çš„INTæ ‡å‡†ã€‚</li><li>IOAM: In-situ OAM,ç”±Ciscoæ¨å‡ºã€‚</li><li>P4INT: åŸºäºP4è¯­è¨€çš„å¯ç¼–ç¨‹INTå®ç°ã€‚</li><li>iOAM: IOAMçš„è¡ç”Ÿåè®®ã€‚</li></ul><h3 id="RoCEï¼šèåˆè¿˜æ˜¯èƒ¶å¸¦"><a href="#RoCEï¼šèåˆè¿˜æ˜¯èƒ¶å¸¦" class="headerlink" title="RoCEï¼šèåˆè¿˜æ˜¯èƒ¶å¸¦"></a>RoCEï¼šèåˆè¿˜æ˜¯èƒ¶å¸¦</h3><p>RoCEï¼ˆRDMA over Converged Ethernetï¼‰æ˜¯å¯ä»¥åœ¨Ethernetç½‘ç»œä¸Šè¿è¡ŒRDMAçš„ç½‘ç»œåè®®ã€‚å…¶ä¸»è¦ç‰¹ç‚¹å¦‚ä¸‹:</p><ul><li>RoCEåœ¨Ethernetä¸Šå®ç°äº†RDMAåŠŸèƒ½,ä½¿RDMAä¸å†åªå±€é™åœ¨ä¸“ç”¨çš„InfiniBandç½‘ç»œä¸Šã€‚</li><li>åœ¨IP/Ethernetç½‘ç»œåŸºç¡€è®¾æ–½ä¸Š,é€šè¿‡å¯¹æ•°æ®å¹³é¢è¿›è¡Œæ”¹è¿›æ¥å®ç°RDMAã€‚</li><li>æ”¯æŒä¸¤ç§ä¼ è¾“æ–¹å¼:RoCEv1ä½¿ç”¨UDPå°è£…;RoCEv2ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„ä»¥å¤ªç½‘å¸§æ ¼å¼ã€‚</li><li>RoCEv1ä¾èµ–æ•°æ®ä¸­å¿ƒçº§åˆ«çš„Lossless EthernetæŠ€æœ¯æ¥å®ç°å¯é ä¼ è¾“ã€‚RoCEv2æ–°å¢äº†è‡ªèº«çš„æµæ§æœºåˆ¶ã€‚</li><li>RoCEå¯ä»¥è·å¾—ä¸InfiniBandæ¥è¿‘çš„ä½å»¶è¿Ÿå’Œé«˜ååæ€§èƒ½ã€‚</li><li>ä¸iWARPç›¸æ¯”,RoCEæ›´åŠ ä¾èµ–ç¡¬ä»¶å¸è½½,å®ç°CPUåˆ©ç”¨ç‡æ›´ä½ã€‚<br>RoCEçš„ä¼˜åŠ¿åœ¨äºå…¼å®¹ç°æœ‰çš„ä»¥å¤ªç½‘ç½‘ç»œ,ä½¿RDMAåº”ç”¨æ›´æ˜“äºéƒ¨ç½²,ä¸å†éœ€è¦ä¸“é—¨çš„IBäº¤æ¢æœºç½‘ç»œã€‚RoCEå·²å¾—åˆ°å¹¿æ³›æ”¯æŒ,æ˜¯æ•°æ®ä¸­å¿ƒé‡‡ç”¨RDMAçš„ä¸»æµé€‰æ‹©ä¹‹ä¸€ã€‚</li></ul><p>ä¼ ç»Ÿä¸Šï¼Œå½“äº¤æ¢æœºç¼“å†²åŒºå·²æ»¡æ—¶ï¼Œä»¥å¤ªç½‘ä¼šä¸¢å¼ƒæ•°æ®åŒ…ï¼Œå¹¶ä¾èµ–äºç«¯åˆ°ç«¯é‡ä¼ ã€‚ä¸ºäº†æ”¯æŒRoCEï¼ŒCEå¼•å…¥ä¼˜å…ˆæµæ§åˆ¶ï¼ˆPFCï¼‰æ¥å®ç°é“¾è·¯çº§æ— æŸæ“ä½œã€‚PFCé‡æ–°åˆ©ç”¨ä»¥å¤ªç½‘ä¸­å­˜åœ¨çš„ä»¥å¤ªç½‘æš‚åœå¸§æ¥æ”¯æŒå…·æœ‰ä¸åŒé“¾è·¯ä¼ è¾“é€Ÿç‡çš„ç½‘ç»œã€‚PFCå¢å¼ºæš‚åœå¸§ä»¥åœæ­¢ï¼ˆæˆ–é™åˆ¶ï¼‰ç‰¹å®šä¼˜å…ˆçº§ä¸Šçš„æµé‡ï¼Œä»¥é¿å…æ•°æ®åŒ…ä¸¢å¤±ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™å¥—å¤æ‚çš„åè®®ä¼šå¹²æ‰°ç½‘ç»œä¸­çš„ä¸åŒå±‚ï¼Œå¹¶é™ä½å½“ä»Šä¸€äº›æœ€é‡è¦å·¥ä½œè´Ÿè½½çš„æ•ˆç‡ã€‚</p><p>RoCEçš„è¯­ä¹‰ã€è´Ÿè½½å¹³è¡¡å’Œæ‹¥å¡æ§åˆ¶æœºåˆ¶ç»§æ‰¿è‡ªInfiniBandã€‚è¿™æ„å‘³ç€æ‰€æœ‰æ¶ˆæ¯éƒ½åº”è¯¥æŒ‰é¡ºåºå‡ºç°åœ¨ç›®çš„åœ°ï¼Œå°±å¥½åƒå®ƒä»¬æ˜¯é€šè¿‡é™æ€è·¯ç”±ä¼ è¾“ä¸€æ ·ï¼Œæœ¬è´¨ä¸Šä¸å…è®¸è®¸å¤šæ•°æ®åŒ…çº§è´Ÿè½½å¹³è¡¡æœºåˆ¶ã€‚å¯¹äºäººå·¥æ™ºèƒ½è®­ç»ƒå·¥ä½œè´Ÿè½½ï¼ˆé•¿æœŸå­˜åœ¨çš„æµï¼‰ï¼Œå¤šè·¯å¾„æœºåˆ¶å¯ä»¥å¤§å¤§ç¼©çŸ­ä½œä¸šå®Œæˆæ—¶é—´ã€‚æ­¤å¤–ï¼ŒRoCE v2ä½¿ç”¨åŸºäºIPæ˜¾å¼æ‹¥å¡é€šçŸ¥ï¼ˆECNï¼‰çš„ç®€å•æ‹¥å¡æ§åˆ¶æœºåˆ¶ã€‚å½“æ£€æµ‹åˆ°æ‹¥å¡æ—¶ï¼Œå…¼å®¹ ECN çš„äº¤æ¢æœºä¼šå¯¹æ•°æ®åŒ…è¿›è¡Œæ ‡è®°ï¼Œæ¥æ”¶æ–¹ä¼šå°†è¯¥ä¿¡æ¯è½¬å‘å›å‘é€æ–¹ï¼Œä»è€Œåœ¨å•ä¸ªå‚æ•°çš„å¼•å¯¼ä¸‹é™ä½å…¶æ³¨å…¥ç‡ã€‚æ— æ‹¥å¡æœŸåï¼Œä½¿ç”¨ç¬¬äºŒä¸ªé…ç½®å‚æ•°å†æ¬¡è‡ªåŠ¨æé«˜é€Ÿç‡ã€‚</p><h3 id="ä¸‹ä¸€ä»£é«˜æ€§èƒ½ç½‘ç»œ"><a href="#ä¸‹ä¸€ä»£é«˜æ€§èƒ½ç½‘ç»œ" class="headerlink" title="ä¸‹ä¸€ä»£é«˜æ€§èƒ½ç½‘ç»œ"></a>ä¸‹ä¸€ä»£é«˜æ€§èƒ½ç½‘ç»œ</h3><p>å¯¹äºæŸäº›å·¥ä½œè´Ÿè½½ï¼Œæ¶ˆæ¯å»¶è¿Ÿï¼ˆæœ‰æ—¶æ˜¯æ¶ˆæ¯é€Ÿç‡ï¼‰èµ·ç€æ ¸å¿ƒä½œç”¨ã€‚å…¶ä¸­ä¸€äº›å±äº OBS ç±»åˆ«ï¼Œä½†å…¶ä»–ä¸€äº›å…·æœ‰å¤æ‚çš„æ•°æ®ç›¸å…³æ¶ˆæ¯é“¾ï¼Œå½¢æˆåº”ç”¨ç¨‹åºä¸­çš„å…³é”®æ€§èƒ½è·¯å¾„ã€‚è¿™äº›é€šå¸¸æ˜¯å¼ºå¤§çš„æ‰©å±•å·¥ä½œè´Ÿè½½ï¼Œè§£å†³é—®é¢˜çš„æ—¶é—´å¾ˆé‡è¦ï¼Œå¹¶ä¸”å¿…é¡»å®¹å¿ä½æ•ˆçš„æ‰§è¡Œã€‚å…·æœ‰ä¸¥æ ¼æœŸé™çš„å¤§è§„æ¨¡æ¨¡æ‹Ÿï¼ˆä¾‹å¦‚å¤©æ°”é¢„æŠ¥å’ŒçŸ³æ²¹å‹˜æ¢ï¼‰å±äºè¿™ä¸€ç±»ï¼Œä½†ä¸€äº›äº‹åŠ¡å¤„ç†å’Œæœç´¢/æ¨ç†å·¥ä½œè´Ÿè½½ä¹Ÿå±äºè¿™ä¸€ç±»ã€‚åœ¨è¿™é‡Œï¼Œé€šå¸¸å…·æœ‰ä¸¥æ ¼çš„ï¼ˆä¸ªä½æ•°å¾®ç§’ï¼‰å»¶è¿Ÿè¦æ±‚ã€‚</p><p>é™¤äº†æµé‡ç±»å‹ä¹‹å¤–ï¼Œéƒ¨ç½²ç¯å¢ƒä¹Ÿåœ¨å‘ç”Ÿå˜åŒ–ã€‚æ–°å‡ºç°çš„æœºå¯†è®¡ç®—ç†å¿µè¦æ±‚æ‰€æœ‰æµé‡åœ¨çº¿è·¯ä¸Šè¿›è¡ŒåŠ å¯†ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæµé‡åœ¨å®‰å…¨é£åœ°ä¸­è¿›è¡Œç«¯åˆ°ç«¯åŠ å¯†å’Œè§£å¯†ï¼Œå¹¶ä¸”æ²¡æœ‰ç½‘ç»œè®¾å¤‡ï¼ˆNIC æˆ–äº¤æ¢æœºï¼‰å€¼å¾—ä¿¡ä»»ã€‚æ­¤å¤–ï¼Œç›¸å…³çš„æ–°å…´å¤šç§Ÿæˆ·åœºæ™¯éœ€è¦ç®¡ç†æ¥è‡ªå•ä¸ªä¸»æœºçš„æ•°ä¸‡ä¸ªè¿æ¥ã€‚è¿™äº›é€šå¸¸ç”±æ™ºèƒ½ NIC æä¾›æ”¯æŒï¼Œé€šè¿‡ç®¡ç†èµ„æºï¼ˆä¾‹å¦‚å¸¦å®½å’Œå®‰å…¨æ€§ï¼‰è™½ç„¶æœ‰é€Ÿç‡é™åˆ¶å’Œè¿‡æ»¤ã€‚æ­¤å¤–ï¼Œéœ€è¦æ›´å…ˆè¿›çš„è´Ÿè½½å¹³è¡¡å’Œè·¯ç”±çš„æ–°çš„ç»æµé«˜æ•ˆã€å°ç›´å¾„å’Œä¸“ç”¨æ‹“æ‰‘æˆä¸ºæç«¯å¸¦å®½éƒ¨ç½²çš„å¿…è¦æ¡ä»¶ã€‚2,8 è¿™äº›è¦æ±‚çš„è®¸å¤šç»„åˆå¯¹ä¸‹ä¸€ä»£é«˜æ€§èƒ½ç½‘ç»œã€‚</p><h3 id="RoCEå­˜åœ¨çš„é—®é¢˜"><a href="#RoCEå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="RoCEå­˜åœ¨çš„é—®é¢˜"></a>RoCEå­˜åœ¨çš„é—®é¢˜</h3><p> å…³äºè®ºæ–‡ä¸­æå‡ºRoCEéœ€è¦æ”¹è¿›çš„8ä¸ªæ–¹é¢çš„é—®é¢˜,æˆ‘æ€»ç»“å¦‚ä¸‹:</p><ol><li> congestion control (æ‹¥å¡æ§åˆ¶)ã€‚RoCEv1æ²¡æœ‰æ‹¥å¡æ§åˆ¶æœºåˆ¶,éœ€è¦ä¾èµ–DCQCNã€‚RoCEv2è™½æœ‰æ‹¥å¡æ§åˆ¶ä½†éœ€è¦è¿›ä¸€æ­¥å®Œå–„ã€‚</li><li>physical layer (ç‰©ç†å±‚) ã€‚RoCEå¯¹PHYå±‚æ—¶é’ŸåŒæ­¥å’Œé“¾è·¯æ–­å¼€æ£€æµ‹è¿˜éœ€æ”¹è¿›ã€‚</li><li>path MTU (è·¯å¾„MTU)ã€‚RoCEéœ€è¦æ›´å¥½å¤„ç†ä¸åŒMTUè·¯å¾„çš„æƒ…å†µã€‚</li><li> flow steering (æµå¯¼å‘)ã€‚éœ€è¦æ›´å¥½çš„QoSå’Œæµé‡å·¥ç¨‹èƒ½åŠ›æ¥å¯¼å‘ä¸åŒä¼˜å…ˆçº§çš„RoCEæµé‡ã€‚</li><li> resilience (å¼¹æ€§) ã€‚å¦‚ä½•æ”¹å–„RoCEçš„æ•…éšœæ¢å¤èƒ½åŠ›éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶ã€‚</li><li> labeling (æ ‡ç­¾)ã€‚RoCEå½“å‰è¿˜ä¸æ”¯æŒMPLSç­‰æ ‡ç­¾äº¤æ¢æŠ€æœ¯ã€‚</li><li> standards (æ ‡å‡†)ã€‚éœ€è¦æ›´å¤šé’ˆå¯¹RoCEåœ¨æ•°æ®ä¸­å¿ƒä½¿ç”¨çš„æ ‡å‡†åŒ–å·¥ä½œã€‚</li><li> debugging (è°ƒè¯•) ã€‚RoCEç½‘ç»œæ•…éšœå®šä½å’Œæ€§èƒ½è¯Šæ–­å·¥å…·éœ€è¦åŠ å¼ºã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RDMA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Towards an Adaptable Systems Architecture for Memory Tiering at WarehouseScale</title>
      <link href="/2023/08/20/Towards-an-Adaptable-Systems-Architecture-for-Memory-Tiering-at-WarehouseScale/"/>
      <url>/2023/08/20/Towards-an-Adaptable-Systems-Architecture-for-Memory-Tiering-at-WarehouseScale/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªASPLOS, 2023</li><li>Towards an Adaptable Systems Architecture for Memory Tiering at Warehouse-Scale</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>all Google. Padmapriya Duraisamy, Wei Xu, Scott Hare etc.</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>DRAMä¸»å¯¼å¤§è§„æ¨¡è®¡ç®—ç¯å¢ƒä¸­çš„åŸºç¡€è®¾æ–½æ”¯å‡ºï¼Œå¦‚æœä¸è¿›è¡Œæ¶æ„è½¬å˜ï¼Œè¿™ç§è¶‹åŠ¿å¯èƒ½ä¼šæ¶åŒ–ï¼ˆç»™ä¸èµ·é’±äº†ï¼‰ã€‚ä½¿ç”¨PMåœ¨é«˜åº¦å¤šç§Ÿæˆ·çš„ä»“åº“è§„æ¨¡è®¡ç®—ç¯å¢ƒä¸­æå‡ºäº†è®¸å¤šæŒ‘æˆ˜ã€‚å…¶<span class="label primary">åº”ç”¨ç¨‹åºçš„å¤šæ ·æ€§</span>å’Œè§„æ¨¡æ¿€å‘äº†ä¸€èˆ¬æƒ…å†µä¸‹åº”ç”¨ç¨‹åºé€æ˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¯é€‚åº”ç‰¹å®šçš„å·¥ä½œè´Ÿè½½éœ€æ±‚ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><div class="note info">å°†25%çš„DRAMæ¢ä¸ºPMï¼Œæ€§èƒ½æŸå¤±ä¸åˆ°5%ã€‚è¯¥è®¾è®¡ç‚¹åœ¨æ€§èƒ½ä¸‹é™çš„é™åˆ¶ä¸‹æœ€å¤§é™åº¦åœ°é™ä½æˆæœ¬ã€‚</div> <ul><li>å®šä¹‰å†…å­˜åˆ†å±‚çš„æœºå™¨çº§ä¼˜åŒ–æŒ‡æ ‡ï¼Œç”¨äºè‡ªé€‚åº”å¹³è¡¡å¤æ‚çš„é«˜å±‚æ¬¡å…¨æœºç¾¤åº”ç”¨æ€§èƒ½å’Œåˆ©ç”¨ç‡ç›®æ ‡ï¼ˆç¬¬2èŠ‚ï¼‰ã€‚</li><li>å¼•å…¥äº†ç”¨äºå¤§è§„æ¨¡å®æ—¶å¤æ‚ç³»ç»Ÿè¯„ä¼°çš„å¥å£®A/Bæµ‹è¯•æ–¹æ³•ï¼ˆç¬¬4èŠ‚ï¼‰ã€‚</li><li>é¦–æ¬¡å¯¹ç”Ÿäº§ä»“åº“è§„æ¨¡ç¯å¢ƒä¸­çš„å¯ç›´æ¥è®¿é—®åˆ†å±‚å†…å­˜ç³»ç»Ÿè¿›è¡Œå…¨é¢åˆ†æï¼Œè¯¥ç³»ç»ŸæˆåŠŸæœåŠ¡äºä¸åŒçš„åº”ç”¨ç¨‹åºç±»åˆ«ï¼ˆç¬¬5èŠ‚å’Œç¬¬7èŠ‚ï¼‰ã€‚</li><li>è¯„ä¼°ä¸€ç³»åˆ—ç­–ç•¥å¹¶è¯æ˜ç¡¬ä»¶è¾…åŠ©äº‹ä»¶åˆ†ææ»¡è¶³æ€§èƒ½è¦æ±‚çš„æœ‰æ•ˆæ€§ï¼ˆç¬¬6èŠ‚ï¼‰ï¼Œç¡®å®šä¸»åŠ¨é™çº§å’Œå¿«é€Ÿæ£€æµ‹å‡çº§çš„é‡è¦æ€§ã€‚ï¼ˆè¿˜æ˜¯å…ä¸äº†åšè¿™ä¸ªå·¥ä½œï¼Œhhï¼‰</li><li>æ­ç¤ºäº†ä¸€æ—¦å¸ƒå±€å¾—åˆ°å¾ˆå¥½çš„ä¼˜åŒ–ï¼Œåœ°å€è½¬æ¢å¼€é”€ã€å¹²æ‰°æ•ˆåº”å’Œé¡µé¢å¤§å°é—®é¢˜å¦‚ä½•æˆä¸ºå…³é”®æŒ‘æˆ˜ï¼Œéœ€è¦æ–°çš„mallocçº§æŠ€æœ¯æ¥å‡å°‘â€œè®¿é—®ç¢ç‰‡â€ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§é¡µé¢ã€‚</li><li>åˆ©ç”¨å®æ—¶A/Bæµ‹è¯•æœºåˆ¶ï¼Œä»¥äº‹å®ä¸ºä¾æ®å¼€å‘è‡ªé€‚åº”åˆ†å±‚æ„ŸçŸ¥é›†ç¾¤è°ƒåº¦ï¼Œåœ¨æœ€å¤§é™åº¦æé«˜åˆ©ç”¨ç‡çš„åŒæ—¶å‡å°‘æ€§èƒ½å½±å“tailsï¼Œå¹¶åˆ©ç”¨åº”ç”¨æŒ‡å¯¼çš„åˆ†å±‚æ„ŸçŸ¥å·¨é¡µç®¡ç†ï¼Œå‡å°‘è®¿é—®ç¢ç‰‡ï¼Œæé«˜ç¬¬äºŒå±‚åˆ©ç”¨ç‡ï¼ˆç¬¬8èŠ‚ï¼‰ã€‚</li></ul><p>æˆ‘ä»¬çš„ç»éªŒå‡¸æ˜¾äº†å¤§è§„æ¨¡ç®¡ç†å†…å­˜å±‚çš„å¤æ‚æ€§ï¼Œå…¶ä¸­å·¥ä½œè´Ÿè½½è¡Œä¸ºå¯èƒ½æ¯å¤©éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæˆ–è€…ç¨³å®šæ•°å‘¨åçªç„¶å‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œè¿™ç§ç³»ç»Ÿè®¾è®¡å’Œç”¨äºæ•è·å¤§è§„æ¨¡å®æ—¶å¤šæ ·åŒ–å·¥ä½œè´Ÿè½½çš„å¤æ‚äº¤äº’å½±å“çš„æ–¹æ³•å°†å¼€è¾Ÿæ–°çš„ã€æ—¥ç›Šé‡è¦çš„ç ”ç©¶é€”å¾„ã€‚</p><h2 id="4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#4-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="4. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>4. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><blockquote><p>SLIæ˜¯è¯·æ±‚å¾—åˆ°æ­£å¸¸å“åº”çš„ç™¾åˆ†æ¯”ã€‚Service Level Object æœåŠ¡æ°´å¹³ç›®æ ‡ï¼Œæ˜¯å›´ç»•SLIæ„å»ºçš„ç›®æ ‡ã€‚é€šå¸¸æ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œå¹¶ä¸ä¸€ä¸ªæ—¶é—´èŒƒå›´æŒ‚é’©ã€‚æ¯”å¦‚ï¼Œæœˆåº¦ã€å­£åº¦ã€å¹´åº¦ç­‰ã€‚99%ï¼ˆ2ä¸ª9çš„æ­£å¸¸è¿è¡Œæ—¶é—´ï¼‰ï¼šæ„å‘³ç€åœ¨è¿‡å»30å¤©ä¸­æœ‰1%ï¼Œæˆ–è€…è¯´7.2å°æ—¶çš„åœæœºæ—¶é—´ã€‚</p></blockquote><p>ä¸å†…å­˜åˆ†å±‚ç›¸å…³çš„åº”ç”¨æœåŠ¡å¯åˆ†ä¸ºä¸¤ç±»â€”â€”é«˜é‡è¦æ€§å»¶è¿Ÿæ•æ„Ÿå‹ï¼ˆHILSï¼‰å’Œå…¶ä»–ï¼ˆéHILSï¼‰ã€‚HILSåŒ…æ‹¬å¯¹å“åº”æ—¶é—´æœ‰ä¸¥æ ¼è¦æ±‚çš„é¢å‘ç”¨æˆ·çš„åº”ç”¨ã€å¤„äºå…¶ä»–HILSåº”ç”¨å…³é”®è·¯å¾„ä¸Šçš„ç¼“å­˜åº”ç”¨ä»¥åŠæ•°æ®å¤„ç†ä»»åŠ¡ä¸­çš„ç”Ÿäº§å±‚ï¼ˆProduction Tierï¼Œè§[48]ï¼‰ã€‚éHILSåŒ…æ‹¬é¢å‘ååé‡çš„åº”ç”¨ã€æ‰¹å¤„ç†ã€MLè®­ç»ƒç®¡é“å’Œå…¶ä»–SLO[48]è¦æ±‚è¾ƒå¼±çš„åº”ç”¨ã€‚è¿™äº›ç±»é€šå¸¸ä½äºåŒä¸€å°æœºå™¨ä¸Šã€‚Borgè°ƒåº¦å™¨[50]ä¼šæ ¹æ®è§‚å¯Ÿåˆ°çš„æ€§èƒ½ä¸»åŠ¨ç®¡ç†é›†ç¾¤ä¸­çš„ä½œä¸šï¼Œå†…å­˜åˆ†å±‚ä¹Ÿä¼šäº§ç”Ÿæ€§èƒ½å½±å“ã€‚</p><h3 id="4-1-æŒ‡æ ‡"><a href="#4-1-æŒ‡æ ‡" class="headerlink" title="4.1 æŒ‡æ ‡"></a>4.1 æŒ‡æ ‡</h3><p>ä¸ºäº†æ›´å¥½åœ°åˆ†æåˆ†å±‚å †æ ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªç›´æ¥è¿æ¥åˆ°åˆ†å±‚æ¶æ„æœ¬èº«çš„ä»£ç†æŒ‡æ ‡ï¼š<br>â€¢ æ¬¡è¦å±‚é©»ç•™ç‡(STRR)æ˜¯<strong>é©»ç•™åœ¨ç¬¬2å±‚çš„å·²åˆ†é…å†…å­˜çš„æ¯”ä¾‹</strong>ã€‚å®ƒæä¾›äº†æœ‰å…³å±‚ä½¿ç”¨æƒ…å†µçš„æ ‡å‡†åŒ–è§†è§’ã€‚<br>â€¢ æ¬¡è¦å±‚è®¿é—®ç‡(STAR)æ˜¯é’ˆå¯¹<strong>é©»ç•™åœ¨ç¬¬2å±‚çš„é¡µé¢çš„åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å†…å­˜è®¿é—®çš„æ¯”ä¾‹</strong>ã€‚è¾ƒä½çš„STARæ„å‘³ç€è¾ƒä½çš„æ€§èƒ½å½±å“ã€‚<br>æœªå……åˆ†åˆ©ç”¨Tier1 DRAMå¹¶æ²¡æœ‰ä»»ä½•å¥½å¤„ã€‚ STARå¢åŠ åæ˜ äº†æ€§èƒ½ä¸‹é™ã€‚ä½¿ç”¨tier2è¶Šå¤šï¼Œé£é™©å°±è¶Šå¤§ï¼Œä½†é€šè¿‡ä¿æŒSTARè¾ƒä½å¯ä»¥é™ä½é£é™©ã€‚ç›®æ ‡ï¼šæœ€å°åŒ–STARï¼Œæœ€å¤§åŒ–STRRã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/15f7395f6de14157835ea50861ebf19a.png" alt="STARçš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°CDFæ˜¾ç¤ºï¼Œåœ¨è¶…è¿‡99%çš„å®ä¾‹ä¸­socketçº§åˆ«Tier2è®¿é—®ç‡ä¿æŒåœ¨1%ä»¥ä¸‹ã€‚æˆ‘ä»¬å®ç°äº†å°†æ€§èƒ½ä¸‹é™æ€»ä½“é™åˆ¶åœ¨ 5%ä»¥ä¸‹çš„è¿è¥ç›®æ ‡ï¼Œç‰¹åˆ«æ˜¯å½“STARä½äº0.5%æ—¶"></p><h3 id="4-2-æ¶æ„"><a href="#4-2-æ¶æ„" class="headerlink" title="4.2 æ¶æ„"></a>4.2 æ¶æ„</h3><p>TMTSä»¥é¡µé¢ç²’åº¦åŠ¨æ€ç®¡ç†åˆ†å±‚å†…å­˜æ”¾ç½®ã€‚å…¶ç³»ç»Ÿæ¶æ„åŒ…æ‹¬å››å±‚ï¼Œå¦‚å›¾2æ‰€ç¤ºã€‚åº•å±‚å¯¹ç¡¬ä»¶è¿›è¡ŒæŠ½è±¡ï¼Œå‘ˆç°è·¨ä¸¤ç§æˆ–å¤šç§ç±»å‹å­˜å‚¨è®¾å¤‡åˆ†æ®µçš„ç‰©ç†åœ°å€ç©ºé—´ã€‚ä»é¡¶éƒ¨å¼€å§‹çš„ç¬¬äºŒå±‚å°†é¡µé¢ç®¡ç†ç­–ç•¥ä¸å€™é€‰æ£€æµ‹å’Œé¡µé¢è¿ç§»æœºåˆ¶åˆ†å¼€ï¼Œè¿™äº›æœºåˆ¶ç”±è¾ƒä½å±‚å†…æ ¸ç»„ä»¶æ‰§è¡Œã€‚é’ˆå¯¹å·¥ä½œè´Ÿè½½çš„ç‰¹å®šæ–¹é¢è¿›è¡Œä¼˜åŒ–ï¼Œç”¨æˆ·ç©ºé—´ç­–ç•¥å±‚æä¾›äº†è¿™ç§çµæ´»æ€§å’Œé€Ÿåº¦ã€‚é¡¶å±‚é›†ç¾¤å±‚ç”±Borgè°ƒåº¦ç¨‹åºç»„æˆï¼Œå®ƒä¸èŠ‚ç‚¹ä»£ç† Borgletä¸€èµ·å·¥ä½œï¼Œç®¡ç†è¿ç»­çš„å¤šæœºå™¨ä½œä¸šè¯·æ±‚æµï¼Œè§‚å¯Ÿè´Ÿè½½å’Œæ€§èƒ½æŒ‡æ ‡ï¼Œåœ¨æ¯å°æœºå™¨ä¸Šå¹¶å°†ä»»åŠ¡åˆ†æ´¾åˆ°å„ä¸ªæœåŠ¡å™¨[48]ã€‚åœ¨TMTS ä¸­â€‹â€‹ï¼Œå®ƒé‡‡ç”¨åˆ†å±‚æ„ŸçŸ¥è°ƒåº¦ç­–ç•¥æ¥å®ç°æ›´å¥½çš„å·¥ä½œæ”¾ç½®ï¼Œå¦‚ç¬¬8.2èŠ‚æ‰€è¿°ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/046b396e4d8b45c7926231cf250b74da.png"></p><h3 id="4-3-å†·é¡µé©±é€ä¸é™çº§ç­–ç•¥"><a href="#4-3-å†·é¡µé©±é€ä¸é™çº§ç­–ç•¥" class="headerlink" title="4.3 å†·é¡µé©±é€ä¸é™çº§ç­–ç•¥"></a>4.3 å†·é¡µé©±é€ä¸é™çº§ç­–ç•¥</h3><p>å½“ä¸€ä¸ªé¡µé¢åœ¨ä¹‹å‰å‡ ç§’å†…æ²¡æœ‰è¢«è®¿é—®è¿‡æ—¶ï¼Œæˆ‘ä»¬å°±å°†å…¶å½’ç±»ä¸ºé˜ˆå€¼ä¸ºtçš„å†·é¡µé¢[32]ã€‚é™çº§ç­–ç•¥é€‰æ‹©æ ¹æ®åº”ç”¨ç¨‹åºç±»åˆ«ã€æ¯ä¸ªåº”ç”¨ç¨‹åºæˆ–éšæ—¶é—´å˜åŒ–ç¡®å®šğ‘¡çš„å€¼åŠå…¶ç²’åº¦ã€‚<br><span class="label primary">æµ…æµ…æäº†ä¸€ä¸‹ä»–ä»¬çš„å·¥ä½œè´Ÿè½½98%éƒ½æ˜¯åŒ¿åé¡µï¼Œæ‰€ä»¥ç­–ç•¥ä¹Ÿæœ‰æ‰€åå¥½</span></p><h3 id="4-4-çƒ­é¡µå‡çº§ç­–ç•¥"><a href="#4-4-çƒ­é¡µå‡çº§ç­–ç•¥" class="headerlink" title="4.4 çƒ­é¡µå‡çº§ç­–ç•¥"></a>4.4 çƒ­é¡µå‡çº§ç­–ç•¥</h3><p>å¯¹æœ€åä¸€çº§ç¼“å­˜LLCæœªå‘½ä¸­äº‹ä»¶è¿›è¡Œé‡‡æ ·æ¥åˆ†ææœ€è¿‘è®¿é—®çš„ç¬¬ 2 å±‚å†…å­˜ä¸­çš„åœ°å€ã€‚ç”±äºç¬¬2å±‚æ˜¯å¯ç¼“å­˜çš„ï¼Œå› æ­¤åªéœ€è€ƒè™‘LLCæœªå‘½ä¸­äº‹ä»¶ã€‚å¯¹æ‰€æœ‰LLCæœªå‘½ä¸­äº‹ä»¶è¿›è¡Œé‡‡æ ·æ˜¯ä¸åˆ‡å®é™…ä¸”æ²¡æœ‰ç”¨çš„ï¼Œç»å¤§å¤šæ•°æœªè¾¾åˆ°ç¬¬ä¸€çº§çš„æµé‡ã€‚ä¸å¹¸çš„æ˜¯ï¼Œç¡¬ä»¶ä¸æ”¯æŒå¯¹å†…å­˜å­˜å‚¨ç²¾ç¡®äº‹ä»¶è¿‡æ»¤ã€‚We configure sampling to collect 1% of memory loads from tier2 and promote all the pages identified by this sampling. æˆ‘ä»¬åœ¨ç¬¬6.2èŠ‚ä¸­æ£€æŸ¥äº†è¿™ç§å®ç”¨ä½†ä¸å®Œç¾çš„æ£€æµ‹å™¨çš„æœ‰æ•ˆæ€§ã€‚</p><div class="note warning no-icon">å°±æ˜¯æŒ‡æŠŠç¬¬äºŒå±‚å†…å­˜åˆ†ä¸º100ä»½ï¼Œè¿ç§»å…¶ä¸­çš„ä¸€æ•´ä»½å»ç¬¬ä¸€å±‚å†…å­˜ï¼Œä½†æ˜¯è¿™ä¸ªé‡‡æ ·æ€ä¹ˆé‡‡ï¼Ÿæ˜¯ç›¸é‚»çš„è¿˜æ˜¯æŒ‡å®šæ­¥é•¿ï¼Œé€‰ä¸­1%æ˜¯è¦æ’åºè¿˜æ˜¯å…¶ä»–çš„æ€ä¹ˆç€ï¼Ÿ</div> <p>ä¸ºäº†æ£€æµ‹é‡‡æ ·å¯èƒ½é—æ¼çš„çƒ­ç‚¹é¡µé¢ï¼Œæˆ‘ä»¬è¿˜æ‰§è¡Œä¸»åŠ¨ã€å®šæœŸçš„åŸºäºæ‰«æçš„å‡çº§ã€‚æˆ‘ä»¬å°†é¡µé¢çƒ­é¾„å®šä¹‰ä¸ºæœ€è¿‘è®¿é—®é¡µé¢çš„æ‰«æå‘¨æœŸæ•°ã€‚æˆ‘ä»¬æ‰©å±•äº†å†…æ ¸ä¸­çš„é¡µé¢ä½æ‰«æå™¨æ¥è·Ÿè¸ªé¡µé¢çƒ­å¹´é¾„ï¼Œè¿™ä½¿å¾—å®ƒèƒ½å¤ŸåŒºåˆ†æ´»è·ƒé¡µé¢å’Œè½»åº¦è®¿é—®é¡µé¢ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬ä¸åœ¨Aä½æ‰«æä¸­è¿›è¡ŒTLBå¤±æ•ˆã€‚å°½ç®¡è¿™ç§ä¼˜åŒ–å¯èƒ½ä¼šç‰ºç‰²ä¸€äº›é¡µé¢å¹´é¾„çš„å‡†ç¡®æ€§ï¼Œä½†æˆ‘ä»¬å¹¶æ²¡æœ‰çœ‹åˆ°å®ƒåœ¨å®è·µä¸­å½±å“é™çº§å’Œå‡çº§çš„æœ‰æ•ˆæ€§ã€‚</p><div class="note info no-icon">é¡µé¢å¹´é¾„è¿™ä¸ª20å¹´å‘åœ¨TCçš„APMåšè¿‡ï¼Œä½†æ˜¯æä¸¤ä¸ªä¸ä¼šè¿è¡Œæ—¶æœ‰å•¥å†²çªå—ï¼Ÿ</div> <h3 id="4-5-é¡µé¢è¿ç§»"><a href="#4-5-é¡µé¢è¿ç§»" class="headerlink" title="4.5 é¡µé¢è¿ç§»"></a>4.5 é¡µé¢è¿ç§»</h3><p>ufardåå°çº¿ç¨‹ä½¿ç”¨Linuxä¸­çš„æ ‡å‡†perfæ¥å£ï¼ˆä¾‹å¦‚ perf_event_open()ï¼‰æ¥è®¾ç½®é‡‡æ ·å’Œå¤„ç†è®¿é—®äº‹ä»¶ã€‚å®ƒè¿˜åœ¨å†…æ ¸ä¸­å®‰è£…äº†ä¸€ä¸ªå°å‹BPF[3]ç¨‹åºï¼Œä»¥ä¼˜åŒ–ä»å†…æ ¸å†…é¡µé¢Aä½æ‰«æå™¨åˆ°æ¯ä¸ªNUMAèŠ‚ç‚¹BPFç¯å½¢ç¼“å†²åŒºçš„tier2çƒ­é¡µé¢å¹´é¾„åŠå…¶é¡µé¢åœ°å€çš„æ”¶é›†ã€‚</p><h3 id="4-6-ç¡¬ä»¶é™åˆ¶å¯¼è‡´çš„ç­–ç•¥çº¦æŸ"><a href="#4-6-ç¡¬ä»¶é™åˆ¶å¯¼è‡´çš„ç­–ç•¥çº¦æŸ" class="headerlink" title="4.6 ç¡¬ä»¶é™åˆ¶å¯¼è‡´çš„ç­–ç•¥çº¦æŸ"></a>4.6 ç¡¬ä»¶é™åˆ¶å¯¼è‡´çš„ç­–ç•¥çº¦æŸ</h3><p>æˆ‘ä»¬çš„éƒ¨ç½²ä½¿ç”¨è‹±ç‰¹å°”å‚²è…¾æŒä¹…å†…å­˜çš„å˜ä½“ä½œä¸ºç¬¬2å±‚ã€‚æ­¤ç±»ç¬¬2å±‚DIMMçš„å¸¦å®½å—åˆ°é«˜åº¦é™åˆ¶ï¼Œæ”¯æŒçš„å†…å­˜å¸¦å®½ä»…ä¸ºè‹±ç‰¹å°”Â®è‡³å¼ºÂ®å¯æ‰©å±•å¤„ç†å™¨ä¸Šå…¸å‹DDR4é€šé“çš„å†…å­˜å¸¦å®½çš„1/10ã€‚</p><p>åœ¨å½“å‰çš„ç¡¬ä»¶å®ç°ä¸­ï¼Œç¬¬2å±‚DIMMå¸¦å®½é¥±å’Œä¹Ÿä¼šå½±å“å¸¸è§„DRAMå»¶è¿Ÿï¼Œå› ä¸ºç¬¬2å±‚DIMMä¸DRAM DIMMå…±äº«å†…å­˜é€šé“ã€‚è¿™é™åˆ¶äº†å‡çº§å’Œé™çº§çš„ç§¯ææ€§ã€‚è¡¨1åˆ—å‡ºäº†æˆ‘ä»¬çš„é…ç½®ä¸­ä¸åŒè®¿é—®æ¨¡å¼ä¸‹æµ‹å¾—çš„Tier2 DIMMå¸¦å®½ã€‚æµ‹å¾—çš„ç©ºé—²è¯»è®¿é—®å»¶è¿Ÿçº¦ä¸º325nsï¼Œè¯¦æƒ…è¯·å‚è§[28,55]ã€‚æ ¹æ®å†·é¡µé…ç½®æ–‡ä»¶ï¼ˆå›¾3ï¼‰ã€å¯ç”¨DIMMå®¹é‡å’Œç¡¬ä»¶å¸¦å®½é™åˆ¶ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†25%çš„ç³»ç»Ÿå†…å­˜å®¹é‡ç”¨äºç¬¬2å±‚ã€‚è¿™äº›ç¡¬ä»¶é™åˆ¶å¯¼è‡´æˆ‘ä»¬å½“å‰çš„éƒ¨ç½²å—åˆ°ä»¥ä¸‹ç­–ç•¥å†³ç­–é™åˆ¶ï¼š</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/8add2e9fbff5488da1074b431149e3de.png"></p><p>æ²¡æœ‰ç›´æ¥åˆ†é…åˆ°ç¬¬2å±‚ï¼šæ­¤çº¦æŸé¿å…äº†ç¬¬2å±‚ä¸­æ–°åˆ†é…çš„é¡µé¢ç›´æ¥å°±å¾ˆçƒ­ã€‚ç³»ç»Ÿä»…å°†ä»»åŠ¡å†…å­˜åˆ†é…åˆ°ç¬¬1å±‚ï¼Œå¹¶ä¾é é™çº§æ¥å¡«å……ç¬¬2å±‚ã€‚ä»…åˆ†é…åˆ°tier1å¯èƒ½ä¼šå¢åŠ OOMæƒ…å†µã€‚QoSåœ¨é™åˆ¶å¯¹è¿æ¥åˆ°è¿œç¨‹socketçš„ç¬¬2å±‚DIMMçš„è®¿é—®æ–¹é¢æ•ˆæœè¾ƒå·®ï¼Œå› ä¸ºåé¦ˆä¿¡å·å¿…é¡»åœ¨æ’æ§½ä¹‹é—´ä¼ è¾“ã€‚æ‰€ä»¥åªå°†ä»»åŠ¡çš„å†…å­˜é™çº§åˆ°ä»»åŠ¡è¿è¡Œçš„socketä¸Šçš„ç¬¬2å±‚DIMMã€‚</p><p><span class="label info">è¿™äº›é€‰æ‹©å¹¶ä¸æ˜¯TMTSçš„åŸºç¡€ï¼Œè€Œæ˜¯åº•å±‚ç¡¬ä»¶å®ç°çš„äº§ç‰©ã€‚æœªæ¥çš„ç¡¬ä»¶å®ç°å¯èƒ½ä¸ä¼šå—åˆ°è¿™äº›é™åˆ¶ï¼Œä»è€Œæ”¾å®½ä¸Šé¢è®¨è®ºçš„é™åˆ¶ã€‚å½“å‰é™åˆ¶çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å±•ç¤ºç³»ç»Ÿè®¾è®¡çš„å¼¹æ€§ã€‚</span></p><h3 id="4-7-TLB-Misses-and-Huge-Pages"><a href="#4-7-TLB-Misses-and-Huge-Pages" class="headerlink" title="4.7 TLB Misses and Huge Pages"></a>4.7 TLB Misses and Huge Pages</h3><p>å¤§é¡µé¢ï¼ˆä¾‹å¦‚2MBï¼‰å¯ä»¥å‡è½»4KBé¡µé¢å¸¦æ¥çš„è™šæ‹Ÿåˆ°ç‰©ç†åœ°å€è½¬æ¢å»¶è¿Ÿå’ŒTLBè¦†ç›–é—®é¢˜ã€‚ä½†è¿™äº›å¤§å°ç»™åŸºäºé¡µé¢è¿ç§»çš„åˆ†å±‚å†…å­˜ç³»ç»Ÿå¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ã€‚ç”±äºåœ°å€æ˜ å°„çš„æ›´æ”¹ï¼Œè¿ç§»ä¼šå¯¼è‡´TLBå¤±æ•ˆã€‚æ­¤å¤–ï¼Œå¤§é¡µé¢ä¸­çš„å°çƒ­åŒºåŸŸä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢æ˜¾å¾—å¾ˆçƒ­ã€‚</p><p>åœ¨å½“å‰çš„å®ç°ä¸­ï¼Œå¯¹è±¡æœ€åˆåˆ†é…åœ¨tier1ä¸­ã€‚å¦‚æœTMTSå°†å¤§é¡µè¯†åˆ«ä¸ºé™çº§å€™é€‰ï¼Œåˆ™è¯¥é¡µé¦–å…ˆè¢«æ‹†åˆ†ä¸º4KBé¡µé¢ï¼Œç„¶åé™çº§ã€‚è¿™å…è®¸æœªæ¥çš„è®¿é—®æå‡å•ç‹¬çš„4KBé¡µé¢ï¼Œå¹¶å‡å°‘è¿ç§»æˆæœ¬å’Œä¸å¿…è¦çš„tier1å ç”¨ã€‚å¹¶éåŸå§‹å¤§é¡µé¢çš„æ‰€æœ‰é™çº§4KBé¡µé¢éƒ½å¯ä»¥å‡çº§ï¼Œä»è€Œé˜»æ­¢å®ƒä»¬æˆåŠŸåœ°é‡æ–°ç»„åˆæˆå¤§é¡µé¢ã€‚ç”±äºç³»ç»Ÿçš„DRAMå®¹é‡è¾ƒä½ï¼Œæˆ‘ä»¬çœ‹åˆ°DRAMå‹åŠ›å¢åŠ ï¼Œè¿™ä¼šå¯¼è‡´tier1ç¢ç‰‡åŒ–ã€‚</p><p>æˆ‘ä»¬è¿›è¡Œäº†ä¸¤é¡¹å®éªŒï¼Œè¿™ä¸¤é¡¹å®éªŒéƒ½ä»¥æœ€å°çš„å‰¯ä½œç”¨æé«˜äº†TLB å‘½ä¸­ç‡ã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»¬å°è¯•å®Œæ•´è¿ç§»å¤§é¡µé¢ï¼Œè€Œä¸æ˜¯åœ¨é™çº§æ—¶å°†å…¶åˆ†è§£ä¸º4KBé¡µé¢ã€‚è¿™ä½¿TLBæœªå‘½ä¸­å¹³å‡å‡å°‘äº†4.7%ï¼Œå¹¶å°†å¹³å‡æ€§èƒ½æé«˜äº†0.5%ã€‚å‡çº§å¸¦å®½æŒ‰é¢„æœŸå¢åŠ ï¼Œä½†å¢å¹…&lt;1%ï¼Œå¹¶ä¸”å¸¦å®½æ‹¥å¡äº‹ä»¶æ²¡æœ‰å¢åŠ ã€‚å¹³å‡STRRé™ä½ &lt;1%ã€‚<br>å…¶æ¬¡ï¼Œæˆ‘ä»¬æé«˜äº†å†…å­˜å‹ç¼©çš„ç§¯ææ€§ï¼Œç›®æ ‡æ˜¯æé«˜tier1ä¸­4KBé¡µé¢çš„é‡ç»„ç‡ã€‚æˆ‘ä»¬å‘ç°å¤§é¡µè¦†ç›–ç‡æé«˜äº†25%ï¼Œå¹³å‡æ€§èƒ½æé«˜äº†0.5%ã€‚é¢å¤–çš„CPUæˆæœ¬å¾®ä¸è¶³é“ï¼Œ&lt; 0.1%ã€‚</p><div class="note warning no-icon">ä½†æ˜¯ï¼Œå…„å¼Ÿä½ è¯´æ‹†å°±æ‹†å—ï¼Ÿé¡µè¡¨æ€ä¹ˆè½¬æ¢ï¼Œé¡µè¡¨è½¬äº†TLBçš„ç¼“å­˜è¿˜è¦ä¸€è‡´æ€§ã€‚ä¸¤ç§é¡µé¢æ··åˆä½ è¦æ€ä¹ˆåšåœ°å€è½¬æ¢ï¼Ÿwowï¼Œamazing.è€Œä¸”æ‰€ä»¥æœ€åè¦ä½¿ç”¨å“ªç§ç­–ç•¥å‘¢ï¼Ÿ</div> <h2 id="5-è¯„ä¼°"><a href="#5-è¯„ä¼°" class="headerlink" title="5. è¯„ä¼°"></a>5. è¯„ä¼°</h2><p>åœ¨Optane PMä¸Šåšçš„ã€‚è¿™é‡Œåªè®°å½•æ„Ÿå…´è¶£çš„ã€‚<br>ä½œè€…ä»¬é¦–å…ˆè¯´åŠ å…¥PMåçš„æƒ…å†µå’Œåªä½¿ç”¨DRAMå·®ä¸å¤šï¼›ç„¶åè¯´æ˜äº†å†·é¡µé¢æ§åˆ¶çš„å¾ˆå¥½ï¼š</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/37b3a657a7fa48d6a39d0c8b3f687177.png"><br>å›¾5ï¼ˆaï¼‰æ˜¯STRRï¼Œï¼ˆbï¼‰æ˜¯å°†å†·å†…å­˜è¦†ç›–ç‡å®šä¹‰ä¸ºå­˜å‚¨åœ¨tier2ä¸­çš„2åˆ†é’Ÿå†·é¡µçš„æ¯”ä¾‹ã€‚ä¸€ä¸ªé‡è¦çš„å‚è€ƒç‚¹æ˜¯åœ°å€ç©ºé—´ä¸­å¯ç”¨å†·é¡µçš„ç›¸å¯¹æ•°é‡ï¼Œåœ¨å›¾3ï¼ˆaï¼‰çš„å®éªŒä¸­è§‚å¯Ÿåˆ°åœ¨28%åˆ°42%ä¹‹é—´å˜åŒ–ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/bbc62466bd56426ba61a32a89ba0a1d2.png"></p><p><span class="label warning">ä½†æ˜¯æœ‰ä¸€ç‚¹ï¼ŒPMä¸å¯èƒ½åˆšåˆšå¥½å°±ç»™25%ï¼Œè‚¯å®šä¼šå¤šç»™å§ï¼Ÿä½ åˆä¸æ”¾åœ¨è¿œç«¯ï¼Œè¢«å®šä¹‰çš„å†·çš„è¶…å‡º25%ï¼Œé‚£dramé™çº§æœ‰è£…ä¸ä¸‹ï¼Œåªèƒ½OOMï¼Ÿ</span></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/761b677057cc4885830e9522fee1f0fa.png" alt="å‡çº§ã€é™çº§å’Œåº”ç”¨ç¨‹åºè®¿é—®tier2çš„å¸¦å®½æ¶ˆè€—"></p><h2 id="6-åº”å¯¹ä»“åº“çº§è§„æ¨¡é—®é¢˜çš„é€‚åº”æ€§æ”¿ç­–"><a href="#6-åº”å¯¹ä»“åº“çº§è§„æ¨¡é—®é¢˜çš„é€‚åº”æ€§æ”¿ç­–" class="headerlink" title="6. åº”å¯¹ä»“åº“çº§è§„æ¨¡é—®é¢˜çš„é€‚åº”æ€§æ”¿ç­–"></a>6. åº”å¯¹ä»“åº“çº§è§„æ¨¡é—®é¢˜çš„é€‚åº”æ€§æ”¿ç­–</h2><p>è™½ç„¶éƒ¨ç½²çš„TMTSæ»¡è¶³å¤§å¤šæ•°åº”ç”¨ç¨‹åºçš„æ€§èƒ½ç›®æ ‡ï¼Œä½†ä¸€äº›å¼‚å¸¸å€¼ä¼šå‡ºç°æ˜¾ç€çš„æ€§èƒ½ä¸‹é™ï¼Œå¦‚å›¾6cæ‰€ç¤ºã€‚ä¸Šè¿°æ¡ˆä¾‹ç ”ç©¶å±•ç¤ºäº†æˆ‘ä»¬è®¡ç®—ç¯å¢ƒä¸­å…¸å‹çš„å†·å†…å­˜è®¿é—®æ¨¡å¼çš„å¤šæ ·åŒ–ç»„åˆã€‚ä¸ºäº†åœ¨è¿™æ ·çš„ç¯å¢ƒä¸­æ‰©å±•åˆ†å±‚ï¼Œæˆ‘ä»¬å¿…é¡»å®ç°è·¨èŠ‚ç‚¹ã€é›†ç¾¤å’Œåº”ç”¨ç¨‹åºå±‚çš„å‚ç›´é›†æˆï¼Œå¹¶åˆ¶å®šç­–ç•¥ï¼Œå…±åŒå®ç°æ›´é«˜çš„å†·å†…å­˜è¯†åˆ«ï¼ŒåŒæ—¶å°†æ€§èƒ½ä¸‹é™é™è‡³æœ€ä½ã€‚æœ¬èŠ‚è®¨è®ºæ”¯æŒæ‰©å±•TMTSçš„ä¸‰ç§è‡ªé€‚åº”ç­–ç•¥ã€‚</p><p>Lagar-Cavillaç­‰äºº[32]æè¿°äº†ä¸€ç§åŠ¨æ€çš„ã€æŒ‰åº”ç”¨ç¨‹åºå†·é¾„é˜ˆå€¼ç­–ç•¥ï¼Œæ—¨åœ¨ç»´æŒç›®æ ‡å‡çº§ç‡ã€‚<br>ç„¶åä»¥å‰è°ƒåº¦çš„ä¼˜åŒ–Borgletåœ¨é›†ç¾¤é—´ã€æœºå™¨é—´é€‰æ‹©ç­–ç•¥çš„å®Œå–„ï¼Œè€ƒè™‘æ¯ä¸ªæœºå™¨çš„ç¬¬ä¸€å±‚ä½¿ç”¨ç‡ä¹‹ç±»çš„ã€‚</p><p><span class="label info">æˆ‘ä»¬ç›¸ä¿¡ï¼Œä½¿ç”¨è½¯ä»¶æç¤ºæ¥å¸®åŠ©è°ƒæ•´é¡µé¢å†…çš„å†…å­˜åˆ†é…å’Œå¯¹è±¡æ”¾ç½®çš„ç±»ä¼¼æ–¹æ³•å°†å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚ä¾‹å¦‚ï¼Œé™¤äº†å¼€å‘äººå‘˜å°†åº”ç”¨ç¨‹åºå†…çš„åˆ†é…æ³¨é‡Šä¸ºå¯èƒ½çš„çƒ­æˆ–å†·ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜å¯ä»¥ä½¿ç”¨è‡ªåŠ¨åŒ–æŠ€æœ¯ï¼ˆä¾‹å¦‚é…ç½®æ–‡ä»¶å¼•å¯¼ä¼˜åŒ–ï¼‰æ¥æä¾›ç±»ä¼¼çš„æç¤ºã€‚</span></p><h2 id="7-ç§¯ç´¯"><a href="#7-ç§¯ç´¯" class="headerlink" title="7. ç§¯ç´¯"></a>7. ç§¯ç´¯</h2><p>å†·é¡µé¢é©±é€è¿˜æŒºä¸ä¸€æ ·ï¼Œä¸ç›´æ¥åˆ†é…PMä¹Ÿæœ‰ç†ç”±ä¹ŸæŒºæ–°å¥‡ï¼›ä½œè€…åœ¨è®¾è®¡å’Œæè¿°æ—¶æ„Ÿè§‰ä¹Ÿå°½å¯èƒ½åœ¨è¡¨ç¤ºæˆ‘çŸ¥é“CXLï¼Œæˆ‘çŸ¥é“ç¡¬ä»¶ä¼šå˜ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™ä¸ªç­–ç•¥ä»ç„¶å¯ä»¥å‚è€ƒã€‚</p><p>å›¾6æ˜¯ä¸åŒåº”ç”¨ç¨‹åºIPCçš„æƒ…å†µï¼Œè¯´æ˜ä¸åŒåº”ç”¨ç¨‹åºå·®å¼‚ï¼Œç”¨è¿™ä¸ªæ–¹å¼åˆ†ç±»åº”ç”¨ç¨‹åºç¬¬ä¸€æ¬¡è§ã€‚</p><p>ä½¿ç”¨TensorFlowæ¡†æ¶[6]æ„å»ºçš„é¢å‘ååé‡çš„æœºå™¨å­¦ä¹ è®­ç»ƒç®¡é“ï¼Œå…·æœ‰é«˜å†…å­˜å¸¦å®½ä½¿ç”¨ç‡å’Œä¸å¯é¢„æµ‹çš„è®¿é—®æ¨¡å¼ã€‚ç”¨è¿™ä¸ªworkloadä¹Ÿæ˜¯å¤´ä¸€æ¬¡ã€‚æœºå™¨å­¦ä¹ åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªé¢å‘ååé‡çš„è®­ç»ƒç®¡é“ï¼Œåœ¨è®­ç»ƒé˜¶æ®µé¢‘ç¹æ›´æ–°å†…å­˜ä¸­çš„MLæ¨¡å‹ã€‚è¯¥åº”ç”¨ç¨‹åºå­˜å‚¨çš„å†…å­˜æ•°æ®å¯ä»¥æ˜¯å¯†é›†çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¨€ç–çš„ï¼Œå…·ä½“å–å†³äºæ›´æ–°å½“å‰æ­£åœ¨è®­ç»ƒçš„MLæ¨¡å‹æ‰€éœ€çš„æ•°æ®é‡ã€‚è¿™äº›MLæ¨¡å‹æ›´æ–°éœ€è¦å¤§é‡å†…å­˜å¸¦å®½ï¼Œå¹¶ä¸”å®ƒä»¬çš„å†…å­˜è®¿é—®æ¨¡å¼æ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºç»è¿‡ä¼˜åŒ–ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å°†è®­ç»ƒæ•°æ®ä»ç£ç›˜è¯»å–åˆ°å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å†…å­˜ä¸­è®¿é—®çš„å±€éƒ¨æ€§è¿›è¡Œä¼˜åŒ–ã€‚è®­ç»ƒå·¥ä½œçº¿ç¨‹çš„å•ä¸ªå®ä¾‹çš„ä»»ä½•å‡æ…¢éƒ½å¯èƒ½å‡æ…¢åº”ç”¨ç¨‹åºçš„æ•´ä¸ªè®­ç»ƒé˜¶æ®µï¼Œä»è€Œå¯¼è‡´CPUå’ŒåŠ é€Ÿå™¨å‘¨æœŸçš„æµªè´¹ã€‚</p><p>å¥‡æ€ªï¼Œä»–ä¸æ˜¯ç›´æ¥é™çº§å»PMå—ï¼Œä¸ºä»€ä¹ˆè¦åœ¨åˆ†é…æ—¶éš”ç¦»å†·çƒ­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚â€œä¸ºäº†é¿å…å¹¶ç½®å†·çƒ­å¯¹è±¡ï¼Œæˆ‘ä»¬æ‰©å±•äº†newè¿ç®—ç¬¦ä»¥æ¥å—ä¸€ä¸ªæç¤ºå‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡ç¤ºé¢„æœŸåˆ†é…çš„å¯¹è±¡çš„è®¿é—®é¢‘ç‡ã€‚C++å†…å­˜åˆ†é…å™¨çš„å¼€æºTCMallocå®ç°[4]ä½¿ç”¨æ­¤å‚æ•°æ¥åˆ†éš”è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„â€œå†·â€å’Œâ€œçƒ­â€åˆ†é…ã€‚ç”±äºä¸ç»å¸¸è®¿é—®çš„å¯¹è±¡èšé›†åœ¨é¡µé¢ä¸Šï¼Œå› æ­¤å¯ä»¥å»ºè®®å†…æ ¸ä¸è¦ä½¿ç”¨é€æ˜å¤§é¡µé¢æ˜ å°„å†·åŒºåŸŸã€‚è¿™äº›ç­–ç•¥å¯¼è‡´é¢‘ç¹è®¿é—®å’Œä¸ç»å¸¸è®¿é—®çš„å¯¹è±¡çš„åˆ†ç¦»ï¼Œå¹¶ä¸ºæ¯ä¸ªå¯¹è±¡æä¾›ä¸åŒçš„ç­–ç•¥ã€‚â€</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> Warehouse-Scale Computing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Merchandiser Data Placement on Heterogeneous Memory for TaskParallel HPC Applications with LoadBalance Awareness</title>
      <link href="/2023/08/19/Merchandiser-Data-Placement-on-Heterogeneous-Memory-for-TaskParallel-HPC-Applications-with-LoadBalance-Awareness/"/>
      <url>/2023/08/19/Merchandiser-Data-Placement-on-Heterogeneous-Memory-for-TaskParallel-HPC-Applications-with-LoadBalance-Awareness/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªACM SIGPLAN Symposium on Principles &amp; Practice of Parallel Programming, PPoPP, 2023</li><li>Merchandiser: Data Placement on Heterogeneous Memory for Task-Parallel HPC Applications with Load-Balance Awareness </li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Zhen Xieï¼ŒUniversity of California, Merced Argonne National Laboratory</li><li>Jie Liuï¼ŒUniversity of California, Merced</li><li>Jiajia Liï¼ŒNorth Carolina State University</li><li>Dong Liï¼ŒUniversity of California, Merced</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>å›¾1.aç»™å‡ºäº†ä¸€ä¸ªåŸºäºMPIçš„ä»»åŠ¡å¹¶è¡Œåº”ç”¨çš„ä¾‹å­ã€‚åœ¨DMRGä¸­ï¼Œä¸€ä¸ªå“ˆå¯†é¡¿çŸ©é˜µé¦–å…ˆè¢«åˆ†å‰²æˆå¤šä¸ªå—ï¼Œæ¯ä¸ªå—è¢«åˆ†é…ç»™ä¸€ä¸ªMPI è¿›ç¨‹(1-3è¡Œ) ã€‚ç„¶åæ¯ä¸ªMPIè¿›ç¨‹è¿è¡Œä¸€ä¸ªè®¡ç®—å¾ªç¯ï¼Œä½œä¸ºè¾“å…¥(ç¬¬5-7è¡Œ)å¾ªç¯çš„ä¸€æ¬¡è¿­ä»£è¢«è®¤ä¸ºæ˜¯1ä¸ªä»»åŠ¡å®ä¾‹ã€‚å› æ­¤ï¼ŒMPIè¿›ç¨‹ä¸­çš„ä»»åŠ¡æ˜¯é‡å¤æ‰§è¡Œçš„ã€‚åœ¨æ¯ä¸ªè¿­ä»£ç»“æŸæ—¶ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„MPIè¿›ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚</p><p>å›¾1.bç»™å‡ºäº†1ä¸ªåŸºäºOpenMPçš„ä»»åŠ¡å¹¶è¡Œåº”ç”¨çš„ä¾‹å­ï¼Œä¸€ä¸ªä¸»å¾ªç¯è¿è¡Œäº†è®¸å¤šSpGEMM (C=A*B) ã€‚åœ¨ä¸»å¾ªç¯çš„æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼ŒAé¦–å…ˆè¢«åˆ†å‰²æˆè‹¥å¹²ä¸ªbinsï¼Œéƒ¨åˆ† A*B å¾—åˆ°éƒ¨åˆ†C</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/2d6f15b49475435ba52e45722d3e969f.png"></p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>å¼‚æ„å†…å­˜è®©è¿™ç§å¹¶è¡Œçš„ï¼Œæœ‰åŒæ­¥ç‚¹çš„workloadè´Ÿè½½å‡è¡¡ï¼Œè¿™ä¸ªç­–ç•¥ç®—æ˜¯å¯¹ä»¥å‰è¿ç§»ç­–ç•¥çš„è¡¥å……ã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/ea9867b9f36043af9a699eb42ec35696.png"><br>å½“å¤§å®¶éƒ½å°†è®¿é—®é¢‘ç‡é«˜çš„é¡µé¢æ”¾åœ¨DRAMæ—¶ï¼Œå¿½ç•¥äº†å¹¶è¡Œè®¡ç®—æœ‰åŒæ­¥ç‚¹çš„å®é™…æƒ…å†µï¼Œè¿™ä¼šä½¿å¾—é«˜æ€§èƒ½è®¡ç®—ä¸åŒä»»åŠ¡é—´è´Ÿè½½ä¸å‡ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>Input-Aware Memory Access Quantification<br>æ—¢ç„¶æ˜¯ä»ä»»åŠ¡çš„è§’åº¦æ¥è§£å†³é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚ä½•ç¡®å®šä»€ä¹ˆæ ·çš„æ•°æ®æ”¾å…¥å¿«é€Ÿå†…å­˜ä¸­ï¼Ÿ<br>ä¸€ç§æ˜¯ç¨‹åºå‘˜è‡ªå·±å»è®¾ç½®ã€‚<br>å¦ä¸€ç§åˆ†ç±»æ˜¯æµå¼çš„ã€ä¸€å®šæ­¥é•¿çš„ï¼Œéœ€è¦è€ƒè™‘å·¦å³ä¸¤è¾¹æ•°æ®çš„ã€éšæœºçš„ã€‚ä¸€ä¸ªç¨‹åºè¿˜å¯ä»¥æœ‰å¤šç§æ¨¡å¼åŒæ—¶å­˜åœ¨ã€‚ï¼ˆè¿™åœ¨16å¹´eoursysæœ‰æ¯”è¾ƒç›¸ä¼¼çš„å·¥ä½œï¼‰è¿™äº›æ¨¡å¼çš„è¯†åˆ«æ˜¯ç°æœ‰çš„å¼€æºå·¥å…·æ”¹é€ çš„ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/519a7d4c0e2149bf9fd8ddbdd870afcc.png"></p><p>é˜¿å°”æ³•çš„å€¼ï¼Œæ ¹æ®æ­¥é•¿å’Œæ•°æ®ç±»å‹æ¥ç¡®å®šï¼Œç”±ä½œè€…æå‰æšä¸¾å¥½äº†çš„ã€‚ç»¼ä¸Šç»™äº†ä¸¤ç§æ–¹æ³•æ¥åˆ¤æ–­è¾“å…¥æ•°æ®çš„å°†æ¥è¢«è®¿é—®é‡ï¼ŒPMç”¨çš„æ˜¯ä¸€ç¯‡è®ºæ–‡çš„æ–¹æ³•ï¼ŒDRAMç”¨çš„æ˜¯å¦ä¸€ç¯‡è®ºæ–‡ï¼ˆå…ˆå¤§é¡µé¢é‡‡æ ·ï¼Œçƒ­çš„å†å»é‡‡æ ·é‚£ä¸€å—çš„å°é¡µé¢ï¼‰ï¼Œä»¥è¿™æ¬¡çš„è®¿é—®é¢„ä¼°ä¸‹æ¬¡è®¿é—®é¢‘ç‡ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šçš„æƒ…å†µå°±æ˜¯éšæœºé‚£ç§æ¨¡å¼ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b690c63eb3a3414991abdf491177a583.png"></p><p>è¿ç§»çš„å†³ç­–æ¨¡å‹åº”è¯¥æ˜¯ï¼Œä½œè€…çš„æƒ³æ³•å°±æ˜¯æ€ä¹ˆæŠŠæ•°æ®æ”¾ç½®åœ¨ä¸åŒPMçš„æ•æ„Ÿæ€§å±•ç°å‡ºæ¥ï¼ŒåŒºåˆ†å‡ºæ•°æ®åœ¨ä¸åŒå¼‚æ„æ”¾ç½®çš„å·®åˆ«ã€‚<br>æ—¶é—´ä¸Šçš„é¢„æµ‹å®Œå…¨å‚è€ƒ13å¹´çš„ä¸€ç¯‡è®ºæ–‡ã€‚è¾“å…¥çš„æ˜¯å„ç§ç¡¬ä»¶é‡‡æ ·å€¼å’Œå½“å‰DRAMçš„è®¿é—®é‡ï¼Œç„¶åæœ‰ä¸ªç›¸å…³æ€§å‡½æ•°å»åšåˆ¤æ–­ã€‚</p><p>ç›¸å…³å‡½æ•°ç”¨çš„GRBï¼ˆæ¢¯åº¦æå‡å›å½’ï¼‰ï¼šæ¯ä¸ªå­¦ä¹ ç®—æ³•å‡†ç¡®ç‡éƒ½ä¸é«˜ã€‚ä½†æ˜¯å®ƒä»¬é›†æˆèµ·æ¥å¯ä»¥è·å¾—å¾ˆå¥½çš„å‡†ç¡®ç‡ã€‚è¿™äº›å­¦ä¹ ç®—æ³•ä¾æ¬¡åº”ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå­¦ä¹ ç®—æ³•éƒ½æ˜¯åœ¨å‰ä¸€ä¸ªå­¦ä¹ ç®—æ³•çš„é”™è¯¯ä¸­å­¦ä¹ ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/89e360308c2b400b8d7318f8e4b2efc6.png"></p><p><strong>æ€§èƒ½æ¨¡å‹çš„è®¾è®¡æ¦‚è¿°</strong><br>ä¸Šä¸€ä¸ªåŒæ­¥ç‚¹å‰çš„ä»»åŠ¡è¢«è¾“å…¥ï¼Œåœ¨ç¼–è¯‘æ—¶åˆ¤æ–­è®¿é—®æ¨¡å¼å’Œè®¿é—®é¢„æµ‹åšé™æ€åˆ†ç±»ã€‚è¿è¡Œæ—¶æ ¹æ®ä»¥å‰å¤§å®¶åšçš„é‡‡æ ·ä»¥åŠæœºå™¨å­¦ä¹ çš„è¿è¡Œæ—¶é—´é¢„æµ‹ï¼Œè¾¾åˆ°è¿ç§»å’Œè´Ÿè½½å‡è¡¡çš„ç›®çš„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/03757318787c480091970cfc3d2290a2.png"></p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>é¦–å…ˆæ˜¯æ€§èƒ½æå‡ã€‚ç„¶åå¯ä»¥çœ‹åˆ°æ”¹è¿›åæ‰§è¡Œæ—¶é—´æ–¹å·®å‡å°‘äº†ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/1807463f60ca4d25a648d88c1e9a5a63.png"></p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>è§£å†³æ–¹æ¡ˆå¤ªé»‘ç›’äº†å§ã€‚</p><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>å…³æ³¨çš„é—®é¢˜çš„è§’åº¦ã€‚</p><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><p>Spindleæ˜¯æ¸…åå†™çš„ï¼Œå¼€æºçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Transparent Page Placement for CXL Enabled Tiered Memory</title>
      <link href="/2023/08/19/Transparent-Page-Placement-for-CXL-Enabled-Tiered-Memory/"/>
      <url>/2023/08/19/Transparent-Page-Placement-for-CXL-Enabled-Tiered-Memory/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªASPLOSï¼Œ2023ï¼ŒCCFA</li><li>TPP: Transparent Page Placement for CXL-Enabled Tiered-Memory</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Hasan Al Marufï¼ŒMosharaf Chowdhury â€“ University of Michiganå¯†æ­‡æ ¹å¤§å­¦</li><li>Hao Wangï¼ŒNiket Agarwalï¼ŒPallab Bhattacharya â€“ NVIDIA</li><li>Abhishek Dhanotiaï¼ŒJohannes Weinerï¼ŒChris Petersenï¼ŒShobhit Kanaujiaï¼ŒPrakash Chauhan â€“ Meta Inc.</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><ul><li>CXL [7] æ˜¯ä¸€ç§åŸºäº PCI Expressï¼ˆPCIeï¼‰æ¥å£çš„å¼€æ”¾å¼ã€ä¸šç•Œæ”¯æŒçš„äº’è¿ã€‚<br>å®ƒæ”¯æŒä¸»æœºå¤„ç†å™¨å’Œè®¾å¤‡ï¼ˆä¾‹å¦‚åŠ é€Ÿå™¨ã€å†…å­˜ç¼“å†²åŒºã€æ™ºèƒ½ I/O è®¾å¤‡ç­‰ï¼‰ä¹‹é—´çš„é«˜é€Ÿã€ä½å»¶è¿Ÿé€šä¿¡ã€‚</li><li>CXL åœ¨åŒä¸€ç‰©ç†åœ°å€ç©ºé—´ä¸­æä¾›å­—èŠ‚å¯å¯»å€å†…å­˜ï¼Œå¹¶å…è®¸ä½¿ç”¨æ ‡å‡†å†…å­˜åˆ†é… API è¿›è¡Œé€æ˜å†…å­˜åˆ†é…ã€‚</li><li>CXL-Memory è®¿é—®å»¶è¿Ÿä¹Ÿä¸ NUMA è®¿é—®å»¶è¿Ÿç±»ä¼¼ã€‚</li></ul><p>è¿™ç¯‡æ–‡ç« å°†ç›´æ¥é™„åŠ åˆ° CPU çš„å†…å­˜ç§°ä¸ºæœ¬åœ°å†…å­˜ï¼Œå°† CXL é™„åŠ å†…å­˜ç§°ä¸ºCXL-å†…å­˜ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/5aac1cd90eef40299199fc6d08e7b1f0.png"></p><blockquote><p><strong>è¡¥å……ï¼š</strong>ç°åœ¨CXLåŒæ—¶æ”¯æŒå¤šç§å†…å­˜çš„åº”ç”¨æ¡ˆä¾‹éƒ½æ˜¯DRAMå’ŒHBMï¼ˆæ˜¯ä¸€ç§é«˜å¸¦å®½å†…å­˜ High Bandwidth Memoryï¼‰ã€‚HBMæ›´é€‚ç”¨äºå¯¹å¸¦å®½è¦æ±‚æé«˜çš„åœºæ™¯,å¦‚é«˜ç«¯GPUã€AIåŠ é€Ÿå¡ç­‰ã€‚HBMå•ç‰‡å®¹é‡è¾ƒå°(4-16GB),ä½†å¸¦å®½å·¨å¤§(è¶…è¿‡500GB/s)ã€‚</p></blockquote><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>ç°å®å®è·µä¸­é¢å¯¹çš„é—®é¢˜ï¼š<br><strong>æ•°æ®ä¸­å¿ƒåº”ç”¨ç¨‹åºçš„å†…å­˜éœ€æ±‚å¢åŠ </strong>åœ¨METAå…¬å¸ä¸­æ¯ä¸€ä»£ç¡¬ä»¶å†…å­˜æ¶ˆè€—çš„èƒ½æºå’Œæ€»èŠ±è´¹å æ¯”éƒ½åœ¨ä¸åœå¢é•¿ã€‚</p><p><strong>åŒç±»æœåŠ¡å™¨è®¾è®¡ä¸­çš„æ‰©å±•æŒ‘æˆ˜</strong>å†…å­˜æ§åˆ¶å™¨ä»…æ”¯æŒå•ä»£å†…å­˜æŠ€æœ¯ï¼Œè¿™é™åˆ¶äº†ä¸åŒæŠ€æœ¯çš„æ··åˆæ­é…ï¼Œå…·æœ‰ä¸åŒçš„æ¯ GB æˆæœ¬å’Œå¸¦å®½ä¸å»¶è¿Ÿé…ç½®ã€‚å¤§å†…å­˜å®¹é‡éƒ½æ˜¯2çš„å‡ æ¬¡æ–¹ã€‚é™åˆ¶äº†ç»†ç²’åº¦ï¼›æ¯ä¸€ä»£æœåŠ¡å™¨çš„å¸¦å®½å’Œå®¹é‡éƒ½æœ‰é™åˆ¶ã€‚å›¾4</p><p><strong>æ•°æ®ä¸­å¿ƒåº”ç”¨ç¨‹åºçš„è½»é‡çº§è¡¨å¾</strong>ç°æœ‰çš„å·¥å…·ä¼šå¯¼è‡´è¾ƒé«˜çš„ CPU å¼€é”€ï¼ˆæ¯ä¸ªæ ¸å¿ƒè¶…è¿‡ 15%ï¼‰ï¼Œå¹¶ä¸”é€šå¸¸ä¼šå‡æ…¢åº”ç”¨ç¨‹åºçš„é€Ÿåº¦ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/149d075453ee4bfb9e5e3e7214a92947.png"></p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><h3 id="5-1é‡‡æ ·æ•°æ®å·¥å…·"><a href="#5-1é‡‡æ ·æ•°æ®å·¥å…·" class="headerlink" title="5.1é‡‡æ ·æ•°æ®å·¥å…·"></a>5.1é‡‡æ ·æ•°æ®å·¥å…·</h3><p>Chameleon çš„ä¸»è¦ç”¨ä¾‹æ˜¯äº†è§£åº”ç”¨ç¨‹åºçš„å†…å­˜è®¿é—®è¡Œä¸ºï¼Œå³åº”ç”¨ç¨‹åºå†…å­˜çš„å“ªä¸€éƒ¨åˆ†ä¿æŒçƒ­-æ¸©-å†·çŠ¶æ€ã€é¡µé¢åœ¨ç‰¹å®šæ¸©åº¦å±‚ä¸Šå­˜æ´»å¤šé•¿æ—¶é—´ã€è®¿é—®å®ƒä»¬çš„é¢‘ç‡ç­‰ç­‰ã€‚é•¿æœŸå†…å­˜ã€‚</p><p>æ”¶é›†å™¨åšä¸¤ç±»é‡‡æ ·ï¼Œæ”¾å…¥hashè¡¨ï¼Œå®šæ—¶å”¤é†’ã€‚<br>æ”¶é›†å™¨å”¤é†’å·¥ä½œçº¿ç¨‹ä»¥å¤„ç†å½“å‰å“ˆå¸Œè¡¨ä¸­çš„æ•°æ®ï¼Œå¹¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå“ˆå¸Œè¡¨ä»¥å­˜å‚¨ä¸‹ä¸€ä¸ªé—´éš”çš„é‡‡æ ·æ•°æ®<br>å·¥ä½œå™¨å¤„ç†å“ˆå¸Œè¡¨é‡Œçš„æ•°æ®ï¼Œç»Ÿè®¡æ¯ä¸ªé¡µé¢çš„ä½å›¾å¤§å°æ˜¯64ä½ï¼Œç”ŸæˆæŠ¥å‘Šåä¼‘çœ ã€‚</p><blockquote><p>loadæ˜¯ä»å†…å­˜è¯»å–æ•°æ®åˆ°å¤„ç†å™¨çš„å¯„å­˜å™¨ä¸­çš„æŒ‡ä»¤,è€Œstoreåˆ™æ˜¯å°†å¯„å­˜å™¨ä¸­çš„æ•°æ®å†™å…¥å†…å­˜çš„æŒ‡ä»¤ã€‚ä¸¤è€…éƒ½æ˜¯ä¸å†…å­˜æ‰“äº¤é“çš„æŒ‡ä»¤,ä½†æ–¹å‘ä¸åŒ,loadæ˜¯å†…å­˜åˆ°å¯„å­˜å™¨,è€Œstoreæ˜¯å¯„å­˜å™¨åˆ°å†…å­˜ã€‚</p></blockquote><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/5c874a20c38e4191b939a5ef0ca59536.png"></p><p>æˆ‘ä»¬ä½¿ç”¨ Chameleon æ¥åˆ†ææˆ‘ä»¬ç”Ÿäº§ä¸­è¿è¡Œçš„è·¨ä¸åŒæœåŠ¡åŸŸçš„å„ç§å¤§å‹å†…å­˜ç»‘å®šåº”ç”¨ç¨‹åºï¼Œå¹¶è¿›è¡Œä»¥ä¸‹è§‚å¯Ÿã€‚ </p><ol><li>è®¿é—®çš„å†…å­˜çš„å¾ˆå¤§ä¸€éƒ¨åˆ†åœ¨å‡ åˆ†é’Ÿå†…ä¿æŒå†·çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶å¸è½½åˆ°æ…¢é€Ÿå±‚å†…å­˜ï¼Œè€Œä¸ä¼šå¯¹æ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“ã€‚ </li><li>å¤§éƒ¨åˆ†åŒ¿åå†…å­˜ï¼ˆä¸ºç¨‹åºçš„å †æ ˆã€å †å’Œ/æˆ– mmap è°ƒç”¨åˆ›å»ºï¼‰å¾€å¾€æ›´çƒ­ï¼Œè€Œå¤§éƒ¨åˆ†æ–‡ä»¶æ”¯æŒçš„å†…å­˜å¾€å¾€ç›¸å¯¹æ›´å†·ã€‚</li><li>é¡µé¢è®¿é—®æ¨¡å¼åœ¨æœ‰æ„ä¹‰çš„æŒç»­æ—¶é—´ï¼ˆåˆ†é’Ÿåˆ°å°æ—¶ï¼‰å†…ä¿æŒç›¸å¯¹ç¨³å®šã€‚è¿™è¶³ä»¥è§‚å¯Ÿåº”ç”¨ç¨‹åºè¡Œä¸ºå¹¶åœ¨å†…æ ¸ç©ºé—´ä¸­åšå‡ºé¡µé¢æ”¾ç½®å†³ç­–ã€‚ </li><li>å·¥ä½œè´Ÿè½½å¯¹ä¸åŒé¡µé¢ç±»å‹ï¼ˆæ–‡ä»¶å’ŒåŒ¿åé¡µé¢ï¼‰å…·æœ‰ä¸åŒç¨‹åº¦çš„æ•æ„Ÿåº¦ï¼Œå¹¶ä¸”éšç€æ—¶é—´çš„æ¨ç§»è€Œå˜åŒ–ã€‚</li><li>å†·é¡µé‡æ–°è®¿é—®æ—¶é—´å› å·¥ä½œè´Ÿè½½è€Œå¼‚ã€‚åˆ†å±‚å†…å­˜ç³»ç»Ÿä¸Šçš„é¡µé¢æ”¾ç½®åº”è¯¥æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œå¹¶ä¸»åŠ¨å°†çƒ­é¡µç§»åŠ¨åˆ°è¾ƒä½çš„å†…å­˜èŠ‚ç‚¹ï¼Œä»¥é¿å…é«˜å†…å­˜è®¿é—®å»¶è¿Ÿã€‚äºWebè€Œè¨€ï¼Œå‡ ä¹80%çš„é¡µé¢ä¼šåœ¨ 10 åˆ†é’Ÿå†…è¢«é‡æ–°è®¿é—®ã€‚</li></ol><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/ec7f0938b1844787b423dbe944b29744.png"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/927aa0606137423b80bc79092b10fdca.png"></p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/f7c7b158461d442ea37c3eb4d5b9d7f9.png"></p><h3 id="5-2æ¶æ„è®¾è®¡"><a href="#5-2æ¶æ„è®¾è®¡" class="headerlink" title="5.2æ¶æ„è®¾è®¡"></a>5.2æ¶æ„è®¾è®¡</h3><p>TPP å°†â€œè¾ƒçƒ­â€é¡µé¢æ”¾ç½®åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œå¹¶å°†â€œè¾ƒå†·â€é¡µé¢ç§»åŠ¨åˆ° CXL å†…å­˜ä¸­ã€‚<br>TPP çš„è®¾è®¡ç©ºé—´å¯åˆ†ä¸ºå››ä¸ªä¸»è¦åŒºåŸŸï¼š</p><ul><li>(a) è½»é‡çº§é™çº§åˆ° CXL-Memoryï¼Œ</li><li>(b) è§£è€¦åˆ†é…å’Œå›æ”¶è·¯å¾„ï¼Œ</li><li>(c) çƒ­é¡µå‡çº§åˆ°æœ¬åœ°èŠ‚ç‚¹ï¼Œ</li><li>(d) é¡µé¢ç±»å‹æ„ŸçŸ¥å†…å­˜åˆ†é…ã€‚</li></ul><p> ä¸€èˆ¬æ¥æ‰€NUMAç³»ç»Ÿçš„å›æ”¶é¡ºåºæ˜¯ï¼šé¦–å…ˆå›æ”¶æœ¬åœ°èŠ‚ç‚¹ä¸Šä¸æ´»è·ƒçš„é¡µé¢ï¼›ç„¶åå›æ”¶è¿œç¨‹èŠ‚ç‚¹ä¸Šä¸æ´»è·ƒçš„é¡µé¢ï¼›å¦‚æœè¿˜ä¸å¤Ÿ,æ‰è€ƒè™‘å›æ”¶æœ¬åœ°èŠ‚ç‚¹ä¸Šæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é¡µé¢ã€‚æ‰€ä»¥åœ¨å›¾çš„ä¸Šé¢â‘ ä¼šå°†æœ¬åœ°å›æ”¶å€™é€‰é¡µé¢è¿ç§»åˆ°XCLèŠ‚ç‚¹çš„é™çº§åˆ—è¡¨ä¸­ï¼Œé™¤éæœ¬åœ°èŠ‚ç‚¹çš„å®¹é‡å°äºå·¥ä½œé›†å¤§å°çš„çƒ­éƒ¨åˆ†ï¼Œå¦åˆ™åœ¨å›æ”¶æœŸé—´çƒ­é¡µé¢è¿ç§»åˆ° CXL èŠ‚ç‚¹çš„æœºä¼šéå¸¸ä½ã€‚å¦‚æœé™çº§æœŸé—´çš„è¿ç§»å¤±è´¥ï¼ˆä¾‹å¦‚ï¼Œç”±äº CXL èŠ‚ç‚¹ä¸Šçš„å†…å­˜ä¸è¶³ï¼‰ï¼Œæˆ‘ä»¬å°†å›é€€åˆ°è¯¥å¤±è´¥é¡µé¢çš„é»˜è®¤å›æ”¶æœºåˆ¶ã€‚</p><p> Linuxä¸ºèŠ‚ç‚¹å†…çš„æ¯ä¸ªå†…å­˜åŒºåŸŸç»´æŠ¤ä¸‰ä¸ªwatermakesï¼ˆæœ€å°ã€ä½ã€é«˜ï¼‰ã€‚å¦‚æœèŠ‚ç‚¹çš„ç©ºé—²é¡µé¢æ€»æ•°ä½äºlow_watermarkï¼ŒLinuxä¼šè®¤ä¸ºè¯¥èŠ‚ç‚¹é¢ä¸´å†…å­˜å‹åŠ›å¹¶å¯åŠ¨è¯¥èŠ‚ç‚¹çš„é¡µé¢å›æ”¶ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒTPPå°†å®ƒä»¬é™çº§ä¸ºCXLèŠ‚ç‚¹ã€‚å¯¹æœ¬åœ°èŠ‚ç‚¹çš„æ–°åˆ†é…å°†åœæ­¢ï¼Œç›´åˆ°å›æ”¶å™¨é‡Šæ”¾è¶³å¤Ÿçš„å†…å­˜ä»¥æ»¡è¶³high_watermarkã€‚<span class="label info">ç”±äºåˆ†é…ç‡è¾ƒé«˜ï¼Œå›æ”¶å¯èƒ½æ— æ³•è·Ÿä¸Š</span>ï¼Œæœ¬åœ°å†…å­˜åˆ†é…é¢‘ç¹åœæ­¢ï¼Œ<span class="label info">æ›´å¤šé¡µé¢æœ€ç»ˆå‡ºç°åœ¨CXLèŠ‚ç‚¹ä¸­</span>ï¼Œæœ€ç»ˆé™ä½åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚æ‰€ä»¥ç°åœ¨å°†å›æ”¶å’Œåˆ†é…åŒ–ä¸ºä¸åŒçš„é—¨æ§›â‘¡ï¼Œå›æ”¶å’Œé©±é€ä¼šææ—©å‘ç”Ÿï¼Œè€Œç¦æ­¢é¡µé¢åˆ†é…ä¼šåœ¨å†…å­˜é¥±å’Œåº¦æ›´é«˜ä¸€æ­¥çš„æ—¶å€™ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d51196b572b849d48550379551aa0801.png"></p><p>NUMAç³»ç»Ÿä¸­CPUè®¿é—®å¦ä¸€èŠ‚ç‚¹é¡µé¢æ—¶,ç”Ÿæˆç¼ºé¡µå¼‚å¸¸æé†’å†…æ ¸è¿›è¡Œé¡µé¢è¿ç§»ã€‚ä¸å¸¸è®¿é—®çš„é¡µé¢äº§ç”Ÿçš„å‡çº§æµé‡å¾ˆå®¹æ˜“å¡«æ»¡æœ¬åœ°èŠ‚ç‚¹çš„ç©ºé—²ç©ºé—´ï¼Œå¹¶ä¸ºCXLèŠ‚ç‚¹äº§ç”Ÿæ›´é«˜çš„é™çº§æµé‡ã€‚äºæ˜¯é€šè¿‡é¡µé¢åœ¨LRUåˆ—è¡¨ä¸­çš„ä½ç½®æ¥æ£€æŸ¥é¡µé¢çš„å¹´é¾„ã€‚å¦‚æœæ•…éšœé¡µé¢å¤„äºéæ´»åŠ¨LRUçŠ¶æ€ï¼Œæˆ‘ä»¬ä¸ä¼šç«‹å³è€ƒè™‘è¯¥é¡µé¢è¿›è¡Œå‡çº§ï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ä¸ç»å¸¸è®¿é—®çš„é¡µé¢ã€‚ä»…å½“åœ¨æ´»åŠ¨ LRU ä¸­æ‰¾åˆ°æ•…éšœé¡µé¢ï¼ˆå›¾13ä¸­çš„â‘ ï¼‰æ—¶ï¼Œæˆ‘ä»¬æ‰å°†å…¶è§†ä¸ºå‡çº§å€™é€‰é¡µé¢ã€‚è¿™å¤§å¤§å‡å°‘äº†å‡çº§æµé‡ã€‚</p><p>ç„¶è€Œï¼Œæ“ä½œç³»ç»Ÿä½¿ç”¨LRUåˆ—è¡¨è¿›è¡Œå›æ”¶ã€‚å¦‚æœå†…å­˜èŠ‚ç‚¹æ²¡æœ‰å‹åŠ›å¹¶ä¸”å›æ”¶æ²¡æœ‰å¯åŠ¨ï¼Œåˆ™éæ´»åŠ¨LRUåˆ—è¡¨ä¸­çš„é¡µé¢ä¸ä¼šè‡ªåŠ¨ç§»åŠ¨åˆ°æ´»åŠ¨LRUåˆ—è¡¨ã€‚ç”±äºCXLèŠ‚ç‚¹å¯èƒ½å¹¶ä¸æ€»æ˜¯å¤„äºå‹åŠ›ä¹‹ä¸‹ï¼Œå› æ­¤ç»å¸¸å¯ä»¥åœ¨éæ´»åŠ¨LRUåˆ—è¡¨ä¸­æ‰¾åˆ°ç¼ºé¡µçš„é¡µé¢ï¼Œåˆä¼šæ²¡æ³•å‘ä¸Šè¿ç§»ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¯å½“æˆ‘ä»¬åœ¨éæ´»åŠ¨LRUåˆ—è¡¨ä¸­å‘ç°ç¼ºé¡µå¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šå°†è¯¥é¡µé¢æ ‡è®°ä¸ºå·²è®¿é—®ï¼Œå¹¶ç«‹å³å°†å…¶ç§»è‡³æ´»åŠ¨LRUåˆ—è¡¨ï¼ˆå›¾13ä¸­çš„â‘¡ï¼‰ã€‚å¦‚æœåœ¨ä¸‹ä¸€æ¬¡NUMAæç¤ºç¼ºé¡µå¼‚å¸¸ï¼Œåˆ™å®ƒå°†å¤„äºæ´»åŠ¨LRUä¸­ï¼Œå¹¶æå‡åˆ°æœ¬åœ°èŠ‚ç‚¹ï¼ˆå›¾13ä¸­çš„â‘¢ï¼‰ã€‚</p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>å› ä¸ºå·¥ä½œè´Ÿè½½å°±è¿™äº›ç‰¹æ€§ï¼Œé‚£å°±ç›´æ¥å¯¹ç—‡ä¸‹è¯ï¼Œæ•ˆæœéƒ½æŒºæ˜æ˜¾çš„ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>ä½†æ˜¯æ¢äº†workloadå°±æ²¡è¿™ä¸ªæ•ˆæœäº†ã€‚æŒ‰ç…§è¿™ç§æ–¹å¼ï¼Œæ¯å®¶éƒ½å¾—è‡ªå·±å»è®¾è®¡å•°ã€‚</p><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>æ˜¯æ ¹æ®å·¥ä½œè´Ÿè½½æ¥è®¾è®¡æ¶æ„çš„ï¼Œå…³æ³¨çš„é—®é¢˜ç‚¹æ¯”è¾ƒå°ï¼Œä¹Ÿå°±å®¹æ˜“åšåˆ°å¾ˆç»†è‡´å‡ºè‰²å§ã€‚</p><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><p>ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼Œè™½ç„¶å¤§å®¶å¯èƒ½è§‚å¯Ÿå€¼ä¸åŒï¼Œä½†æ˜¯æœ€åç³»ç»Ÿè®¾è®¡éƒ½æ¯”è¾ƒåƒï¼Œå¥½åƒè¿™ä¸¤éƒ¨åˆ†å¯ä»¥åˆ†è£‚ä¸€æ ·ã€‚<br>é‚£ä¸ªChameleonå·¥å…·ï¼Œè¯´æ˜¯å¼€æºä½†æ˜¯å¹¶æ²¡æœ‰ï¼Œä¹‹åå¯ä»¥å†å»çœ‹çœ‹ã€‚<br>TMO: Transparent memory offloading in datacenters. In ASPLOS, 2022.å¯ä»¥çœ‹çœ‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Aware Data Structure Refinement and Placement for Heterogeneous Memory Systems</title>
      <link href="/2023/08/18/Aware-Data-Structure-Refinement-and-Placement-for-Heterogeneous-Memory-Systems/"/>
      <url>/2023/08/18/Aware-Data-Structure-Refinement-and-Placement-for-Heterogeneous-Memory-Systems/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><p><strong>æ–‡ç« æ¥è‡ª23å¹´7æœˆTechRxiv</strong><br>Performance, Energy and NVM Lifetime-Aware Data Structure Refinement and Placement for Heterogeneous Memory Systems</p></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Manolis Katsaragakis,å¾®å¤„ç†å™¨å’Œæ•°å­—ç³»ç»Ÿå®éªŒå®¤å›½ç«‹é›…å…¸ç†å·¥å¤§å­¦(NTUA)ç”µæ°”ä¸è®¡ç®—æœºå·¥ç¨‹å­¦é™¢,é²æ±¶å¤§å­¦(KU Leuven)æ¯”åˆ©æ—¶</li><li>Christos Baloukas, Lazaros Papadopoulos, å¾®å¤„ç†å™¨å’Œæ•°å­—ç³»ç»Ÿå®éªŒå®¤å›½ç«‹é›…å…¸ç†å·¥å¤§å­¦(NTUA)ç”µæ°”ä¸è®¡ç®—æœºå·¥ç¨‹å­¦é™¢</li><li>Francky Catthoor,é²æ±¶å¤§å­¦å¾®ç”µå­ç ”ç©¶ä¸­å¿ƒ</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>ä¸ºäº†æœ‰æ•ˆåˆ©ç”¨ DRAM/NVM å¼‚æ„å†…å­˜ç³»ç»Ÿï¼Œå¤šå¹´æ¥å·²ç»æå‡ºäº†å‡ ç§æ•°æ®æ”¾ç½®ç®—æ³• [15]ã€[16]ã€‚å°½ç®¡æ•°æ®æ”¾ç½®ç®—æ³•é€šå¸¸å¾ˆå¤æ‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿæœ‰æ•ˆåœ°åˆ©ç”¨æ­£åœ¨æ‰§è¡Œçš„åº”ç”¨ç¨‹åºçš„å¤æ‚å†…å­˜å±‚æ¬¡ç»“æ„ï¼Œä½†å®ƒä»¬çš„ç»“æœé€šå¸¸å—åˆ°ä»¥ä¸‹äº‹å®çš„é™åˆ¶ï¼š<span class="label info">åŸå§‹åº”ç”¨ç¨‹åºé€šå¸¸æ˜¯ä¸º DRAM è€Œä¸æ˜¯ä¸ºå¼‚æ„å†…å­˜è®¾è®¡çš„</span></p><p>ä½œè€…é€šè¿‡ä¸€äº›å®éªŒå±•ç¤ºäº†æ•°æ®ç»„ç»‡æ”¹è¿›çš„åº”ç”¨ç¨‹åºçº§æ–¹æ³•å¯¹å¼‚æ„ DRAM/NVM ç³»ç»Ÿä¸Šæ•°æ®æ”¾ç½®ç®—æ³•ç»“æœçš„å½±å“ï¼ˆä½œä¸ºæ•´ä¸ªè®ºæ–‡çš„åŠ¨æœºï¼‰ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªæ–°çš„æ¦‚å¿µï¼ˆè¿™ä¸¤ä¸ªæ¦‚å¿µä¹Ÿå¯¹åç»­è®¾è®¡æœ‰å¾ˆå¤§å½±å“ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ¦‚å¿µå¹¶ä¸å¸¸è§ï¼‰ï¼š</p><ul><li><span class="label danger">åŠ¨æ€æ•°æ®ç±»å‹ç»†åŒ–æ–¹æ³• Dynamic Data Type Refinement methodologyï¼ˆDDTRï¼‰</span>ï¼ˆD. A. Alonso, S. Mamagkakis, C. Poucet etc. Dynamic memory management for embedded systems. Springer, 2015ï¼‰</li><li><span class="label danger">å¸•ç´¯æ‰˜æœ€ä¼˜ Pareto Optimal</span></li></ul><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>å¼‚æ„å†…å­˜ä¸­å¯ä»¥ä»æ•°æ®ç»„ç»‡çš„è§’åº¦æ”¹è¿›æ•°æ®æ”¾ç½®ï¼Œæ‰€æå‡ºçš„æ–¹æ³•æ—¨åœ¨æ»¡è¶³ä¸‰ä¸ªä¸»è¦ç›®æ ‡ï¼š<br>(i) å±•ç¤ºé€šè¿‡åº”ç”¨ç¨‹åºçº§ä¼˜åŒ–å®ç°çš„æ•°æ®æ”¾ç½®ç®—æ³•çš„æ”¹è¿›ç»“æœã€‚<br>(ii) åŸºäºå¤šä¸ªç›®æ ‡ï¼ˆæ€§èƒ½ã€èƒ½è€—ã€å¯¹ NVM å¯¿å‘½çš„å½±å“ï¼‰è¯„ä¼°å¸ƒå±€è§£å†³æ–¹æ¡ˆã€‚<br>(iii) æä¾›å¯ç”¨æ€§ã€å¯æ‰©å±•æ€§å’Œå¯æ‰©å±•æ€§ç‰¹å¾ï¼ˆä¾‹å¦‚ï¼Œå³ä½¿å¯¹äºç›¸å¯¹è¾ƒå¤§çš„è®¾è®¡ç©ºé—´ï¼Œä¹Ÿæœ‰åˆç†çš„æ¢ç´¢æ—¶é—´ï¼Œå¹¶æ”¯æŒå„ç§åº”ç”¨é¢†åŸŸã€æ•°æ®æ”¾ç½®ç®—æ³•å’ŒçœŸå®æˆ–æ¨¡æ‹Ÿçš„ NVM æŠ€æœ¯ï¼‰ã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><ul><li>å‡ ç§æ•°æ®æ”¾ç½®ç®—æ³• [15]ã€[16]</li><li>åº”ç”¨çº§æ•°æ®ä¼˜åŒ–æ–¹æ³•[18]ã€[19]</li><li>åº“æ”¯æŒ [13]ã€[17] </li><li>æ ¹æ®å¸ƒå±€ç²’åº¦çº§åˆ«è¿›è¡Œåˆ†ç±»ï¼šæ•°æ®ç»“æ„ã€å†…å­˜å¯¹è±¡æˆ–å†…å­˜é¡µ [23] [15] [24] [25][23] çš„ä½œè€…æå‡ºäº†ä¸€ç§åœ¨çº¿é…ç½®æ–‡ä»¶å¼•å¯¼çš„æ•°æ®åˆ†å±‚è§£å†³æ–¹æ¡ˆï¼Œæ¶‰åŠå¼‚æ„å†…å­˜ç³»ç»Ÿçš„é¡µé¢ç²’åº¦æ”¾ç½®ï¼Œæ—¨åœ¨æé«˜ HPC åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚å…¶ä»–æŒ‡ç¤ºæ€§æ–¹æ³•åŒ…æ‹¬é™æ€ä»£ç æ£€æµ‹å·¥å…·ï¼Œç”¨äºè‡ªåŠ¨æ‰§è¡Œå†…å­˜å¯¹è±¡æ”¾ç½®ä»¥å®ç°æ€§èƒ½å’Œèƒ½æºä¼˜åŒ–[15]ã€‚åœ¨æ•°æ®ç»“æ„æ”¾ç½®ç²’åº¦ä¸Šï¼Œ[24]ä¸­æå‡ºäº†ç¼“å­˜å’Œéç¼“å­˜ NVM çš„å†™æ„ŸçŸ¥æ•°æ®ç»“æ„æ”¾ç½®ã€‚ [25] ä¸­æå‡ºäº†åŸºäºäººå·¥æ™ºèƒ½çš„é¡µé¢ç²’åº¦æ•°æ®æ”¾ç½®ã€‚</li><li>å¼‚æ„ DRAM/NVM ç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºåŸŸç‰¹å®šå¸ƒå±€ï¼šæœ€è¿‘è¿˜ç ”ç©¶äº†åº”ç”¨ç¨‹åºåŸŸç‰¹å®šå¸ƒå±€æ–¹æ³•ï¼Œç›®æ ‡æ˜¯ä¸é¢†åŸŸæ— å…³çš„å¸ƒå±€ç®—æ³•ç›¸æ¯”è·å¾—æ›´å¥½çš„ç»“æœã€‚è¿™äº›é¢†åŸŸåŒ…æ‹¬ä¸æ•°æ®åº“ç›¸å…³çš„å·¥ä½œè´Ÿè½½[26]ã€å¤§æ•°æ®åº”ç”¨ç¨‹åº[27]ã€[28]ã€åŸºäºå›¾çš„[29]ã€[30]ã€[31]å’ŒåŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„åº”ç”¨ç¨‹åº[32]ã€[33]ã€‚</li></ul><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/85597fd358cb4e0882741b4808f25738.png"></p><p>å›¾2æ˜¾ç¤ºäº†æ‰€æå‡ºçš„æ–¹æ³•çš„æ¦‚è¿°ã€‚è¯¥æ–¹æ³•çš„è¾“å…¥æ˜¯ç›®æ ‡åº”ç”¨ç¨‹åºçš„æºä»£ç ã€‚å®ƒç”±ä¸‰ä¸ªæ­¥éª¤ç»„æˆï¼š</p><ol><li><p><strong>æ•°æ®ç»„ç»‡çš„ä¼˜åŒ–</strong>ï¼Œæ­¤æ­¥éª¤çš„ä¸»è¦ç›®æ ‡æ˜¯æœ‰æ•ˆé€‰æ‹©åº”ç”¨ç¨‹åºçš„æ•°æ®ç»“æ„å®ç°ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘æ•°æ®è®¿é—®æ¬¡æ•°å’Œå†…å­˜å ç”¨ã€‚å®ç°æ–¹å¼æ˜¯æºä»£ç çš„åŸå§‹æ•°æ®ç»“æ„è¢«åº“çš„æ•°æ®ç»“æ„æ›¿æ¢ã€‚ï¼ˆä»…é™äºåŸºäºåˆ—è¡¨çš„æ•°æ®ç»“æ„å®ç°çš„ C++ æ ‡å‡†æ¨¡æ¿åº“ (STL) å…¼å®¹å˜ä½“ã€‚ï¼‰<span class="label default">è¿™ä¸€æ­¥ç”Ÿæˆä¸€ç»„å¸•ç´¯æ‰˜æœ€ä¼˜è§£</span>,æ¯ä¸€ä¸ªéƒ½å¯¹åº”äºæ­£åœ¨ä¼˜åŒ–çš„åº”ç”¨ç¨‹åºçš„æ•°æ®ç»“æ„å®ç°çš„ä¸åŒç»„åˆã€‚</p></li><li><p><strong>å†…å­˜å¯¹è±¡åˆ†æ</strong>ï¼ŒåŸºäºå†…å­˜è·Ÿè¸ªå’Œåˆ†æå·¥å…·ï¼Œ<span class="label default">åˆ†æä¸Šä¸€æ­¥æä¾›çš„åº”ç”¨ç¨‹åºçš„å¸•ç´¯æ‰˜æœ€ä¼˜ç‰ˆæœ¬</span>ã€‚é€šè¿‡å¹³å°æ„ŸçŸ¥é‡‡æ ·å’Œåˆ†æ (2b)ï¼Œæˆ‘ä»¬æ”¶é›†æ¯ä¸ªå¯¹è±¡çš„å†…å­˜è·Ÿè¸ªï¼ŒåŒ…æ‹¬ï¼šåŠ è½½å’Œå­˜å‚¨æ“ä½œã€å¯¹è±¡å¤§å°å’Œ LLC æœªå‘½ä¸­ã€‚è¿˜å¯ä»¥æ ¹æ®æ‰€é€‰æ•°æ®æ”¾ç½®ç®—æ³•çš„è¾“å…¥è¦æ±‚æ¥ç›‘è§†å…¶ä»–æŒ‡æ ‡ã€‚</p></li><li><p><strong>å¼‚æ„å†…å­˜ç³»ç»Ÿä¸Šçš„æ”¾ç½®å’Œè¯„ä¼°</strong>ï¼Œæ¨¡å‹æ¥æ”¶ï¼ˆiï¼‰æ¯ä¸ªå†…å­˜é¡µã€å¯¹è±¡æˆ–æ•°æ®ç»“æ„çš„åˆ†æä¿¡æ¯å’Œï¼ˆiiï¼‰å†…å­˜è§„æ ¼ä½œä¸ºè¾“å…¥ï¼Œä¾‹å¦‚è¯»/å†™å»¶è¿Ÿã€è¯»/å†™èƒ½è€—å’Œå†…å­˜å®¹é‡ï¼ˆ3bï¼‰ã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºç‰ˆæœ¬éƒ½æ ¹æ®æ‰€é€‰çš„æ•°æ®æ”¾ç½®ç®—æ³•éƒ¨ç½²åœ¨å¼‚æ„å†…å­˜ç³»ç»Ÿä¸Šï¼Œå¹¶æ‰§è¡Œã€‚ä¸ºäº†ç›‘æ§æ‰§è¡Œæ—¶é—´ã€èƒ½è€—å’ŒNVMå†™å…¥æ¬¡æ•°ï¼Œéœ€è¦å®æ—¶ç›‘æ§ï¼ˆ3eï¼‰ã€‚åº”ç”¨ç¨‹åºç‰ˆæœ¬åœ¨çœŸå®æˆ–æ¨¡æ‹Ÿçš„å¼‚æ„å­˜å‚¨å™¨ç³»ç»Ÿä¸Šæ”¾ç½®å’Œæ‰§è¡Œã€‚å¼€å‘äººå‘˜å¯ä»¥åœ¨æ€§èƒ½ã€èƒ½è€—å’Œ NVM å†™å…¥è®¿é—®æ¬¡æ•°ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼Œå¹¶é€‰æ‹©æ»¡è¶³è®¾è®¡çº¦æŸçš„å¸•ç´¯æ‰˜æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚</p></li></ol><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>æ‰€æå‡ºçš„æ–¹æ³•æ ¹æ®ä»¥ä¸‹æ ‡å‡†è¿›è¡Œè¯„ä¼°ï¼š<br>â— DDTR ç­‰é«˜çº§æ•°æ®ç»„ç»‡ä¼˜åŒ–æ–¹æ³•å¯¹æ•°æ®æ”¾ç½®ç»“æœçš„å½±å“ï¼ŒåŒ…æ‹¬æ€§èƒ½ã€èƒ½è€—å’Œå¯¹ NVM å¯¿å‘½çš„å½±å“ã€‚<br>â— è¯¥æ–¹æ³•å¯ä»¥åœ¨å¤šå¤§ç¨‹åº¦ä¸Šæœ‰æ•ˆåœ°é›†æˆå…·æœ‰ä¸åŒä¼˜åŒ–ç›®æ ‡çš„å„ç§æ•°æ®æ”¾ç½®ç®—æ³•ä»¥åŠå„ç§å†…å­˜æŠ€æœ¯ï¼ˆæ¨¡æ‹Ÿçš„æˆ–çœŸå®çš„ç¡¬ä»¶ï¼‰ã€‚<br>â— å½“åº”ç”¨äºå…·æœ‰ç›¸å¯¹å¤§é‡æ•°æ®ç»“æ„çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œè¯¥æ–¹æ³•åœ¨æ¢ç´¢æ—¶é—´æ–¹é¢çš„å¯æ‰©å±•æ€§ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><ul><li>ç›¸å½“äºéœ€è¦äººå·¥å¹²é¢„å»åšè¿™ä¸ªä¼˜åŒ–ã€‚</li><li>è€Œä¸”ä¼˜åŒ–è¿‡ç¨‹ä¾èµ–å¸•ç´¯æ‰˜ï¼ˆæ¥è‡ªè´¢ç»é¢†åŸŸï¼‰æœ€ä¼˜å’ŒDDTRï¼ˆ15å¹´ä¸€ç¯‡è®ºæ–‡ï¼‰ï¼Œè¿™æ˜¯ä»¥å‰æ²¡æœ‰è¿‡çš„åº”è¯¥ï¼Œé‚£ä¹ˆåˆ°åº•æœ‰å¤šå¯é å‘¢ï¼Ÿå®¡ç¨¿æ–¹å¯¹è¿™äº›æ€åº¦å’‹æ ·å‘¢ï¼Ÿ</li><li>è¯„ä¼°æ–¹é¢ï¼Œæ²¡æœ‰å’Œå…¶ä»–çš„å·¥ä½œæ¯”è¾ƒï¼Œä¹Ÿçœ‹ä¸å‡ºä»€ä¹ˆä¼˜åŠ¿emmmã€‚</li></ul><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>æ²¡æœ‰ä»»ä½•ç›¸å…³å·¥ä½œç ”ç©¶åº”ç”¨çº§æ•°æ®ä¼˜åŒ–å’Œå¼‚æ„å†…å­˜ç³»ç»Ÿä¸Šçš„æ•°æ®æ”¾ç½®ä¹‹é—´çš„ç›¸äº’ä½œç”¨ï¼Œä»¥æé«˜æ€§èƒ½ã€èƒ½è€—å’Œå¯¹ NVM å¯¿å‘½ç»“æœçš„å½±å“ã€‚æå‡ºäº†ä¸€ç§å†…å­˜ç®¡ç†æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»“åˆäº†åŠ¨æ€æ•°æ®ç»“æ„ç»†åŒ–æ­¥éª¤ä»¥åŠå¼‚æ„å†…å­˜ç³»ç»Ÿä¸Šçš„æ”¾ç½®ç®—æ³•ã€‚</p><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><ul><li>æœ€å¼€å§‹å¯¹ç¨‹åºæ•°æ®ç»„ç»‡ä¼˜åŒ–åº”è¯¥æ˜¯ç¦»çº¿å®Œæˆçš„ï¼Œ<a href="https://github.com/mkatsa/DDTR-DRAM-NVM">å¯èƒ½å¯ä»¥ä½œä¸ºå‚è€ƒ</a>ã€‚</li><li>å¯ä»¥è€ƒè™‘çš„workloadï¼šä» Shark ML åº“ [42] å’Œ Chrono ç‰©ç†å¼•æ“ [43] ä¸­é€‰æ‹©äº†äº”ä¸ªä»£è¡¨æ€§åº”ç”¨ç¨‹åºã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> Rxiv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>P2Cache An Application-Directed Page Cache for Improving Performance of Data-Intensive Applications</title>
      <link href="/2023/08/17/P2Cache-An-Application-Directed-Page-Cache-for-Improving-Performance-of-Data-Intensive-Applications/"/>
      <url>/2023/08/17/P2Cache-An-Application-Directed-Page-Cache-for-Improving-Performance-of-Data-Intensive-Applications/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li><strong>æ–‡ç« æ¥è‡ªHotStorage 23</strong> </li><li>P2Cache:An Application-Directed Page Cache for Improving Performance of Data-Intensive Applications</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Dusol Lee, Inhyuk Choi, Chanyoung Lee, Jihong Kim, é¦–å°”å¤§å­¦Seoul National University</li><li>Sungjin Lee, å¤§é‚±åº†åŒ—ç§‘å­¦æŠ€æœ¯é™¢DGIST</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p><span class="label info">å¤§å¤šæ•°æ“ä½œç³»ç»Ÿåœ¨ä¸»æœºDRAMå†…å­˜ä¸­ä½¿ç”¨é¡µé¢ç¼“å­˜ï¼Œä»¥åˆ©ç”¨I/Oè®¿é—®çš„å±€éƒ¨æ€§ã€‚</span>ä½†é¡µé¢ç¼“å­˜çš„é«˜é€Ÿç¼“å­˜ç®¡ç†ç­–ç•¥å¯èƒ½ä¸åº”ç”¨ç¨‹åºçš„ç‰¹å®šI/Oç‰¹å¾ä¸å¤ªåŒ¹é…ã€‚å¦‚æœåº”ç”¨<span class="label info">ç¨‹åºéšæœºè®¿é—®I/Oåœ°å€ç©ºé—´ï¼Œåˆ™é¡µé¢ç¼“å­˜ä½¿ç”¨çš„æ ‡å‡†è¯»å–ç­–ç•¥å¯èƒ½æ— æ•ˆã€‚</span></p><p>ç°æœ‰ç¼“å­˜ç­–ç•¥çš„å±€é™æ€§â€”â€”è¯„ä¼°ä¸‰ç§å¸¸è§æŠ€æœ¯ï¼š</p><h3 id="2-1æ“ä½œç³»ç»Ÿçº§ç¼“å­˜"><a href="#2-1æ“ä½œç³»ç»Ÿçº§ç¼“å­˜" class="headerlink" title="2.1æ“ä½œç³»ç»Ÿçº§ç¼“å­˜"></a>2.1æ“ä½œç³»ç»Ÿçº§ç¼“å­˜</h3><p>é‡‡ç”¨ LRU æ›¿æ¢ç­–ç•¥ä¸é¢„è¯»ç®—æ³•ç›¸ç»“åˆï¼Œå¦‚æœåº”ç”¨ç¨‹åºå…·æœ‰ä¸­ç­‰å±€éƒ¨æ€§ï¼Œé€šå¸¸å¯ä»¥å®ç°è¾ƒé«˜çš„å‘½ä¸­ç‡ [11]ã€‚ç°æœ‰çš„æ•°æ®å¯†é›†å‹åº”ç”¨ç¨‹åºé€šè¿‡<span class="label info">é«˜åº¦å®šåˆ¶çš„ç®—æ³•å¤„ç†å¤§é‡æ•°æ®</span>ï¼Œä»è€Œå¯¼è‡´å¤æ‚çš„ I/O æ¨¡å¼ã€‚ä¸å¹¸çš„æ˜¯ï¼Œç”±äºå…¶é€šç”¨è®¾è®¡ï¼Œæ“ä½œç³»ç»Ÿçº§é¡µé¢ç¼“å­˜é€šå¸¸<span class="label info">æ— æ³•æ•è·å„ä¸ªåº”ç”¨ç¨‹åºçš„ç‹¬ç‰¹è¡Œä¸º</span>ï¼Œä»è€Œå³ä½¿å¯ä»¥å®ç°æ›´é«˜çš„å‘½ä¸­ç‡ï¼Œä¹Ÿæ— æ³•æä¾›æ¬¡ä¼˜çš„æ€§èƒ½ã€‚</p><p>ä¸‹å›¾æ˜¯Lumos [2]ï¼Œæ‰§è¡Œå›¾å½¢å¤„ç†ç®—æ³• - Pagerank [15]çš„IOæ¨¡å¼å’Œæ€§èƒ½è¶‹åŠ¿ï¼ˆå®ƒä½¿ç”¨ä¸“é—¨çš„æ•°æ®ç»“æ„å’Œä¼˜åŒ–æŠ€æœ¯æ¥ä¼˜åŒ–å›¾å½¢å¤„ç†å¼•æ“ï¼Œå› æ­¤ç”Ÿæˆçš„ I/O è®¿é—®æ¨¡å¼éå¸¸å¤æ‚ã€‚ï¼‰</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/2cc466ecd6cb409bb417d9e68a446c3b.png" alt="æ•°æ®é›†å¤§å°è¶…è¿‡ç³»ç»Ÿå†…å­˜åï¼Œåº”ç”¨ç¨‹åºå¼€å§‹é­å—ç¼“å­˜æŠ–åŠ¨ï¼Œå¯¼è‡´æ€§èƒ½ä¸¥é‡ä¸‹é™ï¼ˆå‚è§å›¾ 1(b) ä¸­çš„åŸºçº¿ï¼‰"></p><ul><li>æ€§èƒ½ä½ä¸‹æ˜¯ç”±äºæ“ä½œç³»ç»Ÿçº§é¡µé¢ç¼“å­˜çš„å†…å­˜ç®¡ç†æ— æ•ˆï¼Œè¯¥ç¼“å­˜ä½¿ç”¨ LRU å’Œé¢„è¯»ç­–ç•¥ï¼Œè€Œä¸è€ƒè™‘è¾“å…¥å·¥ä½œè´Ÿè½½æ¨¡å¼ã€‚æ“ä½œç³»ç»Ÿçº§é¡µé¢ç¼“å­˜ä¼˜å…ˆé©±é€æœ€è¿‘æœ€å°‘å¼•ç”¨çš„é¡µé¢ï¼Œ<span class="label danger">ä½†è¿™äº›é¡µé¢å®é™…ä¸Šå¾ˆå¿«å°±ä¼šå†æ¬¡è¢«å¼•ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯ I/O æ¨¡å¼ä¸‹ã€‚</span></li><li>å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œä½¿ç”¨å…·æœ‰å°æ•°æ®å›ºå®šçš„ MRU ç­–ç•¥ï¼ˆè€Œä¸æ˜¯ LRUï¼‰ä¼šå¸¦æ¥æ›´é«˜çš„æ€§èƒ½ï¼Œå¦‚å›¾ 1 ä¸­çš„ MRU+PIN æ‰€ç¤ºï¼Œæ€§èƒ½æé«˜äº† 25%ã€‚ç„¶è€Œï¼Œå¾ˆéš¾æ”¹å˜å†…éƒ¨çš„æƒ…å†µã€‚é€‚åº”è¾“å…¥å·¥ä½œè´Ÿè½½çš„å†…æ ¸ç¼“å­˜æ›¿æ¢ç­–ç•¥ã€‚</li></ul><h3 id="2-2åŸºäºæç¤ºçš„æ“ä½œç³»ç»Ÿçº§ç¼“å­˜"><a href="#2-2åŸºäºæç¤ºçš„æ“ä½œç³»ç»Ÿçº§ç¼“å­˜" class="headerlink" title="2.2åŸºäºæç¤ºçš„æ“ä½œç³»ç»Ÿçº§ç¼“å­˜"></a>2.2åŸºäºæç¤ºçš„æ“ä½œç³»ç»Ÿçº§ç¼“å­˜</h3><p>ä½œä¸ºä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼Œä¸€äº›åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ GridGraph [1] æˆ– SQLite [7]ï¼‰å°è¯•é€šè¿‡ fadvise [16] å’Œ madvise [17] å‘å†…æ ¸æä¾›åº”ç”¨ç¨‹åºçº§æç¤ºæ¥æ›´å¥½åœ°ç®¡ç†ç¼“å­˜æ•°æ®ã€‚åœ¨ä¿ç•™å†…æ ¸çº§ç¼“å­˜ç®¡ç†ç›¸åŒä¼˜ç‚¹ï¼ˆå¼ºå¤§çš„æ•°æ®ä¿æŠ¤å’Œé«˜æ•ˆçš„æ•°æ®å…±äº«ï¼‰çš„åŒæ—¶ï¼Œå®ƒèƒ½å¤Ÿ<span class="label info">é€šè¿‡åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­åµŒå…¥é‡è¦çš„ç¼“å­˜ç®¡ç†å†³ç­–</span>ï¼ˆä¾‹å¦‚ï¼ŒWILLNEEDã€SEQUENTIALã€DONTNEEDï¼‰æ¥å®ç°æ›´é«˜çš„ç¼“å­˜å‘½ä¸­ç‡ã€‚</p><p>ç„¶è€Œï¼Œå®ƒä¹Ÿæœ‰ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œå®ƒéœ€è¦åœ¨ä¿®æ”¹ç°æœ‰åº”ç”¨ç¨‹åºä»£ç æ–¹é¢ä»˜å‡ºå·¨å¤§çš„åŠªåŠ›ã€‚å…¶æ¬¡ï¼Œä»…é€šè¿‡æ³¨å…¥æç¤ºå¾ˆéš¾ç²¾ç»†æ§åˆ¶å†…æ ¸çº§é¡µé¢ç¼“å­˜ã€‚æˆ‘ä»¬åœ¨ä»£ç ä¸­ç²¾å¿ƒæ·»åŠ äº†æç¤ºä¿¡æ¯ï¼Œä»¥MRUæ–¹å¼ç®¡ç†å†…æ ¸ç¼“å­˜ã€‚ä¿®æ”¹åçš„ç‰ˆæœ¬è¡¨ç°å‡ºæ›´é«˜çš„å‘½ä¸­ç‡ï¼Œä½†æ€§èƒ½ä»ç„¶æ¯”ä½¿ç”¨ MRU æ…¢å¾—å¤šï¼ˆå‚è§å›¾ 1 ä¸­çš„ FADVï¼‰ã€‚è¿™æ˜¯å› ä¸ºç¼“å­˜æŠ–åŠ¨ã€‚ </p><h3 id="2-3ç”¨æˆ·çº§ç¼“å­˜"><a href="#2-3ç”¨æˆ·çº§ç¼“å­˜" class="headerlink" title="2.3ç”¨æˆ·çº§ç¼“å­˜"></a>2.3ç”¨æˆ·çº§ç¼“å­˜</h3><p>ä¸ºäº†å‡è½»I/Oç‰¹å¾ï¼ˆåº”ç”¨ç¨‹åºï¼‰å’Œï¼ˆå†…æ ¸çº§é¡µç¼“å­˜ï¼‰ç­–ç•¥ä¹‹é—´çš„ä¸åŒ¹é…é—®é¢˜ï¼Œæ•°æ®å¯†é›†å‹åº”ç”¨ç¨‹åºç»å¸¸åœ¨åº”ç”¨ç¨‹åºçº§åˆ«[3-7]ä¸Šå®ç°è‡ªå·±çš„é¡µé¢ç¼“å­˜ã€‚</p><ul><li>å—å†…æ ¸ç¼“å­˜ç­–ç•¥å¹²æ‰°ï¼Œé©±é€äº†æœ‰ç”¨çš„é¡µé¢ï¼Œè¿åäº†åº”ç”¨ç¨‹åºçš„æ„å›¾ã€‚</li><li>æ— æ³•åˆ©ç”¨å†…æ ¸çš„ä¿æŠ¤å’Œå…±äº«åŠŸèƒ½ã€‚<br>ä¸‹å›¾ä½¿ç”¨ Simrank [19] è¿›è¡Œäº†å®éªŒï¼Œè¿™æ˜¯ä¸€ä¸ªå…·æœ‰è‡ªå·±çš„ç”¨æˆ·çº§ç¼“å­˜çš„å›¾å½¢åº”ç”¨ç¨‹åºã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/2439afe15dd740a6917ea14962b24687.png"><br>å¦‚å›¾ 2ï¼ˆaï¼‰æ‰€ç¤ºï¼ŒSimrank çš„ I/O å‚è€ƒæ¨¡å¼å¤§å¤šæ˜¯éšæœºçš„ï¼Œå› ä¸ºå®ƒå°†æµè¡Œæ•°æ®ç¼“å­˜åœ¨ç”¨æˆ·çº§ç¼“å­˜ä¸­ã€‚ç”±äºè¿™ç§ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ç®¡ç†ï¼Œå¯¹äºç›¸åŒçš„æ•°æ®é›†ï¼ŒGraph-Walker è¡¨ç°å‡ºæ¯” Lumos æ›´é«˜çš„æ€§èƒ½ï¼ˆè§å›¾ 2(b)ï¼‰ã€‚ç„¶è€Œï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼ŒGraphWalker çš„æ€§èƒ½ä¸‹é™å¹…åº¦æ¯” Lumos æ›´é«˜ã€‚</li></ul><h2 id="3-è§£å†³çš„é—®é¢˜"><a href="#3-è§£å†³çš„é—®é¢˜" class="headerlink" title="3. è§£å†³çš„é—®é¢˜"></a>3. è§£å†³çš„é—®é¢˜</h2><p>å†…å­˜å¯†é›†å‹ç¨‹åºçš„I/Oæ›´åŠ å…·æœ‰ç‰¹æ€§ï¼Œå†…æ ¸çº§é¡µé¢ç¼“å­˜ç”±äºæ— æ³•è€ƒè™‘ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ I/O æ¨¡å¼è€Œæ— æ³•æä¾›é«˜æ€§èƒ½ã€‚åº”ç”¨ç¨‹åºçº§æç¤ºå¯ä»¥ç¼“è§£è¯¥é—®é¢˜ï¼Œä½†ä¸æœ€ä½³æ•ˆæœç›¸æ¯”ï¼Œæ•ˆæœæœ‰é™ã€‚è™½ç„¶ç”¨æˆ·çº§è‡ªå®šä¹‰ç¼“å­˜å¯ä»¥é«˜æ•ˆå·¥ä½œï¼Œä½†å®ƒæ— æ³•åˆ©ç”¨å†…æ ¸çš„åŸºç¡€è®¾æ–½ï¼Œå¹¶ä¸”ä¼šå› å†…æ ¸å¹²é¢„è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚äºæ˜¯åšäº†ä¸€ä¸ª<strong>å…è®¸åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜æ„å»ºä¸ç›®æ ‡åº”ç”¨ç¨‹åºçš„I/Oç‰¹å¾åŒ¹é…çš„è‡ªå®šä¹‰å†…æ ¸çº§åˆ«çš„CACHE</strong>ã€‚ </p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>å¦‚æœç›´æ¥å®ç°äº†ç”¨æˆ·çº§é¡µé¢ç¼“å­˜ï¼ˆä¾‹å¦‚ï¼Œå¦‚Jaydio [8]æˆ–RockSDBçš„Direct-io [9]ï¼‰ï¼Œåˆ™å¯èƒ½æ— æ³•å¯¹æŸäº›å†…æ ¸åŠŸèƒ½è¿›è¡Œä»‹å…¥ï¼Œä¾‹å¦‚ç”¨äºç¡®ä¿æ•°æ®ä¿æŠ¤å’Œæ•°æ®ä¸€è‡´æ€§çš„åŠŸèƒ½ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœSSDæˆ–ä¸»æœºå­˜å‚¨ç³»ç»Ÿå‘ç”Ÿé‡å¤§å˜åŒ–ï¼Œåˆ™éœ€è¦é‡æ–°å®ç°ç”¨æˆ·çº§ç¼“å­˜ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/1392a78bce7340b886bd89b864b1e283.png"><br>å›¾ 3 æ˜¾ç¤ºäº† P2Cache çš„æ“ä½œæ¦‚è§ˆã€‚è¦ä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºè‡ªå®šä¹‰é¡µé¢ç¼“å­˜ï¼Œå¯èƒ½éœ€è¦åº”ç”¨ç¨‹åºçš„ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„æ•°æ®æ¥å¼€å‘æ–°çš„ç¼“å­˜ç­–ç•¥ã€‚å¦‚æœéœ€è¦ï¼Œæ•°æ®ä¼šè¢«ç§»åŠ¨åˆ°å†…æ ¸çš„å—ä¿æŠ¤å†…å­˜(1)ã€‚ä¸ºäº†é¿å…å…¶ä»–åº”ç”¨ç¨‹åºå¯¹æ•°æ®è¿›è¡Œæœªç»æˆæƒçš„è®¿é—®ï¼Œä¸ºæ¯ä¸ªè‡ªå®šä¹‰é¡µé¢ç¼“å­˜åˆ†é…äº†ä¸€ä¸ªå¯†ç (passwd)ã€‚ä½¿ç”¨P2C APIå‡½æ•°ä»¥åŠåº”ç”¨ç¨‹åºçš„å†…æ ¸æ•°æ®ï¼Œä¸ºP2Cacheçš„æ¯ä¸ªæ¢æµ‹ç‚¹å®ç°ä¸€ä¸ªeBPFç¨‹åº (2)ã€‚å°†eBPFç¨‹åºåŠ è½½åˆ°å„è‡ªçš„æ¢æµ‹ç‚¹(3)åï¼Œåªè¦å†…æ ¸çš„æ‰§è¡Œæµåˆ°è¾¾è¿™äº›ç‚¹ï¼Œå°±ä¼šæ‰§è¡ŒeBPFç¨‹åºï¼Œåº”ç”¨ç¨‹åºçš„è‡ªå®šä¹‰é¡µé¢ç¼“å­˜å°±ä¼šç”Ÿæ•ˆã€‚åœ¨æ‰§è¡ŒeBPFç¨‹åºä¹‹å‰ï¼Œæ‰©å±•çš„eBPF VMä¼šéªŒè¯ç¨‹åºæ˜¯å¦æœ‰æƒè®¿é—®åº”ç”¨ç¨‹åºæ‹¥æœ‰çš„å†…æ ¸æ•°æ®ä»¥åŠç‰¹å®šäºåº”ç”¨ç¨‹åºçš„æ•°æ®ã€‚è¿™æ˜¯é€šè¿‡å°†eBPFç¨‹åºçš„passwdprobeä¸ä»ç›¸åº”åº”ç”¨ç¨‹åºä¼ é€’æ¥çš„passwdè¿›è¡Œæ¯”è¾ƒæ¥å®ç°çš„ã€‚</p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>å®éªŒç»“æœè¡¨æ˜ï¼Œä½¿ç”¨æˆ‘ä»¬çš„P2Cacheå®æ–½çš„Cusmom Pageç¼“å­˜å¯åœ¨æ•°æ®å¯†é›†å‹å›¾åº”ç”¨ä¸­æé«˜32ï¼…çš„æ€§èƒ½ï¼Œå†…å­˜å®¹é‡ä½äºæ•°æ®é›†å®¹é‡æ—¶ä¹Ÿæ˜¯ç›¸æ¯”å…¶ä»–æ–¹æ¡ˆæ€§èƒ½ä¸‹é™æ›´ç¼“æ…¢ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>åšäº†ä¸€ä¸ªå…è®¸åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜æ„å»ºä¸ç›®æ ‡åº”ç”¨ç¨‹åºçš„I/Oç‰¹å¾åŒ¹é…çš„è‡ªå®šä¹‰å†…æ ¸çº§åˆ«çš„CACHEï¼Œåˆ«äººçš„éƒ½æ˜¯åº”ç”¨å±‚çº§çš„ã€‚</p><h2 id="9-ç§¯ç´¯"><a href="#9-ç§¯ç´¯" class="headerlink" title="9. ç§¯ç´¯"></a>9. ç§¯ç´¯</h2><blockquote><p>æ•°æ®å¯†é›†å‹å·¥ä½œè´Ÿè½½ï¼šLumos [2] and GraphWalker [4]ã€‚ç›®å‰ä½¿ç”¨çš„å·¥ä½œè´Ÿè½½ï¼Œå®¹é‡å¦‚æœå†…å­˜ä¸èƒ½å®¹ä¸‹ï¼Œåˆ™ä¼šæ€æ­»è¿›ç¨‹ï¼Œè¿™é‡Œä½¿ç”¨è¿™ä¸¤ä¸ªå·¥ä½œè¿‡è´Ÿè½½è¿˜å¯ä»¥ä½¿å¾—Memory Size / Dataset Sizeæˆæ¯”ä¾‹ã€‚Lumos ç»´æŠ¤å¤šä¸ªæ–‡ä»¶å¹¶åŒæ—¶æ‰«æå®ƒä»¬ï¼Œå°†æ··åˆ I/O æ¨¡å¼å‘é€åˆ°ç£ç›˜ã€‚ Lumos è¿˜ä½¿ç”¨å¤šä¸ªå…ƒæ•°æ®æ–‡ä»¶å¹¶é‡å¤è¯»å–å®ƒä»¬ï¼Œä»è€Œäº§ç”Ÿé«˜åº¦æœ¬åœ°åŒ–çš„ I/O æ¨¡å¼ã€‚</p></blockquote><blockquote><p>2.2èŠ‚çš„å®ç°æ‰‹æ®µå¯ä»¥æ¨¡ä»¿ã€‚eBPFç¨‹åºä¹Ÿèƒ½å»å½±å“å†…æ ¸ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> O </tag>
            
            <tag> Cache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Coalescing for Multi-Grained Page Migration</title>
      <link href="/2023/05/20/Coalescing-for-Multi-Grained-Page-Migration/"/>
      <url>/2023/05/20/Coalescing-for-Multi-Grained-Page-Migration/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªIEEE International Symposium on High-Performance Computer Architecture, (HPCA), 2022</li><li>Coalescing for Multi-Grained Page Migration</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>åä¸­ç§‘æŠ€å¤§å­¦</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>è§‚å¯Ÿç»“æœ1ï¼Œä¸€äº›çƒ­é¡µåœ¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¸Šéƒ½æœ‰è¿ç»­æ€§ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>Tampä½¿ç”¨DRAMä½œä¸ºæ•°æ®ç¼“å†²å™¨æ¥ç¼“å­˜NVMä¸­å¤šç§å°ºå¯¸çš„çƒ­é¡µ(æ‰€è°“çš„å¤šç²’åº¦é¡µ)ã€‚ç›¸åº”åœ°ä½¿ç”¨åˆ†è£‚çš„è¶…çº§é¡µTLBå’Œå¤šç²’åº¦TLBæ¥åˆ†åˆ«åŠ é€ŸNVMå’ŒDRAMçš„åœ°å€è½¬æ¢ã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>æ¯ä¸€ä¸ªideaéƒ½æœ‰å¯¹åº”çš„é—®é¢˜è¦è§£å†³ï¼Œæœ€ååµŒå¥—å¤ªå¤šäº†ï¼Œæ‰€ä»¥æŠ•çš„åˆŠç‰©å¯èƒ½ä¼šä¸å¥½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> O </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Supporting Superpages and Lightweight Page Migration in Hybrid Memory Systems</title>
      <link href="/2023/05/02/Supporting-Superpages-and-Lightweight-Page-Migration-in-Hybrid-Memory-Systems/"/>
      <url>/2023/05/02/Supporting-Superpages-and-Lightweight-Page-Migration-in-Hybrid-Memory-Systems/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªACM Transactions on Architecture and Code Optimization, (TACO), 2019</li><li>Supporting Superpages and Lightweight Page Migration in Hybrid Memory Systems</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>XIAOYUAN WANG, HAIKUN LIU, XIAOFEI LIAO, JI CHEN, HAI JIN, YU ZHANG, and LONG ZHENG, åä¸­ç§‘æŠ€å¤§å­¦</li><li>BINGSHENG HE, æ–°åŠ å¡å›½ç«‹å¤§å­¦</li><li>SONG JIANG, å¾·å…‹è¨æ–¯å¤§å­¦é˜¿çµé¡¿åˆ†æ ¡(UTA)</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>åœ¨å¤§å†…å­˜ç³»ç»Ÿä¸­ï¼Œ<strong>è¶…çº§é¡µä¸€ç›´è¢«ç”¨æ¥å‡è½»åœ°å€è½¬æ¢å¼€é”€</strong>ã€‚ ç„¶è€Œï¼Œåœ¨ç”±DRAMå’ŒNVMç»„æˆçš„æ··åˆå­˜å‚¨ç³»ç»Ÿä¸­ï¼Œ<strong>è¶…é¡µé¢å¾€å¾€ä¼šé˜»ç¢è½»é‡çº§é¡µé¢è¿ç§»ï¼Œè€Œè½»é‡çº§é¡µé¢è¿ç§»å¯¹æ€§èƒ½å’Œèƒ½é‡æ•ˆç‡è‡³å…³é‡è¦</strong>ã€‚ </p><blockquote><p>Superpages have long been used to mitigate address translation overhead in large-memory systems. However, superpages often preclude lightweight page migration, which is crucial for performance and energy efficiency in hybrid memory systems composed of DRAM and NVM.</p></blockquote><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><ol><li>å¦‚æœå¤§å¤šæ•°å†…å­˜å¼•ç”¨<strong>åˆ†å¸ƒåœ¨è¶…çº§é¡µçš„ä¸€ä¸ªå°åŒºåŸŸä¸­</strong>ï¼Œé‚£ä¹ˆä»¥è¶…çº§é¡µç²’åº¦ï¼ˆä¾‹å¦‚2MBï¼‰è¿›è¡Œçš„é¡µè¿ç§»ä¼šå¯¼è‡´DRAMå®¹é‡å’Œå¸¦å®½çš„å·¨å¤§æµªè´¹ï¼Œä»è€Œå¯¼è‡´æ— æ³•æ‰¿å—çš„æ€§èƒ½å¼€é”€ã€‚ æˆæœ¬å¯èƒ½æ¯”è¶…çº§é¡µé¢è¿ç§»çš„å¥½å¤„è¿˜è¦å¤§ã€‚ è¿™ç»™è¶…çº§é¡µé¢çš„ä½¿ç”¨å¸¦æ¥äº†ä¸€ä¸ªå›°å¢ƒï¼Œå› ä¸º<strong>è½»é‡çº§é¡µé¢è¿ç§»å¯èƒ½ä¼šè¶…è¿‡æ‰©å±•TLBè¦†ç›–çš„å¥½å¤„</strong>ã€‚ </li></ol><blockquote><p>However, page migration at the superpage granularity (e.g., 2MB) can incur unbearable performance overhead due to a vast waste of DRAM capacity and bandwidth if most memory references are distributed in a small region ofthe superpage (see Section 2.2). The cost may be even larger than the benefit of superpage migration. This presents a dilemma for the use of superpages,<br>since the lightweight page migration can outweigh the benefits of extended TLB coverage.</p></blockquote><p><a href="https://www.jianshu.com/p/bea989a85a31">ç´¯ç§¯åˆ†å¸ƒå‡½æ•°å›¾æ€ä¹ˆçœ‹</a><br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/6d3b808800554ed3b2d0a153353c4e26.png" alt="2MBè¶…çº§é¡µçš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°ä¸ç»™å®šåŒºé—´(108ä¸ªå‘¨æœŸ)å†…ä¸€ä¸ªè¶…çº§é¡µä¸­è¢«è§¦åŠçš„4KBå°é¡µçš„æ•°é‡"><br>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œè´Ÿè½½æœ‰80%ä»¥ä¸Šçš„æ¦‚ç‡ï¼š2MBçš„é¡µé¢ä¸­è¢«è®¿é—®çš„4kbé¡µé¢åªæœ‰12.5%ã€‚<br>è¿˜æœ‰ä¸€å¼ è¡¨æ ¼æ¥è¯´æ˜é—®é¢˜ï¼š<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/abbbcb642622478cb35fd087610a7f69.png" alt="4kbçƒ­é¡µè®¿é—®ç»Ÿè®¡"><br>ä½¿ç”¨çš„å·¥ä½œè´Ÿè½½ï¼š</p><ul><li><a href="https://www.spec.org/cpu2006">SPEC CPU2006</a></li><li><a href="http://parsec.cs.princeton.edu/index.htm">Parsec</a></li><li><a href="http://www.cs.cmu.edu/%E2%88%BCpbbs/">Problem Based Benchmarks Suitï¼ˆPBBSï¼‰</a></li><li><a href="http://whitedb.org/">WhiteDB</a></li><li><a href="https://redis.io/">Redis</a></li><li><a href="http://graph500.org/">Graph500</a></li><li><a href="http://www.netlib.org/benchmark/">Linpack</a></li><li><a href="https://www.nas.nasa.gov/publications/npb.html">NPB-CG</a></li><li><a href="http://icl.cs.utk.edu/hpcc/">HPC Challenge Benchmark GUPS</a></li></ul><ol start="2"><li><strong>è½»é‡çº§çƒ­é¡µçš„æ ‡è¯†</strong>ï¼šä¸ºäº†æ”¯æŒè½»é‡çº§é¡µè¿ç§»ï¼Œå¤§é‡å·¥ä½œæå€¡é€šè¿‡å†…å­˜æ§åˆ¶å™¨ç›‘è§†å†…å­˜è®¿é—®ã€‚ ç„¶è€Œï¼Œå½“<strong>ä¸»å­˜å®¹é‡å˜å¤§æ—¶</strong>ï¼Œä»¥æ¯é¡µç²’åº¦ï¼ˆå³4KBï¼‰ä½¿ç”¨<strong>è®¿é—®è®¡æ•°å™¨ä¼šå¯¼è‡´é«˜å¾—ä»¤äººæœ›è€Œå´æ­¥çš„å­˜å‚¨å¼€é”€</strong>ã€‚</li></ol><blockquote><p>Identification oflightweight hot pages: to support lightweight page migration, a large body of work advocates monitoring memory accesses through the memory controller [55, 63]. However, using access counters at per-page granularity (i.e., 4KB) leads to prohibitively high storage overhead when the capacity of main memory becomes large.</p></blockquote><ol start="3"><li>è½»é‡çº§é¡µé¢è¿ç§»å¯¹TLBè¦†ç›–ç‡çš„å½±å“ï¼šé¡µé¢è¿ç§»é€šå¸¸ä¼š<strong>åˆ†å‰²è¶…çº§é¡µé¢</strong>ï¼Œä»è€Œ<strong>ç ´åç‰©ç†åœ°å€çš„è¿ç»­æ€§</strong>ã€‚ </li></ol><blockquote><p>Impact oflightweight page migration on TLB coverage: page migrations often fragment superpages and thus break the physical address continuity.</p></blockquote><ol start="4"><li>çƒ­é¡µå¯»å€æ•ˆç‡ï¼šç”±äºçƒ­é¡µå åº”ç”¨ç¨‹åºå†…å­˜å¼•ç”¨çš„ä¸»è¦éƒ¨åˆ†ï¼Œå› æ­¤å¿…é¡»è¿›ä¸€æ­¥<strong>å‡å°‘DRAMä¸­é‚£äº›çƒ­é¡µçš„åœ°å€è½¬æ¢å¼€é”€</strong>ã€‚ </li></ol><blockquote><p>Efficiency of hot pages addressing:ashot pages<br>contribute to a major portion of applicationsâ€™ memory references, it is essential to further reduce<br>the overhead of address translation for those hot pages in the DRAM.</p></blockquote><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ä»¥å‰çš„å·¥ä½œä¸»å¼ åˆ†å‰²è¶…çº§é¡µé¢ä»¥å®ç°è½»é‡çº§å†…å­˜ç®¡ç†ï¼Œå¦‚é¡µé¢è¿ç§»å’Œå…±äº«ï¼ŒåŒæ—¶ç‰ºç‰²åœ°å€è½¬æ¢çš„æ€§èƒ½[37,58]å½“<strong>è¶…çº§é¡µé¢ä¸­çš„çƒ­å°é¡µé¢è¿ç§»åˆ°DRAMæ—¶ï¼Œä¿æŒæ”¹è¿›çš„TLBè¦†ç›–ç‡</strong>ä»ç„¶æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚</p><blockquote><p>Previous work has advocated splintering superpages to enable lightweight memory management such as page migration and sharing, while sacrificing the performance of address translation [37,58]. It is still a challenge to retain the improved TLB coverage when the hot small pages within superpages are migrated to the DRAM.</p></blockquote><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„å†…å­˜ç®¡ç†æœºåˆ¶Rainbow, Rainbowåœ¨Superpageç²’åº¦ä¸Šç®¡ç†NVMï¼Œå¹¶ä½¿ç”¨DRAMåœ¨æ¯ä¸ªSuperpageå†…ç¼“å­˜é¢‘ç¹è®¿é—®ï¼ˆçƒ­ï¼‰çš„å°é¡µé¢ã€‚ç›¸åº”åœ°ï¼ŒRainbowåˆ©ç”¨æ‹†åˆ†TLB[2,7,30,52]çš„å¯ç”¨ç¡¬ä»¶ç‰¹æ€§æ¥æ”¯æŒä¸åŒçš„é¡µé¢å¤§å°ï¼Œå…¶ä¸­ä¸€ä¸ªTLBç”¨äºå¯»å€è¶…çº§é¡µé¢ï¼Œå¦ä¸€ä¸ªTLBç”¨äºå¯»å€å°é¡µé¢ã€‚ Rainbowå°†SuperPageä¸­çš„çƒ­å°é¡µè¿ç§»åˆ°DRAMä¸­ï¼Œè€Œä¸ä¼šæŸå®³SuperPage TLBçš„å®Œæ•´æ€§ã€‚ å› æ­¤ï¼ŒRainbowå®é™…ä¸Šå°†DRAMæ¶æ„ä¸ºNVMçš„ç¼“å­˜ã€‚</p><ul><li>ä¸ºäº†å‡å°‘ç»†ç²’åº¦é¡µé¢è®¿é—®è®¡æ•°çš„å­˜å‚¨å¼€é”€ï¼Œåˆ†ä¸¤ä¸ªé˜¶æ®µè¿›è¡Œè®¡æ•°ã€‚åœ¨<strong>ç»™å®šçš„æ—¶é—´é—´éš”å†…</strong>ï¼ŒRainbow<strong>é¦–å…ˆè®¡ç®—Superpageç²’åº¦ä¸‹çš„NVMå†…å­˜è®¿é—®</strong>ï¼Œç„¶åé€‰æ‹©<strong>å‰Nä¸ªçƒ­é—¨Superpageä½œä¸ºç›®æ ‡</strong>ã€‚ åœ¨ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘ä»¬<strong>åªç›‘è§†é‚£äº›å°é¡µé¢</strong>(4KB)ç²’åº¦çš„çƒ­ç‚¹è¶…é¡µé¢ï¼Œä»¥è¯†åˆ«çƒ­ç‚¹å°é¡µé¢ã€‚ è¿™ç§åŸºäºå†å²çš„ç­–ç•¥é¿å…äº†ç›‘è§†å¤§é‡å†·è¶…é¡µä¸­çš„å­å—ï¼ˆ4KBé¡µï¼‰ï¼Œä»è€Œæ˜¾è‘—é™ä½äº†çƒ­é¡µè¯†åˆ«çš„å¼€é”€ã€‚ </li><li>æˆ‘ä»¬é‡‡ç”¨<strong>æ‹†åˆ†TLB</strong>æ¥åŠ é€ŸDRAMå’ŒNVMå¼•ç”¨çš„åœ°å€è½¬æ¢æ€§èƒ½ã€‚å½“ä¸€äº›å°é¡µè¿ç§»åˆ°DRAMæ—¶ï¼Œä¸ºäº†ä¿æŒSuperPages TLBçš„å®Œæ•´æ€§ï¼Œæˆ‘ä»¬åœ¨å†…å­˜æ§åˆ¶å™¨ä¸­ä½¿ç”¨ä½å›¾æ¥è¯†åˆ«è¿ç§»çš„çƒ­é¡µï¼Œè€Œ<strong>ä¸ä¼šåˆ†è£‚SuperPages</strong>ã€‚</li><li>æˆ‘ä»¬æå‡ºäº†ä¸€ç§<strong>ç‰©ç†åœ°å€é‡æ˜ å°„æœºåˆ¶æ¥è®¿é—®DRAMä¸­è¿ç§»çš„çƒ­é¡µ</strong>ï¼Œè€Œä¸å¿…ä¸ºå¯»å€DRAMé¡µè€Œé­å—æ˜‚è´µçš„é¡µè¡¨éå†ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬å°†è¿ç§»çš„çƒ­ç‚¹é¡µé¢çš„ç›®çš„åœ°å€å­˜å‚¨åœ¨å…¶åŸå§‹ä½æ‰€ï¼ˆè¶…çº§é¡µé¢ï¼‰ä¸­ã€‚ ä¸€æ—¦çƒ­é¡µå¯¹åº”çš„TLBæœªå‘½ä¸­ï¼ŒDRAMé¡µå¯»å€åº”æ±‚åŠ©äºå¯¹è¶…çº§é¡µçš„é—´æ¥è®¿é—®ã€‚è¿™ç§è®¾è®¡åœ¨é€»è¾‘ä¸Šåˆ©ç”¨äº†SuperPage TLBSä½œä¸º4KBé¡µé¢TLBçš„ä¸‹ä¸€çº§ç¼“å­˜ã€‚ å› ä¸ºSuperpage TLBå‘½ä¸­ç‡é€šå¸¸å¾ˆé«˜ï¼Œæ‰€ä»¥Rainbowå¯ä»¥æ˜¾è‘—åŠ å¿«DRAMé¡µé¢å¯»å€çš„é€Ÿåº¦ã€‚ </li></ul><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>å®éªŒç»“æœè¡¨æ˜ï¼Œä¸ç°æœ‰çš„å†…å­˜è¿ç§»ç­–ç•¥ç›¸æ¯”ï¼Œåœ¨æ²¡æœ‰Superpageæ”¯æŒçš„æƒ…å†µä¸‹ï¼ŒRainbowå¯ä»¥å°†åº”ç”¨ç¨‹åºçš„TLBä¸¢å¤±ç‡é™ä½99.9%ï¼Œå¹¶å°†åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼ˆä»¥OFIPCä¸ºæ ‡å‡†ï¼‰å¹³å‡æé«˜2.9Ã—(45.3%)ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stealth-Persist: Architectural Support for Persistent Applications in Hybrid Memory Systems</title>
      <link href="/2023/05/01/Stealth-Persist-Architectural-Support-for-Persistent-Applications-in-Hybrid-Memory-Systems/"/>
      <url>/2023/05/01/Stealth-Persist-Architectural-Support-for-Persistent-Applications-in-Hybrid-Memory-Systems/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªHPCA, 2021</li><li>Stealth-Persist: Architectural Support for Persistent Applications in Hybrid Memory Systems</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>A, Mazen Alwadi1, Vamsee Reddy Kommareddy1, Clayton Hughes2, Simon David Hammond2, Amro Awad3<br>University of Central Florida1, Sandia National Laboratories2, North Carolina State University3</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>å®ƒä»¬å­˜åœ¨ç€é«˜å†™å»¶è¿Ÿå’Œæœ‰é™çš„å†™æŒä¹…æ€§ã€‚ç ”ç©¶äººå‘˜æå‡ºäº†ç»“åˆDRAMå’ŒNVMçš„æ··åˆå­˜å‚¨ç³»ç»Ÿï¼Œåˆ©ç”¨DRAMçš„ä½å»¶è¿Ÿæ¥æ©ç›–NVMçš„ä¸€äº›ç¼ºç‚¹â€”â€”é€šè¿‡åœ¨DRAMä¸­ç¼“å­˜å¸¸é©»NVMæ•°æ®æ¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚å¯¹äºå¤§å®¹é‡çš„NVMå¿«é€Ÿå’ŒæŒä¹…çš„ç¼“å­˜èƒ½åŠ›æ˜¯æœ‰é™çš„ã€‚åˆ©ç”¨DRAMä½œä¸ºNVMçš„ä¸€ä¸ªå¿«é€ŸæŒä¹…çš„ç¼“å­˜ï¼Œå—åˆ°èƒ½æºæ”¯æŒçš„é™åˆ¶ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>è¶Šæ¥è¶Šå¤šçš„åº”ç”¨ç¨‹åºå°†åˆ©ç”¨NVMsçš„æŒä¹…æ€§åŠŸèƒ½ã€‚å› æ­¤ï¼Œæé«˜è¿™ç±»åº”ç”¨çš„æ€§èƒ½ï¼ŒåŒæ—¶ä¿è¯æ•°æ®çš„æŒä¹…æ€§æ˜¯ä¸€ä¸ªå…³é”®çš„è®¾è®¡ç‚¹ã€‚å…è®¸NVMçš„éå¸¸å¿«é€Ÿçš„æŒä¹…æ€§ç¼“å­˜ï¼Œä½†ä¸éœ€è¦ä»»ä½•é¢å¤–çš„èƒ½é‡æ”¯æŒèƒ½åŠ›æ¥åˆ·æ–°DRAMç¼“å­˜å†…å®¹åˆ°NVM</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ç°æœ‰çš„æŒä¹…æ€§å­˜å‚¨å™¨æŠ€æœ¯è¦ä¹ˆæä¾›å°å®¹é‡ä½†å¿«é€Ÿå’ŒåŸºäºç”µæ± æ”¯æŒçš„DRAMæŒä¹…æ€§åŒºåŸŸï¼Œè¦ä¹ˆæä¾›é«˜å®¹é‡çš„NVM (ä¸éœ€è¦ç”µæ± æ”¯æŒ)ä½†ç¼“æ…¢çš„æŒä¹…æ€§åŒºåŸŸã€‚å‰è€…éœ€è¦ç³»ç»Ÿçš„æ”¯æŒï¼Œéœ€è¦ç¬¨é‡çš„ç‰©å“ï¼Œå¹¶ä¸”ä¼šæ ¹æ®è¶…çº§ç”µå®¹æˆ–ç”µæ± çš„å¤§å°é™åˆ¶æŒä¹…æ€§DRAMçš„å¤§å°ã€‚æ­¤å¤–ï¼Œå®ƒéœ€è¦æ”¹å˜æŸäº›DIMMæ¥æ”¯æŒå¤‡ä»½æ¨¡å¼ã€‚åŒæ—¶ï¼Œç”±äºæŒä¹…æ€§å¯¹è±¡çš„ç¼“æ…¢è¯»å–è®¿é—®ï¼Œåè€…ä¼šäº§ç”Ÿæ˜æ˜¾çš„æ€§èƒ½ä¸‹é™ã€‚æœŸå¾…ç”µæ± å¤‡ä»½ã€æœ‰é™çš„DRAMå°ºå¯¸ä»¥åŠé™åˆ¶é›†æˆåœ¨ç³»ç»Ÿä¸­çš„DRAMæ¨¡å—çš„é€‰æ‹©ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>å®ç°NVMçš„å¿«é€ŸæŒä¹…çš„DRAMç¼“å­˜ï¼Œæˆ‘ä»¬åˆ©ç”¨é€‰æ‹©æ€§çš„NVMé•œåƒå¯¹ç¼“å­˜åœ¨DRAMä¸­çš„æŒä¹…é¡µé¢è¿›è¡Œäº†æ–°çš„å†…å­˜æ§åˆ¶å™¨ã€‚</p><p>åœ¨DRAMä¸­ç¼“å­˜æ—¶å°†æŒä¹…åŒºåŸŸçš„æ›´æ–°é•œåƒåˆ°NVMã€‚ Stealth-Persistçš„é•œåƒæ“ä½œå‘ç”Ÿåœ¨å†…å­˜æ§åˆ¶å™¨ä¸Šï¼Œä¸éœ€è¦å¯¹åº”ç”¨ç¨‹åºæˆ–æŒä¹…æ€§ç¼–ç¨‹åº“åšä»»ä½•æ”¹å˜ã€‚æœ€åï¼Œä¸ºäº†æ”¯æŒå¯¹æŒä¹…æ€§é¡µé¢çš„é«˜æ€§èƒ½è®¿é—®ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆä»DRAMä¸­æä¾›å¯¹æŒä¹…æ€§å¯¹è±¡çš„è¯»å–è¯·æ±‚ï¼Œå¦‚æœåœ¨é‚£é‡Œæœ‰ç¼“å­˜</p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>å†™æ¬¡æ•°ä¸å˜ï¼Œå¯¹äºå†™è€ä¹…æ€§çš„ç ´å</p><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>è™½ç„¶ä¹‹å‰æ‰€æœ‰å…³äºæŒä¹…åŒ–åº”ç”¨çš„å·¥ä½œéƒ½æ¢è®¨äº†å¯¹æŒä¹…åŒ–å¯¹è±¡çš„å†™çš„ä¼˜åŒ–ï¼Œä½†è¿™æ˜¯ç¬¬ä¸€ä¸ªæ¢è®¨å¯¹æŒä¹…åŒ–å¯¹è±¡çš„è¯»æ“ä½œè¿›è¡Œä¼˜åŒ–çš„å·¥ä½œã€‚ä»…ä»…ä¾é å¯¹å¤„ç†å™¨èŠ¯ç‰‡çš„å¾®å°æ”¹åŠ¨æ¥æ”¯æŒDRAMä¸­æŒä¹…æ€§æ•°æ®å¯¹è±¡çš„ç¼“å­˜æ˜¯éå¸¸é‡è¦çš„ã€‚Stealth-Persistçš„é•œåƒæ“ä½œå‘ç”Ÿåœ¨å†…å­˜æ§åˆ¶å™¨ä¸Šï¼Œä¸éœ€è¦å¯¹åº”ç”¨ç¨‹åºæˆ–æŒä¹…æ€§ç¼–ç¨‹åº“åšä»»ä½•æ”¹å˜</p><blockquote><p>crash-consistent applications å´©æºƒä¸€è‡´æ€§ç¨‹åº;crashå®•æœºï¼Œæˆ–ä¸»æœºã€ç¨‹åºåœæ­¢å·¥ä½œç­‰æƒ…å†µã€‚</p></blockquote><p><code>è¿™ç¯‡ç¿»è¯‘çš„ä¸å¥½ï¼Œè¿˜æœ‰å¾ˆå¤šé—®é¢˜ï¼Œä¼šæŒç»­ä¿®æ”¹</code></p><h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><p>éæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼ˆNVMï¼‰å…·æœ‰ä¼ ç»Ÿå¤–å­˜ç³»ç»Ÿï¼ˆstorage systemsï¼‰æŒä¹…æ€§å’Œä¼ ç»Ÿå†…å­˜ç³»ç»Ÿï¼ˆmemory systemsï¼‰å­—èŠ‚å¯å¯»å€çš„ç‰¹ç‚¹ã€‚ç„¶è€Œï¼Œå®ƒä»¬å­˜åœ¨ç€<strong>é«˜å†™å»¶è¿Ÿå’Œæœ‰é™çš„å†™æŒä¹…æ€§</strong>ã€‚ç ”ç©¶äººå‘˜æå‡ºäº†ç»“åˆDRAMå’ŒNVMçš„æ··åˆå­˜å‚¨ç³»ç»Ÿï¼Œåˆ©ç”¨DRAMçš„ä½å»¶è¿Ÿæ¥æ©ç›–NVMçš„ä¸€äº›ç¼ºç‚¹â€”â€”é€šè¿‡åœ¨DRAMä¸­ç¼“å­˜å¸¸é©»NVMæ•°æ®æ¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šä½¿ç¼“å­˜é¡µé¢çš„æŒä¹…æ€§å¤±æ•ˆï¼Œä»è€Œå¯¼è‡´åœ¨æ€§èƒ½å’Œå¯é æ€§æ–¹é¢çš„æƒè¡¡é—®é¢˜ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†Stealth-Persistï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„æ¶æ„æ”¯æŒåŠŸèƒ½ï¼Œå…è®¸éœ€è¦æŒä¹…æ€§çš„åº”ç”¨ç¨‹åºåœ¨DRAMä¸­è¿è¡Œï¼ŒåŒæ—¶ä¿æŒNVMæä¾›çš„æŒä¹…æ€§åŠŸèƒ½ã€‚Stealth-Persiståˆ›é€ äº†ä¸€ä¸ªæŒä¹…æ€§å†…å­˜çš„å‡è±¡ï¼Œä¾›åº”ç”¨ç¨‹åºä½¿ç”¨ï¼ŒåŒæ—¶åˆ©ç”¨DRAMè¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚æˆ‘ä»¬çš„å®éªŒç»“æœè¡¨æ˜ï¼ŒStealth-Persistå°†æŒä¹…æ€§åº”ç”¨çš„æ€§èƒ½æé«˜äº†42.02%ã€‚</p><h1 id="ä¸€ã€å¼•è¨€"><a href="#ä¸€ã€å¼•è¨€" class="headerlink" title="ä¸€ã€å¼•è¨€"></a>ä¸€ã€å¼•è¨€</h1><p><strong>æ–°å…´çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼ˆNVMsï¼‰æ­£é€æ¸æˆç†Ÿï¼Œè¾¾åˆ°äº†æ¥è¿‘å¤§è§„æ¨¡ç”Ÿäº§é˜¶æ®µå’Œå¹¿æ³›é‡‡ç”¨çš„æ°´å¹³[11],[15],[16],[59],[65]<strong>ã€‚ ä¾‹å¦‚ï¼Œæœ€è¿‘ï¼Œè‹±ç‰¹å°”å‘å¸ƒäº†OptaneDCäº§å“ï¼Œå®ƒæ˜¯ä¸€ç§ä½¿ç”¨3DXPointæŠ€æœ¯çš„å†…å­˜æ¨¡å—[21]ã€‚è¿™äº›NVM-basedå†…å­˜æ¨¡å—ä»¥è¶…ä½çš„ç©ºé—²åŠŸç‡è¿è¡Œï¼Œä½†ä»ç„¶å…·æœ‰éå¸¸é«˜çš„å¯†åº¦ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸€ä¸ªOptane DCæ¨¡å—å¯ä»¥æœ‰512GBçš„å®¹é‡[3]ã€‚å› æ­¤ï¼Œåœ¨éœ€è¦é«˜å†…å­˜å®¹é‡ä½†å¯èƒ½å—åˆ°ç”µæºé™åˆ¶çš„æœåŠ¡å™¨ä¸­ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªéå¸¸å¼•äººæ³¨ç›®çš„è¡¥å……ã€‚è™½ç„¶DRAMæ¨¡å—å¿…é¡»é¢‘ç¹åœ°è¿›è¡Œåˆ·æ–°æ“ä½œï¼Œå®ƒå äº†å¾ˆå¤§æ¯”ä¾‹çš„ç”µåŠ›æ¶ˆè€—[38]ï¼Œä½†NVMå¹¶ä¸è¿™æ ·åšã€‚ä¼ ç»Ÿä¸Šï¼Œ</strong>NVMåœ¨æ–­ç”µæˆ–å…³æœºåä»èƒ½ä¿ç•™æ•°æ®ï¼Œè¿™å¯¹å´©æºƒä¸€è‡´æ€§åº”ç”¨ç¨‹åºéå¸¸æœ‰ç”¨</strong>[9],[17]ï¼Œå¹¶èƒ½æ‰¿è½½å¿«é€Ÿè®¿é—®æ–‡ä»¶[52]ã€‚ç„¶è€Œï¼Œæ–°å…´çš„NVMçš„è¯»å†™å»¶è¿Ÿæ¯”DRAMçš„å»¶è¿Ÿè¦ä½å¾ˆå¤šã€‚ä¾‹å¦‚ï¼Œåœ¨è‹±ç‰¹å°”çš„OptaneDCä¸Šï¼Œè¯»å–å»¶è¿Ÿä¸º300nsï¼Œè€ŒDRAMçš„è¯»å–å»¶è¿Ÿæ¥è¿‘70ns[46]4.3å€æ…¢çš„è¯»å–è®¿é—®ã€‚è™½ç„¶NVMçš„<strong>å†™å»¶è¿Ÿå¯ä»¥é€šè¿‡å¤–éƒ¨ç¼“å†²æˆ–åˆ©ç”¨ç”µæ± æ”¯æŒçš„å†…éƒ¨å†™ç¼“å†²å™¨æ¥éšè—</strong>(ä¾‹å¦‚ï¼Œ è‹±ç‰¹å°”çš„Optane DC)å†™å…¥å»¶è¿Ÿé˜Ÿåˆ—)ï¼ŒNVMçš„è®¾å¤‡å†™å…¥å»¶è¿Ÿå¯ä»¥æ¯”DRAMçš„å»¶è¿Ÿæ…¢åå€[13],[33]ã€‚</p><p>æ–°å…´NVMæŒä¹…ç‰¹å¾çš„æœªæ¥å¯¹äºè®¸å¤š<strong>æ•°æ®æ¢å¤å’Œå´©æºƒä¸€è‡´æ€§è‡³å…³é‡è¦çš„åº”ç”¨</strong>æ˜¯æœ‰å¸å¼•åŠ›çš„[40]ã€‚æ­¤å¤–ï¼Œæ–°å…´çš„NVMå…è®¸ç›´æ¥è®¿é—®å’Œæ›´æ–°æŒä¹…æ€§æ–‡ä»¶ï¼Œè€Œä¸ä¼šäº§ç”Ÿæ˜‚è´µçš„ç¼ºé¡µ[52]ã€‚ä¾‹å¦‚ï¼Œæ•°æ®åº“çš„åœ¨NVMä¸Šå¯ä»¥æœ‰å‡ ç™¾ä¸ªåƒå…†å­—èŠ‚ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œè¯»å†™æ“ä½œï¼Œç±»ä¼¼äºDRAM[52],[59]ã€‚æ­¤å¤–ï¼Œè‹±ç‰¹å°”çš„æŒä¹…æ€§å†…å­˜å¼€å‘å·¥å…·åŒ…( PMDK)å…è®¸å¼€å‘åº”ç”¨ç¨‹åºï¼Œ<strong>åˆ©ç”¨NVMçš„æŒä¹…æ€§å¯¹å…³é”®æ•°æ®ç»“æ„è¿›è¡ŒæŒä¹…æ›´æ–°[9]ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåœ¨å´©æºƒä¹‹åï¼ŒæŒä¹…æ€§åº”ç”¨ç¨‹åºåº”è¯¥èƒ½å¤Ÿé€šè¿‡ä»NVMè¯»å–æ•°æ®ç»“æ„æ¥æ¢å¤</strong>[14]ã€‚ç„¶è€Œï¼ŒNVMçš„å¤§çš„è¯»/å†™å»¶è¿Ÿä¼šå¤§å¤§å‡æ…¢å¯¹æŒä¹…æ€§æ•°æ®çš„è®¿é—®ã€‚åœ¨å…¶ä»–æ–¹é¢ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéœ€è¦åœ¨ä½¿ç”¨ä½(ç›¸å¯¹äºDRAM)çš„NVMå’Œä½¿ç”¨DRAMä¹‹é—´åšå‡ºé€‰æ‹©ï¼Œå‰è€…å¯ä»¥å®ç°å´©æºƒä¸€è‡´æ€§ ï¼Œåè€…åˆ™ä¼šå¤±å»å†…å­˜å­ç³»ç»Ÿä¸­çš„æŒä¹…æ€§èƒ½åŠ›ã€‚éšç€æ–°å…´çš„NVMsçš„ä¸æ–­é‡‡ç”¨ï¼Œä»¥åŠæŒä¹…æ€§ç¼–ç¨‹åº“( å¦‚PMDK)çš„æ—¥ç›Šæ™®åŠï¼Œæˆ‘ä»¬é¢„è®¡è¶Šæ¥è¶Šå¤šçš„åº”ç”¨ç¨‹åºå°†åˆ©ç”¨NVMsçš„æŒä¹…æ€§åŠŸèƒ½ã€‚å› æ­¤ï¼Œæé«˜è¿™ç±»åº”ç”¨çš„æ€§èƒ½ï¼ŒåŒæ—¶ä¿è¯æ•°æ®çš„æŒä¹…æ€§æ˜¯ä¸€ä¸ªå…³é”®çš„è®¾è®¡ç‚¹ã€‚</p><p>æ–°å…´çš„NVMå¯ä»¥ä½œä¸ºå­˜å‚¨è®¾å¤‡( ä¾‹å¦‚ï¼Œåœ¨SSDå†…)å¦‚è‹±ç‰¹å°”çš„Optaneç¡¬ç›˜[1] ï¼Œæˆ–ä½œä¸ºéƒ¨åˆ†æˆ–ç³»ç»Ÿçš„å†…å­˜å±‚æ¬¡ã€‚ä¸ºäº†å°†NVMé›†æˆåˆ°å†…å­˜å±‚æ¬¡ä¸­ï¼Œæœ‰å¾ˆå¤šæ ‡å‡†å’Œé€‰é¡¹[2],[3],[6]ã€‚ æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè‹±ç‰¹å°”çš„ç±»ä¼¼DIMMçš„NVMæ¨¡å—( ç§°ä¸ºOptaneDC[3])å¯ä»¥ä½œä¸ºä¸»å­˜å‚¨å™¨æˆ–ä½œä¸ºä¸»å­˜å‚¨å™¨çš„ä¸€éƒ¨åˆ†ä¸å…¶ä»–å­˜å‚¨å™¨é€‰é¡¹(å¦‚DRAMå’ŒHBM)ä¸€èµ·é›†æˆã€‚åœ¨ä½œä¸ºä¸»å†…å­˜çš„ä¸€éƒ¨åˆ†ä½¿ç”¨æ—¶ï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç‰©ç†å†…å­˜æ·»åŠ åŒºï¼Œæ‰©å¤§DRAMçš„ç‰©ç†åœ°å€èŒƒå›´ï¼Œ<strong>æˆ–è€…å°†DRAMä½œä¸ºOptaneDCçš„ç‰©ç†èŒƒå›´çš„ç¡¬ä»¶ç®¡ç†ç¼“å­˜ä½¿ç”¨[3]ã€‚å‰è€…è¢«ç§°ä¸ºApp Direct æ¨¡å¼ï¼Œè¿™ç±»ä¼¼äºå°†ä¸åŒçš„å†…å­˜åŒºåŸŸæš´éœ²äºéç»Ÿä¸€å­˜å‚¨å™¨ä½“ç³»ç»“æ„ï¼ˆNUMAï¼‰ä¸­çš„ç³»ç»Ÿ</strong>ã€‚æˆ‘ä»¬æŠŠåè€…ç§°ä¸ºå†…å­˜æ¨¡å¼ã€‚<strong>å†…å­˜æ¨¡å¼æ”¾å¼ƒäº†æŒä¹…æ€§ç‰¹æ€§</strong>ï¼Œå› ä¸ºå½“åº”ç”¨ç¨‹åºä»å†…éƒ¨ç¼“å­˜åˆ·æ–°å…¶æ›´æ–°æ—¶ï¼Œå¯ä»¥åœ¨æ˜“å¤±æ€§DRAMä¸­æ›´æ–°å†…å­˜å—ã€‚ç„¶è€Œï¼Œ<strong>ç”±äºDRAMç¼“å­˜å¤§é‡çš„NVMé¡µé¢ï¼Œå¯ä»¥å¤§å¤§æ”¹å–„è®¿é—®å»¶è¿Ÿ</strong>ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé¢‘ç¹ä½¿ç”¨çš„é¡µé¢ã€‚å¦ä¸€æ–¹é¢ï¼Œ<strong>ADæ¨¡å¼ç¡®ä¿äº†æ˜ å°„åˆ°NVMåœ°å€èŒƒå›´çš„é¡µé¢çš„æŒä¹…æ€§ï¼Œä½†ç”±äºå®ƒä¾èµ–äºå®¹é‡æœ‰é™çš„å†…éƒ¨å¤„ç†å™¨ç¼“å­˜(è€Œä¸æ˜¯å¤–éƒ¨DRAM)ï¼Œå› æ­¤ä¼šäº§ç”Ÿå·¨å¤§çš„æˆæœ¬</strong>ã€‚   å› æ­¤ï¼Œç›®å‰Optaneå†…å­˜æ¨¡å¼çš„é›†æˆæ“ä½œï¼Œå¿½ç•¥äº†æŒä¹…æ€§åº”ç”¨å¯¹æŒä¹…å’Œé«˜æ€§èƒ½çš„éœ€æ±‚ã€‚</p><p>JEDECè¿˜ä¸ºå«æœ‰NVMçš„å†…å­˜æ¨¡å—æä¾›äº†å‡ ç§æ ‡å‡†ã€‚ç‰¹åˆ«çš„ï¼ŒJEDECä¸ºå«æœ‰NVMçš„DIMM (ç§°ä¸ºNVDIMM)å®šä¹‰äº†ä¸‰ç§ä¸åŒçš„æ ‡å‡†ï¼Œå³NVDIMM-Nã€NVDIMM-På’ŒNVDIMM-F[5], [6]ã€‚è¿™ä¸‰ç§ä¸åŒçš„é€‰æ‹©æä¾›äº†ä¸åŒçš„æš´éœ²å®¹é‡ã€æŒä¹…æ€§ä¿è¯å’Œç®¡ç†å¤æ‚æ€§çš„æŠ˜ä¸­ã€‚ç‰¹åˆ«çš„ï¼ŒNVDIMM-Nåªå°†DRAMæš´éœ²ç»™è½¯ä»¶ï¼Œå¹¶åœ¨å´©æºƒæœŸé—´åˆ©ç”¨è¶…çº§ç”µå®¹å™¨ä¸ºDIMMä¾›ç”µï¼Œæä¾›å°†DRAMæ•°æ®å¤åˆ¶åˆ°NVMçš„èƒ½åŠ›( ç›®å‰æ˜¯ flash-basedåŸºäºé—ªå­˜çš„)ã€‚å› æ­¤ï¼ŒNVDIMM-Nå…·æœ‰ç±»ä¼¼äºDRAMçš„<strong>æš´éœ²å»¶è¿Ÿ</strong>ï¼Œä½†å°†å†…å­˜å®¹é‡é™åˆ¶åœ¨DRAMå¤§å°ã€‚NVDIMM-Få°‡NVM (ç›®å‰æ˜¯åŸºäºé—ªå­˜)æš´éœ²ç»™è½¯ä»¶ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªå—è®¾å¤‡ç›´æ¥è®¿é—®ã€‚å¹³å‡è€Œè¨€ï¼ŒNVDIMM-På¯¹ä¸åŒçš„NVMæŠ€æœ¯æœ‰æ›´å¹¿æ³›çš„å®šä¹‰ï¼Œå¹¶å…è®¸å†…éƒ¨DRAMç¼“å­˜ä¸NVDIMM-Pçš„å‡ ä¸ªæŒä¹…æ€§é€‰é¡¹ï¼Œå¦‚<strong>æ·±å†²å‘½ä»¤</strong>ï¼Œå› ä¸ºNVDIMM-Pæ²¡æœ‰èƒ½é‡æ”¯æŒã€‚NVDIMM-Pçš„ä¸€ä¸ªä¸»è¦ä¼˜æ˜¯å®ƒåˆ©ç”¨äº†<strong>ä¸€ä¸ªäº¤æ˜“åè®®ï¼Œå…è®¸å®ƒä½¿ç”¨éç¡®å®šæ€§çš„æ—¶é—´</strong>ï¼Œä¸NVDIMM-Nå’ŒNVDIMM-Fç›¸æ¯”ï¼Œå®ƒä¾èµ–äºç¡®å®šæ€§çš„æ—¶é—´ã€‚æ˜¾ç„¶ï¼Œåœ¨è¿™ä¸‰ç§é€‰æ‹©ä¸­ï¼ŒNVDIMM-Pæ˜¯æœ€é€‚åˆæ–°å…´çš„NVM (ä¸æ˜¯ä¸ºé—ªå­˜å®šåˆ¶çš„)å’Œé«˜å®¹é‡ç³»ç»Ÿã€‚æ­¤å¤–ï¼Œç”±äºDIMMä¸Šæœ‰é«˜æ•ˆçš„èƒ½æºæ”¯æŒï¼Œå†…éƒ¨DRAMå¯ä»¥è¢«è®¤ä¸ºæ˜¯NVDIMMæ¨¡å—å†…çš„NVMçš„ä¸€ä¸ªé«˜é€Ÿç¼“å­˜ã€‚NVDIMM-Pæ²¡æœ‰èƒ½é‡æ”¯æŒï¼ˆenergy-backingï¼‰ï¼Œé™¤äº†DRAMç¼“å­˜åœ¨NVDIMM-Pä¸­è€Œä¸æ˜¯åƒå†…å­˜æ¨¡å¼ä¸‹çš„ç‹¬ç«‹æ¨¡å—ï¼Œå…¶ä»–ä¸å†…å­˜æ¨¡å¼ä¸‹çš„Intelâ€™s Optane DCç±»ä¼¼ã€‚</p><p>è™½ç„¶NVDIMM-Pä½œä¸ºä¸€ä¸ªæ¦‚å¿µå¾ˆæœ‰è¶£ï¼Œä½†ç”±äºä»¥ä¸‹åŸå› ï¼Œå¯¹äºå¤§å®¹é‡çš„NVMå¿«é€Ÿå’ŒæŒä¹…çš„ç¼“å­˜èƒ½åŠ›æ˜¯æœ‰é™çš„ã€‚é¦–å…ˆï¼Œå¦‚æœéœ€è¦å‡ åæˆ–å‡ ç™¾GBçš„DRAMæ¥æœ‰æ•ˆåœ°ç¼“å­˜å¤§å‹NVMï¼Œé‚£ä¹ˆå°±éœ€è¦ç¬¨é‡å’Œæ½œåœ¨çš„æ˜‚è´µçš„ç”µæ± æ¥æä¾›èƒ½é‡æ”¯æŒã€‚æ­¤å¤–ï¼Œç”±äºèƒ½æºæ”¯æŒåªæ”¯æŒå†…éƒ¨DRAMï¼Œå®¢æˆ·è¢«é™åˆ¶åœ¨ç›¸åŒçš„ä¾›åº”å•†å’ŒNVDIMM-Pä¸­å¯ç”¨çš„DRAMç¼“å­˜çš„ç‰¹å®šå¤§å°å®¹é‡ã€‚å¦å¤–ï¼Œå…·æœ‰ç‹¬ç«‹çš„NVMå’ŒDRAMæ¨¡å—çš„æ æ†è€åŒ–å†…å­˜æ¨¡å¼è§£å†³äº†NVDIMM-Pçš„çµæ´»æ€§é™åˆ¶ï¼Œä½†éœ€è¦æ˜‚è´µå’Œä¸ç¯ä¿çš„( å’Œç¬¨é‡çš„)ç”µæ± æ”¯æŒ[43]ã€‚æ¢å¥è¯è¯´ï¼Œåˆ©ç”¨DRAMä½œä¸ºNVMçš„ä¸€ä¸ªå¿«é€ŸæŒä¹…çš„ç¼“å­˜ï¼Œå—åˆ°èƒ½æºæ”¯æŒ(æˆ–ç‹¬ç«‹èƒ½æº)èƒ½åŠ›çš„é™åˆ¶ï¼Œç„¶è€Œè¿™ç§èƒ½åŠ›éœ€è¦åœ¨éœ€è¦å¤§å‹DRAMæ¨¡å—æ—¶å¾—åˆ°æ›´å¤šçš„æå‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨<strong>æœ¬æ–‡ä¸­çš„ç›®æ ‡æ˜¯å…è®¸NVMçš„éå¸¸å¿«é€Ÿçš„æŒä¹…æ€§ç¼“å­˜ï¼Œä½†ä¸éœ€è¦ä»»ä½•é¢å¤–çš„èƒ½é‡æ”¯æŒèƒ½åŠ›æ¥åˆ·æ–°ï¼ˆflushï¼‰DRAMç¼“å­˜å†…å®¹åˆ°NVM</strong>ã€‚å› æ­¤,<strong>æˆ‘ä»¬èƒ½å¤Ÿåœ¨æœ‰NVMçš„ç³»ç»Ÿä¸­é›†æˆé¦–é€‰çš„DRAMæ¨¡å—ï¼ŒåŒæ—¶ä¹Ÿèƒ½åœ¨DRAMä¸­å®ç°æŒä¹…æ€§æ•°æ®çš„ç¼“å­˜ï¼Œè€Œä¸ç‰ºç‰²æŒä¹…æ€§æˆ–éœ€è¦é¢å¤–çš„ç”µæ± æ”¯æŒèƒ½åŠ›ã€‚</strong></p><p>ä¸ºäº†å®ç°NVMçš„å¿«é€ŸæŒä¹…çš„DRAMç¼“å­˜ï¼Œæˆ‘ä»¬åˆ©ç”¨<strong>é€‰æ‹©æ€§çš„NVMé•œåƒ</strong>å¯¹ç¼“å­˜åœ¨DRAMä¸­çš„æŒä¹…é¡µé¢è¿›è¡Œäº†æ–°çš„å†…å­˜æ§åˆ¶å™¨ã€‚<strong>æˆ‘ä»¬çš„æ–¹æ³•æ”¯æŒä¸¤ç§å†…å­˜æ¨¡å¼å’ŒADæ¨¡å¼</strong>ï¼Œå¹¶èƒ½ç¡®ä¿å¯¹ç¼“å­˜åœ¨DRAMä¸­çš„æŒä¹…é¡µé¢çš„æ›´æ–°çš„æŒä¹…æ€§ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„å†…å­˜æ§åˆ¶å™¨é€šè¿‡æ”¾æ¾å¯¹DRAMç¼“å­˜é¡µæ›´æ–°çš„é•œåƒï¼Œ <strong>å°†å†™å…¥NVMçš„æ¬¡æ•°é™åˆ°æœ€ä½</strong>ï¼Œå¦‚æœä»–ä»¬åœ¨NVMä¸­çš„æºé¡µæ˜¯åœ¨NVMçš„é€»è¾‘éæŒä¹…æ€§éƒ¨åˆ†(å³ï¼Œç”¨äºæ”¯æŒä¸éœ€è¦æŒä¹…åŒ–çš„é¡µé¢)ã€‚ç±»ä¼¼äºå½“å‰å¤„ç†å™¨ä¸­çš„å†…å­˜æ¨¡å¼æ”¯æŒæˆ‘ä»¬çš„å†…å­˜æ§åˆ¶å™¨é€æ˜åœ°åœ¨NVMå’ŒDRAMä¹‹é—´è¿ç§»é¡µé¢ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬é€šè¿‡ä»NVMä¸­çš„åŸå§‹åœ°å€æ¨æ–­å‡ºå…¶è¯­ä¹‰æ¥ç¡®ä¿DRAMç¼“å­˜é¡µçš„æŒä¹…æ€§ã€‚å¦‚æœé¡µé¢è¢«ç¼“å­˜åœ¨DRAMä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆåªä¼šäº§ç”Ÿé¢å¤–çš„å†™å…¥ï¼Œæ­¤å¤–ï¼ŒNVMçš„å†™å…¥ä¹Ÿä¼šå‘ç”Ÿã€‚ç„¶è€Œï¼Œæœªæ¥çš„è¯»å–å°†ä»DRAMä¸­è¿›è¡Œï¼Œè¿™ä½¿å¾—å¿«é€Ÿå’ŒæŒä¹…çš„NVMé¡µé¢çš„ç¼“å­˜æˆä¸ºå¯èƒ½ã€‚æ­¤å¤–ï¼Œé€šè¿‡å…è®¸æŒä¹…æ€§é¡µé¢ä½äºDRAMä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆåˆ©ç”¨é¢å¤–çš„é“¶è¡Œçº§åˆ«çš„å¹¶è¡Œæ€§æ¥è®¿é—®æŒä¹…æ€§é¡µé¢ï¼Œè€Œä¸æ˜¯å¼ºè¿«æ‰€æœ‰çš„è®¿é—®åˆ°NVMã€‚æˆ‘ä»¬çš„æ–¹æ¡ˆåœ¨ç²¾ç¥ä¸Šç±»ä¼¼äºå†…éƒ¨å¤„ç†å™¨ç¼“å­˜ä¸­é€šå¸¸ä½¿ç”¨çš„write-throughæ–¹æ¡ˆï¼Œä½†æ˜¯ç”±äºå†™çš„æ€§è´¨å’ŒDRAMå¦‚ä½•æš´éœ²ç»™ç³»ç»Ÿ(å†…å­˜æ¨¡å¼æˆ–åº”ç”¨ç›´æ¥æ¨¡å¼)ï¼Œæ¶‰åŠåˆ°æ–°çš„ä¼˜åŒ–å’Œè®¾è®¡è€ƒè™‘ã€‚è™½<strong>ç„¶ä¹‹å‰æ‰€æœ‰å…³äºæŒä¹…åŒ–åº”ç”¨çš„å·¥ä½œéƒ½æ¢è®¨äº†å¯¹æŒä¹…åŒ–å¯¹è±¡çš„å†™çš„ä¼˜åŒ–ï¼Œä½†è¿™æ˜¯ç¬¬ä¸€ä¸ªæ¢è®¨å¯¹æŒä¹…åŒ–å¯¹è±¡çš„è¯»æ“ä½œè¿›è¡Œä¼˜åŒ–çš„å·¥ä½œ</strong>ã€‚</p><p>ä¸ºäº†è¯„ä¼°æˆ‘ä»¬çš„è®¾è®¡ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†WhisperåŸºå‡†[41]ä¸­çš„æŒä¹…æ€§åº”ç”¨ç¨‹åºã€‚ä¸ºäº†ç ”ç©¶æˆ‘ä»¬æ–¹æ³•çš„å¯é æ€§ï¼Œæˆ‘ä»¬è¿˜å¼€å‘äº†6ä¸ªå†…å­˜å¯†é›†å‹åŸºå‡†ï¼Œç±»ä¼¼äºJanus[37]ä»¥å‰çš„å·¥ä½œã€‚ ä¸€ä¸ªå¼€æ”¾æºç çš„æ¶æ„æ¨¡æ‹Ÿå™¨ï¼Œç»“æ„æ¨¡æ‹Ÿå·¥å…·åŒ…(SST) [50]ç”¨æ¥è¢«æ¨¡ä»¿æˆ‘ä»¬çš„æ–¹æ³•ã€‚å¹³å‡æ¥è¯´ï¼Œä¸åªä½¿ç”¨NVMæŒä¹…æ€§åº”ç”¨ç›¸æ¯”ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°<strong>42.02%æ€§èƒ½çš„æé«˜å’Œ88.28%NVMçš„è¯»å–å‡å°‘</strong>ã€‚è¯·æ³¨æ„ï¼Œå¯¹æŒä¹…æ€§æ•°æ®åªä½¿ç”¨NVMæ˜¯å”¯ä¸€å…è®¸åœ¨æ²¡æœ‰ä»»ä½•å¤‡ç”¨ç”µæ± çš„æƒ…å†µä¸‹è¿›è¡Œæ•°æ®æŒä¹…åŒ–çš„é€‰æ‹©ï¼Œå› æ­¤è¢«ä½œä¸ºæˆ‘ä»¬çš„åŸºçº¿ä½¿ç”¨ã€‚<br>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬çš„å·¥ä½œçš„è´¡çŒ®å¦‚ä¸‹ã€‚</p><ul><li>æˆ‘ä»¬æå‡ºäº†Stealth-Persistï¼Œè¿™æ˜¯ä¸€ç§æ–°çš„ç¡¬ä»¶æ”¯æŒï¼Œ é€šè¿‡åœ¨DRAMä¸­å®ç°å¯¹çƒ­æŒä¹…é¡µçš„ç¼“å­˜æ¥æé«˜æŒä¹…æ€§åº”ç”¨çš„æ€§èƒ½ï¼ŒåŒæ—¶ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§ï¼Œä¸éœ€è¦å¤–éƒ¨ç”µæºæ”¯æŒä¸”è½¯ä»¶é€æ˜ã€‚</li><li>æˆ‘ä»¬è®¨è®ºäº†å°†Stealth-Persistä¸æ··åˆDRAM-NVMä¸»å­˜å‚¨å™¨ç³»ç»Ÿçš„å®ç°å‚ç›´å’Œæ°´å¹³çš„ç›¸ç»“åˆã€‚</li><li>æˆ‘ä»¬è®¨è®ºäº†Stealth-Persistçš„è®¾è®¡æ–¹æ¡ˆï¼Œåœ¨æ–¹æ¡ˆæ€§èƒ½å’Œé•œåƒé¡µé¢çš„æ•°é‡ä¹‹é—´è¿›è¡Œäº†æƒè¡¡ã€‚</li><li>æˆ‘ä»¬å¹¿æ³›åœ°åˆ†æäº†Stealth-Persiståœ¨ä¸åŒçš„åŒºåŸŸå¤§å°ã€ä¸åŒçš„æ›¿æ¢ç­–ç•¥å’Œä¸åŒçš„é•œåƒé˜ˆå€¼ä¸‹çš„å¼€é”€ã€‚</li></ul><h1 id="äºŒã€èƒŒæ™¯"><a href="#äºŒã€èƒŒæ™¯" class="headerlink" title="äºŒã€èƒŒæ™¯"></a>äºŒã€èƒŒæ™¯</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸æˆ‘ä»¬çš„å·¥ä½œç›¸å…³çš„ä¸»é¢˜ï¼Œä»¥å¸®åŠ©è¯»è€…äº†è§£æˆ‘ä»¬çš„å·¥ä½œï¼Œç„¶åæ˜¯å·¥ä½œåŠ¨æœºã€‚</p><h2 id="A-æ–°å…´çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨"><a href="#A-æ–°å…´çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨" class="headerlink" title="A.æ–°å…´çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨"></a>A.æ–°å…´çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨</h2><p>æ–°å…´çš„NVMï¼Œå¦‚3DXPointå’Œè‹±ç‰¹å°”çš„OptaneDCï¼Œå…·æœ‰æ›´é«˜çš„å¯†åº¦ã€å­—èŠ‚å¯»å€èƒ½åŠ›ã€æ›´ä½çš„æ¯æ¯”ç‰¹æˆæœ¬ã€æ¯”DRAMæ›´ä½çš„ç©ºé—²åŠŸè€—å’Œéæ˜“å¤±æ€§ï¼Œä½†å…·æœ‰<strong>æ›´é«˜çš„è®¿é—®å»¶è¿Ÿå’Œæœ‰é™çš„å†™å…¥è€ä¹…æ€§</strong>[15],[32],[33],[35]ã€‚ä¾‹å¦‚ï¼ŒNVM-based DIMMå¯ä»¥è¢«ç”¨æ¥å­˜å‚¨æ–‡ä»¶å’Œå†…å­˜é¡µï¼Œå®ƒå¯ä»¥ä½¿ç”¨å¸¸è§„çš„åŠ è½½/å­˜å‚¨æ“ä½œæ¥è®¿é—®ã€‚ä¸ºäº†å®ç°è¿™ç§ç±»å‹çš„è®¿é—®ï¼Œæœ€è¿‘çš„æ“ä½œç³»ç»Ÿ(OS)å¼€å§‹æ”¯æŒé€šè¿‡DAXæ–‡ä»¶ç³»ç»Ÿ[52]å°†å†…å­˜é…ç½®ä¸ºæŒä¹…æ€§æˆ–éæŒä¹…æ€§ã€‚åœ¨DAXæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶å¯ä»¥ç›´æ¥è¢«å†…å­˜æ˜ å°„å’Œä½¿ç”¨å¸¸è§„çš„åŠ è½½/å­˜å‚¨æ“ä½œè®¿é—®ï¼Œè€Œä¸éœ€è¦å°†å…¶å†…å®¹å¤åˆ¶åˆ°é¡µé¢ç¼“å­˜ä¸­[15]ã€‚ç„¶è€Œï¼Œ<strong>NVMçš„è®¿é—®å»¶è¿Ÿæ¯”DRAMçš„è®¿é—®å»¶è¿Ÿæ…¢3-4å€</strong>ã€‚å› æ­¤ï¼Œç ”ç©¶è€…ä¸»å¼ å»ºç«‹åŒæ—¶å…·æœ‰NVMå’ŒDRAMéƒ¨åˆ†çš„å†…å­˜ç³»ç»Ÿ[48]ï¼Œ[62]ã€‚</p><h2 id="B-æ··åˆä¸»å­˜å‚¨å™¨-HMM"><a href="#B-æ··åˆä¸»å­˜å‚¨å™¨-HMM" class="headerlink" title="B.æ··åˆä¸»å­˜å‚¨å™¨(HMM)"></a>B.æ··åˆä¸»å­˜å‚¨å™¨(HMM)</h2><p>æ··åˆä¸»å­˜å‚¨å™¨( HMM)ç³»ç»Ÿç”±äºå…¶å¯†åº¦å’Œè¶…ä½çš„ç©ºé—²åŠŸç‡ï¼Œé¢„è®¡å°†æœ‰å¾ˆå¤§çš„NVMéƒ¨åˆ†ï¼Œè€Œç”±äºå…¶å¿«é€Ÿçš„è¯»/å†™æ“ä½œDRAMéƒ¨åˆ†å°‡å¾ˆå°ã€‚HMMå¯ä»¥ä»¥ä¸¤ç§ä¸åŒçš„æ–¹å¼éƒ¨ç½²ï¼Œæ°´å¹³æˆ–å‚ç›´ã€‚åœ¨å‚ç›´æ–¹å‘ä¸Šï¼ŒNVMä½œä¸ºä¸€ä¸ªæ–°çš„å†…å­˜å±‚è¢«è¿æ¥èµ·æ¥ï¼ŒDRAMè¢«ç”¨æ¥ç¼“å­˜NVMçš„æ•°æ®[3],[6]ã€‚è¿™ç§æ–¹æ¡ˆå…è®¸æ›´å¿«åœ°è®¿é—®å¤§å‹å†…å­˜æ± ï¼Œå¹¶ä¸”éœ€è¦ç‰¹æ®Šçš„ç¡¬ä»¶å°†æ•°æ®ä»NVMè¿ç§»åˆ°DRAMï¼Œä¾‹å¦‚ï¼Œåœ¨è‹±ç‰¹å°”çš„OptaneDCå†…å­˜æ¨¡å¼ä¸‹ï¼Œè‹±ç‰¹å°”çš„Xeonå¯æ‰©å±•å¤„ç†å™¨çš„å†…å­˜æ§åˆ¶å™¨å¯¹ç¼“å­˜çº¿è¿›è¡Œç¼“å­˜ã€‚ç„¶è€Œï¼Œå› ä¸ºDRAMçš„æ³¢åŠ¨æ€§ï¼Œè¿™æ ·çš„æ–¹æ¡ˆå¹¶ä¸èƒ½æä¾›æŒä¹…æ€§ã€‚åœ¨ç¬¬äºŒç§æ–¹æ³•ä¸­ï¼ŒHMMç³»ç»Ÿçš„æ°´å¹³å®ç°å°†NVMå’ŒDRAMæš´éœ²åœ¨ç‰©ç†åœ°å€ç©ºé—´ä¸­ï¼Œå°±åƒåœ¨NVDTMM-På’ŒOptaneDCçš„ADæ¨¡å¼ä¸­é‚£æ ·ï¼Œå¦‚æœéœ€è¦çš„è¯ä¾é OSæ¥å¤„ç†æ•°æ®è®¿é—®å’Œé¡µé¢è¿ç§»[27],[47],[48],[58]ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œ éœ€è¦æœ‰æ··åˆå†…å­˜ç®¡ç†æ–¹æ¡ˆï¼Œç®¡ç†ä¸åŒçš„æŒä¹…æ€§å’Œæ€§èƒ½è¦æ±‚ã€‚</p><p>æ–‡çŒ®ä¸­æå‡ºäº†åŸºäºå†…å­˜å±‚æ¬¡çš„ä¸åŒæ··åˆå†…å­˜ç®¡ç†æ–¹æ¡ˆã€‚è¯¸å¦‚HetroOs[27]ã€RTHMS[44]å’ŒNimble[58]æå‡ºäº†è½¯ä»¶è§£å†³æ–¹æ¡ˆï¼Œä»¥æ£€æµ‹å“ªäº›é¡µé¢éœ€è¦è¿ç§»åˆ°æœ€å¿«çš„å†…å­˜(ä¾‹å¦‚ï¼ŒDRAM)ã€‚å½“DRAMå’ŒNVMéƒ½è¢«å†…å­˜æ˜ å°„å¹¶æš´éœ²ç»™æ“ä½œç³»ç»Ÿæ—¶ï¼Œè¿™äº›æ–¹æ¡ˆé€‚ç”¨äº<strong>æ··åˆå†…å­˜ç³»ç»Ÿçš„æ°´å¹³å®æ–½</strong>ã€‚å¦ä¸€æ–¹é¢ï¼Œæ··åˆå†…å­˜ç³»ç»Ÿçš„å‚ç›´å®æ–½å°†DRAMä½œä¸ºä¸€ä¸ªç¼“å­˜ã€‚å› æ­¤ï¼ŒDRAMæ²¡æœ‰æš´éœ²ç»™æ“ä½œç³»ç»Ÿï¼Œå…¶ä¸­ç¼“å­˜é¡µä½¿ç”¨ä¸“ç”¨ç¡¬ä»¶å¤„ç†ï¼Œé€šå¸¸æ˜¯å†…å­˜æ§åˆ¶å™¨çš„æ‰©å±•ï¼Œå¦‚è‹±ç‰¹å°”çš„OptaneDCå†…å­˜æ¨¡å¼[3]ã€‚åƒRamosç­‰äºº[48]æå‡ºçš„æ–¹æ¡ˆï¼Œæ ¹æ®æ¯ä¸ªé¡µé¢è¢«è®¿é—®çš„é¢‘ç‡ï¼Œä½¿ç”¨å¤šé˜Ÿåˆ—(MQ)ç»“æ„å¯¹é¡µé¢è¿›è¡Œæ’åï¼Œç„¶åä½¿ç”¨é¡µé¢çš„æ’åæ¥å†³å®šå“ªäº›é¡µé¢éœ€è¦è¿ç§»åˆ°DRAMä¸­ï¼Œå“ªäº›é¡µé¢éœ€è¦ä¿ç•™åœ¨NVMä¸­ã€‚ç„¶è€Œï¼Œè·Ÿè¸ªæ‰€æœ‰çš„é¡µé¢å¹¶æ£€æŸ¥MQç»“æ„æ¥æå‡å’Œé™ä½é¡µé¢çš„ç­‰çº§ä¼šäº§ç”Ÿå¾ˆé«˜çš„å¼€é”€ï¼Œå› æ­¤åœ¨æ¯ä¸ªæ—¶é—´æ®µåªæ£€æŸ¥é˜Ÿåˆ—çš„å¤´éƒ¨ã€‚åœ¨è®¨è®ºäº†æ··åˆå†…å­˜ç³»ç»Ÿçš„ç®¡ç†æ–¹æ¡ˆä¹‹åï¼Œæˆ‘ä»¬è®¨è®ºäº†ä¸€äº›ç”¨äºHMMä¸­çš„é¡µé¢ç¼“å­˜çš„æ–¹æ¡ˆã€‚</p><h2 id="C-é¡µé¢ç¼“å­˜ç­–ç•¥"><a href="#C-é¡µé¢ç¼“å­˜ç­–ç•¥" class="headerlink" title="C.é¡µé¢ç¼“å­˜ç­–ç•¥"></a>C.é¡µé¢ç¼“å­˜ç­–ç•¥</h2><p>é¡µé¢ç¼“å­˜ç­–ç•¥æ˜¯ç”¨æ¥å†³å®šå“ªäº›é¡µé¢åº”è¯¥è¢«ç¼“å­˜åœ¨DRAMä¸­ï¼Œå¦‚æœä½ æƒ³ç¼“å­˜NVMçš„é¡µé¢ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸¤ä¸ªç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥å°†åœ¨æˆ‘ä»¬çš„è®¾è®¡ä¸­ä½¿ç”¨ã€‚</p><p><strong>é¦–æ¬¡è§¦æ‘¸ç­–ç•¥</strong>ã€‚è¯¥ç­–ç•¥åœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ç¼“å­˜é¡µé¢ï¼Œå¹¶æ ¹æ®LRUç®—æ³•é€‰æ‹©ä¸€ä¸ªé¡µé¢è¿›è¡Œé©±é€ã€‚<br><strong>å¤šé˜Ÿåˆ—(MQ)<strong>ã€‚å¤šé˜Ÿåˆ—(MQ)ã€‚MQæœ€åˆè¢«è®¾è®¡ç”¨æ¥å¯¹ç£ç›˜å—è¿›è¡Œæ’åºï¼Œåæ¥è¢«Ramosç­‰äºº[48]ç”¨äºæ··åˆå†…å­˜ç³»ç»Ÿçš„é¡µé¢æ”¾ç½®ã€‚MQçš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ã€‚MQå®šä¹‰äº†Mä¸ªå—æè¿°ç¬¦çš„LRUé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„ç¼–å·ä»0åˆ°M-1ï¼Œ é˜Ÿåˆ—M-1çš„å—æ˜¯è®¿é—®é‡æœ€å¤§çš„å—ã€‚æ¯ä¸ªæè¿°ç¬¦éƒ½åŒ…å«åŒºå—çš„ç¼–å·ã€ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨å’Œä¸€ä¸ªé€»è¾‘åˆ°æœŸæ—¶é—´ã€‚åœ¨ç¬¬ä¸€æ¬¡è®¿é—®ä¸€ä¸ªåŒºå—æ—¶ï¼Œå®ƒçš„æè¿°ç¬¦è¢«æ”¾åœ¨é˜Ÿåˆ—0çš„å°¾éƒ¨ï¼Œå…¶è¿‡æœŸæ—¶é—´è¢«æ›´æ–°ä¸º<code>CurrentTime+LifeTime</code>ã€‚è¿™</strong>ä¸¤ä¸ªæ—¶é—´éƒ½æ˜¯ä»¥è®¿é—®æ¬¡æ•°æ¥è¡¡é‡</strong>çš„ï¼Œ<code>LifeTime</code>ä»£è¡¨åœ¨åŒºå—è¿‡æœŸå‰å¯¹ä¸åŒåŒºå—çš„è¿ç»­è®¿é—®æ¬¡æ•°ã€‚æ¯æ¬¡åŒºå—è¢«è®¿é—®æ—¶ï¼Œå…¶è¿‡æœŸæ—¶é—´è¢«é‡ç½®ä¸º<code>CurrentTime +LifeTime</code>ï¼Œå…¶å¼•ç”¨è®¡æ•°å™¨è¢«é€’å¢ï¼Œå…¶æè¿°ç¬¦è¢«æ¨åˆ°å…¶å½“å‰é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚åœ¨é˜Ÿåˆ—iä¸­çš„å—çš„æè¿°ç¬¦è¢«è®¿é—®äº†ä¸€å®šæ•°é‡åï¼Œå®ƒè¢«æå‡åˆ°é˜Ÿåˆ—i+1ï¼Œåœ¨é˜Ÿåˆ—M-1ä¸­è¾¾åˆ°é¥±å’Œã€‚å¦ä¸€æ–¹é¢ï¼Œæœ€è¿‘æ²¡æœ‰è¢«è®¿é—®çš„åŒºå—ä¼šè¢«é™çº§ã€‚åœ¨æ¯æ¬¡è®¿é—®æ—¶ï¼Œæ‰€æœ‰é˜Ÿåˆ—å¤´éƒ¨çš„æè¿°ç¬¦éƒ½è¢«æ£€æŸ¥æ˜¯å¦è¿‡æœŸã€‚å¦‚æœæè¿°ç¬¦è¿‡æœŸäº†ï¼Œå®ƒå°±è¢«æ”¾åœ¨ä¸‹é¢é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œå…¶ç”Ÿå‘½æ—¶é—´è¢«é‡ç½®ï¼Œå…¶é™çº§æ ‡å¿—ä¹Ÿè¢«è®¾ç½®[48]ã€‚å¦‚æœä¸€ä¸ªæè¿°ç¬¦è¿ç»­æ”¶åˆ°ä¸¤æ¬¡é™çº§ï¼Œè¯¥æè¿°ç¬¦å°†è¢«ä»MQç»“æ„åˆ é™¤ã€‚ä¸ºäº†å‡å°‘å‡çº§/è¿ç§»çš„å¼€é”€ï¼Œè¿™äº›æ“ä½œåªåœ¨æ¯ä¸ªå‘¨æœŸç»“æŸæ—¶è¿›è¡Œã€‚</p><p>ç”±äºå·²ç»è¯æ˜MQåœ¨é€‰æ‹©è¦æ›¿æ¢çš„é¡µé¢æ–¹é¢ä¼˜äºå…¶ä»–ç®—æ³•[48], [64], å®ƒä¸æˆ‘ä»¬çš„ç›®æ ‡ä¸€è‡´ã€‚å› ä¸ºå®ƒæœ‰åŠ©äºæ£€æµ‹å‡ºæ€§èƒ½å…³é”®çš„é¡µã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Ramosç­‰äººæå‡ºçš„MQè®¾è®¡[48]ã€‚åœ¨è®¨è®ºäº†ç¼“å­˜ç­–ç•¥ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨æåˆ°äº†ç›®å‰å¯ç”¨çš„å·¥ä¸šæ··åˆå†…å­˜ç³»ç»Ÿçš„å®ç°ã€‚</p><h2 id="D-ç›®å‰çš„å·¥ä¸šHMMç³»ç»Ÿ"><a href="#D-ç›®å‰çš„å·¥ä¸šHMMç³»ç»Ÿ" class="headerlink" title="D. ç›®å‰çš„å·¥ä¸šHMMç³»ç»Ÿ"></a>D. ç›®å‰çš„å·¥ä¸šHMMç³»ç»Ÿ</h2><p>ç›®å‰ï¼Œå¸‚åœºä¸Šæœ‰ä¸åŒç±»å‹çš„HMMç³»ç»Ÿã€‚ä¾‹å¦‚ï¼ŒJEDECå®šä¹‰äº†ä¸‰ç§ä¸åŒçš„è¢«ç§°ä¸ºNVDIMMçš„HMMæ ‡å‡†ã€‚NVDIMMç±»å‹æœ‰ä¸åŒçš„ç‰¹ç‚¹ã€æŒä¹…æ€§å’Œæ€§èƒ½ç‰¹å¾ã€‚æ­¤å¤–ï¼Œè‹±ç‰¹å°”æœ€è¿‘é€éœ²äº†å…³äºOptane DCçš„å†…å­˜æ¨¡å¼å’ŒADæ¨¡å¼çš„ç»†èŠ‚ã€‚<br><strong>NVDIMM-N</strong>åŒ…å«ä¸€ä¸ªDRAMéƒ¨åˆ†ï¼Œä¸€ä¸ªNVMéƒ¨åˆ†ï¼Œä»¥åŠä¸€ä¸ªè¶…çº§ç”µå®¹ã€‚ç³»ç»Ÿåœ¨æ­£å¸¸æ‰§è¡Œæ—¶ä½¿ç”¨DRAMï¼Œè€ŒNVMåªåœ¨å´©æºƒæ—¶ä½¿ç”¨è¶…çº§ç”µå®¹ä¾›ç”µç”¨äºå¤åˆ¶DRAMæ•°æ®ã€‚[6]<br><strong>NVDIMM-F</strong>æ¨¡å—æ˜¯è¿æ¥åˆ°DDRæ€»çº¿ä¸Šçš„NVMï¼Œå®ƒçš„è®¿é—®å»¶è¿Ÿç›¸å¯¹é«˜äºDRAMã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿä¸­å®‰è£…ä¸€ä¸ªDRAMï¼Œå¹¶ç”¨äºç¼“å­˜NVDIMM-Fçš„æ•°æ®ï¼Œä»£ä»·æ˜¯æ•°æ®çš„æŒä¹…æ€§|6]ã€‚<br><strong>NVDIMM-P</strong>ä»ç„¶æ˜¯ä¸€ä¸ªDIMMçš„å»ºè®®ï¼Œå®ƒæœ‰å†…å­˜æ˜ å°„çš„DRAMå’ŒNVMï¼Œå…¶ä¸­è½¯ä»¶æ ¹æ®æ•°æ®çš„å¤§å°å’ŒæŒä¹…æ€§è¦æ±‚å°†æ•°æ®æ”¾åœ¨NVMæˆ–NVDIMMä¸­ã€‚<br><strong>Optane DCå†…å­˜æ¨¡å¼</strong>æ˜¯è‹±ç‰¹å°”æŒä¹…æ€§å†…å­˜çš„ä¸€ç§æ“ä½œæ¨¡å¼ã€‚å®ƒç±»ä¼¼äºNVDIMM-Pã€‚</p><h2 id="E-æŒä¹…æ€§å†…å­˜ç¼–ç¨‹æ¨¡å¼"><a href="#E-æŒä¹…æ€§å†…å­˜ç¼–ç¨‹æ¨¡å¼" class="headerlink" title="E. æŒä¹…æ€§å†…å­˜ç¼–ç¨‹æ¨¡å¼"></a>E. æŒä¹…æ€§å†…å­˜ç¼–ç¨‹æ¨¡å¼</h2><p>ç”±äºNVMçš„æŒä¹…æ€§ç‰¹ç‚¹ï¼Œè®¿é—®ä¸€ä¸ªNVMå†…å­˜å¯¹è±¡å°±åƒè®¿é—®ä¸€ä¸ªå­˜å‚¨æ–‡ä»¶ã€‚å› æ­¤ã€‚åº”ç”¨ç¨‹åºéœ€è¦ä¸€ç§æ–¹æ³•æ¥é‡æ–°è¿æ¥åˆ°å…ˆå‰åˆ†é…çš„å­˜å‚¨å™¨å¯¹è±¡ã€‚å› æ­¤ï¼ŒæŒä¹…æ€§å†…å­˜åŒºåŸŸéœ€è¦åç§°å’Œè®¿é—®æ§åˆ¶æ¥è¿›è¡Œè®¿é—®ã€‚å­˜å‚¨ç½‘ç»œå·¥ä¸šåä¼šï¼ˆSNIAï¼‰å»ºè®®æ“ä½œç³»ç»Ÿæä¾›å‘½åã€æƒé™å’Œå†…å­˜æ˜ å°„çš„æ ‡å‡†æ–‡ä»¶è¯­ä¹‰ã€‚å› æ­¤ï¼Œä¸€äº›æ“ä½œç³»ç»Ÿå¢åŠ äº†å¯¹æ–‡ä»¶ç³»ç»Ÿçš„ç›´æ¥è®¿é—®ï¼ˆDAXï¼‰æ”¯æŒ[4]ã€‚DAXå…è®¸åº”ç”¨ç¨‹åºç›´æ¥ä½¿ç”¨æŒä¹…æ€§å†…å­˜è€Œä¸ä½¿ç”¨ç³»ç»Ÿçš„é¡µç¼“å­˜ã€‚å›¾1æ˜¾ç¤ºäº†æŒä¹…æ€§å†…å­˜æ„ŸçŸ¥æ–‡ä»¶ç³»ç»Ÿçš„å·¥ä½œåŸç†[52]ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d916d5cd134a4909a11c4901a00fe76b.png"></p><p>ä½¿ç”¨æŒä¹…æ€§å†…å­˜ï¼ˆPMï¼‰å¯¹è±¡éœ€è¦ç¨‹åºå‘˜è€ƒè™‘å¤šä¸ªé—®é¢˜ä»¥ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§å’Œä¸€è‡´æ€§ã€‚å…¶ä¸­ä¸€ä¸ªé—®é¢˜æ˜¯åŸå­æ€§ï¼›ä»€ä¹ˆæ ·çš„æ”¯æŒç”±ç¡¬ä»¶æä¾›ï¼Œè€Œä»€ä¹ˆæ˜¯ç•™ç»™è½¯ä»¶å¤„ç†çš„[52]ã€‚è‹±ç‰¹å°”çš„ç¡¬ä»¶ç¡®ä¿äº†8å­—èŠ‚å†™å…¥çš„åŸå­æ€§ï¼Œå› æ­¤å¦‚æœä¸€ä¸ªå¯¹è±¡å¤§äº8å­—èŠ‚ï¼Œé‚£ä¹ˆè½¯ä»¶å°±æœ‰è´£ä»»ç¡®ä¿æ›´æ–°å¯¹è±¡çš„åŸå­æ€§[52]ã€‚æ­¤å¤–ï¼Œ<strong>ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§éœ€è¦å°†æ•°æ®ä¸€ç›´æ¨é€åˆ°æŒä¹…æ€§é¢†åŸŸ</strong>ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„æ•°æ®æ›´æ–°æ˜¯åœ¨æ˜“å¤±æ€§å¤„ç†å™¨çš„ç¼“å­˜ä¸­å®Œæˆçš„ã€‚æŒä¹…åŸŸä»å†…å­˜æ§åˆ¶å™¨ä¸­çš„ä¸€ä¸ªå°çš„ç¼“å†²åŒºï¼Œå³<strong>å¾…å¤„ç†é˜Ÿåˆ—ï¼ˆWPQï¼‰å¼€å§‹ã€‚WPQç”±å¼‚æ­¥DRAM (ADR)åˆ·æ–°åŠŸèƒ½æ”¯æŒã€‚ADRæä¾›çš„ç”µæºå¯ä»¥ç¡®ä¿åœ¨æ–­ç”µçš„æƒ…å†µä¸‹å°†WPQçš„å†…å®¹åˆ·æ–°åˆ°NVMä¸Š</strong>[15], [55], [59], [65]ã€‚å›¾2æ˜¾ç¤ºäº†å…·æœ‰æŒä¹…æ€§å­˜å‚¨å™¨çš„ç³»ç»Ÿä¸­çš„æŒä¹…æ€§åŸŸã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/444a25e88ec046da99d0953429fe4d21.png"></p><p><strong>ä¸ºäº†å°†æ•°æ®ä¸€ç›´åˆ·æ–°åˆ°æŒä¹…åŒ–åŒºåŸŸã€‚ç¡®ä¿åŸå­æ€§å’Œæ’åºï¼Œéœ€è¦éµå¾ªä¸€ç»„ç‰¹å®šçš„æŒ‡ä»¤</strong>ã€‚æ¸…å•1æ˜¾ç¤ºäº†ä¸€ä¸ªä»£ç ä¾‹å­ï¼Œå®ƒå–è‡ªæ¥è‡ªSNIAçš„NVMç¼–ç¨‹æ¨¡å‹V1.2[8]ã€‚è¯¥ä»£ç æ˜¾ç¤ºäº†æŒä¹…åŒ–å¯¹è±¡<code>a</code>å’Œ<code>a_end</code>ã€‚ä¸ºäº†ç¡®ä¿è¿™äº›æŒä¹…åŒ–å¯¹è±¡çš„æ›´æ–°çš„ä¸€è‡´æ€§ã€åŸå­æ€§å’Œé¡ºåºæ€§ï¼Œæ¯æ¬¡æ›´æ–°è¿™äº›æŒä¹…åŒ–å¯¹è±¡ä¹‹ä¸€æ—¶éƒ½ä¼šè°ƒç”¨<code>msync</code>æ“ä½œã€‚è¯·æ³¨æ„ï¼Œç¬¬7è¡Œçš„æ›´æ–°æ²¡æœ‰ä½¿ç”¨<code>msync</code>æ“ä½œï¼Œå› ä¸ºå®ƒä¸æ˜¯åœ¨æ›´æ–°ä¸€ä¸ªæŒä¹…åŒ–å¯¹è±¡ã€‚<code>msync</code>æ“ä½œæ˜¯ç”¨æ¥<strong>å¼ºåˆ¶æ›´æ–°ä¸€ä¸ªå†…å­˜èŒƒå›´åˆ°æŒä¹…åŒ–é¢†åŸŸçš„</strong>ã€‚æ­¤å¤–ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªå±éšœï¼Œä»¥ä¿è¯åœ¨ç»§ç»­è¿›è¡Œä¹‹å‰æ‰§è¡Œå…ˆå‰çš„å­˜å‚¨ï¼Œ<code>fsync</code>æ“ä½œåšçš„æ˜¯å¯¹æ–‡ä»¶å…·æœ‰ç›¸åŒçš„åŠŸèƒ½[52]ã€‚</p><h2 id="F-åŠ¨æœº"><a href="#F-åŠ¨æœº" class="headerlink" title="F.åŠ¨æœº"></a>F.åŠ¨æœº</h2><p><strong>åœ¨ä¸»å­˜å‚¨å™¨ä¸­æ‹¥æœ‰ä¸€ä¸ªæŒä¹…æ€§çš„éƒ¨åˆ†å¯ä»¥ä½¿åº”ç”¨å…·æœ‰ä¸åŒçš„æŒä¹…æ€§è¦æ±‚ã€‚ç„¶è€Œï¼Œä¸ºäº†ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§ï¼Œåº”ç”¨ç¨‹åºçš„æŒä¹…æ€§æ•°æ®åº”è¯¥è¢«æ”¾ç½®åœ¨å†…å­˜çš„NVMéƒ¨åˆ†ï¼Œç”±äºNVMçš„è®¿é—®å»¶è¿Ÿè¾ƒæ…¢ï¼Œè¿™é˜»ç¢äº†è¿™äº›åº”ç”¨ç¨‹åºçš„æ€§èƒ½</strong>ã€‚å¦ä¸€æ–¹é¢ï¼Œå°†åº”ç”¨ç¨‹åºçš„æ•°æ®æ”¾åœ¨DRAMä¸Šï¼Œä¼šå¯¼è‡´æ›´å¥½çš„æ€§èƒ½ï¼Œä½†ä¸èƒ½æ»¡è¶³è¿™äº›åº”ç”¨ç¨‹åºçš„æ•°æ®æŒä¹…æ€§è¦æ±‚ã€‚ä¸ºäº†ç¡®ä¿åº”ç”¨ç¨‹åºçš„æ•°æ®æŒä¹…æ€§ï¼ŒæŒä¹…æ€§åº”ç”¨ç¨‹åºåº”è¯¥éµå¾ªç¬¬äºŒèŠ‚Eä¸­æåˆ°çš„ç¼–ç¨‹æ¨¡å‹ã€‚å¦‚å‰æ‰€è¿°ï¼Œ<strong>ç°æœ‰çš„æŒä¹…æ€§å­˜å‚¨å™¨æŠ€æœ¯è¦ä¹ˆæä¾›å°å®¹é‡ä½†å¿«é€Ÿå’ŒåŸºäºç”µæ± æ”¯æŒçš„DRAMæŒä¹…æ€§åŒºåŸŸï¼Œè¦ä¹ˆæä¾›é«˜å®¹é‡çš„NVM (ä¸éœ€è¦ç”µæ± æ”¯æŒ)ä½†ç¼“æ…¢çš„æŒä¹…æ€§åŒºåŸŸ</strong>ã€‚å‰è€…éœ€è¦ç³»ç»Ÿçš„æ”¯æŒï¼Œéœ€è¦ç¬¨é‡çš„ç‰©å“ï¼Œå¹¶ä¸”ä¼šæ ¹æ®è¶…çº§ç”µå®¹æˆ–ç”µæ± çš„å¤§å°é™åˆ¶æŒä¹…æ€§DRAMçš„å¤§å°ã€‚æ­¤å¤–ï¼Œå®ƒéœ€è¦æ”¹å˜æŸäº›DIMMæ¥æ”¯æŒå¤‡ä»½æ¨¡å¼ã€‚åŒæ—¶ï¼Œç”±äºæŒä¹…æ€§å¯¹è±¡çš„ç¼“æ…¢è¯»å–è®¿é—®ï¼Œåè€…ä¼šäº§ç”Ÿæ˜æ˜¾çš„æ€§èƒ½ä¸‹é™ã€‚è™½ç„¶æŒä¹…æ€§åº”ç”¨çš„æ•°æ®å¤§å°ä¸å¤ªå¯èƒ½é€‚åˆæ˜“å¤±æ€§ç¼“å­˜ï¼Œä½†åœ¨å¤§å¾—å¤šçš„DRAMä¸­ç¼“å­˜è¿™ç§æŒä¹…æ€§æ•°æ®å¯ä»¥ä¸ºæŒä¹…æ€§å¯¹è±¡æä¾›æ˜æ˜¾çš„è¯»å–é€Ÿåº¦æå‡ã€‚åŒæ—¶ï¼ŒæœŸå¾…ç”µæ± å¤‡ä»½ã€æœ‰é™çš„DRAMå°ºå¯¸ä»¥åŠé™åˆ¶é›†æˆåœ¨ç³»ç»Ÿä¸­çš„DRAMæ¨¡å—çš„é€‰æ‹©( å¦‚ä¾›åº”å•†)ï¼Œ <strong>æ˜¯ç°æœ‰è§£å†³æ–¹æ¡ˆçš„ä¸»è¦ç¼ºç‚¹</strong>ã€‚å› æ­¤ï¼Œä»…ä»…ä¾é å¯¹å¤„ç†å™¨èŠ¯ç‰‡çš„å¾®å°æ”¹åŠ¨æ¥æ”¯æŒDRAMä¸­æŒä¹…æ€§æ•°æ®å¯¹è±¡çš„ç¼“å­˜æ˜¯éå¸¸é‡è¦çš„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b9c998558da04df3b8e44015a419ded8.png"></p><p>è¡¨ä¸€æ˜¯ç°æœ‰æŠ€æœ¯ä¹‹é—´çš„æ¯”è¾ƒã€‚ä»è¡¨ä¸€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œåœ¨æ”¯æŒé«˜æŠ€æœ¯æ–¹é¢çš„å·®è·ã€‚æ€§èƒ½æŒä¹…æ€§å†…å­˜ï¼Œä»¥åŠå¤§å®¹é‡æŒä¹…æ€§å†…å­˜ï¼Œå› æ­¤<strong>Stealth-Persistæ—¨åœ¨å¼¥è¡¥è¿™ä¸€å·®è·</strong>ã€‚å›¾3æ˜¾ç¤ºäº†åœ¨OptaneDC ADæ¨¡å¼(æ‰€æœ‰æŒä¹…æ€§æ•°æ®éƒ½åœ¨NVMä¸­)ä¸Šè¿è¡Œçš„æŒä¹…æ€§åº”ç”¨çš„æ€§èƒ½å¼€é”€ï¼Œä¸åœ¨ä¸æä¾›æ•°æ®æŒä¹…æ€§çš„DRAMç³»ç»Ÿä¸Šè¿è¡Œçš„æ€§èƒ½å¼€é”€ç›¸æ¯”ã€‚ä»å›¾3ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨OptaneDCçš„ADæ¨¡å¼ä¸Šè¿è¡Œçš„åº”ç”¨å¹³å‡ä¼šäº§ç”Ÿ2.04å€çš„é€Ÿåº¦ä¸‹é™ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/003104b458bd4b08824b99b3b496a649.png"></p><h1 id="ä¸‰ã€è®¾è®¡"><a href="#ä¸‰ã€è®¾è®¡" class="headerlink" title="ä¸‰ã€è®¾è®¡"></a>ä¸‰ã€è®¾è®¡</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®å¯èƒ½çš„è®¾è®¡æ–¹æ¡ˆåŠå…¶æƒè¡¡æ¥è®¨è®ºStealth-Persistçš„è®¾è®¡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¼€å§‹è®¨è®ºè®¾è®¡è¦æ±‚ï¼Œä»¥åŠæ½œåœ¨çš„è®¾è®¡æ–¹æ¡ˆã€‚</p><h2 id="A-è®¾è®¡è¦æ±‚"><a href="#A-è®¾è®¡è¦æ±‚" class="headerlink" title="A.è®¾è®¡è¦æ±‚"></a>A.è®¾è®¡è¦æ±‚</h2><p>æˆ‘ä»¬çš„è®¾è®¡åº”è¯¥æ»¡è¶³å¿…è¦çš„è¦æ±‚ï¼Œä»¥å…è®¸å¹¿æ³›é‡‡ç”¨å’Œé«˜æ€§èƒ½ï¼ŒåŒæ—¶ä¿ç•™æŒä¹…æ€§å¯¹è±¡çš„è¯­ä¹‰ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™äº›è¦æ±‚å¦‚ä¸‹ã€‚</p><ul><li>çµæ´»æ€§:æˆ‘ä»¬çš„è®¾è®¡åº”å…è®¸å°†ä»»ä½•DRAMæ¨¡å—ï¼Œæ— è®ºå…¶å®¹é‡å¦‚ä½•ï¼Œéƒ½é›†æˆåˆ°é…å¤‡æœ‰NVMçš„ç³»ç»Ÿä¸­ï¼Œè€Œä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„ç”µæ± å¤‡ä»½æˆ–ç‰¹å®šçš„DIMMä¿®æ”¹ã€‚</li><li>æŒä¹…æ€§:ä»»ä½•è¢«è®¤ä¸ºæ˜¯æŒä¹…çš„å†…å­˜é¡µæˆ–å¯¹è±¡(å³ï¼Œå¯ä»å´©æºƒä¸­æ¢å¤)åº”è¯¥æ˜¯å¯æ¢å¤çš„ï¼Œè€Œä¸éœ€è¦ä»»ä½•é¢å¤–çš„ç”µæ± å¤‡ä»½æ”¯æŒï¼Œæ— è®ºè¯¥é¡µä½äºä½•å¤„(NVMæˆ–DRAM)ã€‚</li><li>é«˜æ€§èƒ½:å¯¹æŒä¹…æ€§é¡µé¢å’Œå¯¹è±¡çš„è®¿é—®åº”è¯¥å’Œå¯¹DRAMçš„è®¿é—®ä¸€æ ·å¿«ã€‚</li><li>é€æ˜åº¦:åˆ©ç”¨æŒä¹…æ€§å†…å­˜è¿›è¡Œå´©æºƒæ¢å¤çš„åº”ç”¨ç¨‹åºä¸åº”è¯¥éœ€è¦æ˜ç¡®åœ°ç®¡ç†å½“å‰é©»ç•™åœ¨DRAMä¸­çš„å¯¹è±¡çš„ç¼“å­˜å’ŒæŒä¹…åŒ–ã€‚</li></ul><p>ä¸ºäº†æŠŠè¿™äº›è¦æ±‚æ”¾åœ¨æŒä¹…æ€§åº”ç”¨çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸ªè®¿é—®å‡ åGBæŒä¹…æ€§å¯¹è±¡çš„æŒä¹…æ€§åº”ç”¨ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œé™¤äº†NVMæ¨¡å—å¤–ï¼Œç³»ç»Ÿè¿˜åº”è¯¥èƒ½å¤Ÿé›†æˆDRAMæ¨¡å—ã€‚ç³»ç»Ÿçš„æ‰€æœ‰è€…åº”è¯¥å¯ä»¥çµæ´»åœ°é€‰æ‹©ä»€ä¹ˆæ ·çš„å®¹é‡å’Œä¾›åº”å•†æ¥é€‰æ‹©è¿™æ ·çš„DRAMå’ŒNVMæ¨¡å—ï¼Œè¿™å°±æä¾›äº†çµæ´»æ€§ã€‚ç„¶è€Œï¼Œå¯¹æŒä¹…æ€§å¯¹è±¡çš„æ›´æ–°åº”è¯¥æ˜¯æŒä¹…çš„å¹¶ä¸”åœ¨å´©æºƒæ—¶æŒä¹…å­˜åœ¨ï¼Œæ— è®ºå®ƒä»¬å­˜åœ¨äºä½•å¤„(DRAMæˆ–NVM)ã€‚è™½ç„¶é€šè¿‡æŒä¹…æ€§æ¨¡å‹å’Œæ¡†æ¶ï¼Œå³<code>clflushes</code>å’Œå†…å­˜æ …æ ä½¿æ˜“å¤±æ€§ç¼“å­˜ä¸­çš„å¯¹è±¡çš„æ›´æ–°å˜å¾—æŒä¹…ï¼Œä½†å¦‚æœæŒä¹…æ€§å¯¹è±¡è¢«ç¼“å­˜åœ¨ç‰‡å¤–DRAMä¸­ï¼Œç›®å‰è¿˜æ²¡æœ‰æ”¯æŒä¿è¯å®ƒä»¬çš„æŒä¹…<br>æ€§ï¼Œè¿™ç»™æˆ‘ä»¬å¸¦æ¥äº†æŒä¹…æ€§è¦æ±‚ã€‚æœ€åï¼Œ<strong>åº”ç”¨ç¨‹åºæœ€å¥½èƒ½å°†å…¶æŒä¹…æ€§å¯¹è±¡ç¼“å­˜åœ¨DRAMä¸­</strong>ï¼Œä»¥å°½é‡å‡å°‘è·å–ä¸é€‚åˆåœ¨æ˜“å¤±æ€§å¤„ç†å™¨ç¼“å­˜ä¸­çš„æŒä¹…æ€§å¯¹è±¡çš„æˆæœ¬ã€‚å› ä¸º<strong>è¿™äº›å¯¹è±¡é€šå¸¸åªæœ‰å‡ å…†å­—èŠ‚çš„æ˜“å¤±æ€§å¤„ç†å™¨ç¼“å­˜</strong>ã€‚è·å–ç‰‡å¤–æŒä¹…æ€§å¯¹è±¡çš„å»¶è¿Ÿæ¯”æ…¢é€ŸNVMçš„å»¶è¿ŸçŸ­ï¼ˆ300nsçš„è¯»å–å»¶è¿Ÿä¸70nsçš„DRAMç›¸æ¯”ï¼‰ï¼Œè¿™ä¸€è¦æ±‚ä½¿æˆ‘ä»¬çœ‹åˆ°äº†è®¾è®¡è¦æ±‚çš„ç¬¬ä¸‰ä¸ªè¦ç´ ï¼Œå³é«˜æ€§èƒ½ã€‚å› æ­¤,æŒä¹…æ€§åº”ç”¨åº”è¯¥èƒ½å¤Ÿå°†ä¸é€‚åˆå†…éƒ¨æ˜“å¤±æ€§ç¼“å­˜çš„æŒä¹…æ€§å¯¹è±¡ç¼“å­˜åœ¨å¿«é€Ÿçš„ç‰‡å¤–DRAMä¸­ï¼ŒåŒæ—¶ä¿ç•™å…¶æŒä¹…æ€§èƒ½åŠ›ã€‚æœ€åï¼Œæ‰€æœ‰ç”¨äºç¼“å­˜å’ŒæŒä¹…åŒ–æŒä¹…æ€§å¯¹è±¡é¡µé¢çš„æ“ä½œéƒ½åº”è¯¥é€æ˜åœ°å‘ç”Ÿåœ¨è½¯ä»¶ä¸Šï¼Œè€Œä¸éœ€è¦å°†è¿™äº›ç»†èŠ‚æš´éœ²ç»™åº”ç”¨ç¨‹åºï¼Œè¿™å°±ç»™æˆ‘ä»¬å¸¦æ¥äº†æœ€åä¸€ä¸ªè¦æ±‚ï¼Œå³é€æ˜åº¦ã€‚</p><h2 id="B-è®¾è®¡é€‰é¡¹"><a href="#B-è®¾è®¡é€‰é¡¹" class="headerlink" title="B.è®¾è®¡é€‰é¡¹"></a>B.è®¾è®¡é€‰é¡¹</h2><p>ç°åœ¨æˆ‘ä»¬å°†è®¨è®ºæœ‰å¯èƒ½æ»¡è¶³æˆ‘ä»¬è¦æ±‚çš„è®¾è®¡æ–¹æ¡ˆã€‚</p><p>ä¸€ç§é€‰æ‹©æ˜¯æ”¯æŒæ–°çš„æŒ‡ä»¤ï¼Œ<strong>åœ¨ç¼“å­˜çº¿è¢«åˆ·æ–°ä¹‹å‰ä¸æäº¤â€”â€”ä¸ä»…ä»æ˜“å¤±æ€§ç¼“å­˜ï¼Œè€Œä¸”ä»ç‰‡å¤–DRAMåˆ°NVM</strong>ã€‚è¿™ç§è®¾è®¡æ–¹æ¡ˆå¯ä»¥é€šè¿‡åœ¨å†…å­˜æ§åˆ¶å™¨çš„æ”¯æŒä¸‹å‘æŒ‡ä»¤é›†æ¶æ„(ISA)å¼•å…¥æ–°çš„æŒ‡ä»¤æ¥å®ç°ï¼Œæˆ–è€…é€šè¿‡ä¿®æ”¹å½“å‰æŒ‡ä»¤çš„å®ç°ï¼Œ<strong>ä½¿å…¶ä»å†…éƒ¨æ˜“å¤±æ€§é«˜é€Ÿç¼“å­˜( ä¾‹å¦‚ï¼Œclflush)ä»¥åŠä»DRAMåˆ°NVMä¸­åˆ·æ–°ç¼“å­˜çº¿ã€‚å‡è®¾DRAMæ˜¯é€šè¿‡å†…å­˜æ§åˆ¶å™¨ä½œä¸ºNVMæ•°æ®çš„ç¡¬ä»¶ç®¡ç†ç¼“å­˜æ¥è¿è¡Œçš„ï¼Œè¿™æ ·çš„æŒ‡ä»¤å°±éœ€è¦å†…å­˜æ§åˆ¶å™¨é¦–å…ˆæ£€æŸ¥è¦ä¿å­˜çš„ç¼“å­˜çº¿æ˜¯å¦åœ¨DRAMä¸­ï¼Œè¯»å–å®ƒï¼Œç„¶åå°†å®ƒåˆ·æ–°åˆ°NVMä¸­</strong>ã€‚è¿™ç§æ–¹æ³•çš„ä¸»è¦é—®é¢˜æ˜¯ã€‚(1)å®ƒéœ€è¦æ”¹å˜ISAã€æŒä¹…æ€§ç¼–ç¨‹åº“å’Œå¤„ç†å™¨å†…æ ¸æ¥æ”¯æŒè¿™ç§æ–°çš„æŒ‡ä»¤ã€‚æ­¤å¤–ï¼Œ(2)æŒä¹…åŒ–æ•°æ®çš„å»¶è¿Ÿå°†å¤§å¤§å¢åŠ ï¼Œç‰¹åˆ«æ˜¯å½“åˆ·æ–°çš„å—åœ¨DRAMä¸­è¢«æ ‡è®°ä¸ºè„å—æ—¶ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿DRAMç¼“å­˜çš„æ˜¯é¡µè€Œä¸æ˜¯ç¼“å­˜è¡Œï¼Œå®ƒä»ç„¶éœ€è¦ç±»ä¼¼çš„æ”¯æŒï¼Œä½†éœ€è¦æ–°çš„æŒ‡ä»¤åœ¨é¡µçš„ç²’åº¦ä¸Šæ“ä½œï¼Œè€Œä¸æ˜¯<code>clflush</code>ã€‚</p><p>å¦ä¸€ä¸ªé€‰æ‹©æ˜¯åˆ©ç”¨å°å‹å›ºå®šå°ºå¯¸çš„å¤‡ä»½èƒ½åŠ›(ä¾‹å¦‚ï¼Œè¶…ç”µå®¹)ï¼Œ ä¸ºåˆ·æ–°DRAMçš„ç‰¹å®šéƒ¨åˆ†æä¾›åŠ¨åŠ›ã€‚ä¾‹å¦‚ï¼Œæ— è®ºæ¨¡å—çš„æ€»å¤§å°å¦‚ä½•ï¼Œéƒ½è¦æœ‰è¶³å¤Ÿçš„ç”µåŠ›æ¥åˆ·æ–°8GBçš„DRAMã€‚å†…å­˜æ§åˆ¶å™¨æˆ–ç³»ç»Ÿçš„è½¯ä»¶å¯ä»¥æ½œåœ¨åœ°è¿ç§»æˆ–åœ¨åœ°å€ç©ºé—´çš„è¿™ä¸ªå­åŒºåŸŸæ”¾ç½®æŒä¹…çš„é¡µé¢ï¼Œæ ‡è®°ä¸ºæŒä¹…çš„ã€‚å½“ç”µæºæ•…éšœå‘ç”Ÿæ—¶ï¼Œå†…å­˜æ§åˆ¶å™¨( æˆ–å¤–éƒ¨ç³»ç»Ÿç”µè·¯)æœ‰è¶³å¤Ÿçš„ç”µåŠ›æ¥åˆ·æ–°DRAMçš„é‚£ä¸€éƒ¨åˆ†ã€‚è™½ç„¶è¿™æ ·çš„è§£å†³æ–¹æ¡ˆåœ¨ç²¾ç¥ä¸Šç±»ä¼¼äºNVDIMM-Nï¼Œå®ƒæä¾›äº†é€‰æ‹©ä»»ä½•DRAMæ¨¡å—å’Œå®¹é‡çš„çµæ´»æ€§ã€‚ç„¶è€Œï¼Œå…·æœ‰æŒä¹…æ€§æ”¯æŒçš„éƒ¨åˆ†çš„å¤§å°è¢«é™åˆ¶åœ¨ç³»ç»Ÿçš„å¤‡ä»½èƒ½åŠ›èŒƒå›´å†…ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™æ ·çš„è§£å†³æ–¹æ¡ˆéœ€è¦å¤–éƒ¨ç³»ç»Ÿçš„æ”¯æŒï¼Œå¹¶å°†DRAMçš„æŒä¹…æ€§éƒ¨åˆ†çš„å¤§å°é™åˆ¶åœ¨ç”µæºå¤‡ä»½èƒ½åŠ›ä¸Šã€‚åŒæ ·ï¼Œè¿™æ ·çš„å¤‡ä»½èƒ½åŠ›é€šå¸¸æˆæœ¬å¾ˆé«˜ï¼Œ éœ€è¦é«˜é¢ç§¯(ç¬¨é‡)ï¼Œ è€Œä¸”å¯èƒ½å¯¹ç¯å¢ƒä¸å‹å¥½ã€‚</p><p>è™½ç„¶ç¬¬ä¸€ç§æ–¹æ¡ˆæä¾›äº†é«˜æ€§èƒ½ã€æŒä¹…æ€§å’Œçµæ´»æ€§ï¼Œä½†å®ƒç¼ºä¹é€æ˜åº¦ã€‚åŒæ—¶ï¼Œç¬¬äºŒç§æ–¹æ¡ˆå…·æœ‰éƒ¨åˆ†çµæ´»æ€§(éœ€è¦ç³»ç»Ÿæ”¯æŒå’Œå¯èƒ½çš„ISAå˜åŒ–)ï¼Œ éƒ¨åˆ†çš„é«˜æ€§èƒ½(åªæœ‰ä¸€å°éƒ¨åˆ†DRAMå¯ä»¥ä½œä¸ºæŒä¹…æ€§å†…å­˜ä½¿ç”¨)ï¼Œ é€æ˜åº¦å’ŒæŒä¹…æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„è®¾è®¡åº”è¯¥æä¾›å®Œå…¨çš„é€æ˜åº¦ã€é«˜æ€§èƒ½ã€æŒä¹…æ€§å’Œçµæ´»æ€§ï¼Œè€Œä¸éœ€è¦ä»»ä½•é¢å¤–çš„ç³»ç»Ÿæ”¯æŒæˆ–è¶…å‡ºç°ä»£ç³»ç»Ÿæ‰€æä¾›çš„å¤‡ä»½èƒ½åŠ›ã€‚</p><h2 id="C-Stealth-Persist"><a href="#C-Stealth-Persist" class="headerlink" title="C.Stealth-Persist"></a>C.Stealth-Persist</h2><p>åœ¨æ»¡è¶³ä¸Šè¿°è®¾è®¡è¦æ±‚çš„åŒæ—¶ï¼Œæˆ‘ä»¬çš„è®¾è®¡è¿˜åº”è¯¥ä¸æ··åˆå†…å­˜ç³»ç»Ÿçš„ä¸åŒé›†æˆæ–¹å¼å…¼å®¹ã€‚ç‰¹åˆ«æ˜¯å‚ç›´å†…å­˜æ¨¡å¼(å¦‚Optane DCçš„å†…å­˜æ¨¡å¼)å’Œæ°´å¹³å†…å­˜æ¨¡å¼(å¦‚OptaneDCçš„ADæ¨¡å¼)åœ¨æ·±å…¥æ¢è®¨ä¸åŒé›†æˆæ¨¡å¼ä¸‹Stealth-Persistæ”¯æŒçš„ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å°†è®¨è®ºStealth-Persistå¦‚ä½•æ»¡è¶³è®¾è®¡è¦æ±‚ã€‚</p><p>ä¸ºäº†æ»¡è¶³çµæ´»æ€§çš„è¦æ±‚ï¼ŒStealth-Persistçš„å®ç°æ˜¯ä¸ºäº†æ”¯æŒåœ¨DRAMä¸­ç¼“å­˜æ—¶å°†æŒä¹…åŒºåŸŸçš„æ›´æ–°é•œåƒåˆ°NVMã€‚å› æ­¤ï¼Œå®ƒä¸éœ€è¦ç³»ç»Ÿçš„ä»»ä½•æ”¯æŒï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»»ä½•DRAMå¤§å°ä¸‹å·¥ä½œã€‚é€šè¿‡é•œåƒç¼“å­˜åœ¨DRAMä¸­çš„æŒä¹…æ€§é¡µé¢çš„æ›´æ–°ï¼ŒæŒä¹…æ€§çš„è¦æ±‚å¾—åˆ°äº†æ»¡è¶³ã€‚ä¸ºäº†ä½¿æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå¯¹è½¯ä»¶é€æ˜ï¼Œ Stealth-Persistçš„é•œåƒæ“ä½œå‘ç”Ÿåœ¨å†…å­˜æ§åˆ¶å™¨ä¸Šï¼Œä¸éœ€è¦å¯¹åº”ç”¨ç¨‹åºæˆ–æŒä¹…æ€§ç¼–ç¨‹åº“åšä»»ä½•æ”¹å˜ã€‚æœ€åï¼Œä¸ºäº†æ”¯æŒå¯¹æŒä¹…æ€§é¡µé¢çš„é«˜æ€§èƒ½è®¿é—®ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆä»DRAMä¸­æä¾›å¯¹æŒä¹…æ€§å¯¹è±¡çš„è¯»å–è¯·æ±‚ï¼Œå¦‚æœåœ¨é‚£é‡Œæœ‰ç¼“å­˜ã€‚å›¾4æè¿°äº†Stealth-Persistä¸­çš„è¯»å†™æ“ä½œï¼Œåœ¨é«˜å±‚æ¬¡ä¸Šã€‚</p><p>å¦‚å›¾4æ‰€ç¤ºï¼Œå†…å­˜æ§åˆ¶å™¨é›†çº¿å™¨MCH)å¤„ç†å¯¹æŒä¹…æ€§é¡µé¢çš„å†™å…¥çš„é•œåƒï¼Œå¦‚æœåœ¨è€Œç›´æ¥ä»DRAMä¸Šæä¾›è¯»å–è¯·æ±‚ã€‚é€šè¿‡è¿™æ ·åšï¼ŒStealth-Persistç¡®ä¿äº†å¯¹NVMçš„å†™å…¥çš„æŒä¹…æ€§ï¼ŒåŒæ—¶å…è®¸å¯¹è¿™ç§æŒä¹…æ€§å¯¹è±¡è¿›è¡Œå¿«é€Ÿçš„è¯»å–æ“ä½œã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/69796fb223084662b46606e733932280.png"></p><p>è™½ç„¶åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œè¿™ç§è®¾è®¡<strong>çœ‹èµ·æ¥ç±»ä¼¼äºå†…éƒ¨å¤„ç†å™¨ç¼“å­˜ä¸­é€šå¸¸ä½¿ç”¨çš„å†™é€šæ–¹æ¡ˆ</strong>ï¼Œä½†åœ¨è€ƒè™‘åˆ°æ··åˆå†…å­˜ç³»ç»Ÿçš„èƒŒæ™¯æ—¶ï¼Œä¼šå‡ºç°è®¸å¤šæŒ‘æˆ˜å’Œæ½œåœ¨çš„åˆ†æ­§ã€‚ç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯<strong>å¦‚ä½•å†³å®šä¸€ä¸ªé¡µé¢æ˜¯å¦åº”è¯¥è¢«é•œåƒ</strong>ã€‚ç¬¬äºŒä¸ªæŒ‘æˆ˜æ˜¯<strong>å¦‚ä½•å¿«é€Ÿè¯†åˆ«ä¸€ä¸ªé¡µé¢æ˜¯å¦è¢«ç¼“å­˜åœ¨DRAMä¸­ï¼Œå®ƒè¢«ç¼“å­˜åœ¨å“ªé‡Œ</strong>?ä»¥åŠ<strong>åœ¨è¿è¡ŒæœŸé—´å¦‚ä½•ä¿è¯ä¸¤ä¸ªå‰¯æœ¬éƒ½æ˜¯ä¸€è‡´çš„</strong>ã€‚ç¬¬ä¸‰ï¼Œ<strong>ç”±äºä¸æ˜¯æ‰€æœ‰NVMä¸­çš„é¡µé¢éƒ½éœ€è¦è¢«æŒä¹…åŒ–ï¼Œå¯¹å­˜å‚¨åœ¨NVMä¸­çš„é¡µé¢çš„æ›´æ–°éœ€è¦æœ‰é€‰æ‹©åœ°è¿›è¡Œé•œåƒ</strong>ã€‚æœ€åï¼ŒStealth-Persistéœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œä»¥é€‚åº”æ— æ•°ç§æ•´åˆæ··åˆå†…å­˜ç³»ç»Ÿçš„æ–¹å¼ã€‚æœ¬èŠ‚çš„ä»¥ä¸‹éƒ¨åˆ†å°†è®¨è®ºè¿™äº›æŒ‘æˆ˜ä»¥åŠæˆ‘ä»¬å¦‚ä½•å…‹æœå®ƒä»¬ã€‚</p><p>1)é¡µé¢é•œåƒã€‚æ— è®ºä½¿ç”¨ä½•ç§HMMç®¡ç†æ–¹æ¡ˆï¼Œæ°´å¹³(ä¾‹å¦‚åº”ç”¨ç¨‹åºç›´æ¥æ¨¡å¼)æˆ–å‚ç›´(å†…å­˜æ¨¡å¼)ï¼Œ Stealth-Persistéƒ½éœ€è¦å°†éƒ¨åˆ†(æˆ–æ•´ä¸ª) DRAMä½œä¸ºæŒä¹…æ€§é¡µé¢çš„é•œåƒåŒºåŸŸã€‚<strong>åœ¨å‚ç›´å†…å­˜è®¾ç½®ä¸­ï¼Œ æ•´ä¸ªDRAMå°†è¢«ç”¨ä½œNVMçš„ç¼“å­˜ï¼Œå› æ­¤ï¼Œä»»ä½•ç¼“å­˜åœ¨DRAMä¸­çš„é¡µé¢ä¹Ÿå¯èƒ½è¢«é•œåƒåˆ°NVMä¸­</strong>ã€‚åŒæ—¶ï¼Œ<strong>åœ¨æ°´å¹³è®¾ç½®ä¸­ï¼Œç”±äºDRAMå’ŒNVMçš„ç‰©ç†èŒƒå›´æ˜ç¡®åœ°æš´éœ²åœ¨ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è®©å†…å­˜æ§åˆ¶å™¨ä¿ç•™ä¸€éƒ¨åˆ†DRAMï¼Œä»…ä½œä¸ºé•œåƒåŒºåŸŸä½¿ç”¨ã€‚DRAMçš„å…¶ä½™éƒ¨åˆ†å°†ç›´æ¥æš´éœ²ç»™ç³»ç»Ÿ</strong>ï¼Œå°±åƒåœ¨ADæ¨¡å¼ä¸­ä¸€æ ·ã€‚ä½äºNVMä¸­çš„ä»»ä½•æŒä¹…æ€§é¡µé¢éƒ½å¯ä»¥è¢«ç¼“å­˜åœ¨DRAMçš„é•œåƒåŒºåŸŸä¸­ï¼Œ è€Œä¸è€ƒè™‘è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯è¿™ç§åŒºåŸŸçš„å¤§å°ã€‚<strong>åœ¨æ¯ä¸ªä»¥NVMåœ°å€ä¸ºç›®æ ‡çš„å†…å­˜è®¿é—®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€æ˜åœ°æ£€æŸ¥è¯¥é¡µæ˜¯å¦å½“å‰é©»ç•™åœ¨DRAMä¸­ã€‚è¯»å–å’Œå†™å…¥æ“ä½œéƒ½éœ€è¦è¿™ç§æ£€æŸ¥;å¦‚æœè®¿é—®çš„é¡µé¢è¢«ç¼“å­˜åœ¨DRAMä¸­ï¼Œé‚£ä¹ˆè¯»å–æ“ä½œå¯ä»¥ç›´æ¥ä»DRAMä¸­è¿›è¡Œï¼Œè€Œå†™å…¥æ“ä½œåˆ™éœ€è¦æ›´æ–°NVMä¸­çš„å‰¯æœ¬ï¼Œä»¥ä¿è¯é•œåƒé¡µé¢å‰¯æœ¬ä¹‹é—´çš„ä¸€è‡´æ€§å¹¶ç¡®ä¿æŒä¹…æ€§ã€‚å½“ä¸€ä¸ªé¡µé¢ä¸åœ¨DRAMä¸­æ—¶æˆ‘ä»¬éœ€è¦ä»NVMä¸­è¯»å–å®ƒ(æˆ–å†™äººå®ƒ)ã€‚ç”±äºé•œåƒåŒºåŸŸå¯ä»¥è¢«è®¤ä¸ºæ˜¯NVMä¸­æŒä¹…æ€§é¡µé¢çš„ç¼“å†²åŒº/ç¼“å­˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºDRAMä¸­çš„æ‰€è¿°ç¼“å­˜/ç¼“å†²åŒºå®šä¹‰æ’å…¥å’Œé©±é€ç­–ç•¥</strong>ã€‚</p><p>ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªç±»ä¼¼äºå‚ç›´å†…å­˜ç®¡ç†æ–¹æ¡ˆä¸­ä½¿ç”¨çš„é¡µé¢æ’å…¥ç­–ç•¥ã€‚é€šè¿‡è¿™æ ·åšï¼Œå¦‚æœä½¿ç”¨å†…å­˜æ¨¡å¼ï¼Œé™¤äº†åœ¨DRAMä¸­ç¼“å­˜æŒä¹…æ€§é¡µé¢æ—¶å‘NVMè¿›è¡Œé¢å¤–çš„å†™å…¥å¤–ï¼Œä¸éœ€è¦å¯¹ç®¡ç†ç­–ç•¥è¿›è¡Œä»»ä½•æ”¹å˜ã€‚åŒæ—¶ï¼Œå¯¹äºADæ¨¡å¼ï¼Œåœ¨DRAMä¸­å®šä¹‰çš„é•œåƒåŒºåŸŸå°†è¢«ç®¡ç†ï¼Œç±»ä¼¼äºå†…å­˜æ¨¡å¼ä¸­çš„DRAMç¼“å­˜ï¼Œæ­¤å¤–è¿˜æœ‰å¯¹NVMçš„é•œåƒå†™å…¥ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬<strong>ä½¿ç”¨äº†ä¸¤ä¸ªç®€å•çš„ç­–ç•¥æ¥æ”¾ç½®DRAMç¼“å†²åŒºä¸­çš„é¡µé¢</strong>: ( 1)é¦–æ¬¡è§¦æ‘¸ç­–ç•¥(FTP)å’Œ(2) å¤šé˜Ÿåˆ—(MQ)ç­–ç•¥ï¼Œæ­£å¦‚ä¹‹å‰çš„å·¥ä½œä¸­æ‰€æå‡ºçš„[48]ã€‚</p><p>2)DRAMé•œåƒåŒºåŸŸæŸ¥è¯¢ã€‚ä¸ºäº†ç¡®ä¿Stealth-Persistå¯ä»¥å¿«é€Ÿ<strong>æ£€æŸ¥ä¸€ä¸ªé¡µé¢æ˜¯å¦åœ¨DRAMä¸­(é•œé¢åŒºåŸŸçš„åœ°å€ï¼‰ï¼Œ Stealth-Persistä½¿ç”¨ä¸€ä¸ªç¡¬ä»¶ç®¡ç†è¡¨æ¥è·Ÿè¸ªé•œé¢åŒºåŸŸçš„é¡µé¢</strong>ã€‚é•œåƒçš„æ˜ å°„è¡¨åŒ…å«äº†é•œåƒçš„ç¼“å­˜é¡µåœ°å€çš„è½¬æ¢ï¼Œå¦‚å›¾5æ‰€ç¤ºã€‚æ˜ å°„è¡¨çš„æ¯ä¸ªæ¡ç›®éƒ½åŒ…å«ä¸€ä¸ªç»„ID,å®ƒæ˜¯ç”¨NVMä¸­çš„é•œåƒé¡µåœ°å€ä¸é•œåƒåŒºåŸŸçš„é¡µæ•°çš„æ¨¡æ•°å‡½æ•°æ¥è®¡ç®—çš„ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªæ¡ç›®åŒ…å«å…­å¯¹è½¬æ¢ï¼Œå°†36ä½NVMçš„é¡µé¢åœ°å€æ˜ å°„åˆ°36ä½é•œåƒDRAMçš„é¡µé¢åœ°å€ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç¿»è¯‘ä½¿ç”¨3ä½(å…±18ä½)ä½œä¸ºæ›¿æ¢ç­–ç•¥çš„LRUä½ï¼Œè¿™ä½¿å¾—ç¿»è¯‘æ€»å…±æœ‰450ä½ï¼Œå…¶ä½™512ä½ç”¨äºç»„ID (32ä½) å’Œå¡«å……ã€‚å› æ­¤ï¼Œä¸€ä¸ªé¡µé¢å¯ä»¥é€šè¿‡æ—¶é’Ÿæ›¿æ¢ç­–ç•¥æˆ–æ¡ç›®å†…çš„LRUé©±é€ä»é•œåƒåŒºåŸŸä¸­ç§»é™¤ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/8130fea0f2ba4f3bbadb1dff9316d3c4.png"></p><p>è¯·æ³¨æ„ï¼Œé•œåƒçš„æ˜ å°„çš„å­˜å‚¨è¦æ±‚æ˜¯åœ¨é•œåƒåŒºåŸŸä¸­ï¼Œ æ¯6é¡µçš„æ˜ å°„è¡¨æ˜¯64å­—èŠ‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬<strong>åœ¨å†…å­˜æ§åˆ¶å™¨ä¸­ä½¿ç”¨ä¸€ä¸ªå°çš„ç¼“å­˜æ¥ç¼“å­˜é•œåƒçš„æ˜ å°„è¡¨é¡¹ï¼ŒåŒæ—¶åœ¨DRAMä¸­ä¿æŒè¯¥è¡¨</strong>ã€‚æ¯å½“æ”¶åˆ°å¯¹æŒä¹…åŒ–åŒºåŸŸçš„å†…å­˜è¯·æ±‚æ—¶ï¼Œå°±ä¼šè®¡ç®—è¢«è¯·æ±‚é¡µçš„ç»„IDï¼Œå¹¶æ£€æŸ¥é•œåƒçš„æ˜ å°„è¡¨ç¼“å­˜æ˜¯å¦æœ‰è¢«è¯·æ±‚çš„ç»„ID,è¿™å¯èƒ½å¯¼è‡´ä¸‰ä¸ªä¸åŒçš„æƒ…å†µã€‚(1ï¼‰è¯¥æ¡ç›®è¢«ç¼“å­˜ï¼Œé¡µé¢è¢«ç¼“å­˜ï¼Œè¯·æ±‚ä»ç›¸å…³çš„DRAMé¡µé¢æä¾›ã€‚(2)æ¡ç›®ç¼“å­˜ï¼Œé¡µé¢æ²¡ç¼“å­˜ï¼Œæ¡ç›®æ²¡æœ‰é•œåƒï¼Œè¯·æ±‚è¦å»NVMã€‚(3)æ¡ç›®æ²¡æœ‰è¢«ç¼“å­˜ï¼Œå¿…é¡»æ£€æŸ¥DRAMä¸­çš„æ˜ å°„è¡¨ä»¥è·å¾—æ¡ç›®å’Œå®ƒçš„é•œåƒé¡µã€‚ç”±äºæ˜ å°„è¡¨ç¼“å­˜ç¼ºå¤±å¯èƒ½ä¼šå¯¼è‡´ä»DRAMä¸­æä¾›è¯·æ±‚ï¼Œå¹¶è¿›è¡Œä¸¤æ¬¡è®¿é—®ï¼Œæˆ–è€…åœ¨æ£€æŸ¥DRAMåä»NVMä¸­æä¾›è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¯·æ±‚å‘é€åˆ°DRAMä¸­ï¼Œå¦‚æœæ¡ç›®åœ¨è¡¨ä¸­ï¼ŒNVMå†ä»DRAMä¸­æä¾›è¯·æ±‚ï¼Œå¦‚æœä¸åœ¨è¡¨ä¸­ï¼Œåˆ™ä»NVMä¸­æä¾›ã€‚</p><p>3)é•œåƒé¡µçš„è¿è´¯æ€§æ›´æ–°ã€‚åœ¨Stealth-Persistä¸­ï¼Œé•œåƒåŒºåŸŸé¡µå’ŒNVMé¡µä¹‹é—´åº”è¯¥ä¿æŒä¸€è‡´æ€§ ã€‚ç”±äºæŒä¹…æ€§é¡µé¢è¢«è®¤ä¸ºæ˜¯å¯æ¢å¤çš„ï¼Œå¯¹æŒä¹…æ€§é¡µé¢çš„å†™å…¥åº”è¯¥æ˜¯æŒä¹…çš„ã€‚å› æ­¤ï¼Œå¯¹é•œåƒåŒºåŸŸçš„å†™å…¥åº”è¯¥è¢«æ¨é€åˆ°ä¸¤ä¸ªå†…å­˜ã€‚Stealth-Persistå°†å¯¹é•œåƒåŒºåŸŸé¡µé¢çš„å†™è¯·æ±‚æ¨é€åˆ°DRAMçš„æ˜“å¤±æ€§å†™ç¼“å†²åŒºå’ŒNVMçš„æŒä¹…æ€§WPQã€‚è¯·æ³¨æ„ï¼Œ<strong>ä¸€ä¸ªå†™è¯·æ±‚åªæœ‰åœ¨å®ƒè¢«æ”¾å…¥WPQåæ‰ä¼šé€€å½¹ï¼Œè¿™ä¿è¯äº†å†™çš„æŒä¹…æ€§ã€‚å¦ä¸€æ–¹é¢ï¼Œå±äºéæŒä¹…æ€§åŒºåŸŸçš„é•œåƒé¡µä¸éœ€è¦æ•°æ®ä¸€è‡´æ€§ ï¼Œä¹Ÿä¸éœ€è¦å¯æ¢å¤æ€§ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆStealth-Persistå®ç°äº†é€‰æ‹©æ€§é•œåƒ</strong>ã€‚Stealth-Persistå¯¹ä¸€è‡´æ€§æ²¡æœ‰ä»»ä½•å½±å“ã€‚å¦‚æœDRAMå’ŒNVMæ¨¡å—åœ¨åŒä¸€ä¸ªæ’åº§ï¼ˆsocketï¼‰ä¸Šï¼Œè¿™æ˜¯è‹±ç‰¹å°”çš„DCPMMæ‰€æ”¯æŒçš„é…ç½®ï¼ŒNVMå’ŒDRAMæ‹·è´ä¹‹é—´çš„ä¸€è‡´æ€§ç”±MCé€šè¿‡é•œåƒæ¥ç®¡ç†ï¼Œè€Œä¸å†…éƒ¨å¤„ç†å™¨ç¼“å­˜çš„ä¸€è‡´æ€§æ˜¯åœ¨ä¼ ç»Ÿç³»ç»Ÿä¸­å¤„ç†ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬åç¦»äº†ç›®å‰çš„æ ‡å‡†ï¼Œå³NVMå’ŒDRAMåœ¨åŒä¸€ä¸ªæ’åº§ä¸Šï¼Œå³å„è‡ªåœ¨ä¸åŒçš„æ’åº§ä¸Šï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æŒ‡å®šé è¿‘NVMçš„å†…å­˜æ§åˆ¶å™¨ä½œä¸ºä¸»æ§ï¼Œå› æ­¤å®ƒå°†è´Ÿè´£å¤„ç†é•œåƒã€é‡æ˜ å°„ç­‰ï¼Œå¹¶ç›¸åº”åœ°å°†é•œåƒè¡¨ç¼“å­˜ä¸­çš„ä»»ä½•è¯·æ±‚è½¬å‘ç»™æ‹¥æœ‰DRAMæ¨¡å—çš„æ’åº§çš„å†…å­˜æ§åˆ¶å™¨ã€‚</p><p>4)é€‰æ‹©æ€§é•œåƒã€‚Stealth-persistå®ç°äº†é€‰æ‹©æ€§é•œåƒæŠ€æœ¯ï¼Œä»¥å‡å°‘å¯¹NVMçš„å†™å…¥æ¬¡æ•°,è¿™å¯ä»¥é€šè¿‡å°†<strong>æŒ‡å‘éæŒä¹…æ€§åŒºåŸŸçš„å†™å…¥åªæäº¤ç»™å…¶DRAMé•œåƒç‰ˆæœ¬æ¥å®ç°</strong>ã€‚Stealth-Persiståœ¨å‚ç›´HMMå®ç°ä¸­å®ç°äº†é€‰æ‹©æ€§é•œåƒï¼Œå°±åƒåœ¨Optane DCçš„å†…å­˜æ¨¡å¼ä¸­ä¸€æ ·ï¼Œåœ¨æ°´å¹³HMMå®ç°ä¸­å®ç°äº†OptaneDCçš„ADæ¨¡å¼ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒStealthPersistéœ€è¦æŒä¹…æ€§å†…å­˜åŒºåŸŸçš„åœ°å€èŒƒå›´ï¼Œè¿™å¯ä»¥åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ç”±å†…æ ¸ä¼ é€’ç»™Stealth-Persistï¼Œä¾‹å¦‚ï¼ŒLinux å‘½ä»¤<code>memmap= 2G!8G</code>å¯ä»¥ç”¨æ¥ä¿ç•™ä¸€ä¸ªä»åœ°å€8Gå¼€å§‹çš„2GBæŒä¹…æ€§åŒºåŸŸã€‚è¯·æ³¨æ„ï¼Œå°†éæŒä¹…åŒ–åŒºåŸŸä¸­çš„é¡µçš„å†™æ“ä½œåªè½¬å‘åˆ°å…¶é•œåƒç‰ˆæœ¬ï¼Œä¼šè¿åè¿™äº›é¡µçš„ä¸€è‡´æ€§ã€‚ ç„¶è€Œï¼Œç”±äºè¿™äº›é¡µé¢æ˜¯åœ¨éæŒä¹…æ€§åŒºåŸŸä¸­ï¼Œè€Œä¸”è¿™äº›åº”ç”¨é¢„è®¡æ˜¯ä¸å¯æ¢å¤çš„ï¼Œæ‰€ä»¥å†™å…¥å¯ä»¥åªæäº¤ç»™é•œåƒé¡µé¢ï¼Œè€Œå¦‚æœé¡µé¢è¢«é©±é€ï¼Œæ•´ä¸ªé¡µé¢å°†è¢«å†™å›NVMã€‚</p><h2 id="D-æ¦‚è¿°"><a href="#D-æ¦‚è¿°" class="headerlink" title="D.æ¦‚è¿°"></a>D.æ¦‚è¿°</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/ec2628a98966478c8c30d234e670ce39.png"></p><p>å›¾6æ˜¾ç¤ºäº†æ•´ä¸ªStealth-Persistè®¾è®¡ã€‚å¯¹äºæ¯ä¸ªæœ€åä¸€çº§ç¼“å­˜(LLC)çš„ç¼ºå¤±ï¼Œé¦–å…ˆå†…å­˜æ§åˆ¶å™¨æ£€æŸ¥è¯¥è¯·æ±‚æ˜¯å¦æ˜¯å¯¹æŒä¹…æ€§åŒºåŸŸçš„è¯·æ±‚â‘ å¦‚æœæ˜¯å¯¹æŒä¹…æ€§åŒºåŸŸçš„è¯·æ±‚ï¼Œé•œåƒè¡¨ç¼“å­˜è¢«æŸ¥è¯¢åˆ°NVMé¡µé¢çš„å½“å‰çŠ¶æ€â‘¡ã€‚å¦‚åœ¨ä¸‰C2èŠ‚ä¸­è®¨è®ºè¿‡ï¼Œé•œåƒè¡¨ç¼“å­˜é€šè¿‡æŸ¥çœ‹å·²ç»ç¼“å­˜çš„é•œåƒè¡¨æ¡ç›®ï¼Œæˆ–è€…ä»å­˜å‚¨åœ¨DRAMä¸­çš„é•œåƒè¡¨ä¸­è·å–æ¡ç›®ï¼Œå¹¶ä½¿ç”¨LRUç­–ç•¥æ›¿æ¢ç»„IDå’Œç›¸åº”çš„æ˜ å°„è¡¨æ¡ç›®ï¼Œæ¥éªŒè¯NVMçš„é¡µé¢é•œåƒçŠ¶æ€â‘¢å¦‚æœé¡µé¢è¢«é•œåƒï¼Œè¯»å–è¯·æ±‚è¢«è½¬å‘åˆ°DRAMï¼Œè€Œå†™å…¥è¯·æ±‚è¢«è½¬å‘åˆ°DRAMï¼Œä»¥æ›´æ–°é•œåƒåŒºåŸŸï¼Œä»¥åŠNVMï¼Œä»¥ä¿æŒæ•°æ®â‘£ã€‚åœ¨è¯»çš„æƒ…å†µä¸‹ï¼ŒæŒä¹…åŒ–å†…å­˜è®¿é—®è¢«è½¬å‘åˆ°å¤šé˜Ÿåˆ—æˆ–FTPå•å…ƒCTâ‘¤è¿™å•å…ƒå†³å®šä¸€ä¸ªé¡µé¢æ˜¯å¦åº”è¯¥è¢«é•œåƒï¼Œå¦‚æœæ˜¯ï¼Œåˆ™é•œåƒè¡¨ç¼“å­˜è¢«è§¦å‘ï¼Œä½¿ç”¨LRUç­–ç•¥â‘¥æ›¿æ¢å…¶ä¸­ä¸€ä¸ªæ˜ å°„ã€‚</p><h2 id="E-Stealth-Persist-NVMåº“çš„æ¯”è¾ƒ"><a href="#E-Stealth-Persist-NVMåº“çš„æ¯”è¾ƒ" class="headerlink" title="E. Stealth-Persist NVMåº“çš„æ¯”è¾ƒ"></a>E. Stealth-Persist NVMåº“çš„æ¯”è¾ƒ</h2><p>ä¸€äº›ç ”ç©¶æå‡ºä½¿ç”¨NVMåº“æ¥è§£å†³NVMä½œä¸ºä¸»å­˜å‚¨å™¨æ—¶çš„åŸå­æ€§ã€å´©æºƒä¸€è‡´æ€§å’Œæ€§èƒ½é—®é¢˜ã€‚NVMåº“çš„é‡ç‚¹æ˜¯å°†å†™æ“ä½œç§»å‡ºå…³é”®è·¯å¾„ä»¥æé«˜æ€§èƒ½ï¼Œä½†æ²¡æœ‰å‡å°‘è¯»å»¶è¿Ÿã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒStealth-Persisté€šè¿‡å‡å°‘åŸºæœ¬çš„å†…å­˜è¯»å–æ“ä½œçš„å»¶è¿Ÿæ¥æé«˜æ€§èƒ½ï¼Œè¿™åœ¨NVMåº“ä¸­ä»ç„¶æ˜¯éœ€è¦çš„ã€‚ä¸€äº›æ–¹æ¡ˆä¸“æ³¨äºå®¹é”™(å¦‚Pangolin[61])ã€æ€§èƒ½å’Œå¼ºä¸€è‡´æ€§(å¦‚NOVA[57]) ã€å‡å°‘ç¼–ç¨‹å·¥ä½œé‡å’Œæ€§èƒ½(å¦‚Pronto[39]) ã€‚è™½ç„¶è¿™äº›æ–¹æ¡ˆé€šè¿‡å°†å†™å…¥å¼€é”€ç§»å‡ºåº”ç”¨ç¨‹åºçš„å…³é”®è·¯å¾„ï¼Œæˆ–è€…é€šè¿‡åœ¨DRAMä¸­ç¼“å†²ä¸€äº›æ›´æ–°æ¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ï¼Œä½†æ˜¯å¦‚æœéœ€è¦æŒä¹…æ€§ï¼Œå¯¹NVMçš„å†™å…¥æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸æ­¤ç›¸åï¼ŒStealth-persiståœ¨å†™åˆ°NVMæ—¶ï¼Œå¦‚æœå®ƒä»¬æ˜¯æŒ‡å‘NVMä¸­çš„ä¸€ä¸ªæŒä¹…æ€§åŒºåŸŸï¼Œå°±ä¼šä¼ æ’­åˆ°NVMï¼Œå¹¶å°†å†™åˆ°éæŒä¹…æ€§åŒºåŸŸçš„å†™å…¥ç¼“å†²åœ¨DRAMçš„ç¼“å­˜é¡µä¸­ã€‚æ­¤å¤–ï¼ŒStealth-Persiståœ¨ä¸æ‰€æå‡ºçš„NVMåº“ä¸åŒçš„å±‚ä¸­è¿è¡Œï¼Œè¿™ä½¿å¾—Stealth-Persistä¸è¿™äº›æ–¹æ¡ˆæ­£äº¤ã€‚äº‹å®ä¸Šï¼ŒStealth-Persistå¯ä»¥ä¸ä¸Šè¿°æ–¹æ¡ˆåŒæ—¶ä½¿ç”¨ï¼Œä»¥è¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚</p><p>åœ¨ä¸€ä¸ªä¸åŒçš„æ–¹å‘ï¼ŒHagmann[24]æå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆç»´æŠ¤ä¸ªæ—¥å¿—ä»¥æ¢å¤ç£ç›˜ä¸­çš„æ–‡ä»¶ç³»ç»Ÿã€‚Petal[34]é€šè¿‡åˆ›å»ºè™šæ‹Ÿç£ç›˜ï¼Œä½¿å®¢æˆ·èƒ½å¤Ÿè®¿é—®åˆ†å¸ƒå¼ç£ç›˜ï¼Œä»è€Œæ”¹å–„ç³»ç»Ÿçš„æ€§èƒ½ï¼Œæé«˜ååé‡ã€‚ä¸ºäº†æä¾›å¯æ¢å¤æ€§ï¼ŒPetalä½¿ç”¨å†™å‰è®°å½•ã€‚Conditç­‰äºº[23]æå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆï¼Œä½¿ç”¨å½±å­åˆ†é¡µä½¿æŒä¹…æ€§å­˜å‚¨å™¨çš„å´©æºƒä¸€è‡´æ€§ï¼Œ åœ¨è¿™ä¸ªæ–¹æ¡ˆä¸­ï¼Œå†™æ˜¯åŸåœ°æäº¤æˆ–ä½¿ç”¨å±€éƒ¨çš„å†™æ—¶æ‹·è´ã€‚Linuxæ–‡ä»¶ç³»ç»Ÿçš„BTRFS[49]ä½¿ç”¨Bæ ‘æ•°æ®ç»“æ„ï¼Œå¹¶ä½¿ç”¨å†™æ—¶æ‹·è´ä½œä¸ºæ›´æ–°æ–¹æ¡ˆã€‚Rosenblumå’ŒOusterhot[51]æå‡ºäº†ä¸€ä¸ªæ—¥å¿—ç»“æ„çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿä»¥é¡ºåºçš„æ–¹å¼æ‰§è¡Œæ‰€æœ‰å†™å…¥ç£ç›˜çš„æ“ä½œï¼Œå¹¶ä¿æŒç´¢å¼•ä¿¡æ¯ä»¥åŠ å¿«æ•°æ®æ£€ç´¢ã€‚Seltzerç­‰äººã€‚[53]æå‡ºäº†ä¸€ä¸ªæ—¥å¿—ç»“æ„çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå…·æœ‰æ›´å¥½çš„å†™å…¥æ€§èƒ½ï¼Œæ›´å°‘çš„æ¢å¤æ—¶é—´ï¼Œå¹¶èƒ½å®ç°åµŒå…¥å¼äº‹åŠ¡å’Œç‰ˆæœ¬ç®¡ç†ã€‚æå‡ºè¿™æ ·çš„æ–¹æ¡ˆæ˜¯ä¸ºäº†ç¡®ä¿åŸå­æ€§ã€å¯æ¢å¤æ€§ï¼Œå¹¶æé«˜æ€§èƒ½åœ¨ç£ç›˜ä¸­ã€‚ç„¶è€Œï¼Œåœ¨ç¡®ä¿æŒä¹…æ€§çš„åŒæ—¶ï¼Œè¿™äº›æ–¹æ¡ˆå¹¶æ²¡æœ‰æ<br>é«˜è¯»å–æ“ä½œçš„æ€§èƒ½ã€‚å› æ­¤ï¼Œå®ƒä»¬ä¸Stealth- Persistæ˜¯æ­£äº¤çš„ã€‚</p><h1 id="å››ã€æ–¹æ³•è®º"><a href="#å››ã€æ–¹æ³•è®º" class="headerlink" title="å››ã€æ–¹æ³•è®º"></a>å››ã€æ–¹æ³•è®º</h1><p>æˆ‘ä»¬åœ¨ç»“æ„æ¨¡æ‹Ÿå·¥å…·åŒ…( SST)æ¨¡æ‹Ÿå™¨ä¸­å¯¹Stealth-Peritè¿›è¡Œå»ºæ¨¡[50]ã€‚SSTæ˜¯ä¸€ä¸ªåŸºäºå‘¨æœŸçº§äº‹ä»¶çš„ä»¿çœŸå™¨ï¼Œ å¯¹ä¸åŒçš„ç¡¬ä»¶ç»„ä»¶è¿›è¡Œæ¨¡å—åŒ–è®¾è®¡ã€‚SSTåœ¨å·¥ä¸šç•Œå’Œå­¦æœ¯ç•Œè¢«å¹¿æ³›ä½¿ç”¨[28],[30],[31]ã€‚æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ··åˆçš„å†…å­˜æ§åˆ¶å™¨ç»„ä»¶ï¼Œä»¥å¤„ç†DRAMå’ŒNVMã€‚è¡¨äºŒæ˜¾ç¤ºäº†æ¨¡æ‹Ÿç³»ç»Ÿçš„é…ç½®ã€‚æ¨¡æ‹Ÿçš„ç³»ç»ŸåŒ…å«4ä¸ªå¤±åºçš„å†…æ ¸ï¼Œæ¯ä¸ªå†…æ ¸åœ¨æ¯ä¸ªå‘¨æœŸæ‰§è¡Œ2æ¡æŒ‡ä»¤ã€‚æ ¸å¿ƒçš„é¢‘ç‡æ˜¯2GHzã€‚ä¸‰ä¸ªçº§åˆ«çš„ç¼“å­˜ï¼ŒL1ï¼ŒL2å’ŒL3(åŒ…æ‹¬)è¢«æ¨¡æ‹Ÿä¸º32KBï¼Œ256KBå’Œ1MBã€‚DRAMçš„å®¹é‡ä¸º1GBï¼ŒNVMçš„å®¹é‡ä¸º4GBã€‚ï¼ˆè¯·æ³¨æ„ï¼Œé€‰æ‹©DRAMå’ŒNVMçš„å¤§å°æ˜¯ç”±äºä»¿çœŸé€Ÿåº¦çš„é™åˆ¶ï¼Œç„¶è€Œï¼Œæœ€é‡è¦çš„å‚æ•°æ˜¯é•œåƒåŒºåŸŸçš„å¤§å°( 32MB)å’Œåº”ç”¨ç¨‹åºçš„å¹³å‡è¶³è¿¹( 256MB)ã€‚ï¼Œ ç”±äºæŒä¹…æ€§åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æ•°æ®å°†é©»ç•™åœ¨NVMä¸­ï¼Œå¹¶ä¸”å¯ä»¥åœ¨é•œåƒåŒºåŸŸä¸­æŒä¹…æ€§åœ°ç¼“å­˜ï¼Œå› æ­¤æˆ‘ä»¬å…³æ³¨åº”ç”¨ç¨‹åºçš„è¶³è¿¹ä¸é•œåƒåŒºåŸŸçš„æ¯”ä¾‹(8:1çš„æ¯”ä¾‹) ï¼Œæˆ‘ä»¬åœ¨æœ¬æ–‡åé¢å°†å¯¹æ­¤è¿›è¡Œä¿®æ”¹ã€‚ï¼‰ NVMçš„è¯»å†™å»¶è¿Ÿä¸º150nså’Œ500ns[14]ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/f75fb2353b384d6cb0f88987635402e5.png"></p><h2 id="A-è´Ÿè½½å·¥ä½œ"><a href="#A-è´Ÿè½½å·¥ä½œ" class="headerlink" title="A.è´Ÿè½½å·¥ä½œ"></a>A.è´Ÿè½½å·¥ä½œ</h2><p>ä¸ºäº†è¯„ä¼°æˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬è¿è¡Œäº†11ä¸ªæŒä¹…æ€§åº”ç”¨ç¨‹åºã€‚å¦‚è¡¨ä¸‰æ‰€ç¤ºï¼Œå…¶ä¸­å…­ä¸ªåŸºå‡†æ˜¯å†…éƒ¨å¼€å‘çš„ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯ä¸ºäº†å¼ºè°ƒå†…å­˜çš„ä½¿ç”¨ï¼Œå¹¶åœ¨ä»¥å‰çš„å·¥ä½œä¸­ä½¿ç”¨è¿‡[37]ã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºçš„åŠŸèƒ½æè¿°å¦‚ä¸‹</p><ol><li>ARSWP:è¯¥åŸºå‡†ä»æ•°æ®åº“ä¸­éšæœºé€‰æ‹©ä¸¤ä¸ªå¯†é’¥å¹¶è¿›è¡Œäº¤æ¢ã€‚ </li><li>RANDWR:é€‰æ‹©éšæœºé’¥åŒ™ï¼Œç”¨æ‰€é€‰é’¥åŒ™çš„æ•°æ®åº“æ¡ç›®æ›´æ–°ä¸€ä¸ªéšæœºå€¼ã€‚</li><li>SEQWR:è¿™ä¸RANDWRç±»ä¼¼ï¼Œä½†é’¥åŒ™æ˜¯æŒ‰é¡ºåºé€‰æ‹©çš„ï¼Œä»æ•°æ®åº“çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ã€‚ </li><li>AVL:æ•°æ®åº“è¢«æ˜ å°„åˆ°AVLæ ‘ä¸Šï¼Œå¹¶åœ¨æ˜ å°„çš„æ•°æ®åº“ä¸­æœç´¢ä¸€ä¸ªéšæœºç”Ÿæˆçš„å¯†é’¥ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯†é’¥ï¼Œåˆ™è§¦å‘æ’å…¥æ“ä½œã€‚ </li><li>BTREE:è¯¥åŸºå‡†å°†æ•°æ®åº“æ˜ å°„ä¸ºBæ ‘ï¼Œä¸AVLç±»ä¼¼ï¼Œæœç´¢ä¸€ä¸ªéšæœºå¯†é’¥ï¼Œ å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ç”¨å‡æ•°æ®æ’å…¥å¯†é’¥ã€‚ </li><li>RBTREE:ä¸AVLå’ŒBTREEåŸºå‡†ç±»ä¼¼ï¼ŒRBTREEåŸºå‡†å°†æ•°æ®åº“æ˜ å°„ä¸ºRBæ ‘ï¼Œ å¹¶æœç´¢ä¸€ä¸ªéšæœºå¯†é’¥ã€‚</li></ol><p> <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/d02f12cdf7f04e548613eeaf042b87fb.png"><br>æˆ‘ä»¬è¿˜è¿è¡Œäº†ç”±å¨æ–¯åº·æ˜Ÿå¤§å­¦éº¦è¿ªé€Šåˆ†æ ¡ä¸æƒ æ™®å®éªŒå®¤åˆä½œå¼€å‘çš„WHISPERåŸºå‡†æµ‹è¯•å¥—ä»¶[41]ä¸­çš„äº”é¡¹åŸºå‡†(è¡¨ä¸‰ä¸­å‰é¢æœ‰Wï¼š)ã€‚TPCCåŸºå‡†æµ‹é‡çš„æ˜¯åŸºäºå¤æ‚æ•°æ®åº“å’Œåœ¨å…¶ä¸Šæ‰§è¡Œçš„å„ç§æ•°æ®åº“äº‹åŠ¡çš„åœ¨çº¿äº¤æ˜“å¤„ç†ç³»ç»Ÿ(OLTP)çš„æ€§èƒ½ã€‚é›…è™äº‘æœåŠ¡åŸºå‡†( YCSB)æ˜¯ä¸€ä¸ªç”¨äºè¯„ä¼°æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç¼–ç¨‹å¥—ä»¶ã€‚W:TPCCå’ŒW:YCSBåŸºå‡†æ˜¯WhisperåŸºå‡†å¥—ä»¶çš„å˜ç§ï¼Œå®ƒæ˜¯ä»¥N-Store[12]ä¸ºæ¨¡å‹çš„ï¼ŒN-Storeæ˜¯ä¸€ä¸ªæŒä¹…æ€§å†…å­˜çš„è¿œç¨‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚W:CTREEå’ŒW:HASHMAPåŸºå‡†æ˜¯ä½¿ç”¨NVML[56]åº“å¼€å‘çš„ï¼Œè¯¥åº“å¯¹æŒä¹…æ€§å­˜å‚¨å™¨åŒºåŸŸæ‰§è¡Œæ’å…¥ã€åˆ é™¤å’Œè·å–æ“ä½œã€‚W:ECHOæ˜¯ä¸€ä¸ªç”¨äºæŒä¹…æ€§å†…å­˜åŒºåŸŸçš„å¯æ‰©å±•é”®å€¼å­˜å‚¨ã€‚å¯¹W: CTREEå’ŒW:HASHMAPåŸºå‡†çš„åœ°å›¾è·å–åŠŸèƒ½è¿›è¡Œäº†è¯„ä¼°ã€‚</p><p>æ‰€æœ‰è¿™äº›åŸºå‡†çš„å¯†é’¥å¤§å°ä¸º512æ¯”ç‰¹ï¼Œæ•°æ®åº“å¤§å°ä¸º1GBã€‚åœ¨è¯„ä¼°è¿™äº›åŸºå‡†ä¹‹å‰ï¼Œé¦–å…ˆç”¨éšæœºå¯†é’¥å¡«å……æ•°æ®åº“ã€‚è¿™äº›åŸºå‡†çš„æ¯åƒæ¡æŒ‡ä»¤çš„å¤±è¯¯ç‡( MPKI)è§è¡¨IIIã€‚æ¯ä¸ªåŸºå‡†å¯¹500MæŒ‡ä»¤è¿›è¡Œäº†è¯„ä¼°ã€‚</p><h2 id="B-DRAM-Mirror-Configurationé•œåƒé…ç½®"><a href="#B-DRAM-Mirror-Configurationé•œåƒé…ç½®" class="headerlink" title="B. DRAM Mirror Configurationé•œåƒé…ç½®"></a>B. DRAM Mirror Configurationé•œåƒé…ç½®</h2><p>ä¸ºäº†é•œåƒè™šæ‹Ÿæœºçš„æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†32MBçš„DRAMã€‚ç„¶è€Œï¼Œæ­£å¦‚ç¬¬äº”ç« EèŠ‚ä¸­æ‰€è®¨è®ºçš„é‚£æ ·ï¼Œ æˆ‘ä»¬æŠŠé•œåƒåŒºåŸŸçš„å¤§å°ä»2MBåˆ°1GBä¸ç­‰(æ•´ ä¸ªDRAMè¢«ç”¨ä½œé•œåƒåŒºåŸŸ)ã€‚æœ€å°åŒ–æ˜¯ä»¥é¡µä¸ºå•ä½è¿›è¡Œçš„ã€‚åœ¨MQæœºåˆ¶ä¸­ï¼Œåªæœ‰å½“é¡µé¢è¾¾åˆ°MQçº§åˆ«4æ—¶æ‰ä¼šè¢«é•œåƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªé¡µé¢è¢«è¯»å–16æ¬¡æ—¶ã€‚çºªå…ƒçš„æ—¶é—´é—´éš”è¢«è®¾ç½®ä¸º10000æ¬¡è¯»å–æ“ä½œã€‚å°½ç®¡æˆ‘ä»¬ç”¨ä¸Šè¿°é…ç½®è¯„ä¼°äº†StealthPersistæ–¹æ³•ï¼Œä½†æˆ‘ä»¬é€šè¿‡æ”¹å˜DRAMé•œåƒã€å¤§å°å’Œé˜ˆå€¼æ°´å¹³æ¥è¿›è¡Œæ•æ„Ÿæ€§åˆ†æã€‚ç”±å†…å­˜æ§åˆ¶å™¨ç»´æŠ¤çš„é•œåƒè¡¨ç¼“å­˜çš„å¤§å°ä¸º128ç»„ï¼Œæ¯ç»„æœ‰ 6ä¸ªæ˜ å°„ã€‚é•œåƒè¡¨ç¼“å­˜çš„æŸ¥æ‰¾å»¶è¿Ÿä¸º1nsã€‚</p><h1 id="äº”ã€è¯„ä¼°"><a href="#äº”ã€è¯„ä¼°" class="headerlink" title="äº”ã€è¯„ä¼°"></a>äº”ã€è¯„ä¼°</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œ æˆ‘ä»¬è®¨è®ºäº†Stealth-Persistä¸ç›´æ¥ä½¿ç”¨NVMè¿›è¡ŒæŒä¹…åŒ–çš„ç³»ç»Ÿçš„å¯¹æ¯”ç»“æœã€‚æˆ‘ä»¬è¿›ä¸€æ­¥å±•ç¤ºäº†é€šè¿‡æ”¹å˜å½±å“æ€§èƒ½çš„ä¸åŒå‚æ•°è€Œè¿›è¡Œçš„æ•æ„Ÿæ€§åˆ†æã€‚</p><h2 id="A-Stealth-Persistå¯¹æ€§èƒ½çš„å½±å“"><a href="#A-Stealth-Persistå¯¹æ€§èƒ½çš„å½±å“" class="headerlink" title="A.Stealth-Persistå¯¹æ€§èƒ½çš„å½±å“"></a>A.Stealth-Persistå¯¹æ€§èƒ½çš„å½±å“</h2><p>å›¾7æ˜¾ç¤ºäº†ä½¿ç”¨Stealth-Persistæ–¹æ³•çš„æ€§èƒ½æ”¹è¿›ã€‚åŸºå‡†æ–¹æ¡ˆæ˜¯OptaneDC ADæ¨¡å¼æ–¹æ¡ˆï¼Œå…¶ä¸­æ‰€æœ‰çš„æŒä¹…æ€§å†…å­˜è¯·æ±‚éƒ½åªå­˜å‚¨åˆ°æŒä¹…æ€§å†…å­˜(NVM)ã€‚è¿™æ˜¯å®ç°æ­¤ç±»ç³»ç»Ÿçš„æŒä¹…æ€§åº”ç”¨çš„æ•°æ®æŒä¹…æ€§çš„å…¸å‹æ–¹å¼ã€‚å¹³å‡è€Œè¨€ï¼Œä½¿ç”¨Stealth-PersistMQå’ŒFTPæ–¹æ³•ï¼Œæ€§èƒ½æé«˜äº†30.9%å’Œ42.02%ã€‚åº”ç”¨ç¨‹åºçš„æ€§èƒ½æ”¹å–„æ˜¯é•œåƒåŒºåŸŸå‘½ä¸­ç‡çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸€ç‚¹åœ¨ç¬¬V-BèŠ‚ä¸­è®¨è®ºã€‚Stealth-Persist FTPçš„æ”¹è¿›é«˜äºStealth-Persist MQæ–¹æ³•ï¼Œå› ä¸ºæ¯ä¸€ä¸ªè¢«è¯»å–çš„é¡µé¢éƒ½åœ¨DRAMä¸­è¢«é•œåƒè¿™å¯¼è‡´äº†å¤§é‡çš„é¡µé¢ä»NVMå¤åˆ¶åˆ°DRAMä¸­ã€‚å¹³å‡æ¥è¯´ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°éšèº«ä¼ è¾“FTPæ¯”éšèº«ä¼ è¾“MQæ–¹æ³•å¤šé•œåƒäº†542.96å€çš„é¡µé¢ï¼Œè¿™å¤§å¤§å¢åŠ äº†å†…å­˜æ€»çº¿çš„æµé‡å’Œèƒ½æºä½¿ç”¨ã€‚å¯¹äºåƒSEQWRå’ŒW:ECHOè¿™æ ·çš„é¡ºåºå†…å­˜è®¿é—®åŸºå‡†ï¼ŒStealth-Persist FTPçš„æ”¹è¿›æ˜¯å·¨å¤§çš„â€“2.34å€å’Œ2.5å€ã€‚åˆ†åˆ«ä¸º2.2å€ã€‚ç”±äºè¿™äº›åŸºå‡†æ˜¯æŒ‰é¡ºåºè®¿é—®å†…å­˜çš„ï¼Œæ‰€ä»¥è¿™äº›åŸºå‡†çš„ç©ºé—´å®šä½æ€§å¾ˆé«˜ã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªé¡µé¢è¢«è¯»å–æ—¶å®ƒç«‹å³è¢«é•œåƒåˆ°Stealth-persist FTPä¸­ï¼Œå¹¶è¢«è®¿é—®ä¸ºè¿ç»­çš„å†…å­˜è®¿é—®ã€‚å¦ä¸€æ–¹é¢ï¼ŒStealth-Persist MQæ–¹æ³•ï¼Œé¦–å…ˆï¼Œé¡µé¢åº”è¯¥è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼æ‰èƒ½è¢«é•œåƒã€‚å¯¹äºAVLå’ŒRBTREEå·¥ä½œè´Ÿè½½æ¥è¯´ï¼Œéšèº«ä¸»ä¹‰MQæ–¹æ³•ä¼˜äºéšèº«ä¸»ä¹‰FTPï¼Œå› ä¸ºéšèº«ä¸»ï¼Œä¹‰FTPéå¸¸é¢‘ç¹åœ°æ›¿æ¢é•œåƒåŒºåŸŸçš„é¡µé¢ï¼Œè¿™å¯¼è‡´äº†ä»é•œåƒåŒºåŸŸé©±é€çƒ­é¡µé¢ã€‚å¦ä¸€æ–¹é¢ï¼ŒStealth-persist MQæ–¹æ³•å€¾å‘äºå°†çƒ­é¡µä¿ç•™åœ¨é•œåƒåŒºåŸŸã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/fd4aaaa8276a419c8b119a5ad7190607.png"><br>å¯¹äºARSWPå·¥ä½œè´Ÿè½½ï¼ŒStealth-Persistæ–¹æ¡ˆçš„æ€§èƒ½ä¸Optane DCåº”ç”¨äºŒç»´æ¨¡å¼ç›¸æ¯”å‡ ä¹æ²¡æœ‰å˜åŒ–ï¼Œä»å›¾3æ¥çœ‹ï¼Œä¸ä½¿ç”¨DRAMä½œä¸ºä¸»å†…å­˜çš„ç³»ç»Ÿç›¸æ¯”ï¼Œå®ƒå—åˆ°äº†å¾ˆå¤§çš„å½±å“å®ƒçš„é€Ÿåº¦è¦æ…¢4.39å€ã€‚ç„¶è€Œï¼ŒARSWPåº”ç”¨ç¨‹åºçš„å†…å­˜è®¿é—®éå¸¸ç¨€ç–ï¼Œå› æ­¤é¡µé¢çš„é‡ç”¨è·ç¦»å¾ˆé«˜ï¼Œè¿™å¯¼è‡´åœ¨Stealth-persist FTPæ–¹æ³•ä¸­ï¼Œåœ¨è¿™äº›é¡µé¢è¢«é‡ç”¨ä¹‹å‰å°±è¢«é©±é€äº†ã€‚æ­¤å¤–ï¼ŒARSWPåº”ç”¨ç¨‹åºçš„é¡µé¢æ²¡æœ‰è¾¾åˆ°Stealth-Persist MQæ–¹æ³•çš„é•œåƒé™åˆ¶ã€‚å› æ­¤ï¼Œæ€§èƒ½ä¸‹é™äº†3%ï¼Œåœ¨ç”±äºæ£€æŸ¥é•œåƒåŒºåŸŸè€Œåªæœ‰0.02%çš„å‘½ä¸­ç‡ï¼ŒMQæ–¹æ³•ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºæœ‰3%çš„å‘½ä¸­ç‡ï¼ŒStealth-persist FTPçš„æ€§èƒ½åœ¨ARSWPåŸºå‡†ä¸­æé«˜äº†1.6%ã€‚ç„¶è€Œï¼Œå¦‚ç¬¬V-E1èŠ‚æ‰€ç¤ºï¼Œå½“é•œåƒåŒºåŸŸçš„å¤§å°å¢åŠ æ—¶ï¼ŒARSWPçš„æ€§èƒ½å¾—åˆ°æ”¹å–„ã€‚</p><h2 id="B-DRAMé•œåƒå‘½ä¸­ç‡"><a href="#B-DRAMé•œåƒå‘½ä¸­ç‡" class="headerlink" title="B.DRAMé•œåƒå‘½ä¸­ç‡"></a>B.DRAMé•œåƒå‘½ä¸­ç‡</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/55e20b926dcb4b9ababf12230c83b888.png"><br>å›¾8æ˜¾ç¤ºäº†ç”±DRAMé•œåƒåŒºåŸŸæä¾›æœåŠ¡çš„è¯»å–ç™¾åˆ†æ¯”ã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæœ‰é¡ºåºå†…å­˜è®¿é—®çš„åº”ç”¨æ˜¾ç¤ºå‡ºæœ€å¥½çš„æ€§èƒ½æ”¹è¿›FTPåœ¨è¿™äº›åº”ç”¨ä¸­æ˜¾ç¤ºå‡ºéå¸¸é«˜çš„å‘½ä¸­ç‡ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨Stealth-Persist MQæ–¹æ³•ä¸­ï¼Œå…·æœ‰éšæœºè·¨åº¦è®¿é—®çš„åº”ç”¨å’Œå…·æœ‰çƒ­é¡µçš„åº”ç”¨æ˜¾ç¤ºå‡ºæœ€é«˜çš„å‘½ä¸­ç‡ã€‚å¦‚å›¾8æ‰€ç¤ºï¼Œåœ¨Stealth- Persist FTPæ–¹æ³•ä¸­ï¼Œé•œåƒé¡µå¹³å‡å æ•´ä¸ªå†…å­˜è¯»å–çš„57.81%ã€‚å¯¹äºStealth-Persist MQï¼Œä¸Stealth-Persist FTPç›¸æ¯”ï¼Œå®ƒä»¥åˆç†çš„é¡µé¢é•œåƒæ•°é‡æœåŠ¡äºå¹³å‡24.78%çš„æ•´ä½“è¯»å–ã€‚å¦‚å›¾8æ‰€ç¤ºï¼Œå…·æœ‰æœ€é«˜å‘½ä¸­ç‡çš„å†…å­˜çº¦æŸåº”ç”¨ç¨‹åºæ˜¾ç¤ºå‡ºæœ€é«˜çš„æ€§èƒ½æ”¹è¿›ã€‚åœ¨Stealth-Perist FTPä¸­ï¼ŒWHISPERåŸºå‡†çš„é•œåƒå‘½ä¸­ç‡ï¼Œå¦‚CTREEå’ŒHASHMAPå¾ˆé«˜ï¼Œä½†æ€§èƒ½çš„æé«˜æ²¡æœ‰SEQWRå’ŒECHOåŸºå‡†é‚£ä¹ˆå¤šã€‚è¿™æ˜¯å› ä¸ºCTREEå’ŒHASHMAPåº”ç”¨ä¸åƒEPOCHå’ŒSEQWRé‚£æ ·å†…å­˜å¯†é›†ï¼Œè¿™ä¸CTREEå’ŒHASHMAPçš„MPKIæœ‰å…³ï¼Œå¦‚è¡¨ä¸‰æ‰€ç¤ºCTREEçš„MPKIä¸º1.75ï¼ŒHASHMAPçš„MPKIä¸º0.84ã€‚</p><h2 id="C-Stealth-Persistå¯¹NVMè¯»å–çš„å½±å“"><a href="#C-Stealth-Persistå¯¹NVMè¯»å–çš„å½±å“" class="headerlink" title="C.Stealth-Persistå¯¹NVMè¯»å–çš„å½±å“"></a>C.Stealth-Persistå¯¹NVMè¯»å–çš„å½±å“</h2><p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†ä½¿ç”¨Stealth-Persistæ–¹æ³•å‡å°‘å‘é€åˆ°NVMçš„è¯»å–æ¬¡æ•°ã€‚å½“é•œåƒåŒºåŸŸçš„å‘½ä¸­ç‡å¾ˆé«˜ï¼Œ å¤§éƒ¨åˆ†çš„è¯»å–éƒ½ç”±é•œåƒåŒºåŸŸæä¾›<br>è¿™å°±å‡å°‘äº†å‘é€åˆ°NVMçš„è¯»å–æ•°é‡ã€‚å›¾9æ˜¾ç¤ºï¼Œä¸Optane DC ADæ¨¡å¼( 100%)ç›¸æ¯”,ä½¿ç”¨Stealth-Persist FTPå’ŒMQæ–¹æ³•ï¼ŒNVMçš„è¯»å–æ¬¡æ•°å¹³å‡å‡å°‘äº† 88.28%å’Œ73.28%ã€‚å¯¹äºSEQWRå’ŒW:ECHOåŸºå‡†æ¥è¯´ï¼Œä½¿ç”¨Stealth-Perist FTPæ˜¾ç¤ºå‡ºæœ€é«˜çš„æ€§èƒ½æ”¹è¿›ï¼ŒNVMè¯»æ•°åˆ†åˆ«æ˜æ˜¾å‡å°‘äº†98.42%å’Œ98.02%ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/0491934cb8024507bcb52dedff4c7835.png"></p><p>å¦‚å›¾10æ‰€ç¤ºï¼ŒStealth-Persistä¸‡æ¡ˆå¯¹å†™å…¥NVMçš„æ¬¡æ•°æ²¡æœ‰ä»»ä½•å½±å“ã€‚ç„¶è€Œ,Stealth-Persistä¹Ÿä¼šå°†é•œåƒé¡µçš„å†™å…¥å‘é€åˆ°DRAMä¸­ã€‚å› æ­¤ï¼ŒStealth-Persistä¸å½±å“NVMçš„å†™å…¥æŒä¹…æ€§ï¼Œä¹Ÿä¸å¢åŠ èƒ½è€—ï¼Œè¿™å¯èƒ½æ˜¯ç”±äºå¢åŠ NVMçš„å†™å…¥é‡é€ æˆçš„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/cf110ec94f8d4ebeace793e8ad7a01e1.png"></p><h2 id="E-æ•æ„Ÿåº¦åˆ†æ"><a href="#E-æ•æ„Ÿåº¦åˆ†æ" class="headerlink" title="E.æ•æ„Ÿåº¦åˆ†æ"></a>E.æ•æ„Ÿåº¦åˆ†æ</h2><p>å°½ç®¡Stealth-Persist FTPå’ŒMQä¸åŸºçº¿( OptaneDC ADæ¨¡å¼)ç›¸æ¯”ï¼Œå¹³å‡æé«˜äº†42.02%å’Œ30.9%çš„æ€§èƒ½,ä½†ä»æœ‰æ”¹è¿›çš„ä½™åœ°ï¼Œå› ä¸ºé•œåƒåŒºåŸŸçš„å‘½ä¸­ç‡å¹³å‡ä¸º57.81%å’Œ24.78%ã€‚é”™è¿‡çš„åŸå› æœ‰å¾ˆå¤šï¼Œä½†ä¸»è¦æ˜¯å—Stealth-Persistè®¾è®¡ä¸­çš„é•œåƒåŒºåŸŸå¤§å°å’Œé•œåƒé˜ˆå€¼çš„å½±å“ç„¶è€Œå¢åŠ é•œåƒåŒºåŸŸçš„å¤§å°å°†å¢åŠ ç¡¬ä»¶çš„å¤æ‚æ€§( é•œåƒè¡¨çš„å¤§å°),è€Œå‡å°‘é•œåƒé˜ˆå€¼å¯èƒ½ä¼šå¯¼è‡´æå‰æ›¿æ¢æ‰€éœ€çš„é¡µé¢ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¼šé™ä½æ•´ä½“æ€§èƒ½ã€‚ä¸ºäº†å……åˆ†åˆ†æé•œåƒåŒºåŸŸå¤§å°å’Œé•œåƒé˜ˆå€¼çš„å½±å“ï¼Œæˆ‘ä»¬åœ¨æœ¬èŠ‚ä¸­æ”¹å˜äº†é•œåƒåŒºåŸŸå¤§å°å’Œé•œåƒé˜ˆå€¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å±•ç¤ºäº†å¿«é€Ÿå’Œæ…¢é€ŸNVM.ä¸Šçš„æ€§èƒ½æ”¹è¿›ã€‚æ‰€<br>æœ‰å·¥ä½œè´Ÿè½½çš„å¹³å‡å€¼æ˜¾ç¤ºåœ¨æ•æ„Ÿæ€§ç»“æœä¸­ã€‚</p><p>1)é•œåƒåŒºåŸŸå¯¹æ€§èƒ½çš„å½±å“ã€‚åœ¨DRAMä¸­å¯ä»¥è¢«é•œåƒçš„æŒä¹…æ€§é¡µé¢çš„æ•°é‡å–å†³äºä¸ºé•œåƒä¿ç•™çš„DRAMå†…å­˜çš„ç™¾åˆ†æ¯”ã€‚ä¸ºäº†é¿å…å¤§é‡çš„å†…å­˜å¼€é”€ï¼Œ Stealth-Persiståªä¿ç•™äº†32MBçš„DRAMï¼Œä¹Ÿå°±æ˜¯æ¨¡æ‹Ÿç³»ç»Ÿä¸­DRAMçš„3.125%ï¼Œç”¨äºé•œåƒæŒä¹…æ€§å†…å­˜é¡µã€‚ç„¶è€Œï¼Œæ­£å¦‚å‰é¢æ‰€è®¨è®ºçš„ï¼Œ åœ¨ä½¿ç”¨Stealth-Persistæ—¶ï¼Œå¯ä»¥é•œåƒçš„é¡µé¢è¶Šå¤šï¼Œç³»ç»Ÿæ€§èƒ½çš„ä¸Šé™å°±è¶Šå¤§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†é•œåƒåŒºåŸŸçš„å¤§å°ä»2MBæ”¹ä¸º1GBï¼Œä»¥è¯„ä¼°Stealth-Persistçš„æ€§èƒ½æ”¹è¿›ã€‚è¯·æ³¨æ„ï¼Œå½“é•œåƒåŒºåŸŸçš„å¤§å°ä¸º1GBæ—¶æ•´ä¸ªDRAMéƒ½è¢«ä¿ç•™ç”¨äºç¼“å­˜é•œåƒé¡µé¢ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/43bef6e28284442c84f9a398b2558af4.png"></p><p>å›¾11æ˜¾ç¤ºï¼Œå¢åŠ é•œåƒåŒºåŸŸçš„å¤§å°å¯ä»¥æé«˜FTPå’ŒMQçš„æ€§èƒ½ã€‚å½“é•œåƒåŒºåŸŸå¤§å°ä»2MBå¢åŠ åˆ°1GBæ—¶ï¼ŒStealth-Perist FTPçš„æ€§èƒ½æ”¹å–„ä»1.28å€å¢åŠ åˆ°1.83å€ï¼ŒStealth-Perist MQä»1.14å€å¢åŠ åˆ°1.38å€ã€‚ç”±äºMQæ˜¯ä¸€ç§åŸºäºç¡®è®¤çš„æ–¹æ³•ï¼Œåªæœ‰å½“NVMé¡µé¢è¢«è®¿é—®çš„æ¬¡æ•°è¶…è¿‡é˜ˆå€¼(4)æ—¶æ‰ä¼šè¢«é•œåƒï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨Stealth-Persist MQçš„64MBé•œåƒåŒºåŸŸå¤§å°åï¼Œæ”¹è¿›å·²ç»é¥±å’Œã€‚å› æ­¤ï¼Œå³ä½¿é•œåƒåŒºåŸŸçš„å¤§å°å¢åŠ äº†ï¼Œ è¦é•œåƒçš„é¡µé¢æ•°é‡ä¹Ÿå—åˆ°é˜ˆå€¼çš„é™åˆ¶ï¼Œå› æ­¤æ€§èƒ½çš„æé«˜æ˜¯é¥±å’Œçš„ã€‚å½“é•œåƒåŒºåŸŸå¤§å°ä¸º64MBæ—¶ï¼Œä½¿ç”¨Stealth-Perist FTPçš„æ€§èƒ½æå‡ä¸º1.48å€ï¼Œä½¿ç”¨Stealth-Perist MQä¸º1.35å€ã€‚å¦å¤–ï¼Œæ­£å¦‚æ‰€æ–­è¨€çš„é‚£æ ·ï¼ŒARSWPåŸºå‡†åœ¨32MBçš„é•œåƒå¤§å°ä¸‹æ²¡æœ‰æ˜¾ç¤ºå‡ºæ€§èƒ½çš„æ”¹å–„ï¼Œ åœ¨é•œåƒåŒºåŸŸå¤§å°ä¸º64MBã€128MBã€ 256MBã€512MBå’Œ1GBæ—¶ï¼ŒStealth-Persist FTPåˆ†åˆ«å®ç°äº†1.06å€ã€ 1.22å€ã€ 1.75å€ã€ 2.65å€å’Œ3.22å€çš„æ”¹å–„ã€‚ç„¶è€Œï¼Œä½¿ç”¨Stealth-Persist MQï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æ²¡æœ‰ä»»ä½•æ”¹å–„ï¼Œå› ä¸ºARSWPåº”ç”¨ç¨‹åºçš„é¡µé¢æ²¡æœ‰è¾¾åˆ°é•œåƒé˜ˆå€¼ã€‚</p><p>2)é•œåƒé˜ˆå€¼æ°´å¹³å¯¹æ€§èƒ½çš„å½±å“ã€‚åœ¨å›¾12ä¸­ï¼Œæˆ‘ä»¬æ˜¾ç¤ºäº†æ”¹å˜é•œåƒçš„ç»“æœã€‚é˜ˆå€¼é˜Ÿåˆ—æ°´å¹³ã€‚å½“é˜ˆå€¼æ°´å¹³é™ä½æ—¶ï¼Œä½¿ç”¨Stealth-Perist<br>MQæ–¹æ³•çš„æ€§èƒ½æ”¹å–„ä¼šå¢åŠ ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œå½“é˜ˆå€¼æ°´å¹³è®¾ç½®ä¸º1æ—¶ï¼Œæ€§èƒ½æé«˜äº†1.46å€;å½“é˜ˆå€¼æ°´å¹³ä¸º4æ—¶ï¼Œæ€§èƒ½æé«˜äº†1.3å€ã€‚å½“é˜ˆå€¼æ°´å¹³é™ä½æ—¶ï¼ŒStealth-Persistè¡¨ç°å¾—å¾ˆç§¯æï¼Œå› ä¸ºæœ‰æ›´å¤šçš„é¡µé¢è¢«è¯†åˆ«ä¸ºé•œåƒçš„å€™é€‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“é˜ˆå€¼æ°´å¹³ä¸º1æ—¶ï¼Œå¦‚æœåº”ç”¨ç¨‹åºè‡³å°‘è¯»äº†2æ¬¡é¡µé¢ï¼Œè¯¥é¡µé¢å°±è¢«ç¡®å®šä¸ºé•œåƒå€™é€‰ã€‚ä½†æ˜¯ï¼Œå½“é˜ˆå€¼æ°´å¹³ä¸º4æ—¶ï¼Œåªæœ‰å½“ä¸€ä¸ªé¡µé¢è¢«è¯»å–è‡³å°‘16æ¬¡æ—¶æ‰ä¼šè¢«é•œåƒã€‚å› æ­¤ï¼Œé€šè¿‡é™ä½é˜ˆå€¼æ°´å¹³å®ç°çš„æ€§èƒ½æ”¹å–„æ˜¯ä»¥å¢åŠ é•œåƒçš„é¡µé¢æ•°é‡ä¸ºä»£ä»·çš„ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/6e837cd8fd5146e4bf6af4d90366c21e.png"></p><p>å¦ä¸€æ–¹é¢ï¼Œç”±äºä¸¤ä¸ªåŸå› ï¼Œå¢åŠ é˜ˆå€¼æ°´å¹³ä¼šæŸå®³æ€§èƒ½çš„æé«˜ã€‚1) ä¸€ä¸ªé¡µé¢åœ¨è¾¾åˆ°é˜ˆå€¼æ°´å¹³åè¢«é•œåƒï¼Œéšç€é˜Ÿåˆ—æ°´å¹³çš„å¢åŠ ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»æ›´é¢‘ç¹åœ°è®¿é—®è¯¥é¡µé¢æ‰èƒ½è¢«ç¡®å®šä¸ºé•œåƒå€™é€‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™äº›é¡µé¢çš„æ¯”ä¾‹å¾ˆå°ï¼Œè€Œä¸”å®ƒä»¬ç»å¸¸è¢«ç¼“å­˜åœ¨å¤„ç†å™¨ä¸­ã€‚2)åœ¨è¾¾åˆ°é˜ˆå€¼æ°´å¹³åï¼Œé¡µé¢çš„çƒ­åº¦ä¼šæ¶ˆå¤±ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé˜ˆå€¼æ°´å¹³è¢«è®¾ç½®ä¸º6ï¼Œä¸€ä¸ªé¡µé¢å¿…é¡»è¢«è®¿é—®è‡³å°‘64æ¬¡æ‰èƒ½è¢«é•œåƒã€‚ç„¶è€Œï¼Œåœ¨è®¿é—®è¯¥é¡µ64æ¬¡åï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¸å†éœ€è¦è®¿é—®è¯¥é¡µï¼Œä»è€Œå¦å®šäº†é•œåƒçš„å½±å“ã€‚</p><ol start="3"><li>NVMè¯»/å†™å»¶è¿Ÿå¯¹æ€§èƒ½çš„å½±å“ã€‚å°½ç®¡NVMçš„è¯»å–å»¶è¿Ÿä¸DRAMçš„è¯»å–å»¶è¿Ÿç›¸å½“ï¼Œ ä½†å®ƒä»ç„¶æ¯”DRAMçš„è¯»å–å»¶è¿Ÿæ…¢ã€‚ä¸DRAMç›¸æ¯”ï¼ŒNVMçš„å†™å»¶æ—¶æ˜æ˜¾å—åˆ°å½±å“ã€‚åœ¨å°†é¡µé¢ä»NVMé•œåƒåˆ°DRAMçš„è¿‡ç¨‹ä¸­ï¼ŒNVMçš„è¯»/å†™å»¶è¿Ÿè‡³å¤±é‡è¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç ”ç©¶äº†Stealth-Persistå¯¹æ…¢é€Ÿå’Œå¿«é€ŸNVMçš„è¯»/å†™å»¶è¿Ÿçš„å½±å“ã€‚æˆ‘ä»¬æ”¹å˜äº†NVMçš„è¯»å’Œå†™å»¶è¿Ÿï¼Œå¦‚å›¾13æ‰€ç¤ºã€‚å›¾13å°†NVMåˆ†ä¸º4ç§ç±»å‹â€“ä¸­ç­‰:è¯»å†™å»¶è¿Ÿä¸º150nså’Œ500nsï¼Œæ…¢:è¯»å†™å»¶è¿Ÿä¸º300nså’Œ700nsï¼Œéå¸¸æ…¢:è¯»å†™å»¶è¿Ÿä¸º500nså’Œ900nsï¼Œè¶…æ…¢:è¯»å†™å»¶è¿Ÿä¸º750å’Œ1000nsã€‚éšç€NVMçš„è¯»/å†™å»¶è¿Ÿçš„å¢åŠ ï¼Œä½¿ç”¨Stealth-Persistçš„æ€§èƒ½æ”¹å–„ä¹Ÿä¼šå¢åŠ ã€‚å¯¹äºè¶…æ…¢çš„NVMï¼ŒStealth-Persiståœ¨ä½¿ç”¨FTPå’ŒMQæ—¶ï¼Œæ€§èƒ½åˆ†åˆ«æé«˜äº†1 .87å€å’Œ1.54å€ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/32440afd47dd4fa4a7d9a7960e24f83c.png"></li></ol><h1 id="å…­ã€ç›¸å…³å·¥ä½œ"><a href="#å…­ã€ç›¸å…³å·¥ä½œ" class="headerlink" title="å…­ã€ç›¸å…³å·¥ä½œ"></a>å…­ã€ç›¸å…³å·¥ä½œ</h1><p>æ··åˆå†…å­˜ã€‚æœ€è¿‘ï¼Œå¾ˆå¤šå·¥ä½œéƒ½åœ¨æ¢ç´¢å¦‚ä½•æé«˜æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿçš„æ€§èƒ½ã€‚ä¾‹å¦‚ï¼ŒRamosç­‰ äºº[48]æå‡ºäº†ä¸€ä¸ªåœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­æ”¾ç½®<br>é¡µé¢çš„æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆä½¿ç”¨å¤šé˜Ÿåˆ—å¯¹é¡µé¢è¿›è¡Œæ’åºï¼Œå¹¶ä¸”åªå°†æ€§èƒ½å…³é”®çš„é¡µé¢è¿ç§»åˆ°DRAMä¸­ã€‚ç„¶è€Œï¼Œè¯¥æ–¹æ¡ˆå¹¶æ²¡æœ‰ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§ï¼Œåªæ˜¯ä¸“æ³¨äºå°†æ€§èƒ½çŸ£é”®çš„é¡µé¢æ”¾åœ¨DRAMä¸­ã€‚HetroOs[27]çš„ä½œè€… æå‡ºäº†ä¸€ä¸ªåº”ç”¨ç¨‹åºé€æ˜çš„ä¸‡æ¡ˆï¼Œåˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„åº”ç”¨ç¨‹åºçš„å†…å­˜ä½¿ç”¨ä¿¡æ¯æ¥å†³å®šåœ¨å¼‚æ„å†…å­˜ç³»ç»Ÿä¸­æ”¾ç½®æ•°æ®ã€‚ç„¶è€Œï¼ŒHetroOsçš„åŠ¨æœºçº¯ç²¹æ˜¯ä¸ºäº†ç³»ç»Ÿæ€§èƒ½ï¼Œå¹¶æ²¡æœ‰æä¾›æŒä¹…æ€§çš„ä¿è¯ã€‚å› æ­¤ï¼Œæœ‰æŒä¹…æ€§è¦æ±‚çš„åº”ç”¨ä»å°†ä¸å¾—ä¸æ‰¿å—é«˜çš„NVMå»¶è¿Ÿã€‚Nimble[58]çš„ä½œè€…æå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆï¼Œé‡ç”¨æ“ä½œç³»ç»Ÿçš„é¡µé¢è·Ÿè¸ªç»“æ„ï¼Œåœ¨å­˜å‚¨å™¨ä¹‹é—´è¿›è¡Œé¡µé¢åˆ†å±‚ã€‚æ­¤å¤–ï¼ŒNimbleæä¾›äº†ä¸€äº›ä¼˜åŒ–ï¼Œå¦‚é€æ˜çš„å·¨å¤§é¡µé¢è¿ç§»å’Œå¤šçº¿ç¨‹é¡µé¢è¿ç§»ï¼Œä¸æœ¬åœ°Linuxç³»ç»Ÿç›¸æ¯”ï¼Œè¿™å¯¼è‡´äº†40%çš„æ€§èƒ½æå‡ã€‚ç„¶è€Œï¼ŒNimbleæ”¹å–„äº†å†…å­˜ä¹‹é—´çš„é¡µé¢è¿ç§»ï¼Œä½†å¹¶æ²¡æœ‰ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§ã€‚Agarwalç­‰ äºº[10]ä¸ºæ··åˆå†…å­˜ç³»ç»Ÿä¸­çš„GPUæå‡ºäº†ä¸€ä¸ªé¡µé¢æ”¾ç½®æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œæ‰€æå‡ºçš„æ–¹æ¡ˆæ˜¯æ ¹æ®åº”ç”¨å¸¦å®½è¦æ±‚åœ¨å­˜å‚¨å™¨ä¹‹é—´è¿ç§»é¡µé¢ï¼Œæ²¡æœ‰è€ƒè™‘æ•°æ®çš„æŒä¹…æ€§ã€‚Yoonç­‰äºº[60]è®¾è®¡äº†ä¸€ä¸ªç­–ç•¥ï¼Œä½¿DRAMèƒ½å¤Ÿåœ¨NVMå†…å­˜ä¸­<br>ç¼“å­˜å…·æœ‰é«˜é¢‘ç‡çš„è¡Œç¼“å†²åŒºå¤±è¯¯çš„é¡µé¢ã€‚CAMEO[20]ã€PoM[54]ã€Mempod[45]å’ŒBATMAN[21]è®¨è®º äº†å¯èƒ½çš„æ”¾æ¾æªæ–½ï¼Œä»¥æœ€å¤§åŒ–æ•´ä½“å†…å­˜å¸¦å®½ã€‚æ‰€æå‡ºçš„æŠ€æœ¯ä¾èµ–äºç¼–è¯‘å™¨æ”¯æŒæˆ–Linuxå†…æ ¸æ¥æ£€æµ‹æ„Ÿå…´è¶£çš„é¡µé¢ã€‚Limç­‰äºº[36]å’ŒKommareddyç­‰äºº[30]æ¢è®¨äº†åœ¨åˆ†è§£å†…å­˜ç³»ç»Ÿä¸­æŠŠè¿œç¨‹é¡µé¢è¿ç§»åˆ°æœ¬åœ°å†…å­˜çš„é—®é¢˜ã€‚</p><p>NVMæ•°æ®çš„æŒä¹…æ€§ã€‚ç¡®ä¿NVMé©»ç•™æ•°æ®çš„æŒä¹…æ€§ã€æ€§èƒ½å’Œå´©æºƒçš„ä¸€-è‡´æ€§æœ€è¿‘ä¸€ç›´æ˜¯ äººä»¬çŸ£æ³¨çš„ç„¦ç‚¹ã€‚ä¾‹å¦‚ï¼ŒJanus[37]é€šè¿‡å°†åç«¯å†…å­˜æ“ä½œåˆ†è§£ä¸ºè¾ƒå°çš„è¶…æ“ä½œï¼Œ ç„¶åå°†è¶…æ“ä½œé‡å èµ·æ¥ï¼Œæ”¹å–„äº†æŒä¹…æ€§åº”ç”¨çš„å†™å…¥å»¶è¿Ÿã€‚é™¤äº†å‰é¢æåˆ°çš„NVMåº“ï¼Œè‹±ç‰¹å°”çš„PMDK[9]ã€REWIND[18]ã€ NV-Heaps[22]å’ŒLSNVMM[25]ä¸ºç¨‹åºå‘˜æä¾›äº†åŸºäºè½¯ä»¶çš„é«˜çº§æ¥å£ï¼Œä»¥ç¡®ä¿æ•°æ®çš„æŒä¹…æ€§å¹¶æä¾›å´©æºƒä¸€è‡´æ€§æ”¯æŒ ã€‚åŸºäºç¡¬ä»¶çš„</p><h1 id="ä¸ƒã€ç»“è®º"><a href="#ä¸ƒã€ç»“è®º" class="headerlink" title="ä¸ƒã€ç»“è®º"></a>ä¸ƒã€ç»“è®º</h1><p>è¦æé«˜Hyblidå†…å­˜ç³»ç»Ÿä¸­çš„æŒä¹…æ€§åº”ç”¨çš„æ€§èƒ½ï¼Œéœ€è¦åœ¨DRAMä¸­ç¼“å­˜NVMå¸¸é©»æ•°æ®ã€‚ç„¶è€Œï¼Œå°‡æŒä¹…æ€§åº”ç”¨çš„æ•°æ®ç¼“å­˜åœ¨DRAMä¸­ä¼šä½¿è¿™äº›ç¼“å­˜é¡µçš„æŒä¹…æ€§å¤±æ•ˆã€‚ç¡®ä¿DRAMç¼“å­˜é¡µçš„æŒä¹…æ€§å¯ä»¥é€šè¿‡DRAMçš„ç”µæºå¤‡ä»½æ¥å®ç°ã€‚ç„¶è€Œï¼Œä½¿ç”¨ç”µæ± ç»™DRAMä¾›ç”µæ˜¯æ˜‚è´µçš„ï¼Œä¸å¯é çš„ï¼Œä¸ä¼ ç»Ÿçš„ç³»ç»Ÿä¸å…¼å®¹ï¼Œè€Œä¸”ä¸ç¯ä¿ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†Stealth-Pertï¼Œä¸€ç§æ–°å‹çš„å†…å­˜æ§åˆ¶å™¨ï¼Œå…è®¸åœ¨DRAMä¸­ ç¼“å­˜NVMçš„è¯†åˆ«é¡µé¢ï¼ŒåŒæ—¶ä¿è¯é¡µé¢çš„æŒä¹…æ€§ã€‚é€šè¿‡ä»DRAMä¸ºNVMè¯·æ±‚æä¾›æœåŠ¡ï¼ŒStealth-Periståˆ©ç”¨äº†é“¶è¡Œçº§åˆ«çš„å¹¶è¡Œæ€§ï¼Œå‡å°‘äº†å†…å­˜çš„æ¶ˆè€—å¹¶å¸¦æ¥äº†é¢å¤–çš„æ€§èƒ½æå‡ã€‚Steallh-Persitä½¿ ç”¨StealthPersiFfPï¼Œåœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­ï¼Œ æ¯é¡¹åº”ç”¨çš„ç³»ç»Ÿæ€§èƒ½å¹³å‡æé«˜42.02%ã€‚ç„¶è€Œï¼ŒStealth-PersiFfPéœ€è¦å°†å¤§é‡çš„é¡µé¢ä»è™šæ‹Ÿæœºå¤åˆ¶åˆ°DRAMä¸­ã€‚é€šè¿‡Steallb-PersitMQæ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨åˆç†çš„é¡µé¢min-orä¸‹ï¼Œæ€§èƒ½æé«˜äº†30.09%ã€‚Tealthislé€šè¿‡å•†åœºç¡¬ä»¶ç®¡ç†è¡¨ã€U1eå†…å­˜æ§åˆ¶å™¨ä¸­çš„å•†åœºç¼“å­˜ä»¥åŠåˆ©ç”¨WPQæ¥å®ç°è¿™ä¸€æ”¹è¿›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Object-Level Memory Allocation and Migration in Hybrid Memory Systems</title>
      <link href="/2023/05/01/Object-Level-Memory-Allocation-and-Migration-in-Hybrid-Memory-Systems/"/>
      <url>/2023/05/01/Object-Level-Memory-Allocation-and-Migration-in-Hybrid-Memory-Systems/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªHPCA 2022å±äºCCF-A</li><li>Object-Level Memory Allocation and Migration in Hybrid Memory Systems</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Haikun Liu, Renshan Liu, Xiaofei Liao, Hai Jin, and Yu Zhang åä¸­ç§‘æŠ€å¤§å­¦å¤§æ•°æ®æŠ€æœ¯ä¸ç³»ç»ŸLabã€æœåŠ¡è®¡ç®—æŠ€æœ¯ä¸ç³»ç»ŸLabã€é›†ç¾¤ä¸ç½‘æ ¼è®¡ç®—Lab</li><li>Bingsheng He æ–°åŠ å¡å›½ç«‹å¤§å­¦</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>å……åˆ†åˆ©ç”¨NVMå’ŒDRAMæ··åˆç³»ç»Ÿçš„ä¼˜åŠ¿ï¼Œä¸»è¦ç›®æ ‡æ˜¯å°†åº”ç”¨ç¨‹åºæ•°æ®æ­£ç¡®æ”¾ç½®åœ¨æ··åˆå­˜å‚¨å™¨ä¸Šã€‚</p><p>è§‚å¯Ÿå‘ç°1ï¼šæ¯ä¸ªé¡µé¢ä¸­çš„çƒ­æ•°æ®åªå åº”ç”¨ç¨‹åºæ€»å†…å­˜è¶³è¿¹çš„ä¸€å°éƒ¨åˆ†ï¼Œä½†å´å¯¼è‡´äº†åº”ç”¨ç¨‹åºæ€»å†…å­˜å¼•ç”¨çš„å¾ˆå¤§æ¯”ä¾‹ã€‚Xè½´æ˜¾ç¤ºäº†åº”ç”¨ç¨‹åºæ‰€æœ‰å†…å­˜é¡µä¸­é¢‘ç¹è®¿é—®çš„æ•°æ®æµé‡çš„ç™¾åˆ†æ¯”(æŒ‰è®¿é—®é¢‘ç‡é™åºæ’åˆ—)ï¼ŒYè½´æ˜¾ç¤ºäº†åº”ç”¨ç¨‹åºçš„æ€»å†…å­˜å¼•ç”¨çš„ç´¯ç§¯åˆ†å¸ƒã€‚å¯¹äºsoplexæ¥è¯´ï¼Œè¿‘35%çš„çƒ­æ•°æ®å äº†æ€»å†…å­˜å¼•ç”¨çš„98%ã€‚è¿™æ„å‘³ç€è¿ç§»soplexä¸­çš„éƒ¨åˆ†çƒ­æ•°æ®(å˜é‡å’Œå¯¹è±¡)æ¯”è¿ç§»æ•´ä¸ªé¡µé¢æ›´æœ‰å¥½å¤„ã€‚ç„¶è€Œï¼Œå¯¹äºä¸€äº›åº”ç”¨ç¨‹åºï¼Œå¦‚dictï¼Œå†…å­˜è®¿é—®å‡åŒ€åœ°åˆ†å¸ƒåœ¨åº”ç”¨ç¨‹åºçš„åœ°å€ç©ºé—´ä¸­ï¼Œå› æ­¤ä»æ•°æ®è¿ç§»ä¸­è·ç›Šè¾ƒå°‘ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/4168f8514f9242c3981f5314d9399b78.png"></p><p>è§‚å¯Ÿå‘ç°2ï¼šå¾ˆå¤§ä¸€éƒ¨åˆ†çš„åº”ç”¨ç¨‹åºçš„å¯¹è±¡éƒ½æ¯”é¡µå°å¾—å¤šã€‚è¿™äº›åº”ç”¨ç¨‹åºçš„å¯¹è±¡å¤§å°çš„åˆ†å¸ƒå‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°å¯¹äºdictã€isortã€gccå’ŒmaxMatchæ¥è¯´ï¼Œ95%ä»¥ä¸Šçš„å¯¹è±¡éƒ½å°äº50å­—èŠ‚ã€‚å¯¹äºsoplexï¼Œå°å¯¹è±¡çš„æ¯”ä¾‹ä¹Ÿè¶…è¿‡85%ã€‚ç”±äºå¤§å¤šæ•°åº”ç”¨å±‚é¢çš„å†…å­˜å¼•ç”¨æ˜¯å¯¹è±¡å’Œå˜é‡ã€‚ç¨‹åºå‘˜å¯ä»¥å……åˆ†åˆ©ç”¨åº”ç”¨è¯­ä¹‰æ¥ä¼˜åŒ–å¯¹è±¡ç²’åº¦çš„æ•°æ®æ”¾ç½®/è¿ç§»ã€‚ç›¸åï¼Œä¸€ä¸ªé¡µé¢å¯ä»¥åŒ…å«è®¸å¤šå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å¯èƒ½æœ‰ä¸åŒçš„è®¿é—®è¡Œä¸ºï¼Œåˆæˆçš„é¡µé¢çº§è®¿é—®ç»Ÿè®¡å¯èƒ½å˜å¾—å¤æ‚å’Œä¸å¯é¢„æµ‹ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/91c7474aaf8b47afb3816ffc63ed1b4c.png"></p><p>è§‚å¯Ÿå‘ç°3ï¼šå¾ˆå¤§ä¸€éƒ¨åˆ†åº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¾ç¤ºå‡ºè¾ƒé•¿çš„å¯¿å‘½ã€‚è™½ç„¶ä»¥å‰çš„ç ”ç©¶è¡¨æ˜ï¼Œè®¸å¤šç¨‹åºçš„å¯¹è±¡å¾€å¾€æœ‰ä¸€ä¸ªç›¸å¯¹è¾ƒçŸ­çš„å¯¿å‘½[15]ï¼Œ[22], [23], æˆ‘ä»¬å‘ç°ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä»ç„¶æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†é•¿å¯¿å‘½çš„å¯¹è±¡ã€‚å›¾3æ˜¾ç¤ºäº†ä¸€äº›åº”ç”¨ç¨‹åºçš„å¯¹è±¡å¯¿å‘½çš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°ã€‚æˆ‘ä»¬å‘ç°åœ¨gccã€isortå’Œsoplexä¸­å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰è¶…è¿‡1000ç§’çš„å¯¿å‘½ã€‚ç‰¹åˆ«æ˜¯ï¼Œgccä¸­æ‰€æœ‰å¯¹è±¡çš„å¯¿å‘½éƒ½ç­‰äºåº”ç”¨ç¨‹åºçš„æ€»æ‰§è¡Œæ—¶é—´ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/9618ef5f5ec84e2c83d4519155af6982.png"></p><p>è§‚å¯Ÿå‘ç°4ï¼šä¸€éƒ¨åˆ†åº”ç”¨å¯¹è±¡åœ¨ä¸åŒçš„æ‰§è¡Œé˜¶æ®µè¡¨ç°å‡ºé«˜åº¦çªå˜çš„å†…å­˜è®¿é—®é¢‘ç‡ã€‚ å°½ç®¡è®¸å¤šå¯¹è±¡åœ¨å…¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­è¡¨ç°å‡ºç›¸å¯¹ä¸€è‡´çš„è®¿é—®è¡Œä¸ºï¼ˆå³æ‰€è°“çš„ä¸å¯æ”¹å˜çš„å¯¹è±¡ï¼‰ï¼Œ ä½†ä»æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å¯¹è±¡åœ¨ä¸åŒçš„æ‰§è¡Œé˜¶æ®µè¡¨ç°å‡ºé«˜åº¦çªå˜çš„è®¿é—®é¢‘ç‡ï¼ˆå³æ‰€è°“çš„æ˜“å˜å¯¹è±¡ï¼‰ï¼Œå¦‚è¡¨1æ‰€ç¤ºã€‚è¿™æ„å‘³ç€ä»æœ‰å¾ˆå¤§çš„ç©ºé—´å¯ä»¥é€šè¿‡è¿è¡Œæ—¶çš„å¯¹è±¡è¿ç§»æ¥ä¼˜åŒ–æ•°æ®æ”¾ç½®ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/ce50f76d94ed4edc96bb02efd8325a12.png"></p><p>æ€»ä¹‹ï¼Œè§‚å¯Ÿç»“æœ1å’Œ2æ¸…æ¥šåœ°è¡¨æ˜ï¼Œæ•°æ®è®¿é—®ç›‘æ§å’Œå†…å­˜åˆ†é…/è¿ç§»åº”è¯¥æ˜¯åœ¨å¯¹è±¡ä¸Šï¼Œè€Œä¸æ˜¯åœ¨é¡µé¢ä¸Šã€‚è§‚å¯Ÿç»“æœ3å’Œ4è¡¨æ˜ï¼Œåœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­éœ€è¦å¯¹å¯¹è±¡è¿ç§»è¿›è¡Œä»”ç»†çš„è®¾è®¡ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>æå‡ºæ··åˆå†…å­˜ç³»ç»Ÿç¼–ç¨‹æ¥å£ï¼Œ<strong>å¯¹è±¡ç²’åº¦è¿ç§»ï¼Œå‡å°‘è¿ç§»å¼€é”€</strong>ã€‚å‡å°‘ç³»ç»Ÿè€—èƒ½ï¼ŒåŒæ—¶æé«˜åº”ç”¨æ€§èƒ½ã€‚</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>ä»¥å‰çš„ç ”ç©¶ä¸»è¦é›†ä¸­åœ¨é¡µé¢è¿ç§»æ–¹æ¡ˆä¸Šï¼Œä»¥å®ç°æ›´é«˜çš„æ€§èƒ½å’Œèƒ½æºæ•ˆç‡ã€‚ä½†æ˜¯ï¼Œè¿™äº›æ–¹æ¡ˆéƒ½ä¾èµ–äºåœ¨çº¿é¡µé¢è®¿é—®ç›‘æ§æˆæœ¬é«˜ã€‚å¹¶ä¸”è¿˜ä¼šç”±äºå¤šæ ¸æ—¶ç»´æŠ¤ç¼“å­˜/TLBä¸€è‡´æ€§å’Œdramå¸¦å®½äº‰ç”¨äº§ç”Ÿæ›´å¤šé¡µç²’åº¦è¿ç§»çš„å¼€é”€ã€‚</p><p>ä¾èµ–äºé¡µé¢è®¿é—®çš„recency and frequencyæ¥å†³å®šæ•°æ®åœ¨DRAMæˆ–NVMä¸Šçš„ä½ç½®ã€‚1)ä¸€äº›ç”¨ç¡¬ä»¶è¾…åŠ©é¡µè¿ç§»çš„æ–¹æ¡ˆç”±äºç›®å‰ç¡¬ä»¶ä¸æ”¯æŒé¡µé¢è®¿é—®æŠ€æœ¯ï¼Œéœ€è¦å¯¹ç¡¬ä»¶æ¶æ„è¿›è¡Œå¤§é‡ä¿®æ”¹[5][6][11]ã€‚2)ç”¨æ“ä½œç³»ç»Ÿç›‘æ§å†…å­˜è®¿é—®åªèƒ½å¼•ç”¨1ä¸ªè®¿é—®ä½ä¸è¶³ä»¥è¡¨è¾¾é¡µé¢å†·çƒ­åº¦[12][Thermostat13]ã€‚3)é¡µé¢è¿ç§»é€šå¸¸<span class="label primary">éœ€è¦ä¸€æ®µæ—¶é—´æ¥æ£€æµ‹çƒ­é¡µ</span>ã€‚4)<span class="label primary">é¢„æµ‹çš„é¡µé¢è®¿é—®æ¨¡å¼å¯èƒ½ä¸æœªæ¥çš„è®¿é—®è¡Œä¸ºä¸ä¸€è‡´</span>ï¼Œå¯¼è‡´ä¸å¿…è¦çš„é¡µé¢è¿ç§»ã€‚5)å¤§é¡µï¼ˆhuge pageï¼‰å·²è¢«è¶Šæ¥è¶Šå¤šåœ°ç”¨äºå¤§æ•°æ®åº”ç”¨å’Œè™šæ‹ŸåŒ–å¹³å°[13][14]ï¼Œç”±äºå¯¹DRAMå®¹é‡å’Œå¸¦å®½çš„ä½æ•ˆåˆ©ç”¨ï¼Œç²—ç²’åº¦çš„é¡µé¢è¿ç§»ç”šè‡³ä¼šé™ä½ç³»ç»Ÿæ€§èƒ½ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/257cf52418304fce863269f59094a936.png"></p><p>1ï¼‰é¦–å…ˆé™æ€åˆ†æå¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚ä½¿ç”¨LLVMä»æºä»£ç ä¸­ç”Ÿæˆä¸­é—´ä»£è¡¨ï¼ˆIRï¼‰ ã€‚ä¸ºäº†è®¡ç®—å¯¹è±¡çº§çš„å†…å­˜å¼•ç”¨ï¼Œæˆ‘ä»¬åˆ©ç”¨LLVMçš„PASSæ¥éå†æ‰€æœ‰çš„åŠ è½½/å­˜å‚¨/åˆ†é…/è°ƒç”¨/æ˜ å°„æŒ‡ä»¤ï¼Œå¹¶åœ¨IRä¸­æ’å…¥æ¢é’ˆã€‚è¿è¡Œç”±ä¿®æ”¹åçš„IRç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶é€šè¿‡LLVM PASSè‡ªåŠ¨æ”¶é›†æ‰€æœ‰å¯¹è±¡çš„è®¿é—®ä¿¡æ¯åˆ°ä¸€ä¸ªè·Ÿè¸ªæ–‡ä»¶ä¸­ã€‚å†…å­˜è·Ÿè¸ªåŒ…å«5ä¸ªé¡¹ç›®ï¼ŒåŒ…æ‹¬â€å†…å­˜è®¿é—®ç±»å‹ã€è™šæ‹Ÿåœ°å€ã€å¯¹è±¡åç§°ã€å¯¹è±¡ç±»å‹å’Œè®¿é—®æ—¶é—´â€ã€‚é€šè¿‡è·Ÿè¸ªï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“è®¡ç®—å‡ºå¯¹è±¡çš„æ€»å†…å­˜å¼•ç”¨å’Œå¯¿å‘½ã€‚</p><p>2ï¼‰<span class="label primary">ç„¶è€Œï¼Œåªæœ‰ä¸€éƒ¨åˆ†æŒ‡ä»¤å¯¼è‡´äº†å¯¹ä¸»å†…å­˜çš„å®é™…æ•°æ®æµé‡ã€‚åŸå› æ˜¯ç‰‡ä¸Šé«˜é€Ÿç¼“å­˜å¯ä»¥è¿‡æ»¤å¤§é‡çš„å†…å­˜è®¿é—®çƒ­æ•°æ®ã€‚</span> äºæ˜¯è®¾è®¡äº†ç¼“å­˜æ¨¡æ‹Ÿå™¨ï¼Œå°†LLVMç”Ÿæˆçš„è·Ÿè¸ªæ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿‡æ»¤ç¨‹åºä¸­æ‰€æœ‰åœ¨æ¨¡æ‹Ÿç¼“å­˜ä¸­è¢«å‡»ä¸­çš„è™šæ‹Ÿåœ°å€ã€‚å‰©ä½™çš„è™šæ‹Ÿåœ°å€åæ˜ äº†é«˜é€Ÿç¼“å­˜çš„ç¼ºå¤±æˆ–é«˜é€Ÿç¼“å­˜çš„é©±é€æ“ä½œï¼Œå¹¶å¯¼è‡´å¯¹ä¸»å†…å­˜çš„å®é™…å†…å­˜è®¿é—®ã€‚å›¾5æ˜¾ç¤ºäº†ä¸åŒåº”ç”¨ç¨‹åºå¯¹é«˜é€Ÿç¼“å­˜å’Œä¸»å†…å­˜çš„æ‰€æœ‰æ•°æ®è®¿é—®çš„åˆ†å¸ƒã€‚æˆ‘ä»¬å‘ç°ï¼Œç‰‡ä¸Šé«˜é€Ÿç¼“å­˜å¹³å‡èƒ½å¤Ÿè¿‡æ»¤68%çš„æ€»å†…å­˜å¼•ç”¨ã€‚å¯¹äºgccï¼Œç”šè‡³87%çš„æ•°æ®è®¿é—®éƒ½è¢«è¿‡æ»¤æ‰äº†ã€‚å› æ­¤ï¼Œå½“è€ƒè™‘åˆ°ç¼“å­˜è¿‡æ»¤çš„å½±å“æ—¶ï¼Œåº”ç”¨ç¨‹åºçš„å†…å­˜è®¿é—®æ¨¡å¼å¯èƒ½ä¼šéå¸¸ä¸åŒã€‚ä¸€äº›éå¸¸çƒ­çš„æ•°æ®å¯èƒ½æ€»æ˜¯åœ¨é«˜é€Ÿç¼“å­˜ä¸­è¢«å‘½ä¸­ï¼Œè€Œåªå¯¼è‡´å¯¹ä¸»å†…å­˜çš„æå°‘é‡çš„æ•°æ®è®¿é—®ã€‚å› æ­¤ï¼Œæ²¡æœ‰å¿…è¦å°†è¿™äº›æ•°æ®ä»NVMè¿ç§»åˆ°DRAMä¸Šã€‚é€šè¿‡æˆ‘ä»¬çš„ç¼“å­˜è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨NVMä¸Šè·å¾—çœŸå®çš„å†…å­˜è®¿é—®ç»Ÿè®¡ï¼Œå¹¶é¿å…åœ¨è¿è¡Œæ—¶è¿›è¡Œä¸å¿…è¦çš„å¯¹è±¡è¿ç§»ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/ff01b08a245141909a3c4b67a028325b.png"></p><div class="note info no-icon">ä½†é—®é¢˜æ˜¯ç‰‡ä¸Šç¼“å­˜ä¹Ÿä¸æ˜¯ç¼“å­˜çš„å¯¹è±¡å•Šï¼Ÿ</div> <p>3ï¼‰å»ºæ¨¡å†³å®šæ•°æ®æ•ˆç”¨ï¼ˆå°±æ˜¯ä¸€ä¸ªè¯¥ä¸è¯¥æ”¾DRAMçš„æƒé‡å§ï¼‰ã€‚æå‡ºäº†ä¸€ä¸ªæ•ˆç”¨å‡½æ•°ï¼ˆå»¶è¿Ÿå’Œèƒ½è€—ï¼‰æ¥è®¡ç®—åœ¨ç»™å®šçš„æ—¶é—´æ®µ $T_i$å†…å°†å¯¹è±¡æ”¾åœ¨DRAMæˆ–NVMä¸Šçš„å¥½å¤„<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/3c7f6307e86e457ca5419d132398b9a5.png"></p><p>4ï¼‰ç¨‹åºæ‰§è¡ŒæœŸé—´çš„çƒ­å¯¹è±¡è¿ç§»å·¥ä½œã€‚å› ä¸ºä¹‹å‰è¯´äº†æœ‰æ˜“å˜å¯¹è±¡å’Œä¸æ˜“å˜å¯¹è±¡ï¼ˆæŒ‡çƒ­åº¦ï¼‰ã€‚å°†å¯¹è±¡çš„å†…å­˜è®¿é—®æ¨¡å¼åˆ†ä¸ºä¸åŒçš„é˜¶æ®µï¼Œè®¾å®šé˜ˆå€¼Eï¼Œåœ¨æ¯ä¸ªæ—¶éš™å»è®¡ç®—å½“å‰è¿™ä¸ªå¯¹è±¡æ•ˆç”¨å€¼ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚å¯¹äºä¸å¯å˜çš„å¯¹è±¡ï¼Œå¦‚æœå…¶å¹³å‡æ•ˆç”¨å¤§äºEï¼Œè¿™äº›å¯¹è±¡å°†è¢«æ”¾ç½®åœ¨DRAMä¸Šã€‚å¯¹äºçªå˜çš„å¯¹è±¡ï¼Œå…¶ç¬¬ä¸€é˜¶æ®µçš„å¹³å‡æ•ˆç”¨å†³å®šäº†è¯¥å¯¹è±¡åº”è¯¥è¢«æ”¾ç½®çš„ä½ç½®ï¼Œè€Œå¯¹è±¡çš„è¿ç§»åº”è¯¥åœ¨ä¸€ä¸ªé˜¶æ®µå‘ç”Ÿå˜åŒ–æ—¶è¿›è¡Œã€‚åœ¨å›¾6ä¸­ï¼Œå¯¹è±¡Aã€Bå’ŒDé¦–å…ˆåº”è¯¥è¢«åˆ†é…åˆ°DRAMä¸Šã€‚å¯¹è±¡Cä¸€å¼€å§‹åº”è¯¥è¢«åˆ†é…åœ¨NVMä¸Šï¼Œç„¶ååº”è¯¥è¢«è¿ç§»åˆ°DRAMä¸Šã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c40ea2c19e95465ea086d09c0534c9d7.png"></p><p>5ï¼‰åˆå§‹å¯¹è±¡åˆ†é…çš„å®ç°ã€‚æ ¹æ®æ•ˆç”¨å€¼çš„é˜ˆå€¼ã€å½“å‰DRAMå®¹é‡è¿™äº›æƒ…å†µæ¥å†³å®šåˆ†é…çš„å±‚çº§çš„ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/8b3058d3eb274687b9c3d8c01ea24884.png"></p><p>æ‰©å±•äº†Glibcåº“ï¼Œä¸ºæ··åˆå†…å­˜ç³»ç»Ÿæä¾›DRAMåˆ†é…å’ŒNVMåˆ†é…APIã€‚å› æ­¤æˆ‘ä»¬ä¿®æ”¹äº†Linuxå†…æ ¸ï¼Œåœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ï¼ˆVMAï¼‰ä¸­å°†NVMé¡µä¸DRAMé¡µåŒºåˆ†å¼€æ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨é€»è¾‘ä¸Šå°†ä¸»å†…å­˜åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸã€‚æˆ‘ä»¬åœ¨VMAä¸­æ ‡è®°NVMé¡µï¼Œå¹¶ä¸ºNVMåˆ†é…æä¾›ä¸€ä¸ªæ–°çš„åˆ†æ”¯NVM mmapã€‚</p><p>6ï¼‰è¿è¡Œæ—¶å¯¹è±¡è¿ç§»çš„å®ç°ã€‚é‡‡ç”¨é™æ€ä»£ç å·¥å…·ï¼Œåœ¨åº”ç”¨ç¨‹åºçš„æºä»£ç ä¸­æ·»åŠ å¯¹è±¡è¿ç§»æŒ‡ä»¤ã€‚åœ¨è¿è¡Œæ—¶ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«æ‰§è¡Œå¯¹è±¡è¿ç§»ï¼Œæ²¡æœ‰ä»»ä½•æ“ä½œç³»ç»Ÿçš„å¹²é¢„ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œ<span class="label primary">å¤§é‡å¯†é›†çš„å†…å­˜è®¿é—®ä¸»è¦å½’å› äºå¾ªç¯çŠ¶æ€[25]</span>ã€‚æˆ‘ä»¬ç”¨å¾ªç¯ä½œä¸ºæ–­ç‚¹ï¼Œå°†æºä»£ç åˆ†æˆå‡ ä¸ªä»£ç ç‰‡æ®µã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨LLVMè·Ÿè¸ªå¯¹è±¡çš„è®¿é—®æ¬¡æ•°ä»¥åŠå¾ªç¯å¼€å§‹å’Œç»“æŸæ—¶çš„æ—¶é—´æˆ³ã€‚å¯¹äºæ¯ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨å¾ªç¯çš„æ‰§è¡Œè¿‡ç¨‹ä¸­è®¡ç®—å…¶æ•ˆç”¨å€¼ã€‚å¾ªç¯å¼€å§‹å’Œç»“æŸæ—¶æ•ˆç”¨å€¼çš„çªç„¶å˜åŒ–æ„å‘³ç€å†…å­˜è®¿é—®æ¨¡å¼å‘ç”Ÿäº†å˜åŒ–ï¼Œè¯¥å¯¹è±¡åº”è¯¥åœ¨å¾ªç¯ä¹‹å‰è¢«è¿ç§»åˆ°å¦ä¸€ç§å†…å­˜ã€‚æˆ‘ä»¬ç”¨æ—¶é—´æˆ³æ¥å®šä½è¿™ä¸ªç‰¹å®šçš„å¾ªç¯çŠ¶æ€ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨LLVMåœ¨å¾ªç¯çš„å¼€å¤´æ’å…¥å¯¹è±¡è¿ç§»è¯­å¥ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/1c528b5e931d43f2a379af33b9eb4d8a.png"></p><p>å›¾7æ˜¾ç¤ºäº†ä¸€ä¸ªæ··åˆå†…å­˜åˆ†é…å’Œå¯¹è±¡è¿ç§»çš„ä»£ç å·¥å…·åŒ–çš„ä¾‹å­ã€‚æˆ‘ä»¬æ ¹æ®LLVMä¸­çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œä»¥é™æ€å•ä¸€èµ‹å€¼ï¼ˆSSAï¼‰çš„å½¢å¼éå†æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶ç”¨DyMallocæ”¹å˜æºä»£ç ä¸­çš„æ‰€æœ‰mallocã€‚æˆ‘ä»¬ä½¿ç”¨shared_ptråˆ›å»ºå¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆä¿ç•™å¯¹è±¡çš„å…±äº«æ‰€æœ‰å…³ç³»ã€‚è¿™å…è®¸å‡ ä¸ªshared_ptrå¯¹è±¡å…±äº«åŒä¸€ä¸ªå¯¹è±¡çš„å†…å­˜ã€‚shared_ pträ½¿ç”¨ä¸€ä¸ªæ§åˆ¶å—æ¥è®°å½•æ‰€æœ‰æŒ‡å‘ç›®æ ‡å¯¹è±¡çš„æŒ‡é’ˆå’Œæ€»å¼•ç”¨çš„æ•°é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨å›¾8ä¸­ï¼ŒæŒ‡å‘å¯¹è±¡3çš„ä¸¤ä¸ªæŒ‡é’ˆè¢«è®°å½•åœ¨æ§åˆ¶å—ä¸­ã€‚åªæœ‰å½“å¼•ç”¨è®¡æ•°å™¨å˜ä¸ºé›¶æ—¶ï¼Œè¢«ç®¡ç†å¯¹è±¡æ‰ä¼šè¢«é”€æ¯ã€‚å¯¹äºå¯æ”¹å˜çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨MigrateToX APIå°†å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ç§å†…å­˜ä¸­ï¼Œç„¶åæ‰€æœ‰å­˜å‚¨çš„æŒ‡å‘è¢«ç®¡ç†å¯¹è±¡çš„æŒ‡é’ˆç°åœ¨åº”è¯¥æŒ‡å‘æ–°çš„å†…å­˜åœ°å€ï¼Œå¦‚å›¾8æ‰€ç¤ºã€‚å¯¹è±¡è¿ç§»æŒ‡ä»¤è¢«æ’å…¥åˆ°ä¸€ä¸ªé€‚å½“çš„åœ°æ–¹ï¼ˆå¾ˆå¯èƒ½æ˜¯åœ¨å¾ªç¯è¯­å¥ä¹‹å‰ï¼‰ï¼Œ åœ¨é‚£é‡Œå¯¹è±¡çš„è®¿é—®æ¨¡å¼çš„å˜åŒ–ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨è¿ç§»åæ”¹å˜å¯¹è±¡çš„è™šæ‹Ÿåœ°å€ï¼Œå¹¶åœ¨è¿è¡Œæ—¶æ›´æ–°å¯¹å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/6d25170131ab4c1b87f596593e283a87.png"></p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>â€œæœ‰æ•ˆçš„é™æ€å†…å­˜åˆ†é…ï¼šåœ¨äº2ppæ‰§è¡Œæ—¶é—´å’Œæ€§èƒ½å·®ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œä¸åªä½¿ç”¨DRAMçš„ç³»ç»Ÿç›¸æ¯”ï¼Œâ€â€OAM w/o migration â€œâ€èƒ½å¤Ÿå¹³å‡å‡å°‘51%çš„å†…å­˜èƒ½é‡æ¶ˆè€—ã€‚è¿™äº›ç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬æœ€åˆçš„OAMæ•°æ®æ”¾ç½®ç­–ç•¥å¯¹æé«˜æ··åˆå†…å­˜ç³»ç»Ÿçš„æ€§èƒ½å’Œèƒ½æºæ•ˆç‡æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>åœ¨çº¿å†…å­˜è¿ç§»çš„æœ‰æ•ˆæ€§ï¼šä¸é™æ€å†…å­˜åˆ†é…æ–¹æ¡ˆç›¸æ¯”ï¼Œå¯¹è±¡è¿ç§»å¯ä»¥è¿›ä¸€æ­¥æé«˜åº”ç”¨æ€§èƒ½ï¼Œå¹³å‡æé«˜11%ã€‚æ²¡æœ‰è¿ç§»çš„OAMå¹³å‡å¯ä»¥å®ç°51%çš„EDPå‡å°‘ï¼Œè€Œæœ‰è¿ç§»çš„OAMå¹³å‡å¯ä»¥è¿›ä¸€æ­¥å‡å°‘10%çš„EDP</p><p>ä¸ä¸€äº›é¡µé¢è¿ç§»ç®—æ³•ç›¸æ¯”è¾ƒï¼šä¸CLOCK-DWFå’Œ2PPç›¸æ¯”ï¼ŒOAMå¯ä»¥æ˜¾è‘—å‡å°‘è¿ç§»æµé‡ï¼Œå¹³å‡åˆ†åˆ«ä¸º42%å’Œ22%ã€‚å¼€é”€ä¹Ÿæ¯”ä»–ä»¬éƒ½å°ã€‚</p><p>é€‚åº”ä¸åŒæ•°æ®å’Œè§„æ¨¡ï¼šæ‰§è¡Œæ—¶é—´éƒ½æ¯”ä¸ä½¿ç”¨è¯¥æ–¹æ¡ˆè¦èŠ‚çœæ—¶é—´ã€‚</p><p>å¯¹ä¸åŒNVMæ€§èƒ½çš„æ•æ„Ÿæ€§ï¼šæµ‹è¯•äº†ç›®å‰çš„äº§å“ï¼Œå¯¹äºOptanceæ˜¯ç”±è¯»å¯†é›†å¼•èµ·çš„è¿ç§»ï¼Œå› ä¸ºå†™å»¶è¿Ÿæ˜¯å·®ä¸å¤šçš„ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><p>åªä¸ºç”¨C++ç¼–å†™çš„åº”ç”¨ç¨‹åºæä¾›å¯¹è±¡çº§è¿ç§»æ¥å£ã€‚<br>åŠ¨æ€è¿ç§»éƒ½é›†ä¸­åœ¨å¾ªç¯ã€‚</p><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><p>æä¾›äº†ä¸€ä¸ªç¦»çº¿å‰–æå·¥å…·æ¥è¯¦ç»†æè¿°åº”ç”¨ç¨‹åºçš„å†…å­˜è®¿é—®æ¨¡å¼ï¼Œå¹¶æå‡ºäº†ä¸€ä¸ª<strong>æ€§èƒ½/èƒ½æºæ¨¡å‹</strong>æ¥æŒ‡å¯¼åº”ç”¨ç¨‹åºå¯¹è±¡çš„åˆå§‹å†…å­˜åˆ†é…å’ŒåŠ¨æ€è¿ç§»<strong>ä»èƒ½æºæ¶ˆè€—ä¸Šè§£å†³äº†è¯»å†™ä¸å‡è¡¡</strong>ï¼Œè€Œä¸éœ€è¦ä»»ä½•ç¡¬ä»¶ä¿®æ”¹å’Œæ“ä½œç³»ç»Ÿå¹²é¢„çš„åœ¨çº¿å†…å­˜ç›‘æ§ã€‚</p><p>ä¸€ä¸ªé™æ€ä»£ç å·¥å…·ï¼Œç”¨äºè‡ªåŠ¨è½¬æ¢åº”ç”¨ç¨‹åºæºä»£ç ä¸­çš„å¯¹è±¡çº§å†…å­˜åˆ†é…å’Œè¿ç§»ï¼Œè€Œä¸ä¼šç»™åº”ç”¨ç¨‹åºçš„ç¨‹åºå‘˜å¸¦æ¥è´Ÿæ‹…ã€‚</p><p>è¿è¡Œæ—¶ç›‘æ§å’Œä»¥å¾€çš„æƒ³æ³•éƒ½ä¸åŒï¼Œä¹Ÿå› æ­¤ç›‘æ§å¼€é”€æ›´å°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> ç»†ç²’åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2023/05/01/hello-world/"/>
      <url>/2023/05/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="1-Create-a-new-post"><a href="#1-Create-a-new-post" class="headerlink" title="1.Create a new post"></a>1.Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰§è¡Œå‘½ä»¤ä¼šåœ¨/source/_postsä¸‹åˆ›å»ºæ–°æ–‡ç« ï¼Œä¹‹åéœ€è¦ä½¿ç”¨MarkDownè¯­æ³•ç¼–å†™è¯¥æ–‡ç« ã€‚  </p><p><code>---</code>åŒ…æ‹¬èµ·æ¥çš„å†…å®¹ç§°ä¹‹ä¸º<code>Front-matter</code>æœ‰å¾ˆå¤šé…ç½®é€‰é¡¹å¯ä»¥æ·»åŠ ã€‚<br>æ›´å¤šçš„ç®€å•è¯­æ³•å¯ä»¥å‚è€ƒ<a href="https://www.runoob.com/markdown/md-tutorial.html">èœé¸Ÿæ•™ç¨‹</a><br>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="2-æ¸…é™¤æ—§æ•°æ®"><a href="#2-æ¸…é™¤æ—§æ•°æ®" class="headerlink" title="2.æ¸…é™¤æ—§æ•°æ®"></a>2.æ¸…é™¤æ—§æ•°æ®</h3><p>æ–‡ç« å†™å¥½ä¹‹åï¼Œé¦–å…ˆæ¸…é™¤æ‰æ—§çš„æ•°æ®</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªå‘½ä»¤ä¼šæ¸…é™¤æ‰ä¹‹å‰ç”Ÿæˆçš„ç½‘é¡µï¼Œå³ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„publicæ–‡ä»¶å¤¹</p><h3 id="3-Generate-static-files"><a href="#3-Generate-static-files" class="headerlink" title="3.Generate static files"></a>3.Generate static files</h3><p>ç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆæ–°çš„é¡µé¢ï¼šMore info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate æˆ–è€…ç®€å†™ hexo g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªå‘½ä»¤ä¼šå°†sourceæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„mdæ–‡ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œç”ŸæˆHTMLé¡µé¢ï¼Œå­˜æ”¾åœ¨publicæ–‡ä»¶å¤¹ä¸‹</p><h3 id="4-Run-server"><a href="#4-Run-server" class="headerlink" title="4.Run server"></a>4.Run server</h3><p>åœ¨æœ¬åœ°å¼€å¯æœåŠ¡å™¨ï¼Œé¢„è§ˆä¸€ä¸‹æ–‡ç« æ˜¯å¦æ»¡æ„</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server  <span class="token string">'hexo s'</span> <span class="token keyword">for</span> short<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="5-Deploy-to-remote-sites"><a href="#5-Deploy-to-remote-sites" class="headerlink" title="5.Deploy to remote sites"></a>5.Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy <span class="token string">'hexo d'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><h2 id="Blog-Template"><a href="#Blog-Template" class="headerlink" title="Blog Template"></a>Blog Template</h2><p>æ›´é«˜é˜¶æ›´è¯¦å°½çš„Hexo Markdownæ•™ç¨‹å‚è€ƒ<a href="https://blog.17lai.site/posts/cf0f47fd/#%E5%B8%B8%E7%94%A8%E6%A0%87%E8%AE%B0">å¤œæ³•ä¹‹ä¹¦çš„åšå®¢</a><br>ä¸€äº›å¯ä»¥ç”¨åˆ°çš„LeTaxæ•°å­¦å…¬å¼ç¼–è¾‘æ–¹å¼<a href="http://t.csdn.cn/VivVj">è¶…è¯¦ç»† LaTexæ•°å­¦å…¬å¼</a> || <a href="http://t.csdn.cn/iPVFt">LaTeXæ•°å­¦å…¬å¼-è¯¦ç»†æ•™ç¨‹</a></p><p>å›¾åºŠå°±æ˜¯ç”¨csdnäº† <span class="github-emoji"><span>ğŸ˜‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> è¿˜æœ‰å¥½å¤šæ–‡ç« æ…¢æ…¢æ¬è¿è¿‡æ¥ï¼Œä¸æ€¥ã€‚<br>ä½†æ˜¯éœ€è¦åœ¨æ¯ä¸ªcsdnçš„å›¾ç‰‡çš„é“¾æ¥ä¸ŠåŠ ä¸Š<a href="https://images.weserv.nl/?url=%E7%9C%9F%E6%AD%A3%E7%9A%84%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5LRU%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%89%8D%E7%BC%80%E3%80%82">https://images.weserv.nl/?url=çœŸæ­£çš„å›¾ç‰‡é“¾æ¥LRUï¼Œè¿™ä¸ªå‰ç¼€ã€‚</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>https://images.weserv.nl/?url<span class="token operator">=</span><span class="token punctuation">)</span><span class="token punctuation">{</span>% raw %<span class="token punctuation">}</span>åœ¨è¿™ä¹‹é—´å†™LaTexæˆ–è€…å…¶ä»–é€ æˆçš„ç¬¦å·è½¬ä¹‰å†²çªä¹‹ç±»çš„æŠ¥é”™<span class="token punctuation">{</span>% endraw %<span class="token punctuation">}</span>toc: <span class="token boolean">true</span>mathjax: <span class="token boolean">true</span>hide: <span class="token boolean">false</span>categories: Papertags:  - A - Hybrid Memory Systemsimg: https://images.weserv.nl/?url<span class="token operator">=</span>summary: ã€‚---<span class="token comment">## 1. è®ºæ–‡ä¿¡æ¯</span><span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"note primary"</span><span class="token operator">&gt;</span>- æ–‡ç« æ¥è‡ªIEEE International Symposium on High-Performance Computer Architecture, <span class="token punctuation">(</span>HPCA<span class="token punctuation">)</span>, <span class="token number">2022</span>- åå­—<span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span> <span class="token comment">### æ‰€æœ‰ä½œè€…åŠå•ä½</span> - A, ä½›ç½—é‡Œè¾¾å›½é™…å¤§å­¦<span class="token punctuation">(</span>FIU<span class="token punctuation">)</span><span class="token comment">## 2. Background</span><span class="token comment">## 3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</span><span class="token comment">## 4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</span><span class="token comment">## 5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</span><span class="token comment">## 6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</span><span class="token comment">## 7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</span><span class="token comment">## 8. åˆ›æ–°ç‚¹</span><span class="token comment">## 9. ç§¯ç´¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¯ä¸ªæ ‡ç­¾ç»“æŸåå¿…é¡»ç©ºä¸€è¡Œ:</p><div class="note info">è¿™é‡Œæ˜¯ info æ ‡ç­¾æ ·å¼</div> <div class="note info no-icon">è¿™é‡Œæ˜¯ä¸å¸¦ç¬¦å·çš„ info æ ‡ç­¾æ ·å¼</div> <div class="note primary">è¿™é‡Œæ˜¯ primary æ ‡ç­¾æ ·å¼</div> <div class="note primary no-icon">è¿™é‡Œæ˜¯ä¸å¸¦ç¬¦å·çš„ primary æ ‡ç­¾æ ·å¼</div> <div class="note warning">è¿™é‡Œæ˜¯ warning æ ‡ç­¾æ ·å¼</div> <div class="note warning no-icon">è¿™é‡Œæ˜¯ä¸å¸¦ç¬¦å·çš„ warning æ ‡ç­¾æ ·å¼</div> <div class="note danger">è¿™é‡Œæ˜¯ danger æ ‡ç­¾æ ·å¼</div> <div class="note danger no-icon">è¿™é‡Œæ˜¯ä¸å¸¦ç¬¦å·çš„ danger æ ‡ç­¾æ ·å¼</div><p>ç„¶åæ˜¯è¡Œå†…æ ‡ç­¾ï¼Œæ¯”åŠ ç²—æ›´èƒ½æ˜¾ç¤ºé‡ç‚¹ï¼ŒFulidç§»æ¤çš„ã€‚<br><span class="label primary">Label primary</span></p><p><span class="label default">Label default</span></p><p><span class="label info">Label info</span></p><p><span class="label success">Label success</span></p><p><span class="label warning">Label warning</span></p><p><span class="label danger">Label danger</span></p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>this is a test for my first blog</title>
      <link href="/2023/04/30/this-is-a-test-for-my-first-blog/"/>
      <url>/2023/04/30/this-is-a-test-for-my-first-blog/</url>
      
        <content type="html"><![CDATA[<p><strong>è©¹é’äº‘2018å¹´åè¯­è¾©è®ºä¸–ç•Œæ¯å†³èµ›ç»“è¾©</strong></p><p>å¤§å®¶å¥½ï¼Œæˆ‘ä»¬ä»Šå¤©å’Œå¯¹æ–¹æœ‰ä¸‰ä¸ªæ ¹æœ¬çš„åˆ†æ­§ã€‚ä¸€æ˜¯æˆåŠŸè·¯å¾„ä¸åŒã€‚æˆ‘æ–¹æ‰¿è®¤ï¼Œèšç„¦æ²¡æœ‰é—®é¢˜ã€‚å¦‚æœä¸€ä¸ªå¹´è½»äººåœ¨å¹´è½»çš„æ—¶ä»£å®Œå…¨çŸ¥é“ä¸€ç”Ÿè¦ä»€ä¹ˆï¼Œä¸€ç”Ÿèµ°ä¸‹å»ä»ä¸åæ‚”ã€‚æ²¡é—®é¢˜ï¼ŒæŒºå¹¸ç¦çš„ã€‚å¯æ˜¯ç°å®æ˜¯ï¼Œè¿™ä¸ªå†³å®šå¯¹äºå¤§å¤šæ•°äººæ¥è¯´ä¸åº”è¯¥åœ¨é’å¹´æ—¶ä»£åšã€‚è¿™ä¸ªæ—¶å€™ä½ çš„å¤§è„‘æ²¡æœ‰å‘è‚²å®Œå…¨ã€ä½ çš„äººç”Ÿè¿˜åœ¨ä¸åœåœ°å˜åŠ¨ã€ä½ çš„æ™ºè¯†è¿˜æœ‰é™ï¼Œè€Œè¿™ä¸ªä¸–ç•Œåœ¨é£å¿«çš„å˜åŒ–ã€‚å¾ˆæœ‰å¯èƒ½ä½ æƒ³è¦èšç„¦çš„ä¸œè¥¿æœ‰ä¸€å¤©æ˜¯ä½ ä¸é€‚åº”ã€ä¸å–œæ¬¢æˆ–è€…è¢«æ—¶ä»£æ·˜æ±°çš„ä¸œè¥¿ã€‚</p><p>è¿™æ—¶å€™æ‚¨æ–¹è·³åˆ°äº†ç¬¬äºŒç‚¹å‘Šè¯‰æˆ‘è¯´æ²¡å…³ç³»ï¼Œæˆ‘åªè¦åšå®šè‡ªå·±çš„å†…å¿ƒæˆ‘å°±æ²¡æœ‰é—®é¢˜äº†ã€‚è¿™å°±æ˜¯æˆ‘ä»¬åŒæ–¹ç¬¬äºŒç‚¹åˆ†æ­§ï¼šå¹¸ç¦è§‚çš„ä¸åŒã€‚æ‚¨æ–¹çš„å¹¸ç¦è§‚æ˜¯ä¸€ç§å¦¥åçš„å¹¸ç¦è§‚ï¼Œè€Œæˆ‘æ”¾çš„å¹¸ç¦è§‚æ˜¯è¿›å–çš„å¹¸ç¦è§‚ã€‚æ‚¨æ–¹çš„æ„æ€æ˜¯ä¸ç®¡æˆ‘äººç”Ÿå‘æŒ¥å¾—æ€æ ·ï¼Œç¤¾ä¼šå¦‚ä½•å¯¹å¾…æˆ‘ï¼Œä¸ç”¨åœ¨ä¹ï¼æˆ‘å¦¥åã€æˆ‘çœ‹å¼€ã€æˆ‘è±è¾¾ï¼Œå°±å¯ä»¥å¹¸ç¦ã€‚å¯¹æ–¹è¾©å‹ï¼Œé‚£äº›å†å²ä¸ŠçœŸæ­£æ”¶è·äº†è±è¾¾å¿ƒæ€çš„äººï¼Œæ¨æ…â€œæ˜¯éæˆè´¥è½¬å¤´ç©ºâ€ï¼Œç‹ç»´â€œè¡Œåˆ°æ°´ç©·å¤„ï¼Œåçœ‹äº‘èµ·æ—¶â€çš„æ—¶å€™ï¼Œä»–ä»¬æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™æ”¶è·è¿™ç§è±è¾¾ï¼Œæ˜¯åœ¨éå†äººç”Ÿçš„æ²§æ¡‘ï¼Œç»å†äº†ç¹åï¼Œç»è¿‡äº†å¥‹æ–—ï¼Œè§è¯†äº†äººä¸–ä¸­æ›´æ·±åˆ»çš„é“ç†ï¼Œä»–å¯ä»¥é¢†æ‚Ÿåˆ°ç¹åã€‚å°±ç®—æˆ‘é€€ä¸€æ­¥ï¼Œä¿—ä¸€ç‚¹è®²ï¼Œæˆ‘å¤šè¯»ä¸€ç‚¹ä¹¦ï¼Œå¤šçœ‹ä¸€ç‚¹ä¸–ç•Œï¼Œå¯¹è¿™ä¸ªä¸–ç•Œçš„ç†è§£å’Œæ€è€ƒæ–¹å¼ä¸°å¯Œä¸€ç‚¹ï¼Œè¿™ç§åšåŠ æ³•çš„æ–¹æ³•æ‚¨æ‰èƒ½æ”¶è·çœŸçš„è±è¾¾ã€‚</p><p>æœ€åæˆ‘ä»¬åŒæ–¹æœ€æ ¹æœ¬çš„åˆ†æ­§æ˜¯å¯¹è¿™ä¸ªæ—¶ä»£ç†è§£ä¸åŒã€‚æ‚¨å‘Šè¯‰æˆ‘è¯´è¿™ä¸ªä¸–ç•Œçº·ç¹å¤æ‚ï¼Œå·²ç»æŠŠå¤ªå¤šé€‰æ‹©æ¨åˆ°å¹´è½»äººçš„é¢å‰ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©åŠ å°±æ˜¯åœ¨éšå¤§æµã€‚ä¸æ˜¯ã€‚æˆ‘ä»¬ä»”ç»†æƒ³ä¸€æƒ³ï¼Œè¿™ä¸ªæ—¶ä»£ç»™æˆ‘ä»¬å¤šçš„é€‰æ‹©ä¸è¿‡æ˜¯æ‚¨æ–¹è¯´çš„å•†å“ã€è¥é”€è¯¾ã€æˆåŠŸå­¦ã€‚å¯æ˜¯äººç”ŸåŠ å‡æ³•ä¸Šï¼Œé‚£äº›äººç”Ÿé‡å¤§å…³å¤´çš„é€‰æ‹©æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªç¤¾ä¼šçœŸçš„åœ¨é€¼æˆ‘ä»¬åšåŠ æ³•å—ï¼Ÿä¸æ˜¯ã€‚æˆ‘åˆ°äº†è¿™ä¸ªå¹´çºªå°±åº”è¯¥ç»“å©šç”Ÿå­ï¼Œæˆå®¶ç«‹ä¸šã€‚åœ¨äººç”Ÿé‡å¤§å…³å¤´çš„é€‰æ‹©ä¸Šï¼Œè¿™ä¸ªç¤¾ä¼šæ˜¯è¦æ±‚é’å¹´äººå‰²èˆé‚£äº›ä¸åˆ‡å®é™…çš„å¹»æƒ³ï¼Œå‰²å»é‚£äº›é”™è¯¯çš„è§‚å¿µï¼Œå›å½’ä¸€å¥—ç¤¾ä¼šèŒƒå¼ï¼Œä¸€å¥—äººç”ŸèŒƒå¼ï¼Œæ˜¯è¦æ±‚ä½ åšå‡æ³•çš„ã€‚</p><p>è¿™ä¸ªæ—¶å€™çœŸæ­£è¿½éšè‡ªå·±å†…å¿ƒæ˜¯åº”è¯¥ä¸é¡¾è¿™å¥—èŒƒå¼çš„æŸç¼šï¼Œå†²ç ´æŸç¼šå»è¿½å¯»è‡ªå·±å¿ƒä¸­æ‰€çˆ±ï¼Œæ´»å‡ºä¸€ä¸ªçœŸæ­£å¤šå…ƒçš„ä¸–ç•Œã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ä»Šå¤©ä¸æ˜¯åœ¨æ›¿ä¸€ä¸ªå¹´è½»äººçš„å¹¸ç¦è¯´è¯ï¼Œæ˜¯ä¸€ä»£é’å¹´äººã€‚é’å¹´äººæ‹“å®½äººç”Ÿè¾¹ç•Œçš„å¯èƒ½æ˜¯åœ¨æ‹“å®½è¿™ä¸ªç¤¾ä¼šä»·å€¼åˆ¤æ–­çš„å¯èƒ½ã€‚</p><p>æ—¢ç„¶è¿™ä¸ªä¸–ç•Œå·ç§°å®ƒæ˜¯å¤šå…ƒè€ŒåŒ…å®¹çš„ï¼Œæˆ‘ä»¬å°±åº”è¯¥å»è¯•ï¼Œå»è®©ä»–å®ç°è¿™ä¸ªè¯ºè¨€ã€‚</p><p>æ—¢ç„¶è¿™ä¸ªç¤¾ä¼šå¤šå…ƒè€ŒåŒ…å®¹ï¼Œæ—¢ç„¶è¿™ä¸ªä¸–ç•Œå‘Šè¯‰æˆ‘ä»¬â€œäººä¸è½»ç‹‚æ‰å°‘å¹´â€ï¼Œå°±æ²¡æœ‰äººåº”è¯¥å¤©ç„¶åœ°è§‰å¾—â€œè½»ç‹‚â€æ˜¯ä¸€ä¸ªè´¬ä¹‰è¯ã€‚å¯¹æ–¹è¾©å‹ä¸€ç›´åœ¨åŠæˆ‘ä»¬ï¼šäººç”Ÿé€‰åˆ°è‡ªå·±æœ€å¹¸ç¦çš„ä¸œè¥¿æ‰æ˜¯å¿«ä¹çš„ã€‚å¯¹æ–¹è¾©å‹ï¼Œå„ä½ï¼Œæˆ‘ä»¬éƒ½æ˜¯å¹´è½»äººã€‚åœ¨æˆ‘ä»¬äººç”Ÿçš„è¿™ä¸ªé˜¶æ®µï¼Œæœ‰ä»€ä¹ˆä¸œè¥¿æ˜¯å”¯ä¸€çè´µçš„ï¼Ÿä»€ä¹ˆå«â€œæ¬²ä¹°æ¡‚èŠ±åŒè½½é…’ï¼Œç»ˆä¸ä¼¼ï¼Œå°‘å¹´æ¸¸â€ï¼Œä»€ä¹ˆå«â€œæ—§æ¸¸æ— å¤„ä¸å ªå¯»ã€‚æ— å¯»å¤„ï¼ŒæƒŸæœ‰å°‘å¹´å¿ƒâ€ã€‚é‚£ä¸ªå”¯ä¸€å¸¦ä¸èµ°çš„ä¸œè¥¿ï¼Œä¸å°±æ˜¯é’æ˜¥æœ¬èº«å—ï¼Ÿè¿™ä¸€ä»½æœºä¼šä½ ä¸çæƒœï¼Œè¿™ä¸€ä»½å¯èƒ½ä½ ä¸çæƒœï¼Œæ‚¨è·Ÿæˆ‘è°ˆçš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯é‚£ä¸€ä»½å®‰é¡¿äº†çš„å¹¸ç¦ï¼Œæ˜¯é‚£ä¸€ä»½æˆç†Ÿäº†çš„å¹¸ç¦ã€‚å¯æ˜¯è¿™ä¸æ˜¯å¹´è½»äººçš„å¹¸ç¦ã€‚å› ä¸ºå¹´è½»äººä¸æ˜¯åœ¨æ›¿ä½ ä¸€ä¸ªäººè°‹å¹¸ç¦ï¼Œä¸æ˜¯ä½ ä¸€ä¸ªäººçœ‹å¼€äº†å°±å¯ä»¥ã€‚ä»–æ˜¯è¦ä¸ºè¿™ä¸ªä¸–ç•Œæ‹“å®½è¾¹ç•Œï¼Œæ˜¯è®©æ‰€æœ‰çš„äººéƒ½æœ‰æœºä¼šæŠŠé“è·¯è¶Šèµ°è¶Šå®½ï¼Œæ˜¯</p><p>è¶ç€å¹´è½»ï¼Œæˆ‘åè¦å‹‰å¼ºã€‚</p><p>è°¢è°¢å¤§å®¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Perspective </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Survey of Non-Volatile Main Memory Technologies:State-of-the-Arts, Practices, and Future Direction</title>
      <link href="/2023/03/08/A-Survey-of-Non-Volatile-Main-Memory-Technologies-State-of-the-Arts-Practices-and-Future-Direction/"/>
      <url>/2023/03/08/A-Survey-of-Non-Volatile-Main-Memory-Technologies-State-of-the-Arts-Practices-and-Future-Direction/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è™½ç„¶è¿™ç¯‡çš„æœ‰äº›å¼•ç”¨ä¹Ÿæ˜¯åå¤šå¹´å‰çš„æ•°æ®ï¼Œä½†æ˜¯ä½œä¸ºå­¦ä¹ ä¸€ä¸ªé˜¶æ®µçš„æ€»ç»“ï¼Œå’Œå¤§ä½¬å¯¹æ¯”ä¸€ä¸‹åœ¨çŸ¥è¯†ç»“æ„ä¸Šçš„å®Œæ•´åº¦ï¼Œè¿˜æœ‰ä»€ä¹ˆæ˜¯ä¸æ¸…æ¥šçš„ã€‚è¿˜æ˜¯æŒºæœ‰ç”¨çš„ã€‚</p></blockquote><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªJournal of Computer Science and Technology, (JCST), 2021</li><li>A Survey of Non-Volatile Main Memory Technologies:State-of-the-Arts,Practices, and Future Direction</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Hai-Kun Liu, åä¸­ç§‘æŠ€å¤§å­¦è®¡ç§‘é™¢,é›†ç¾¤å’Œç½‘æ ¼è®¡ç®—å®éªŒå®¤,æœåŠ¡è®¡ç®—æŠ€æœ¯ä¸ç³»ç»Ÿå®éªŒå®¤,å›½å®¶å¤§æ•°æ®æŠ€æœ¯ä¸ç³»ç»Ÿå·¥ç¨‹æŠ€æœ¯ç ”ç©¶ä¸­å¿ƒ</li><li>Di Chen, åä¸­ç§‘æŠ€å¤§å­¦è®¡ç§‘é™¢,é›†ç¾¤å’Œç½‘æ ¼è®¡ç®—å®éªŒå®¤,æœåŠ¡è®¡ç®—æŠ€æœ¯ä¸ç³»ç»Ÿå®éªŒå®¤,å›½å®¶å¤§æ•°æ®æŠ€æœ¯ä¸ç³»ç»Ÿå·¥ç¨‹æŠ€æœ¯ç ”ç©¶ä¸­å¿ƒ</li><li>Hai Jin, åä¸­ç§‘æŠ€å¤§å­¦è®¡ç§‘é™¢,é›†ç¾¤å’Œç½‘æ ¼è®¡ç®—å®éªŒå®¤,æœåŠ¡è®¡ç®—æŠ€æœ¯ä¸ç³»ç»Ÿå®éªŒå®¤,å›½å®¶å¤§æ•°æ®æŠ€æœ¯ä¸ç³»ç»Ÿå·¥ç¨‹æŠ€æœ¯ç ”ç©¶ä¸­å¿ƒ</li><li>Xiao-Fei Liao, åä¸­ç§‘æŠ€å¤§å­¦è®¡ç§‘é™¢,é›†ç¾¤å’Œç½‘æ ¼è®¡ç®—å®éªŒå®¤,æœåŠ¡è®¡ç®—æŠ€æœ¯ä¸ç³»ç»Ÿå®éªŒå®¤,å›½å®¶å¤§æ•°æ®æŠ€æœ¯ä¸ç³»ç»Ÿå·¥ç¨‹æŠ€æœ¯ç ”ç©¶ä¸­å¿ƒ</li><li>Binsheng He, æ–°åŠ å¡å›½ç«‹å¤§å­¦</li><li>Kan Hu, åä¸­ç§‘æŠ€å¤§å­¦è®¡ç§‘é™¢,é›†ç¾¤å’Œç½‘æ ¼è®¡ç®—å®éªŒå®¤,æœåŠ¡è®¡ç®—æŠ€æœ¯ä¸ç³»ç»Ÿå®éªŒå®¤,å›½å®¶å¤§æ•°æ®æŠ€æœ¯ä¸ç³»ç»Ÿå·¥ç¨‹æŠ€æœ¯ç ”ç©¶ä¸­å¿ƒ</li><li>Yu Zhang, åä¸­ç§‘æŠ€å¤§å­¦è®¡ç§‘é™¢,é›†ç¾¤å’Œç½‘æ ¼è®¡ç®—å®éªŒå®¤,æœåŠ¡è®¡ç®—æŠ€æœ¯ä¸ç³»ç»Ÿå®éªŒå®¤,å›½å®¶å¤§æ•°æ®æŠ€æœ¯ä¸ç³»ç»Ÿå·¥ç¨‹æŠ€æœ¯ç ”ç©¶ä¸­å¿ƒ</li></ul><hr><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>éæ˜“å¤±æ€§ä¸»å­˜å‚¨å™¨ï¼ˆNVMMï¼‰æœ€è¿‘å·²æˆä¸ºæœªæ¥å­˜å‚¨ç³»ç»Ÿçš„ä¸€ç§æœ‰å‰é€”çš„æŠ€æœ¯ã€‚é€šå¸¸ï¼ŒNVMMå…·æœ‰è®¸å¤šç†æƒ³çš„å±æ€§ï¼Œä¾‹å¦‚é«˜å¯†åº¦ã€å­—èŠ‚å¯»å€ã€éæ˜“å¤±æ€§ã€ä½æˆæœ¬å’Œèƒ½æ•ˆï¼Œä½†ä»£ä»·æ˜¯é«˜å†™å…¥å»¶è¿Ÿã€é«˜å†™å…¥åŠŸè€—å’Œæœ‰é™çš„å†™å…¥è€ç”¨æ€§ï¼ˆå†™å¯¿å‘½çŸ­ï¼‰ã€‚NVMMå·²ç»æˆä¸ºåŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆDRAMï¼‰çš„å¼ºæœ‰åŠ›çš„æ›¿ä»£å“ï¼Œå¹¶å°†ä»æ ¹æœ¬ä¸Šæ”¹å˜å†…å­˜ç³»ç»Ÿçš„æ ¼å±€ã€‚å®ƒä»¬åœ¨ç³»ç»Ÿæ¶æ„è®¾è®¡ã€æ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†ä»¥åŠæ··åˆå†…å­˜ç³»ç»Ÿçš„ç¼–ç¨‹æ¨¡å‹æ–¹é¢å¸¦æ¥äº†è®¸å¤šç ”ç©¶æœºä¼šå’ŒæŒ‘æˆ˜ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå›é¡¾äº†æ–°å…´NVMMæŠ€æœ¯çš„æ¦‚å†µï¼Œç„¶åå¯¹NVMMæŠ€æœ¯çš„æœ€æ–°ç ”ç©¶è¿›å±•è¿›è¡Œäº†ç»¼è¿°ã€‚æˆ‘ä»¬æ ¹æ®ä¸åŒçš„ç»´åº¦ï¼ˆå¦‚å†…å­˜æ¶æ„ã€æ•°æ®æŒä¹…æ€§ã€æ€§èƒ½æ”¹è¿›ã€èŠ‚èƒ½å’Œç£¨æŸå‡è¡¡ï¼‰å¯¹è¿™äº›ç ”ç©¶è¿›è¡Œåˆ†ç±»ã€‚å…¶æ¬¡ï¼Œä¸ºäº†å±•ç¤ºæ„å»ºNVMMç³»ç»Ÿçš„æœ€ä½³å®è·µï¼Œæˆ‘ä»¬ä»æ¶æ„ã€ç³»ç»Ÿå’Œåº”ç”¨çš„ç»´åº¦ä»‹ç»äº†æˆ‘ä»¬æœ€è¿‘çš„æ··åˆå­˜å‚¨ç³»ç»Ÿè®¾è®¡å·¥ä½œã€‚æœ€åï¼Œæˆ‘ä»¬å¯¹NVMMçš„æœªæ¥ç ”ç©¶æ–¹å‘æå‡ºäº†å±•æœ›ï¼Œå¹¶å¯¹è®¾è®¡æŒ‘æˆ˜å’Œæœºé‡è¿›è¡Œäº†é˜è¿°ã€‚</p><p><strong>å…³é”®è¯</strong>ï¼šéæ˜“å¤±æ€§å­˜å‚¨å™¨ã€æŒä¹…æ€§å­˜å‚¨å™¨ã€æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿã€å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„<br>non-volatile memory, persistent memory, hybrid memory systems, memory hierarchy</p><hr><h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><p>åœ¨å¤§æ•°æ®æ—¶ä»£ï¼Œå†…å­˜è®¡ç®—è¶Šæ¥è¶Šå—åˆ°æ•°æ®å¯†é›†å‹åº”ç”¨çš„é’çã€‚å†…å­˜å­ç³»ç»Ÿå¯¹ç°ä»£è®¡ç®—ç³»ç»Ÿçš„åŠŸèƒ½å’Œæ€§èƒ½å…·æœ‰è¶Šæ¥è¶Šå¤§çš„å½±å“ã€‚ä½¿ç”¨DRAM (åŠ¨æ€éšæœºå­˜å–å­˜å‚¨å™¨)çš„ä¼ ç»Ÿå¤§å†…å­˜ç³»ç»Ÿ[1 ,2]åœ¨åŠŸç‡å’Œå¯†åº¦æ–¹é¢é¢ä¸´ä¸¥å³»çš„å¯æ‰©å±•æ€§æŒ‘æˆ˜[3]ã€‚å°½ç®¡DRAMè§„æ¨¡ä»2013å¹´çš„28nmæŒç»­åˆ°2016å¹´çš„10+ nm[4ï¼Œ5] ï¼Œæ‰©å±•å·²ç»æ”¾ç¼“ï¼Œå˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚æ­¤å¤–,æœ€è¿‘çš„ç ”ç©¶[6-10]è¡¨æ˜ï¼ŒåŸºäºDRAMçš„ä¸»å­˜å‚¨å™¨çº¦å ç‰©ç†æœåŠ¡å™¨æ€»èƒ½è€—çš„30%-40%ã€‚æ–°å…´çš„éæ˜“å¤±æ€§ä¸»å­˜å‚¨å™¨ï¼ˆNVMMï¼‰æŠ€æœ¯ï¼Œå¦‚ç›¸å˜å­˜å‚¨å™¨ï¼ˆPCMï¼‰ã€è‡ªæ—‹è½¬ç§»æ‰­çŸ©å­˜å‚¨å™¨ï¼ˆSTT-RAMï¼‰å’Œ3D XPoint[11]é€šå¸¸æä¾›æ¯”DRAMæ›´é«˜çš„å†…å­˜å¯†åº¦ã€æ›´ä½çš„æ¯çš„æ¯”ç‰¹æˆæœ¬å’Œå¾…æœºåŠŸè€—ã€‚NVMMæŠ€æœ¯çš„å‡ºç°æœ‰å¯èƒ½å¼¥åˆæ…¢é€ŸæŒä¹…å­˜å‚¨ï¼ˆå³ç£ç›˜å’ŒSSDï¼‰ä¸DRAMä¹‹é—´çš„å·®è·ï¼Œå¹¶å°†ä»æ ¹æœ¬ä¸Šæ”¹å˜å­˜å‚¨ç³»ç»Ÿçš„æ ¼å±€ã€‚</p><p>è¡¨1æ˜¾ç¤ºäº†é—ªå­˜SSDã€DRAMã€PCMã€STT-RAMã€ReRAMå’ŒIntel Optane DCæŒä¹…å†…å­˜æ¨¡å—ï¼ˆDCPMMï¼‰çš„ä¸åŒå†…å­˜ç‰¹ç‚¹ï¼ŒåŒ…æ‹¬è¯»/å†™å»¶è¿Ÿã€å†™è€ä¹…æ€§å’Œå¾…æœºåŠŸè€—[7ï¼Œ12ï¼Œ13]ã€‚å°½ç®¡NVMMåœ¨å¯†åº¦å’Œèƒ½è€—æ–¹é¢å…·æœ‰å„ç§ä¼˜åŠ¿ï¼Œä½†å…¶å†™å…¥å»¶è¿Ÿæ¯”DRAMé«˜çº¦6å€-30å€ï¼Œ å†™å…¥åŠŸè€—æ¯”DRAMé«˜çº¦5å€- 10å€ã€‚æ­¤å¤–ï¼ŒNVMMçš„å†™å…¥è€ä¹…æ€§éå¸¸æœ‰é™(çº¦ $10^8$ å€) ï¼Œè€ŒDRAMèƒ½å¤Ÿæ‰¿å—çº¦ $10^{16}$ æ¬¡çš„å†™å…¥æ“ä½œã€‚è¿™äº›ç¼ºç‚¹ä½¿å¾—å¾ˆéš¾ç›´æ¥æ›¿ä»£DRAMã€‚ä½¿ç”¨NVMMçš„ä¸€ç§æ›´å®ç”¨çš„æ–¹æ³•æ˜¯æ··åˆå†…å­˜æ¶æ„ï¼Œç”±DRAMå’ŒNVMMç»„æˆ[15,16]ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/519ae688bfd74036bb3b66ae451bbc86.png" alt="ä¸åŒå†…å­˜ç¡¬ä»¶æ€§èƒ½æ¯”è¾ƒ"></p><p>ä¸ºäº†å……åˆ†å‘æŒ¥ä¸¤è€…åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­çš„ä¼˜åŠ¿ï¼Œåœ¨æ€§èƒ½æå‡ã€èŠ‚èƒ½é™è€—ã€ç£¨æŸå‡è¡¡ã€æ•°æ®æŒä¹…æ€§ç­‰æ–¹é¢å­˜åœ¨è®¸å¤šå¼€æ”¾çš„ç ”ç©¶é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå·²ç»æœ‰è®¸å¤šå…³äºå†…å­˜å±‚æ¬¡ç»“æ„çš„è®¾è®¡[15-18]ã€å†…å­˜ç®¡ç†[19-21]å’Œå†…å­˜åˆ†é…æ–¹æ¡ˆ[22-24]çš„ç ”ç©¶ã€‚è¿™äº›ç ”ç©¶æˆæœå¯¼è‡´äº†æ··åˆå†…å­˜æ¶æ„ã€æ“ä½œç³»ç»Ÿå’Œç¼–ç¨‹æ¨¡å‹çš„åˆ›æ–°ã€‚å°½ç®¡å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œå·²ç»åšå‡ºäº†å¤§é‡å·¥ä½œæ¥å°†æ–°å…´NVMMé›†æˆåˆ°å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ä¸­ï¼Œä½†ä»æœ‰è®¸å¤šæŒ‘æˆ˜éœ€è¦è§£å†³ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå…ˆå‰å¯¹NVMMæŠ€æœ¯çš„ç ”ç©¶å¤§å¤šåŸºäºæ¨¡æ‹Ÿ/ä»¿çœŸNVMMå™¨ä»¶ï¼Œä¸çœŸæ­£éæ˜“å¤±æ€§ï¼ˆåŒåˆ—ç›´æ’å¼å†…å­˜æ¨¡å—Dual In-line Memory Modulesï¼‰DIMMç›¸æ¯”ï¼ŒNVMMè®¾å¤‡æ‰¿è¯ºçš„æ€§èƒ½å¯èƒ½å­˜åœ¨å„ç§åå·®ã€‚æœ€è¿‘å®£å¸ƒæ¨å‡ºçš„Intel Optane DCPMMç»ˆäºå°†NVMM DIMMå•†ä¸šåŒ–ã€‚çœŸæ­£çš„Intel Optane DCPMMä¸ä¹‹å‰çš„ç ”ç©¶é¢„æœŸæ‰¿è¯ºçš„åŠŸèƒ½ç›¸æ¯”ï¼Œè¡¨ç°æ˜æ˜¾ä¸åŒ[18ï¼Œ20ï¼Œ26ï¼Œ28]ã€‚ä¾‹å¦‚ï¼Œå¦‚è¡¨1æ‰€ç¤ºï¼ŒIntel Optane DCPMMçš„è¯»å–å»¶è¿Ÿæ¯”DRAMé«˜2å€-3å€,è€Œå…¶å†™å…¥å»¶è¿Ÿç”šè‡³ä½äºDRAMã€‚å•ä¸ªOptane DCPMM DIMMçš„æœ€å¤§è¯»å†™å¸¦å®½åˆ†åˆ«ä¸º6.6GB/så’Œ2.3GB/sï¼Œè€ŒDRAMçš„è¯»å†™å¸¦å®½ä¹‹é—´çš„å·®è·è¦å°å¾—å¤šï¼ˆ1.3xï¼‰ã€‚æ­¤å¤–ï¼Œéšç€ç³»ç»Ÿä¸­å¹¶è¡Œçº¿ç¨‹æ•°é‡çš„å¢åŠ ï¼Œè¯»/å†™æ€§èƒ½æ˜¯éå•è°ƒçš„[25]ã€‚åœ¨ä»–ä»¬çš„å®éªŒä¸­ï¼Œ1ä¸ªåˆ°4ä¸ªçº¿ç¨‹ä¹‹é—´è¾¾åˆ°äº†å³°å€¼æ€§èƒ½ï¼Œç„¶åé€æ¸ä¸‹é™ã€‚ç”±äºOptane DCPMM DIMMçš„è¿™äº›å…³é”®ç‰¹æ€§ï¼Œä»¥å‰å…³äºæŒä¹…æ€§å†…å­˜ç³»ç»Ÿçš„ç ”ç©¶åº”è¯¥é‡æ–°å®¡è§†å’Œä¼˜åŒ–ï¼Œä»¥é€‚åº”çœŸæ­£çš„NVMM DIMMã€‚</p><p><strong>è´¡çŒ®</strong>ã€‚æœ¬æ–‡é¦–å…ˆå›é¡¾å…³äºæ··åˆå†…å­˜æ¶æ„ã€æ“ä½œç³»ç»Ÿçº§æ··åˆå†…å­˜ç®¡ç†å’Œæ··åˆå†…å­˜ç¼–ç¨‹æ¨¡å‹çš„æœ€æ–°ç ”ç©¶ç°çŠ¶ã€‚è¡¨2æ˜¾ç¤ºäº†NVMMæŠ€æœ¯çš„æœ€æ–°ç ”ç©¶åˆ†ç±»ã€‚æˆ‘ä»¬æ ¹æ®ä¸åŒç»´åº¦å¯¹è¿™äº›ç ”ç©¶è¿›è¡Œåˆ†ç±»ï¼ŒåŒ…æ‹¬å†…å­˜æ¶æ„ã€æŒä¹…å†…å­˜(PM)ç®¡ç†ã€æ€§èƒ½æ”¹è¿›ã€èŠ‚èƒ½ã€ç£¨æŸå‡è¡¡ã€ç¼–ç¨‹æ¨¡å‹å’Œåº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬è¿˜è®¨è®ºäº†å®ƒä»¬çš„ç›¸ä¼¼æ€§å’Œå·®å¼‚ï¼Œä»¥çªå‡ºè®¾è®¡æŒ‘æˆ˜å’Œæœºé‡ã€‚å…¶æ¬¡ï¼Œä¸ºäº†å±•ç¤ºæ„å»ºNVMMç³»ç»Ÿçš„æœ€ä½³å®è·µï¼Œæˆ‘ä»¬<strong>ä»æ¶æ„ã€ç³»ç»Ÿå’Œåº”ç”¨çš„ç»´åº¦å±•ç¤ºäº†æˆ‘ä»¬åœ¨æ··åˆå­˜å‚¨ç³»ç»Ÿè®¾è®¡æ–¹é¢çš„åŠªåŠ›</strong>ã€‚æœ€åï¼Œæˆ‘ä»¬æå‡ºäº†åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ä½¿ç”¨NVMMçš„æœªæ¥ç ”ç©¶æ–¹å‘ï¼Œå¹¶å¯¹ç ”ç©¶é¢†åŸŸçš„è®¾è®¡æŒ‘æˆ˜å’Œæœºé‡è¿›è¡Œäº†ä¸€äº›è¯´æ˜ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/9239e045ee11414cb228f4b752b13f86.png" alt="å°†ç›¸å…³å·¥ä½œåˆ†ç±»"></p><p>å°½ç®¡æœ‰å…¶ä»–å…³äºNVMMçš„ç ”ç©¶ï¼Œä½†é‰´äºNVMMçš„å¿«é€Ÿå‘å±•ï¼Œè¿™ç¯‡ç»¼è¿°ä»ä¸€ä¸ªç‹¬ç‰¹çš„è§’åº¦å¯¹NVMMè¿›è¡Œäº†å›é¡¾ã€‚åœ¨[97]ä¸­, ä½œè€…ä»‹ç»äº†PCMæŠ€æœ¯çš„æœ€æ–°ç ”ç©¶ã€‚ä»¥è§£å†³æœ‰é™çš„å†™å…¥è€ä¹…æ€§ã€æ½œåœ¨çš„é•¿å»¶è¿Ÿã€é«˜èƒ½é‡å†™å…¥ã€åŠŸè€—ç­‰é—®é¢˜ä»¥åŠä¸€äº›å¯¹å†…å­˜éšç§çš„æ‹…å¿§ã€‚åœ¨[98]ä¸­ï¼Œä½œè€…å¯¹PCMè®¾å¤‡åŠå…¶æ¶æ„å’Œè½¯ä»¶è¿›è¡Œäº†å…¨é¢çš„è°ƒæŸ¥å’Œå›é¡¾ã€‚å…¶ä»–ä¸€äº›æœ‰è¶£çš„è°ƒæŸ¥ä¾§é‡äºåœ¨æ¶æ„ä¸Šå°†å››ç§NVMæŠ€æœ¯(PCMã€MRAMã€FeRAMå’ŒReRAM )é›†æˆåˆ°ç°æœ‰å­˜å‚¨å±‚æ¬¡ç»“æ„[99]ä¸­ï¼Œæˆ–å°†NVMç”¨äºå­˜å‚¨å’Œä¸»å­˜å‚¨å™¨ç³»ç»Ÿçš„è½¯ä»¶ä¼˜åŒ–[100]ã€‚æˆ‘ä»¬çš„è°ƒæŸ¥ä¸é‚£äº›è°ƒæŸ¥æœ‰ä¸‰ä¸ªä¸åŒä¹‹å¤„ã€‚é¦–å…ˆï¼Œå…ˆå‰çš„ç ”ç©¶[97 ,98]ä»è®¡ç®—æœºæ¶æ„çš„è§’åº¦å…³æ³¨PCMè®¾è®¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„è®ºæ–‡ä¸»è¦ä»å­˜å‚¨å™¨å±‚æ¬¡ã€ç³»ç»Ÿè½¯ä»¶å’Œåº”ç”¨çš„ç»´åº¦æ¥ç ”ç©¶ä½¿ç”¨æ··åˆå­˜å‚¨å™¨çš„ç³»ç»Ÿã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬çš„è®ºæ–‡åŒ…å«äº†æ›´å¤šæ–°å‘è¡¨çš„æœŸåˆŠã€ä¼šè®®è®ºæ–‡çš„è¯„è®ºã€‚ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬å¯¹æ–°å‘å¸ƒçš„Intel Optane DCPMMè®¾å¤‡è¿›è¡Œäº†æ›´å¤šç ”ç©¶ã€‚ç¬¬ä¸‰ï¼Œæˆ‘ä»¬ä»‹ç»äº†æœ€è¿‘å…³äºå­˜å‚¨å™¨ç³»ç»Ÿçš„è¿‘æœŸç»éªŒï¼Œä»¥é˜æ˜æœªæ¥æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿçš„æŒ‘æˆ˜å’Œæœºé‡ã€‚</p><p>æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ç»„ç»‡å¦‚ä¸‹ã€‚ç¬¬2èŠ‚æè¿°äº†ç°æœ‰çš„ç”±DRAMå’ŒNVMMç»„æˆçš„æ··åˆå†…å­˜æ¶æ„ã€‚ç¬¬3èŠ‚ä»‹ç»äº†NVMMä¸­æ•°æ®æŒä¹…æ€§ä¿è¯çš„æŒ‘æˆ˜å’Œå½“å‰è§£å†³æ–¹æ¡ˆã€‚4èŠ‚ä»‹ç»äº†æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­æ€§èƒ½ä¼˜åŒ–å’ŒèŠ‚èƒ½çš„æœ€æ–°ç ”ç©¶ã€‚ç¬¬5èŠ‚ä»‹ç»NVMMå†™è€ä¹…æ€§çš„ç ”ç©¶ã€‚ç¬¬6èŠ‚ä»‹ç»äº†ç ”ç©¶NVMMæŠ€æœ¯æ‰€åšçš„åŠªåŠ›å’Œå®è·µã€‚åœ¨ç¬¬7èŠ‚ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†NVMMçš„æœªæ¥ç ”ç©¶æ–¹å‘ã€‚æˆ‘ä»¬åœ¨ç¬¬8èŠ‚ç»“æŸæœ¬æ–‡ã€‚</p><h1 id="2-Hybrid-Memory-Architecturesæ··åˆå†…å­˜æ¶æ„"><a href="#2-Hybrid-Memory-Architecturesæ··åˆå†…å­˜æ¶æ„" class="headerlink" title="2. Hybrid Memory Architecturesæ··åˆå†…å­˜æ¶æ„"></a>2. Hybrid Memory Architecturesæ··åˆå†…å­˜æ¶æ„</h1><p>å·²ç»æœ‰å¾ˆå¤šå…³äºæ··åˆå­˜å‚¨å™¨æ¶æ„çš„ç ”ç©¶ã€‚é€šå¸¸ï¼Œä¸»è¦æœ‰ä¸¤ç§æ··åˆå­˜å‚¨å™¨æ¶æ„ï¼Œå³æ°´å¹³å’Œåˆ†å±‚[18]ï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/e565e90afda244f6a8dcfbe3081068c1.png" alt="å¸¸è§çš„æ¶æ„ï¼Œæœ€è¿‘åç§‘çš„å·¥ä½œä¹Ÿæœ‰æ··åˆçš„æ¶æ„å‡ºç°"></p><h2 id="2-1-Horizontal-Hybrid-Memory-Architecturesæ°´å¹³æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„"><a href="#2-1-Horizontal-Hybrid-Memory-Architecturesæ°´å¹³æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„" class="headerlink" title="2.1 Horizontal Hybrid Memory Architecturesæ°´å¹³æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„"></a>2.1 Horizontal Hybrid Memory Architecturesæ°´å¹³æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„</h2><p>è®¸å¤šDRAM-NVMMæ··åˆå­˜å‚¨å™¨ç³»ç»Ÿ[14 ,15 ,31]é€šè¿‡OSåœ¨å¹³é¢(å•ä¸ª)å­˜å‚¨å™¨åœ°å€ç©ºé—´ä¸­ç®¡ç†DRAMå’ŒNVMMï¼Œå¹¶å°†å®ƒä»¬ä¸¤è€…ç”¨ä½œä¸»å­˜å‚¨å™¨[31 ,32]ã€‚ä¸ºäº†æé«˜æ•°æ®è®¿é—®æ€§èƒ½ï¼Œè¿™äº›æ··åˆå†…å­˜ç³»ç»Ÿéœ€è¦é€šè¿‡å°†é¢‘ç¹è®¿é—®çš„çƒ­NVMMé¡µé¢è¿ç§»åˆ°DRAMæ¥å…‹æœNVMMçš„ç¼ºç‚¹ï¼Œå¦‚å›¾1ï¼ˆaï¼‰æ‰€ç¤ºã€‚éœ€è¦å¼€å‘å†…å­˜è®¿é—®ç›‘æ§æœºåˆ¶æ¥æŒ‡å¯¼é¡µé¢è¿ç§»ã€‚</p><p><strong>å†…å­˜è®¿é—®ç›‘æ§</strong>ã€‚Zhangå’ŒLi[31]ä½¿ç”¨å¤šé˜Ÿåˆ—ç®—æ³•å¯¹é¡µé¢çš„çƒ­åº¦è¿›è¡Œåˆ†ç±»ï¼Œå¹¶å°†çƒ­é¡µé¢å’Œå†·é¡µé¢åˆ†åˆ«æ”¾ç½®åœ¨DRAMå’ŒNVMMä¸­ã€‚Parkç­‰äºº[32]ä¹Ÿä¸»å¼ ç”¨äºç®¡ç†DRAMå’ŒNVMMçš„æ°´å¹³æ··åˆå­˜å‚¨æ¶æ„ã€‚æ­¤å¤–ï¼Œä»–ä»¬è¿˜æå‡ºäº†ä¸‰ç§ä¼˜åŒ–ç­–ç•¥æ¥é™ä½æ··åˆå­˜å‚¨ç³»ç»Ÿçš„èƒ½è€—ã€‚ä»–ä»¬ä»¥éå¸¸ç»†çš„DRAMè¡Œç²’åº¦ç›‘è§†å†…å­˜æ•°æ®ï¼Œå¹¶å®šæœŸæ£€æŸ¥æ¯ä¸ªDRAMè¡Œä¸­çš„è®¿é—®è®¡æ•°å™¨ã€‚æ ¹æ®è®¡æ•°å™¨å°†æ•°æ®å†™å›NVMMï¼Œä»¥å‡å°‘DRAMåˆ·æ–°çš„èƒ½è€—ã€‚åœ¨å†æ¬¡è®¿é—®æ•°æ®ä¹‹å‰ï¼Œæ•°æ®ä¸ä¼šä»NVMMç¼“å­˜åˆ°DRAMã€‚è„æ•°æ®å°½å¯èƒ½é•¿æ—¶é—´åœ°ä¿å­˜åœ¨DRAMä¸­ï¼Œä»¥å‡å°‘DRAMå’ŒNVMMä¹‹é—´çš„æ•°æ®äº¤æ¢å¼€é”€ä»¥åŠNVMMçš„æ˜‚è´µå†™æ“ä½œã€‚</p><div class="note info no-icon"> å¬èµ·æ¥ç›‘æ§æˆæœ¬æ¯”è¾ƒé«˜ </div><p><strong>é¡µé¢è¿ç§»</strong>ã€‚é’ˆå¯¹ä¸åŒçš„ä¼˜åŒ–ç›®æ ‡ï¼Œå·²ç»æå‡ºäº†è®¸å¤šé¡µé¢è¿ç§»ç®—æ³•ã€‚Soyoonç­‰äºº[33]è®¤ä¸ºï¼Œåœ¨è¯†åˆ«çƒ­é¡µæ—¶ï¼ŒNVMMå†™å…¥çš„é¢‘ç‡æ¯”æ•°æ®è®¿é—®çš„æœ€è¿‘æ€§æ›´é‡è¦ï¼Œå¹¶æå‡ºäº†ä¸€ç§ç§°ä¸ºCLOCK with Dirty bits and Write frequencyï¼ˆCLOCK-DWFï¼‰çš„é¡µæ›¿æ¢ç®—æ³•ã€‚å¯¹äºæ¯ä¸ªNVMMå†™å…¥æ“ä½œ, CLOCK-DWFéœ€è¦é¦–å…ˆå°†ç›¸åº”çš„é¡µé¢æå–åˆ°DRAMï¼Œç„¶ååœ¨DRAMä¸­æ‰§è¡Œå†™å…¥ã€‚è¿™ç§æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´è®¸å¤šä¸å¿…è¦çš„é¡µé¢è¿ç§»ï¼Œä»è€Œç»™NVMMå¸¦æ¥æ›´å¤šçš„èƒ½è€—å’Œå†™å›æ“ä½œã€‚Salkhordehå’ŒAsadi[34]è€ƒè™‘äº†å†…å­˜å†™å…¥å’Œè¯»å–ï¼Œä»¥è¿ç§»æœ‰åˆ©äºæ€§èƒ½å’ŒèŠ‚èƒ½çš„çƒ­é¡µé¢ï¼Œå¹¶ä½¿ç”¨ä¸¤ä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„(LRU)é˜Ÿåˆ—åˆ†åˆ«é€‰æ‹©DRAMå’ŒNVMä¸­çš„è¦è¢«é©±é€çš„é¡µé¢ã€‚Yoon[17]ç­‰äººåŸºäºè¡Œç¼“å†²åŒºå±€éƒ¨æ€§è¿›è¡Œäº†é¡µé¢è¿ç§»ï¼Œå…¶ä¸­è¡Œç¼“å†²åŒºå‘½ä¸­ç‡ä½çš„é¡µé¢è¢«è¿ç§»åˆ°DRAMï¼Œè€Œè¡Œç¼“å†²åŒºç‚¹å‡»ç‡é«˜çš„é¡µé¢ä»ä¿ç•™åœ¨NVMMä¸­ã€‚Li[101]ç­‰äººæå‡ºäº†ä¸€ç§å®ç”¨æ¨¡å‹ï¼Œç”¨äºåŸºäºå®ç”¨ç¨‹åºå®šä¹‰æ¥æŒ‡å¯¼é¡µé¢è¿ç§»ï¼Œè¯¥å®ç”¨ç¨‹åºå®šä¹‰åŸºäºè®¸å¤šå› ç´ ï¼Œå¦‚é¡µé¢çƒ­åº¦ã€å†…å­˜çº§å¹¶è¡Œæ€§å’Œè¡Œç¼“å†²åŒºå±€éƒ¨æ€§ã€‚Khouzani[35]ç­‰äººè€ƒè™‘äº†ç¨‹åºçš„å†…å­˜å¸ƒå±€å’Œå†…å­˜çº§å¹¶è¡Œæ€§ï¼Œä»¥è¿ç§»æ··åˆå†…å­˜ç³»ç»Ÿä¸­çš„é¡µé¢ã€‚</p><p><strong>æ¶æ„é™åˆ¶</strong>ã€‚åœ¨æ°´å¹³æ··åˆå­˜å‚¨å™¨æ¶æ„ä¸­ç®¡ç†NVMMå’ŒDRAMæœ‰å‡ ä¸ªæŒ‘æˆ˜ã€‚</p><p>é¦–å…ˆ,<span class="label primary">é¡µé¢çº§å†…å­˜ç›‘æ§æˆæœ¬é«˜æ˜‚</span>ã€‚ä¸€æ–¹é¢ï¼Œç”±äºå½“ä»Šçš„å•†å“x86ç³»ç»Ÿä¸æ”¯æŒé¡µé¢ç²’åº¦çš„å†…å­˜è®¿é—®ç›‘æ§ï¼Œå› æ­¤ç¡¬ä»¶æ”¯æŒçš„é¡µé¢è¿ç§»æ–¹æ¡ˆéœ€è¦å¤§é‡çš„ç¡¬ä»¶ä¿®æ”¹æ¥ç›‘æ§å†…å­˜è®¿é—®ç»Ÿè®¡[14,15,33]ã€‚å¦ä¸€æ–¹é¢, OSå±‚çš„å†…å­˜è®¿é—®ç›‘æ§é€šå¸¸ä¼šå¯¼è‡´æ˜¾è‘—çš„æ€§èƒ½å¼€é”€ã€‚è®¸å¤šæ“ä½œç³»ç»Ÿåœ¨é¡µé¢è¡¨æ¡ç›®(PTE)ä¸­ä¸ºæ¯ä¸ªé¡µé¢ç»´æŠ¤ä¸€ä¸ªâ€œå·²è®¿é—®â€ä½ï¼Œä»¥æ ‡è¯†è¯¥é¡µé¢æ˜¯å¦è¢«è®¿é—®ã€‚ç„¶è€Œï¼Œè¯¥ä½ä¸èƒ½çœŸå®åœ°åæ˜ é¡µé¢è®¿é—®çš„æœ€è¿‘æ€§å’Œé¢‘ç‡ã€‚å› æ­¤ï¼Œä¸€äº›åŸºäºè½¯ä»¶çš„æ–¹æ³•å°†ç¦ç”¨Translation Lookaside Bufferï¼ˆTLBï¼‰[102]æ¥è·Ÿè¸ªæ¯ä¸ªå†…å­˜å¼•ç”¨ã€‚è¿™ç§é¡µé¢è®¿é—®ç›‘æ§æœºåˆ¶é€šå¸¸ä¼šå¯¼è‡´æ˜¾è‘—çš„æ€§èƒ½å¼€é”€ï¼Œç”šè‡³æŠµæ¶ˆæ··åˆå†…å­˜ç³»ç»Ÿä¸­é¡µé¢è¿ç§»çš„å¥½å¤„ã€‚</p><p>ç¬¬äºŒï¼Œé¡µé¢è¿ç§»æˆæœ¬ä¹Ÿå¾ˆé«˜ã€‚<span class="label primary">ä¸€æ¬¡é¡µè¿ç§»å¯èƒ½å¯¼è‡´å¤šæ¬¡é¡µè¯»/å†™æ“ä½œï¼ˆä»£ä»·é«˜æ˜‚ï¼‰</span>ã€‚é¡µé¢å¯èƒ½åªåŒ…å«ä¸€å°éƒ¨åˆ†çƒ­æ•°æ®ï¼Œå› æ­¤ç”±äºå†…å­˜å¸¦å®½å’ŒDRAMå®¹é‡çš„æµªè´¹ï¼Œé¡µé¢ç²’åº¦çš„è¿ç§»æˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚</p><p>ç¬¬ä¸‰ï¼Œçƒ­é¡µé¢æ£€æµ‹æœºåˆ¶å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ¥é¢„çƒ­é¡µé¢ï¼Œä»è€Œé™ä½é¡µé¢è¿ç§»çš„æ”¶ç›Šã€‚æ­¤å¤–ï¼Œ<span class="label primary">å¯¹äºæŸäº›ä¸è§„åˆ™çš„å†…å­˜è®¿é—®æ¨¡å¼ï¼Œçƒ­é¡µé¢é¢„æµ‹å¯èƒ½ä¸å‡†ç¡®ï¼Œä»è€Œå¯¼è‡´ä¸å¿…è¦çš„é¡µé¢è¿ç§»</span>ã€‚</p><h2 id="2-2-Hierarchical-Hybrid-Memory-Architecturesåˆ†å±‚æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„"><a href="#2-2-Hierarchical-Hybrid-Memory-Architecturesåˆ†å±‚æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„" class="headerlink" title="2.2 Hierarchical Hybrid Memory Architecturesåˆ†å±‚æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„"></a>2.2 Hierarchical Hybrid Memory Architecturesåˆ†å±‚æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„</h2><p>è®¸å¤šç ”ç©¶å»ºè®®é€šè¿‡åˆ†å±‚çš„ç¼“å­˜-å†…å­˜æ¶æ„æ¥ç»„ç»‡DRAMå’ŒNVMM[16,38,39]ã€‚ä»–ä»¬ä½¿ç”¨DRAMä½œä¸ºNVMMçš„ç¼“å­˜ï¼Œå¦‚å›¾1ï¼ˆbï¼‰æ‰€ç¤ºã€‚DRAMç¼“å­˜å¯¹æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºæ˜¯ä¸å¯è§çš„ï¼Œå®Œå…¨ç”±ç¡¬ä»¶ç®¡ç†ã€‚</p><p>Qureshiç­‰äºº[16]æå‡ºäº†ä¸€ç§ç”±å¤§å°ºå¯¸PCMå’Œå°å°ºå¯¸DRAMç»„æˆçš„åˆ†å±‚æ··åˆå­˜å‚¨ç³»ç»Ÿã€‚DRAMç¼“å­˜åŒ…å«æœ€è¿‘è®¿é—®çš„æ•°æ®ï¼Œä»¥å‡å°‘æœ€æ˜‚è´µçš„NVMMè®¿é—®ï¼Œè€Œå¤§å®¹é‡NVMMå­˜å‚¨å¤§éƒ¨åˆ†æ‰€éœ€æ•°æ®ï¼Œä»¥é¿å…åœ¨åº”ç”¨ç¨‹åºæ‰§è¡ŒæœŸé—´è¿›è¡Œæ˜‚è´µçš„I/Oæ“ä½œã€‚ç±»ä¼¼åœ°ï¼ŒMladenov[38]è®¾è®¡äº†ä¸€ä¸ªå…·æœ‰å°å®¹é‡DRAMç¼“å­˜å’Œå¤§å®¹é‡NVMMçš„æ··åˆå­˜å‚¨ç³»ç»Ÿï¼Œå¹¶åŸºäºåº”ç”¨ç¨‹åºæ•°æ®çš„ç©ºé—´å±€éƒ¨æ€§å¯¹å…¶è¿›è¡Œç®¡ç†ã€‚DRAMä½œä¸ºæŒ‰éœ€ç¼“å­˜è¿›è¡Œç®¡ç†ï¼Œå¹¶é€šè¿‡LRUç®—æ³•è¿›è¡Œæ›¿æ¢ã€‚Lohå’ŒHill[39]ä»¥ç¼“å­˜è¡Œçš„ç²’åº¦ç®¡ç†DRAMï¼Œä»¥æé«˜DRAMç¼“å­˜çš„æ•ˆç‡ï¼Œå¹¶ä½¿ç”¨ç»„è¿æ¥æ–¹å¼å°†NVMMæ•°æ®æ˜ å°„åˆ°DRAMç¼“å­˜ã€‚ä»–ä»¬å°†å…ƒæ•°æ®tagå’Œæ•°æ®æ”¾åœ¨åŒä¸€ä¸ªå­˜å‚¨è¡Œä¸­ï¼Œä»¥ä¾¿å¯ä»¥å¿«é€Ÿè®¿é—®ç¼“å­˜å‘½ä¸­çš„æ•°æ®ï¼Œå¹¶å‡å°‘æ ‡è®°æŸ¥è¯¢çš„æ€§èƒ½å¼€é”€ã€‚</p><div class="note info no-icon"> ç¼“å­˜æ˜¯å¾—æŠŠè¿™ä¸ªDRAM100%ç”¨èµ·æ¥çš„ï¼Œæ°´å¹³å°±ä¸å¥½è¯´äº† </div><p>åœ¨è¿™ç§å†…å­˜ç»“æ„ä¸­ï¼Œç”±äºDRAMè¢«ç»„ç»‡ä¸ºNè·¯é›†åˆå…³è”ç¼“å­˜ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„ç¡¬ä»¶æ¥ç®¡ç†DRAMç¼“å­˜ã€‚ä¾‹å¦‚ï¼Œéœ€è¦SRAMå­˜å‚¨å™¨æ¥å­˜å‚¨DRAMé«˜é€Ÿç¼“å­˜ä¸­æ•°æ®å—çš„å…ƒæ•°æ®tagï¼Œå¹¶ä¸”éœ€è¦ç¡¬ä»¶æŸ¥æ‰¾ç”µè·¯æ¥æŸ¥æ‰¾DRAMé«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ä¸­æ‰€è¯·æ±‚çš„æ•°æ®ã€‚å› æ­¤ï¼Œä¸ºäº†è®¿é—®DRAMç¼“å­˜ä¸­çš„æ•°æ®ï¼Œéœ€è¦ä¸¤ä¸ªå†…å­˜å¼•ç”¨ï¼Œä¸€ä¸ªç”¨äºè®¿é—®å…ƒæ•°æ®ï¼Œå¦ä¸€ä¸ªç”¨äºå®é™…æ•°æ®ã€‚ä¸ºäº†åŠ é€Ÿå…ƒæ•°æ®è®¿é—®ï¼ŒQureshi[16]ç­‰äººä½¿ç”¨äº†é«˜é€ŸSRAMæ¥å­˜å‚¨å…ƒæ•°æ®ã€‚Mezaç­‰äºº[40]é€šè¿‡å°†å…ƒæ•°æ®æ”¾åœ¨åŒä¸€DRAMè¡Œä¸­çš„æ•°æ®å—æ—è¾¹ï¼Œé™ä½äº†æ ‡è®°å­˜å‚¨çš„ç¡¬ä»¶æˆæœ¬ã€‚ä»–ä»¬è¿˜å»ºè®®ä½¿ç”¨ç‰‡ä¸Šå…ƒæ•°æ®ç¼“å†²åŒºå°†é¢‘ç¹è®¿é—®çš„å…ƒæ•°æ®ç¼“å­˜åœ¨å°å‹SRAMä¸­ã€‚</p><p><strong>æ¶æ„é™åˆ¶</strong>ã€‚å°½ç®¡åˆ†å±‚æ··åˆå­˜å‚¨å™¨æ¶æ„é€šå¸¸æ¯”å•ç‹¬è®¿é—®NVMMä¸­çš„æ•°æ®çš„åœºæ™¯æä¾›æ›´å¥½çš„æ€§èƒ½ï¼Œä½†åœ¨è¿è¡Œå…·æœ‰è¾ƒå·®å±€éƒ¨æ€§çš„å·¥ä½œè´Ÿè½½æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½æ˜¾è‘—ä¸‹é™[103]ã€‚åŸå› æ˜¯å¤§å¤šæ•°ç¡¬ä»¶ç®¡ç†çš„åˆ†å±‚DRAM-NVMMç³»ç»Ÿä¸ºäº†ç®€åŒ–è€Œåˆ©ç”¨åŸºäºæŒ‰éœ€çš„æ•°æ®é¢„å–ç­–ç•¥ï¼Œå› æ­¤DRAMç¼“å­˜ä½äºå­˜å‚¨å™¨åˆ†å±‚çš„å…³é”®æ•°æ®è·¯å¾„ä¸­ã€‚å¦‚æœæ•°æ®å—æœªå‘½ä¸­DRAMç¼“å­˜ï¼Œåˆ™æ— è®ºé¡µé¢çƒ­åº¦å¦‚ä½•ï¼Œéƒ½å¿…é¡»å°†å…¶ä»NVMMæå–åˆ°DRAMã€‚è¿™ç§ç¼“å­˜å¡«å……ç­–ç•¥å¯èƒ½ä¼šå¯¼è‡´DRAMå’ŒNVMMä¹‹é—´é¢‘ç¹çš„æ•°æ®äº¤æ¢ï¼ˆç±»ä¼¼äºç¼“å­˜æŠ–åŠ¨é—®é¢˜ï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œç¡¬ä»¶ç®¡ç†çš„ç¼“å­˜æ¶æ„ä¸èƒ½å……åˆ†åˆ©ç”¨DRAMå®¹é‡ã€‚ç”±äºDRAMç¼“å­˜è¢«è®¾ç½®ä¸ºå…³è”çš„ï¼Œå› æ­¤æ¯ä¸ªNVMMæ•°æ®å—è¢«æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šçš„é›†åˆã€‚å½“é›†åˆå·²æ»¡æ—¶,å®ƒå¿…é¡»åœ¨å°†æ–°çš„NVMMæ•°æ®å—æå–åˆ°DRAMä¹‹å‰é©±é€æ•°æ®å—ï¼Œå³ä½¿å…¶ä»–ç¼“å­˜é›†åˆä¸ºç©ºã€‚</p><h2 id="2-3-Intel-Optane-DCPMMçš„ä½“ç³»ç»“æ„"><a href="#2-3-Intel-Optane-DCPMMçš„ä½“ç³»ç»“æ„" class="headerlink" title="2.3 Intel Optane DCPMMçš„ä½“ç³»ç»“æ„"></a>2.3 Intel Optane DCPMMçš„ä½“ç³»ç»“æ„</h2><p>æœ€è¿‘å‘å¸ƒçš„Intel Optane DCPMMä¸DRAMç»“åˆä½¿ç”¨æ—¶æ”¯æŒæ°´å¹³å’Œåˆ†å±‚æ··åˆå†…å­˜ç»“æ„ã€‚OptaneDCPMM DIMMç›®å‰æœ‰ä¸¤ç§æ“ä½œæ¨¡å¼:å†…å­˜æ¨¡å¼å’Œåº”ç”¨ç¨‹åºç›´æ¥æ¨¡å¼[25]ã€‚è¿™äº›æ¨¡å¼ä¸­çš„æ¯ä¸€ç§å¯¹äºç‰¹å®šçš„ç”¨ä¾‹éƒ½æœ‰å…¶ä¼˜ç‚¹ã€‚</p><p><strong>å†…å­˜æ¨¡å¼</strong>ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒDCPMMå……å½“<strong>å¤§å®¹é‡çš„ä¸»å­˜å‚¨å™¨</strong>ã€‚æ“ä½œç³»ç»Ÿå°†DCPMMè¯†åˆ«ä¸ºä¼ ç»ŸDRAMï¼Œ<strong>å¹¶ç¦ç”¨DCPMMçš„æŒä¹…æ€§åŠŸèƒ½</strong>ã€‚å¦‚æœå°†ä¼ ç»ŸDRAMä¸DCPMMç»“åˆä½¿ç”¨ï¼Œå®ƒå°†éšè—åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå¹¶å……å½“DCPMMçš„ç¼“å­˜å±‚ã€‚å› æ­¤ï¼ŒDCPMMå’ŒDRAMå®é™…ä¸Šè¢«ç»„ç»‡åœ¨åˆ†å±‚æ··åˆå­˜å‚¨å™¨æ¶æ„ä¸­ã€‚å†…å­˜æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹æ˜¯æä¾›åœ¨å†…å­˜æ€»çº¿é€šé“ä¸Šæä¾›ä¼˜è¶Šå†…å­˜å®¹é‡ã€‚è¿™ç§æ¨¡å¼å¼ºçƒˆå¼ºè°ƒåœ¨ä¸ä¿®æ”¹ä¸Šå±‚ç³»ç»Ÿçš„æƒ…å†µä¸‹å›´ç»•å†…å­˜ç©ºé—´æ„å»ºå¤§å®¹é‡å­˜å‚¨ç¯å¢ƒä»¥åŠåº”ç”¨ç¨‹åºã€‚æ¨èçš„ç”¨ä¾‹æ˜¯æ‰©å±•ä¸»å†…å­˜å®¹é‡ï¼Œä»¥å®ç°æ›´å¥½çš„åŸºç¡€è®¾æ–½æ‰©å±•ï¼Œä¾‹å¦‚ç”¨äºå¤§æ•°æ®åº”ç”¨ç¨‹åºçš„å¹¶è¡Œè®¡ç®—å¹³å°ï¼ˆMapReduceã€å›¾å½¢è®¡ç®—ï¼‰ã€‚</p><div class="note info no-icon"> è¿™ç§ç”¨ä¾‹åº”è¯¥æ˜¯æŒ‡DRAMå¾ˆå°‘å¾ˆå°‘ï¼ŒPMç‰¹åˆ«å¤šçš„ï¼Œæ•°æ®ä»“åº“é‚£ç§çº§åˆ«çš„ç¼“å­˜å§ï¼Ÿé€šå¸¸ä¸€èˆ¬æœåŠ¡å™¨çš„æ¯”ä¾‹æ‹¿å»åšç¼“å­˜çœŸçš„å¾ˆæµªè´¹å®¹é‡å’¦ </div><p><strong>ADæ¨¡å¼</strong>ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒDCPMMä¸ºæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºæä¾›äº†æ‰€æœ‰æŒä¹…æ€§ç‰¹æ€§ã€‚æ“ä½œç³»ç»Ÿå°†DRAMå’ŒDCPMMåˆ†åˆ«ä½œä¸ºä¸»å­˜å‚¨å™¨å’ŒæŒä¹…å­˜å‚¨å‘åº”ç”¨ç¨‹åºå…¬å¼€ã€‚ä¸DCPMMæ··åˆçš„ä¼ ç»ŸDRAMä»ç„¶å……å½“åº”ç”¨ç¨‹åºçš„æ ‡å‡†DRAMï¼Œè€ŒDCPMMä¹Ÿè¢«åˆ†é…åˆ°å­˜å‚¨å™¨æ€»çº¿ä»¥å®ç°æ›´å¿«çš„å­˜å‚¨å™¨è®¿é—®ã€‚DCPMMç”¨ä½œä¸¤ç§namespaceä¹‹ä¸€:ç›´æ¥è®¿é—®å­˜å–ï¼ˆDAXï¼‰å’Œå—å­˜å‚¨ã€‚å‰è€…çš„namespaceæ˜¯å­—èŠ‚å¯å¯»å€çš„æŒä¹…å­˜å‚¨ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ç‰¹æ®Šçš„apisç›´æ¥è®¿é—®ã€‚å› æ­¤ï¼ŒDCPMMå’ŒDRAMåœ¨è¿™ç§æ¨¡å¼ä¸‹è¢«é€»è¾‘åœ°ç»„ç»‡åœ¨ä¸€ä¸ªæ°´å¹³æ··åˆå†…å­˜æ¶æ„ä¸­ã€‚åä¸€ä¸ªå‘½åç©ºé—´å°†DCPMM ä½œä¸ºåŒºå—å­˜å‚¨è®¾å¤‡æä¾›ç»™åº”ç”¨ç¨‹åºï¼Œç±»ä¼¼äºSSDï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ›´å¿«çš„å†…å­˜æ€»çº¿è®¿é—®ã€‚åº”ç”¨ç¨‹åºç›´æ¥æ¨¡å¼å¼ºè°ƒå‡å°‘å»¶è¿Ÿå’Œæé«˜å¸¦å®½çš„ä¼˜åŠ¿ï¼Œæ¯”NVMeå¿«2.7å€ã€‚æ¨èçš„ç”¨ä¾‹é€‚ç”¨äºå¤§å‹å†…å­˜æ•°æ®åº“ï¼Œè¿™äº›æ•°æ®åº“éœ€è¦æ»¡è¶³æ•°æ®æŒä¹…æ€§çš„è¦æ±‚ã€‚</p><p>è¿˜æœ‰ä¸€ç§ç»“åˆäº†å†…å­˜æ¨¡å¼å’Œåº”ç”¨ç¨‹åºç›´æ¥æ¨¡å¼çš„æ··åˆå†…å­˜æ¨¡å¼ã€‚DCPMMçš„ä¸€éƒ¨åˆ†å®¹é‡ç”¨äºå†…å­˜æ¨¡å¼æ“ä½œ,DCPMMå‰©ä½™çš„å®¹é‡ç”¨äºåº”ç”¨ç¨‹åºç›´æ¥æ¨¡å¼æ“ä½œã€‚è¿™ç§æ··åˆå†…å­˜æ¨¡å¼ä¸ºç®¡ç†ä¸åŒåº”ç”¨åœºæ™¯çš„æ··åˆå†…å­˜ç³»ç»Ÿæä¾›äº†ä¸€ç§æ›´çµæ´»çš„æ–¹æ³•ã€‚</p><div class="note info no-icon"> è¿™é‡Œæ²¡æœ‰è¯´é€šè¿‡çƒ­æ’æ‹”çš„dvdaxæ¨¡å¼ï¼Œå˜æˆæ˜“å¤±å†…å­˜ </div><h2 id="2-4-Summaryæ€»ç»“"><a href="#2-4-Summaryæ€»ç»“" class="headerlink" title="2.4  Summaryæ€»ç»“"></a>2.4  Summaryæ€»ç»“</h2><p>ä¸Šè¿°ä¸¤ç§æ··åˆå­˜å‚¨å™¨æ¶æ„å¯¹äºä¸åŒçš„åœºæ™¯æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ã€‚<span class="label primary">é€šå¸¸ï¼Œåˆ†å±‚æ¶æ„æ›´é€‚åˆå…·æœ‰è‰¯å¥½æ•°æ®å±€éƒ¨æ€§çš„åº”ç”¨ç¨‹åºï¼Œè€Œå¹³é¢å¯å¯»å€æ¶æ„æ›´é€‚ç”¨äºå»¶è¿Ÿä¸æ•æ„Ÿæˆ–å ç©ºé—´è¾ƒå¤§çš„åº”ç”¨ç¨‹åºã€‚</span>å…³äºå“ªç§æ¶æ„æ¯”å¦ä¸€ç§æ¶æ„æ›´å¥½ï¼Œç›®å‰å°šæ— å®šè®ºã€‚å®é™…ä¸Šï¼ŒIntel Optane DCPMMæ”¯æŒåˆ†å±‚å’Œå¹³é¢å¯å¯»å€æ··åˆå†…å­˜æ¶æ„ã€‚å½“å‰DCPMMçš„ä¸€ä¸ªé™åˆ¶æ˜¯ï¼Œåœ¨é‡æ–°é…ç½®DCPMMæ¨¡å¼åï¼Œç³»ç»Ÿéœ€è¦é‡æ–°å¯åŠ¨ã€‚å¦‚æœä¸€ä¸ªå¯é‡æ–°é…ç½®çš„æ··åˆå†…å­˜ç³»ç»Ÿèƒ½å¤Ÿä»¥åŠæ—¶æœ‰æ•ˆçš„æ–¹å¼åŠ¨æ€åœ°é€‚åº”ä¸åŒçš„åœºæ™¯ï¼Œå¯¹äºåº”ç”¨ç¨‹åºæ¥è¯´å¯èƒ½æ˜¯æœ‰ç›Šçš„å’Œçµæ´»çš„ã€‚è¿™å¯èƒ½æ˜¯NVMMå™¨ä»¶çš„ä¸€ä¸ªæœ‰è¶£çš„ç ”ç©¶æ–¹å‘ã€‚</p><h1 id="3-Persistent-Memory-Management-æŒä¹…å†…å­˜ç®¡ç†"><a href="#3-Persistent-Memory-Management-æŒä¹…å†…å­˜ç®¡ç†" class="headerlink" title="3 Persistent Memory Management æŒä¹…å†…å­˜ç®¡ç†"></a>3 Persistent Memory Management æŒä¹…å†…å­˜ç®¡ç†</h1><p>æ•°æ®æŒä¹…æ€§æ˜¯NVMMçš„ä¸€ä¸ªé‡è¦è®¾è®¡è€ƒè™‘å› ç´ ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é¦–å…ˆä»‹ç»æŒä¹…å†…å­˜ï¼ˆPMï¼‰ç®¡ç†æ‰€é¢ä¸´çš„æŠ€æœ¯æŒ‘æˆ˜ï¼Œç„¶åä»‹ç»æœ‰å…³æŒä¹…å†…å­˜ç®¡ç†çš„æœ€æ–°ç ”ç©¶ï¼ŒåŒ…æ‹¬æŒä¹…å†…å­˜çš„ä½¿ç”¨ã€æŒä¹…å†…å­˜è®¿é—®æ¨¡å¼ã€å®¹é”™æœºåˆ¶å’ŒæŒä¹…å¯¹è±¡ã€‚</p><h1 id="3-1-Technical-Challenges-æŠ€æœ¯æŒ‘æˆ˜"><a href="#3-1-Technical-Challenges-æŠ€æœ¯æŒ‘æˆ˜" class="headerlink" title="3.1 Technical Challenges æŠ€æœ¯æŒ‘æˆ˜"></a>3.1 Technical Challenges æŠ€æœ¯æŒ‘æˆ˜</h1><p>åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­ï¼ŒNVMMå¯ä»¥åœ¨è¿è¡Œåº”ç”¨ç¨‹åºæ—¶å……å½“ä¸»å†…å­˜ï¼Œå¹¶åœ¨åº”ç”¨ç¨‹åºå®Œæˆæ—¶å……å½“æŒä¹…å­˜å‚¨ã€‚NVMMçš„å­—èŠ‚å¯»å€èƒ½åŠ›å’Œéæ˜“å¤±æ€§ç‰¹æ€§æ¶ˆé™¤äº†å†…å­˜å’Œå¤–éƒ¨å­˜å‚¨çš„åŒºåˆ«ã€‚ç„¶è€Œï¼Œå½“NVMMä¸­çš„æ•°æ®éœ€è¦æŒä¹…åŒ–æ—¶ï¼Œå°±éœ€è¦å¯¹NVMMä¸­çš„æ•°æ®è¿›è¡Œé‡æ–°ç»„ç»‡å’Œé‡æ–°å®šä½ã€‚</p><p>å›¾2æ˜¾ç¤ºäº†æŒä¹…å†…å­˜ï¼ˆPMï¼‰çš„ç®¡ç†æ“ä½œã€‚NVMMåŒºåŸŸæ˜¯ç‰©ç†PMè®¾å¤‡ã€‚NVMMåŒºåŸŸå¯ä»¥åƒDRAMä¸€æ ·ç”¨ä½œå·¥ä½œå†…å­˜ï¼Œä¹Ÿå¯ä»¥åƒç£ç›˜ä¸€æ ·ç”¨ä½œæŒä¹…å­˜å‚¨ã€‚å½“ç¨‹åºå®Œæˆæ—¶ï¼Œå·¥ä½œå†…å­˜ä¸­çš„æ•°æ®åº”è¯¥åˆ·æ–°åˆ°æŒä¹…å­˜å‚¨ä¸­ã€‚æ­¤å¤–ï¼Œä¸ºäº†ä¿è¯é«˜å¯é æ€§ï¼Œæ£€æŸ¥ç‚¹æœºåˆ¶è¢«å¹¿æ³›åˆ©ç”¨æ¥ä»ç”µæºæ•…éšœæˆ–ç³»ç»Ÿå´©æºƒä¸­æ¢å¤ç³»ç»Ÿã€‚Gaoç­‰äºº[104]å¼€å‘äº†ä¸€ç§åˆ©ç”¨NVMMåœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­è¿›è¡Œå®æ—¶æ£€æŸ¥ç‚¹çš„æ–°é¢–æ–¹æ³•ã€‚</p><div class="note info no-icon">Checkpointingï¼ˆæ£€æŸ¥ç‚¹ï¼‰ç”¨äºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å®šæœŸä¿å­˜ç³»ç»Ÿçš„çŠ¶æ€å’Œæ•°æ®å¿«ç…§ã€‚è¿™äº›æ£€æŸ¥ç‚¹å…è®¸ç³»ç»Ÿåœ¨å‘ç”Ÿæ•…éšœæˆ–éœ€è¦æ¢å¤æ—¶ï¼Œä»ä¹‹å‰çš„çŠ¶æ€ç»§ç»­æ‰§è¡Œï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹é‡æ–°è®¡ç®—ã€‚</div><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/ba021f22f99b414582492752b9d4377a.png" alt="æ²¡çœ‹æ‡‚è¿™ä¸ªå›¾"></p><p>æœ‰æ•ˆç®¡ç†PMé¢ä¸´å¤šé¡¹æŒ‘æˆ˜ã€‚é¦–å…ˆï¼ŒæŒä¹…å­˜å‚¨ä»¥æ–‡ä»¶ç³»ç»Ÿçš„å½¢å¼è¢«å¹¿æ³›ç®¡ç†ã€‚ä½œä¸ºå­—èŠ‚å¯å¯»å€NVMMæä¾›æ¯”ä¼ ç»Ÿå—è®¾å¤‡æ›´å¥½çš„éšæœºè®¿é—®æ€§èƒ½ï¼ŒåŸºäºPMçš„æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆå·²ç»ä»ç¡¬ä»¶è½¬ç§»åˆ°ç³»ç»Ÿè½¯ä»¶å †æ ˆã€‚ç¼©çŸ­è½¯ä»¶å †æ ˆä¸­çš„æ•°æ®è·¯å¾„è‡³å…³é‡è¦ã€‚å…¶æ¬¡ï¼Œç”±äºè®¸å¤šCPUä½¿ç”¨å›å†™å¼ç¼“å­˜æ¥å®ç°å†™æ“ä½œçš„é«˜æ€§èƒ½ï¼Œå› æ­¤æœ«çº§ç¼“å­˜ï¼ˆLLCï¼‰å¯èƒ½ä¼šæ”¹å˜å†™å›PMçš„æ•°æ®é¡ºåºã€‚å¦‚æœå‡ºç°æ–­ç”µæˆ–è€…ç³»ç»Ÿå´©æºƒçš„æƒ…å†µï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿è¯PMä¸­æ•°æ®çš„ä¸€è‡´æ€§ï¼Œéœ€è¦å†™æ“ä½œçš„é¡ºåºå’Œå†™åŸå­æ€§æ¨¡å‹æ¥ä¿è¯PMä¸­æ•°æ®çš„ä¸€è‡´æ€§ã€‚ç¬¬ä¸‰ï¼Œä¸åŸºäºPMçš„æ–‡ä»¶ç³»ç»Ÿç›¸æ¯”ï¼ŒæŒä¹…å¯¹è±¡å’Œæ•°æ®ç»“æ„å¯¹äºPMç¼–ç¨‹æ›´æœ‰å‰æ™¯ï¼Œå› ä¸ºå®ƒä»¬æ¶ˆé™¤äº†æ–‡ä»¶ç³»ç»Ÿä¸­çš„å¤æ‚æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ièŠ‚ç‚¹ã€å…ƒæ•°æ®å’Œæ•°æ®ã€‚ç„¶è€Œï¼Œè¿™äº›æŒä¹…å¯¹è±¡å’Œæ•°æ®ç»“æ„ä»ç„¶é¢ä¸´ç€ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æŒ‘æˆ˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å›é¡¾è¯•å›¾è§£å†³è¿™äº›æŒ‘æˆ˜çš„ç ”ç©¶<br>ï¼ˆè¿™åé¢å°±è·³è¿‡äº†ï¼Œå¤§éƒ¨åˆ†åœ¨è®¨è®ºæ–‡ä»¶ç³»ç»Ÿï¼Œä¸æ˜¯æˆ‘ç›®å‰è€ƒè™‘çš„ï¼Œä¸‹æ¬¡ä¸€å®šï¼‰</p><h1 id="4-Performance-Improvement-and-Energy-Savingæ€§èƒ½æ”¹è¿›å’ŒèŠ‚èƒ½"><a href="#4-Performance-Improvement-and-Energy-Savingæ€§èƒ½æ”¹è¿›å’ŒèŠ‚èƒ½" class="headerlink" title="4 Performance Improvement and Energy Savingæ€§èƒ½æ”¹è¿›å’ŒèŠ‚èƒ½"></a>4 Performance Improvement and Energy Savingæ€§èƒ½æ”¹è¿›å’ŒèŠ‚èƒ½</h1><p>ç”±äºNVMMsæ˜¾ç¤ºå‡ºæ›´é«˜çš„è®¿é—®å»¶è¿Ÿå’Œå†™å…¥èƒ½è€—ï¼Œå·²ç»æœ‰å¾ˆå¤šå…³äºNVMMsçš„æ€§èƒ½æ”¹è¿›å’ŒèŠ‚èƒ½çš„ç ”ç©¶[32-34 ,63 ,65 ,66]ã€‚è¿™äº›ç ”ç©¶å¯åˆ†ä¸ºä¸‰ç±»:å‡å°‘NVMMå†™å…¥æ¬¡æ•°ã€å‡å°‘NVMå†™å…¥æœ¬èº«çš„èƒ½è€—ä»¥åŠé€šè¿‡é¡µé¢è¿ç§»å‡å°‘DRAMçš„èƒ½è€—ã€‚</p><h2 id="4-1-NVMM-Write-Reduction-NVMMå†™å…¥å‡å°‘"><a href="#4-1-NVMM-Write-Reduction-NVMMå†™å…¥å‡å°‘" class="headerlink" title="4.1 NVMM Write Reduction NVMMå†™å…¥å‡å°‘"></a>4.1 NVMM Write Reduction NVMMå†™å…¥å‡å°‘</h2><p>ä¸ºäº†å‡å°‘NVMMå†™å…¥,åˆ†å±‚ç»“æ„æ˜¾ç„¶æ›´åˆé€‚,å› ä¸ºDRAMç¼“å­˜å‡å°‘äº†å¤§é‡NVMMå†™å…¥ã€‚ä¸ºæ­¤,å¼€å‘äº†ä¸¤ç§ä¸»è¦æŠ€æœ¯,å³é¡µé¢è¿ç§»å’Œç»•è¿‡NVMMå†™å…¥ã€‚</p><p><strong>é¡µé¢è¿ç§»</strong>ã€‚é¡µé¢è¿ç§»[14 ,15 ,33 ,58 ,59]ç­–ç•¥ä¸»è¦åŸºäºå†™å…¥æ¬¡æ•°å’Œæ¯ä¸ªé¡µé¢çš„æœ€è¿‘è®¿é—®é¢‘ç‡æ¥é€‰æ‹©è¦è¿ç§»çš„é¡µé¢ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºè§¦å‘é¡µé¢è¿ç§»çš„æ¡ä»¶ã€‚</p><p>PDRAM[15]æ ¹æ®å†™å…¥æ¬¡æ•°å°†PCMé¡µè¿ç§»åˆ°DRAMã€‚åœ¨PDRAMä¸­,å­˜å‚¨å™¨æ§åˆ¶å™¨ç»´æŠ¤ä¸€ä¸ªè¡¨ä»¥è®°å½•æ¯ä¸ªPCMé¡µçš„è®¿é—®è®¡æ•°ã€‚å¦‚æœå†™å…¥PCMé¡µçš„æ¬¡æ•°è¶…è¿‡ç»™å®šé˜ˆå€¼,åˆ™è§¦å‘é¡µæ•…éšœï¼Œç„¶åå°†è¯¥é¡µä»PCMé¡µè¿ç§»åˆ°DRAMã€‚</p><p>CLOCK-DWF[33]å°†é¡µé¢çš„å†™å…¥å†å²é›†æˆåˆ°CLOCKç®—æ³•ä¸­ã€‚å½“å‘ç”Ÿé¡µé¢é”™è¯¯æ—¶ï¼Œè™šæ‹Ÿé¡µé¢å°†ä»ç£ç›˜æå–åˆ°PCMã€‚å¦åˆ™, è¯¥é¡µå°†åœ¨DRAMä¸­åˆ†é…,å› ä¸ºè¯¥é¡µå¯èƒ½æ˜¯å†™å¯†é›†å‹é¡µã€‚</p><p>RaPP[14]æ ¹æ®é¡µé¢çš„ç­‰çº§åœ¨DRAMå’ŒPCMä¹‹é—´è¿ç§»é¡µé¢ã€‚åœ¨RaPPä¸­, é¡µé¢æŒ‰è®¿é—®é¢‘ç‡å’Œæœ€è¿‘åº¦æ’åºã€‚æ’åé å‰çš„é¡µé¢ä»PCMè¿ç§»åˆ°DRAMã€‚å› æ­¤ï¼Œé¢‘ç¹å†™å…¥çš„é¡µé¢è¢«æ”¾ç½®åœ¨DRAMä¸­,è€Œå¾ˆå°‘å†™å…¥çš„é¡µé¢åˆ™è¢«æ”¾ç½®åœ¨PCMä¸­ã€‚æ­¤å¤–, RaPPè¿˜å°†ä»»åŠ¡å…³é”®é¡µé¢æ”¾ç½®åœ¨DRAMä¸­ï¼Œä»¥æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚é€šè¿‡ç›‘è§†LLCä¸­æ¯ä¸ªé¡µé¢çš„å†™å›æ“ä½œçš„æ•°é‡,å­˜å‚¨å™¨æ§åˆ¶å™¨èƒ½å¤Ÿè·Ÿè¸ªæ¯ä¸ªé¡µé¢çš„è®¿é—®é¢‘ç‡å’Œæœ€è¿‘æ€§ã€‚RaPPæ ¹æ®å¤šé˜Ÿåˆ—ï¼ˆMQï¼‰ç®—æ³•å¯¹é¡µé¢è¿›è¡Œæ’åº[118]ã€‚ä¼ ç»ŸMQå®šä¹‰äº†å¤šä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰é˜Ÿåˆ—ã€‚æ¯ä¸ªLRUé˜Ÿåˆ—æ˜¯ä¸€ä¸ªé¡µé¢æè¿°ç¬¦é˜Ÿåˆ—, å…¶ä¸­åŒ…æ‹¬å‚è€ƒè®¡æ•°å™¨å’Œé€»è¾‘è¿‡æœŸæ—¶é—´ã€‚å½“ç¬¬1æ¬¡è®¿é—®é¡µé¢æ—¶,é¡µé¢å°†ç§»åŠ¨åˆ°é˜Ÿåˆ—0çš„å°¾éƒ¨ã€‚å¦‚æœé¡µé¢çš„å¼•ç”¨è®¡æ•°è¾¾åˆ° $2^{i+1}$ ,åˆ™æç¤ºé¡µé¢æ’é˜Ÿi+1ã€‚ä¸€æ—¦PCMé¡µé¢è¢«ç§»åŠ¨åˆ°é˜Ÿåˆ—5,å®ƒå°±è¢«è¿ç§»åˆ°DRAMã€‚</p><p><strong>ç¼“å†²NVMMå†™å…¥</strong>ã€‚åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­, ç¼“å­˜èƒ½å¤Ÿå‡å°‘å¯¹NVMMçš„å¤§é‡å†™å…¥ã€‚é€‚å½“çš„ç¼“å­˜æ›¿æ¢ç­–ç•¥ä¸ä»…å¯ä»¥æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½, è¿˜å¯ä»¥é™ä½NVMMçš„èƒ½è€—ã€‚å…ˆå‰çš„ç ”ç©¶[7,18]å‘ç°, ç¼“å­˜ä¸­çš„è®¸å¤šå—åœ¨è¢«ä»ç¼“å­˜ä¸­é€å‡ºä¹‹å‰ä¸ä¼šè¢«å†æ¬¡ä½¿ç”¨ã€‚è¿™äº›å—ç§°ä¸ºæ­»å—ï¼Œå¹¶æ¶ˆè€—å®è´µçš„ç¼“å­˜å®¹é‡ã€‚DASCA[7]æå‡ºäº†ä¸€ç§æ­»å—é¢„æµ‹æ–¹æ³•,ä»¥å‡å°‘STT-RAMç¼“å­˜çš„èƒ½è€—ã€‚é©±é€è¿™äº›æ­»å—å°†å‡å°‘å¯¹STT-RAMç¼“å­˜çš„å†™å…¥,å¹¶ä¸”ä¸ä¼šå½±å“ç¼“å­˜å‘½ä¸­ç‡ã€‚WADE[62]è¿›ä¸€æ­¥åˆ©ç”¨äº†NVMMè¯»å–å’ŒNVMMå†™å…¥ä¹‹é—´çš„èƒ½è€—ä¸å¯¹ç§°æ€§ã€‚ç”±äºNVMMå†™å…¥æ“ä½œæ¯”NVMMè¯»å–æ“ä½œæ¶ˆè€—æ›´å¤šçš„èƒ½é‡,å› æ­¤é¢‘ç¹å†™å…¥çš„å—åº”ä¿ç•™åœ¨ç¼“å­˜ä¸­ã€‚WADEå°†ç¼“å­˜ä¸­çš„å—åˆ†ä¸ºä¸¤ç±»:é¢‘ç¹å›å†™çš„å—å’Œéé¢‘ç¹å›å†™å—ã€‚éé¢‘ç¹å†™å›çš„å—è¢«æ›¿æ¢,ä»¥æä¾›æ›´å¤šæœºä¼šå°†å…¶ä»–æ•°æ®å—ä¿ç•™åœ¨ç¼“å­˜ä¸­ã€‚</p><h2 id="4-2-NVMM-Energy-Consumption-Reduction-NVMMèƒ½è€—é™ä½"><a href="#4-2-NVMM-Energy-Consumption-Reduction-NVMMèƒ½è€—é™ä½" class="headerlink" title="4.2 NVMM Energy Consumption Reduction NVMMèƒ½è€—é™ä½"></a>4.2 NVMM Energy Consumption Reduction NVMMèƒ½è€—é™ä½</h2><p>ç”±äºNVMMå†™å…¥æ˜¾ç¤ºçš„èƒ½è€—æ˜¯NVMMè¯»å–çš„èƒ½è€—çš„å‡ å€ï¼Œå› æ­¤åœ¨é™ä½NVMMå†™å…¥çš„èƒ½è€—æ–¹é¢å·²ç»åšå‡ºäº†è®¸å¤šåŠªåŠ›ã€‚è¿™äº›æ–¹æ³•å¯ä»¥åˆ†ä¸ºä¸¤ç±»:å·®åˆ†å†™å…¥ï¼ˆä»…å†™å…¥è„ä½è€Œä¸æ˜¯æ•´è¡Œï¼‰å’Œåœ¨å•ä¸ªå†™å…¥æœŸé—´å¹¶è¡Œå¤šä¸ªå†™å…¥ã€‚</p><p>å¦‚æœè¦å†™å…¥çš„ä½æ•°è¶…è¿‡ç¼“å­˜è¡Œä¸­æ€»ä½æ•°çš„ä¸€åŠï¼Œåˆ™Flip-N-Write[64]å°è¯•é€šè¿‡ç¿»è½¬ä½æ¥å‡å°‘PCMå†™å…¥èƒ½è€—ã€‚åœ¨ä¸€æ¬¡å†™å…¥æœŸé—´, å¦‚æœè¡Œä¸­è¶…è¿‡ä¸€åŠçš„ä½è¢«å†™å…¥ ,åˆ™æ¯ä¸ªä½è¢«ç¿»è½¬,å› æ­¤ä½ç¿»è½¬ä¸è¶…è¿‡æ€»ä½çš„50%ã€‚åŒæ—¶,è®¾ç½®æ ‡è®°ä½ä»¥è¯†åˆ«è¡Œä¸­çš„ä½æ˜¯å¦è¢«ç¿»è½¬ã€‚å½“è¯»å–è¡Œæ—¶,æ ‡è®°ä½ç”¨äºç¡®å®šè¡Œä¸­çš„ä½æ˜¯å¦åº”è¯¥ç¿»è½¬ã€‚ä¸Flip-N-Writeç±»ä¼¼, Andrewç­‰äºº[73]æå€¡ç»†ç²’åº¦å†™å…¥ã€‚å®ƒåªç›‘è§†è„ä½è€Œä¸æ˜¯ä¸€è¡Œä¸­çš„æ‰€æœ‰ä½ã€‚ä¸€ä¸ªå«åšPCMçš„æ–°æœ¯è¯­å¼•å…¥åŠŸç‡ä»¤ç‰Œä»¥æŒ‡ç¤ºå•æ¬¡å†™å…¥æœŸé—´çš„ç”µæºã€‚å‡è®¾ä¸ºæ¯ä¸ªèŠ¯ç‰‡åˆ†é…Plimit WattsåŠŸç‡, å¹¶ä¸”æ¯ä¸ªä½å†™å…¥éœ€è¦Pbit Watts , Plimitpbitå¯ä»¥åŒæ—¶å†™å…¥ä½ã€‚åœ¨èŠ¯ç‰‡å†…,å¯ä»¥åŒæ—¶å†™å…¥bankã€‚åœ¨å•ä¸ªå†™å…¥æœŸé—´,å¦‚æœå¤šä¸ªå†™å…¥è¯·æ±‚ä½äºä¸åŒçš„å­˜å‚¨åº“ä¸­,å¹¶ä¸”æ€»åŠŸè€—ä¸è¶…è¿‡Plimit ,åˆ™å¯ä»¥åŒæ—¶æ‰§è¡Œè¿™äº›å†™å…¥ã€‚å› æ­¤ï¼Œç»†ç²’åº¦å†™å…¥ä¸ä»…å‡å°‘äº†NVMMå†™å…¥ï¼Œè€Œä¸”é€šè¿‡å®ç°æ›´é«˜çš„å­˜å‚¨ä½“å¹¶è¡Œæ€§æ¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>ä¸€äº›ç ”ç©¶[65 ,66]é€šè¿‡åˆ†ç¦»SETå’ŒRESETæ“ä½œæ¥æé«˜NVMMçš„èƒ½é‡æ•ˆç‡ã€‚ç”±äºNVMMå†™å…¥1æ¯”å†™å…¥0æ¶ˆè€—æ›´å¤šçš„èƒ½é‡å’Œæ—¶é—´ï¼Œå¦‚æœä»¥æ­£ç¡®çš„æ–¹å¼æ‰§è¡Œè¿™äº›å†™å…¥,åˆ™å¯ä»¥å‡å°‘å†™å…¥å»¶è¿Ÿå’Œèƒ½è€—ã€‚ä¸‰é˜¶æ®µå†™å…¥[65]å°†å†™å…¥æ“ä½œåˆ†ä¸ºæ¯”è¾ƒé˜¶æ®µã€å†™å…¥é›¶é˜¶æ®µå’Œå†™å…¥ä¸€é˜¶æ®µã€‚åœ¨æ¯”è¾ƒé˜¶æ®µ,åˆ©ç”¨Flip-N-Writeæœºåˆ¶æ¥å‡å°‘å†™å…¥æ¬¡æ•°ã€‚é›¶ä½å’Œä¸€ä½åˆ†åˆ«åœ¨å†™é›¶çº§å’Œå†™ä¸€çº§ä¸­è¢«åˆ†åˆ«å†™å…¥ã€‚å› ä¸ºåœ¨å¤§å¤šæ•°å·¥ä½œè´Ÿè½½ä¸­,é›¶å†™æ“ä½œå äº†å¤§éƒ¨åˆ†å†™æ“ä½œï¼Œæ‰€ä»¥Tetris write[66]è¿›ä¸€æ­¥è€ƒè™‘äº†SETå’ŒRESETæ“ä½œçš„ä¸å¯¹ç§°æ€§, å¹¶è¡Œè°ƒåº¦ä»£ä»·é«˜æ˜‚çš„å†™æ“ä½œã€‚åœ¨åŠŸç‡çº¦æŸä¸‹, å†™é›¶æ“ä½œè¢«æ’å…¥åˆ°å†™æ“ä½œçš„å‰©ä½™é—´éš”ä¸­ã€‚</p><p>CompEx[67]æå‡ºäº†ä¸€ç§å‹ç¼©æ‰©å±•ç¼–ç æœºåˆ¶,ä»¥å‡å°‘MLC/TLC NVMMçš„èƒ½è€—ã€‚ä¸ºäº†æé«˜MLC/TLCå•å…ƒçš„å¯¿å‘½,é¦–å…ˆå‹ç¼©æ•°æ®ä»¥å‡å°‘æ•°æ®å†—ä½™ã€‚ç„¶åå°†æ‰©å±•ç åº”ç”¨äºå‹ç¼©æ•°æ®å¹¶å†™å…¥ç‰©ç†NVMMå•å…ƒã€‚å¯¹äºå…·æœ‰8ä¸ªçŠ¶æ€çš„TLCå•å…ƒï¼ŒçŠ¶æ€0ã€1ã€6å’Œ7ç§°ä¸ºç»ˆç«¯èƒ½é‡çŠ¶æ€ï¼Œè€ŒçŠ¶æ€2ã€3ã€4.å’Œ5ç§°ä¸ºä¸­å¿ƒèƒ½é‡çŠ¶æ€ã€‚ä¸­å¿ƒèƒ½é‡çŠ¶æ€æ¶ˆè€—æ›´å¤šçš„æ—¶é—´å’Œèƒ½é‡ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦æ›´å¤šçš„ç¼–ç¨‹å’ŒéªŒè¯è¿­ä»£ã€‚CompEx åˆ©ç”¨æ‰©å±•ä»£ç ä»…ä½¿ç”¨NVMMå•å…ƒçš„ç»ˆç«¯èƒ½é‡çŠ¶æ€ã€‚ç”±äºåœ¨ç¼–ç¨‹MLC/TCLå•å…ƒæ—¶ï¼Œç»ˆç«¯èƒ½é‡çŠ¶æ€éœ€è¦æ¯”ä¸­å¿ƒèƒ½é‡çŠ¶æ€æ›´å°‘çš„èƒ½é‡å’Œæ—¶é—´ï¼Œæ‰€ä»¥è¿™ä¸€æƒ³æ³•èµ·æ•ˆã€‚æ··åˆç‰‡ä¸Šç¼“å­˜ä¹Ÿè¢«æå‡ºä»¥å‡å°‘CPUçš„åŠŸè€—ã€‚RHC[68]æ„å»ºäº†ä¸€ä¸ªæ··åˆç¼“å­˜ï¼Œå…¶ä¸­SRAMå’ŒNVMMä¸­çš„æ¯ç§æ–¹å¼éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ‰“å¼€æˆ–å…³é—­ã€‚å¦‚æœä¸€è¡Œå¾ˆé•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®ï¼Œè¯¥è¡Œå°†è¢«å…³é—­ï¼Œè€Œå…¶æ ‡ç­¾ä»å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œä»¥è·Ÿè¸ªè¯¥è¡Œçš„è®¿é—®ã€‚å½“å¯¹æ ‡ç­¾çš„è®¿é—®è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œè¯¥è¡Œå°†é€šç”µã€‚ä¸ºäº†æ›´å¥½åœ°åˆ©ç”¨é«˜æ€§èƒ½SRAMå’Œä½åŠ¨æ€åŠŸè€—NVMMï¼ŒRHCå¯¹SRAMå’ŒNVMMé‡‡ç”¨ä¸åŒçš„é˜ˆå€¼ã€‚</p><h2 id="4-3-DRAM-Energy-Consumption-Reduction-DRAMèƒ½è€—é™ä½"><a href="#4-3-DRAM-Energy-Consumption-Reduction-DRAMèƒ½è€—é™ä½" class="headerlink" title="4.3 DRAM Energy Consumption Reduction DRAMèƒ½è€—é™ä½"></a>4.3 DRAM Energy Consumption Reduction DRAMèƒ½è€—é™ä½</h2><p>åœ¨åªæœ‰DRAMçš„å­˜å‚¨ç³»ç»Ÿä¸­, é™æ€èƒ½è€—å¯ä»¥å å­˜å‚¨ç³»ç»Ÿæ€»èƒ½è€—çš„ä¸€åŠä»¥ä¸Š[69-71]ã€‚åœ¨æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­,é¡µé¢è¿ç§»æŠ€æœ¯è¢«å¹¿æ³›ç”¨äºå‡è½»DRAMçš„èƒ½è€—ã€‚éæ´»åŠ¨é¡µé¢å¯ä»¥ä»DRAMè¿ç§»åˆ°NVMMï¼Œä»¥ä¾¿ç©ºé—²çš„DRAMç»„å¯ä»¥æ–­ç”µã€‚å½“é¡µé¢ç¨åå˜ä¸ºæ´»åŠ¨æ—¶, å®ƒå°†å†æ¬¡è¿ç§»åˆ°DRAMã€‚ç„¶è€Œ, å¦‚æœé¡µé¢è¿ç§»æ²¡æœ‰æ­£ç¡®æ‰§è¡Œ,DRAMåˆ—ç»„å¯èƒ½ä¼šé¢‘ç¹æ–­ç”µå¹¶é‡æ–°æ¿€æ´»ã€‚é¢å¤–çš„èƒ½è€—å¯èƒ½ä¼šæŠµæ¶ˆé¡µé¢è¿ç§»å¸¦æ¥çš„å¥½å¤„ã€‚</p><p>ä¸ºäº†å‡å°‘æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿçš„èƒ½è€—ï¼ŒRAMZzz[8]æ­ç¤ºäº†é«˜èƒ½è€—çš„ä¸¤ä¸ªä¸»è¦æ ¹æºã€‚ä¸€ä¸ªæ˜¯æ´»åŠ¨é¡µé¢çš„ç¨€ç–åˆ†å¸ƒ,å¦ä¸€ä¸ªæ˜¯é¡µé¢è¿ç§»å¯èƒ½ä¸æœ‰æ•ˆ,å› ä¸ºDRAMçš„å¤šèƒ½é‡çŠ¶æ€ä¹‹é—´çš„ä¼ è¾“ä¼šå¼•å…¥é¢å¤–çš„èƒ½é‡æ¶ˆè€—ã€‚ä¸ºäº†è§£å†³å‰ä¸€ä¸ªé—®é¢˜, RAMZzzä½¿ç”¨å¤šä¸ªé˜Ÿåˆ—å°†å…·æœ‰ç±»ä¼¼æ´»åŠ¨çš„é¡µé¢æ”¶é›†åˆ°åŒä¸€ä¸ªDRAMåˆ—ä¸­ï¼Œä»è€Œé¿å…é¢‘ç¹çš„èƒ½é‡çŠ¶æ€è½¬ç§»ã€‚å¤šä¸ªé˜Ÿåˆ—å…·æœ‰Lä¸ªLRUé˜Ÿåˆ—æ¥è®°å½•é¡µé¢æè¿°ç¬¦ã€‚é¡µé¢æè¿°ç¬¦åŒ…å«ä¸€æ®µæ—¶é—´å†…é¡µé¢çš„IDå’Œè®¿é—®ï¼ˆè¯»å’Œå†™ï¼‰è®¡æ•°ã€‚ä¸ºäº†å‡å°‘æ•°æ®è¿ç§»çš„èƒ½é‡å¼€é”€ï¼Œå°†å…·æœ‰ç±»ä¼¼å†…å­˜è®¿é—®è¡Œä¸ºçš„é¡µé¢é‡æ–°ç»„åˆåœ¨ä¸€èµ·ã€‚è¿™æ ·ï¼Œéœ€è¦å°†é¡µé¢åˆ†é…ç»™æ–°çš„bankã€‚RAMZzzåœ¨banksé—´å¹¶è¡Œè¿ç§»è¿™äº›é¡µé¢ã€‚</p><p>Refree[72]é€šè¿‡é¿å…DRAMåˆ·æ–°ï¼Œè¿›ä¸€æ­¥é™ä½äº†æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­çš„DRAMèƒ½è€—ã€‚å½“DRAMè¡Œéœ€è¦åˆ·æ–°æ—¶,è¿™æ„å‘³ç€è¯¥è¡Œå¾ˆé•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®ã€‚è¡Œä¸­çš„æ•°æ®å·²è¿‡æ—¶,ä¸ä¹…ä»¥åä¸å¤ªå¯èƒ½å†æ¬¡è®¿é—®ã€‚Refreeå°†è¿™äº›è¡Œé€å‡ºPCMï¼Œè€Œä¸æ˜¯åœ¨DRAMä¸­åˆ·æ–°å®ƒä»¬ã€‚åœ¨Refreeä¸­,æ‰€æœ‰è¡Œéƒ½ä¼šå®šæœŸç›‘è§†ã€‚æ­¤å‘¨æœŸçš„é—´éš”ç­‰äºDRAMè¡Œè‡ªä¸Šæ¬¡åˆ·æ–°ä»¥æ¥çš„ä¿ç•™æ—¶é—´çš„ä¸€åŠã€‚å› æ­¤ï¼Œè¡Œåˆ†ä¸ºæ´»åŠ¨è¡Œå’Œéæ´»åŠ¨è¡Œã€‚æ¿€æ´»è¡Œåœ¨è®¿é—®ã€‚éæ´»åŠ¨è¡Œè¢«é€å‡ºPCMï¼Œä»è€Œæ¶ˆé™¤DRAMåˆ·æ–°ã€‚</p><h1 id="5-Write-Endurance-Improvement-å†™å…¥è€ä¹…æ€§æ”¹è¿›"><a href="#5-Write-Endurance-Improvement-å†™å…¥è€ä¹…æ€§æ”¹è¿›" class="headerlink" title="5. Write Endurance Improvement å†™å…¥è€ä¹…æ€§æ”¹è¿›"></a>5. Write Endurance Improvement å†™å…¥è€ä¹…æ€§æ”¹è¿›</h1><p>åœ¨æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­,ä¸»è¦æœ‰ä¸¤ç§ç­–ç•¥æ¥å…‹æœNVMMçš„æœ‰é™å†™å…¥è€ä¹…æ€§ã€‚ä¸€ä¸ªæ˜¯å‡å°‘NVMMå†™å…¥ï¼Œå¦ä¸€ä¸ªæ˜¯ç£¨æŸå‡è¡¡,å®ƒåœ¨æ‰€æœ‰NVMMå•å…ƒä¹‹é—´å‡åŒ€åˆ†å¸ƒå†™å…¥æµé‡ã€‚</p><h2 id="5-1-Write-Reductionå†™å…¥å‡å°‘"><a href="#5-1-Write-Reductionå†™å…¥å‡å°‘" class="headerlink" title="5.1 Write Reductionå†™å…¥å‡å°‘"></a>5.1 Write Reductionå†™å…¥å‡å°‘</h2><p>å·²ç»æå‡ºäº†è®¸å¤šç”¨äºæ”¹å–„NVMå¯¿å‘½çš„å†™å‡å°‘ç­–ç•¥ï¼ŒåŒ…æ‹¬æ•°æ®è¿ç§»[8ã€14ã€15]ã€ ç¼“å­˜æˆ–ç¼“å†²[16]å’Œå†…éƒ¨NVMå†™å‡å°‘[64ã€73ã€74]ã€‚</p><p>æå‡ºäº†ä¸€ç§å»¶è¿Ÿå†™å…¥æœºåˆ¶[16],ä»¥å‡å°‘å¯¹PCMçš„å†™å…¥ã€‚åœ¨åˆ†å±‚æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­,DRAMç¼“å†²å™¨ç”¨äºéšè—é«˜å»¶è¿ŸPCMè®¿é—®ã€‚å½“å‘ç”Ÿé¡µé¢é”™è¯¯æ—¶, æ•°æ®å°†ç›´æ¥ä»ç£ç›˜æå–åˆ°DRAMç¼“å­˜ä¸­ã€‚åœ¨ä»DRAMé«˜é€Ÿç¼“å­˜ä¸­é€å‡ºé¡µé¢ä¹‹å‰,é¡µé¢ä¸ä¼šå†™å…¥PCMã€‚è¡Œçº§å†™å…¥è¿˜å¯ä»¥å‡è½»NVMMä¸Šçš„å†™å…¥æ“ä½œ, ä»è€Œå‡å°‘NVMMçš„ç£¨æŸ[16]ã€‚å¯¹äºå†…å­˜å¯†é›†å‹å·¥ä½œè´Ÿè½½,å†™æ“ä½œå¯èƒ½é›†ä¸­åœ¨å‡ è¡Œä¸­ã€‚é€šè¿‡è·Ÿè¸ªDRAMä¸­çš„ç¼“å­˜è¡Œï¼Œåªæœ‰è„è¡Œè¢«å†™å›PCM,è€Œä¸æ˜¯é¡µé¢çš„æ‰€æœ‰è¡Œã€‚æå‡ºäº†å†…å­˜å‹ç¼©æœºåˆ¶[67 ,75] ,ä»¥æé«˜MLC/TLC NVMMçš„å¯¿å‘½ã€‚åœ¨å†™å…¥NVMMå•å…ƒä¹‹å‰, é¦–å…ˆå‹ç¼©æ•°æ®ã€‚å› æ­¤,åªæœ‰ä¸€å°éƒ¨åˆ†NVMMå•å…ƒè¢«å†™å…¥ã€‚ç„¶è€Œ, è€ä¹…æ€§çš„æé«˜æ˜¯ä»¥æ€§èƒ½é€‚åº¦ä¸‹é™ä¸ºä»£ä»·çš„ã€‚å¦‚æœNVMMå•å…ƒä»¥è¾ƒä½çš„åŠŸè€—å†™å…¥, åˆ™è¯¥å•å…ƒå¯ä»¥ä»¥è¾ƒé«˜çš„å†™å…¥å»¶è¿Ÿä¸ºä»£ä»·ç»´æŒæ›´å¤šçš„å†™å…¥ã€‚å…·ä½“åœ°, å½“å†™å…¥NVMMå•å…ƒçš„é€Ÿåº¦ä¸‹é™Nå€æ—¶,å•å…ƒçš„è€ä¹…æ€§å¯ä»¥æé«˜Nåˆ°N3å€ã€‚Mellow Write[76]æ¢ç´¢äº†è¿™ä¸€åŠŸèƒ½ï¼Œä»¥æé«˜NVMMçš„å¯¿å‘½ã€‚ä¸ºäº†å‡è½»æ€§èƒ½ä¸‹é™, Mellow Writeåªé‡‡ç”¨åªæœ‰ä¸€æ¬¡å†™å…¥æ“ä½œçš„ç¼“æ…¢çš„å­˜å‚¨ä½“å†™å…¥ã€‚</p><h2 id="5-2-Wear-Levelingç£¨æŸå‡è¡¡"><a href="#5-2-Wear-Levelingç£¨æŸå‡è¡¡" class="headerlink" title="5.2 Wear-Levelingç£¨æŸå‡è¡¡"></a>5.2 Wear-Levelingç£¨æŸå‡è¡¡</h2><p>ä¸å‡å°‘å†™å…¥çš„æ–¹æ³•ä¸åŒ, ç£¨æŸå‡è¡¡åœ¨æ‰€æœ‰NVMMé¡µé¢ä¹‹é—´å‡åŒ€åˆ†å¸ƒå†™å…¥ã€‚å°½ç®¡å†™å…¥æ€»æ•°æ²¡æœ‰å‡å°‘,ç£¨æŸå‡è¡¡æŠ€æœ¯å¯ä»¥é˜²æ­¢æŸäº›é¡µé¢è¢«é«˜å¼ºåº¦å†™å…¥è€Œå¿«é€Ÿç£¨æŸã€‚</p><p>å¯¹äºNVMM ,æˆ‘ä»¬å¯ä»¥è®°å½•æ¯è¡Œçš„å†™å…¥è®¡æ•°,ä»¥æŒ‡å¯¼ç£¨æŸå‡è¡¡ç­–ç•¥ã€‚ä½†æ˜¯,ä¸èƒ½å¿½ç•¥å¤–éƒ¨å­˜å‚¨å¼€é”€ã€‚Start Gap[77]æå‡ºäº†ä¸€ç§ç»†ç²’åº¦ç£¨æŸå‡è¡¡æ–¹æ¡ˆã€‚PCMé¡µçš„è¡Œä»¥æ—‹è½¬æ–¹å¼å­˜å‚¨ã€‚åœ¨0å’Œ15ä¹‹é—´éšæœºç”Ÿæˆæ—‹è½¬å€¼,ä»¥æŒ‡ç¤ºç§»ä½çš„ä½ç½®ã€‚å¯¹äºå…·æœ‰16è¡Œçš„PCMé¡µé¢,æ—‹è½¬å€¼çš„èŒƒå›´å¯ä»¥ä»0åˆ°15ã€‚å½“æ—‹è½¬å€¼ä¸º0æ—¶,é¡µé¢å­˜å‚¨åœ¨å…¶åŸå§‹åœ°å€ä¸­ã€‚å¦‚æœæ—‹è½¬å€¼ä¸º1 ,åˆ™ç¬¬0è¡Œå­˜å‚¨åœ¨ç¬¬1è¡Œçš„ç‰©ç†åœ°å€ä¸­,å¹¶ä¸”æ¯ä¸€è¡Œçš„åœ°å€éƒ½è¢«æ—‹è½¬å€¼ç§»ä½ã€‚</p><p>åœ¨PDRAM[15]ä¸­,ç£¨æŸå‡è¡¡ç”±å†™å…¥è®¡æ•°é˜ˆå€¼è§¦å‘ã€‚å½“é¡µé¢çš„å†™å…¥è®¡æ•°è¶…è¿‡ç»™å®šé˜ˆå€¼æ—¶,å°†è§¦å‘é¡µé¢äº¤æ¢ä¸­æ–­ä»¥å°†é¡µé¢è¿ç§»åˆ°DRAMã€‚äº¤æ¢çš„PCMé¡µé¢è¢«æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œè¿™äº›é¡µé¢å°†å†æ¬¡é‡æ–°å®šä½ã€‚</p><p>Zombie[78]ä¸ºå®ç°weal-leveling(è¿™æ˜¯ä¸æ˜¯å¤šå†™äº†ä¸€ä¸ªl)æä¾›äº†å¦ä¸€ä¸ªæ–¹å‘,å¹¶è¿›ä¸€æ­¥å»¶é•¿äº†PCMçš„æ•´ä½“å¯¿å‘½ã€‚ä¸åœ¨PCMå•å…ƒä¹‹é—´å‡åŒ€åˆ†é…å†™å…¥çš„Start-Gapä¹‹å¤–, Zombieåˆ©ç”¨ç¦ç”¨é¡µé¢ä¸­çš„ç©ºé—²å—ä¸ºå·¥ä½œå†…å­˜æä¾›æ›´å¤šçš„çº é”™èµ„æºã€‚å½“PCMå•å…ƒç£¨æŸæ—¶,å®ƒå˜å¾—ä¸å¯ç”¨ã€‚ç”±äºä»è½¯ä»¶çš„è§’åº¦æ¥çœ‹,å†…å­˜å ç”¨çš„ç©ºé—´æ˜¯æŒ‰ç…§é¡µæ¥ç»„ç»‡çš„,å› æ­¤åŒ…å«æ•…éšœå•å…ƒçš„æ•´ä¸ªé¡µé¢å°†è¢«ç¦ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæä¾›äº†ä¸€äº›å¤‡ç”¨å•å…ƒæ ¼æ¥æ›¿æ¢å‡ºç°æ•…éšœçš„å•å…ƒ,åˆ™å¯ä»¥å†æ¬¡ä½¿ç”¨è¯¥é¡µé¢ã€‚è¿™äº›å¤‡ç”¨å•å…ƒç§°ä¸ºçº é”™èµ„æºã€‚å½“æ‰€æœ‰å¤‡ç”¨å•å…ƒè€—å°½æ—¶, æœ€ç»ˆæ”¾å¼ƒåŒ…å«å¤±è´¥å•å…ƒçš„é¡µé¢ã€‚é€šå¸¸ï¼Œå½“é¡µé¢è¢«ç¦ç”¨æ—¶,å¤§çº¦æœ‰99%çš„ä½å¯ç”¨ã€‚Zombieåˆ©ç”¨ç¦ç”¨é¡µé¢ä¸­çš„å¤§é‡å¥½æ¯”ç‰¹ä½œä¸ºå¤‡ç”¨çº é”™èµ„æº,å…¶ä¸­å¥½æ¯”ç‰¹è¢«ç»„ç»‡åœ¨ç»†ç²’åº¦å—ä¸­ã€‚é€šè¿‡å°†å·¥ä½œé¡µé¢ä¸çº é”™èµ„æºé…å¯¹, Zombieå¯ä»¥å»¶é•¿NVMMçš„ä½¿ç”¨å¯¿å‘½ã€‚</p><p>DRM[79]åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´å’Œç‰©ç†NVMMåœ°å€ç©ºé—´ä¹‹é—´æ·»åŠ äº†ä¸­é—´æ˜ å°„å±‚ã€‚åœ¨ä¸­é—´åœ°å€ç©ºé—´ä¸­ï¼Œä¸€ä¸ªé¡µé¢å¯èƒ½æ˜ å°„åˆ°PCMä¸­çš„ä¸€ä¸ªå¥½é¡µé¢æˆ–ä¸¤ä¸ªæœ‰æ•…éšœçš„å…¼å®¹PCMé¡µé¢ã€‚å…¼å®¹é¡µé¢æ„å‘³ç€ä¸€å¯¹å…·æœ‰é”™è¯¯å­—èŠ‚çš„é¡µé¢,ä½†è¿™äº›é”™è¯¯å­—èŠ‚éƒ½ä¸ä½äºä¸¤ä¸ªé¡µé¢çš„åŒä¸€ä½ç½®ã€‚å› æ­¤ï¼Œä¸¤ä¸ªå…¼å®¹çš„é¡µé¢å¯ä»¥è¢«ç»„åˆæˆä¸€ä¸ªæ–°çš„å¥½é¡µé¢é€šè¿‡è¿™ç§æ–¹å¼, DRMå°†PCMå¯¿å‘½æ˜¾è‘—æé«˜äº†40å€ã€‚</p><h1 id="6-Practices-of-Hybrid-Memory-System-Designsæ··åˆå­˜å‚¨ç³»ç»Ÿè®¾è®¡å®è·µ"><a href="#6-Practices-of-Hybrid-Memory-System-Designsæ··åˆå­˜å‚¨ç³»ç»Ÿè®¾è®¡å®è·µ" class="headerlink" title="6 Practices of Hybrid Memory System Designsæ··åˆå­˜å‚¨ç³»ç»Ÿè®¾è®¡å®è·µ"></a>6 Practices of Hybrid Memory System Designsæ··åˆå­˜å‚¨ç³»ç»Ÿè®¾è®¡å®è·µ</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»å†…å­˜æ¶æ„ã€OSæ”¯æŒçš„æ··åˆå†…å­˜ç®¡ç†å’ŒNVMMæ”¯æŒçš„åº”ç”¨ç¨‹åºçš„è§’åº¦ä»‹ç»äº†æˆ‘ä»¬æœ€è¿‘åœ¨NVMMç³»ç»Ÿè®¾è®¡å’Œä¼˜åŒ–æ–¹é¢çš„åŠªåŠ›å’Œå®è·µï¼Œå¦‚å›¾5æ‰€ç¤ºã€‚åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç®€è¦ä»‹ç»æˆ‘ä»¬çš„å®è·µã€‚</p><h2 id="6-1-Memory-Architectural-Designså†…å­˜æ¶æ„è®¾è®¡"><a href="#6-1-Memory-Architectural-Designså†…å­˜æ¶æ„è®¾è®¡" class="headerlink" title="6.1 Memory Architectural Designså†…å­˜æ¶æ„è®¾è®¡"></a>6.1 Memory Architectural Designså†…å­˜æ¶æ„è®¾è®¡</h2><p>åœ¨æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»æˆ‘ä»¬å¯¹æ··åˆå†…å­˜æ¨¡æ‹Ÿå’Œä»¿çœŸã€ç¡¬ä»¶/è½¯ä»¶ååŒæ··åˆå†…å­˜æ¶æ„ã€ç»†ç²’åº¦NVMå‹ç¼©å’Œç£¨æŸå‡è¡¡ä»¥åŠæ··åˆå†…å­˜æ„ŸçŸ¥ç‰‡ä¸Šç¼“å­˜ç®¡ç†çš„ç ”ç©¶ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/37d5195a01334fcb9a70359bfca5ba53.png"></p><h3 id="6-1-1-Hybrid-Memory-Architectural-Simulationæ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„ä»¿çœŸ"><a href="#6-1-1-Hybrid-Memory-Architectural-Simulationæ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„ä»¿çœŸ" class="headerlink" title="6.1.1 Hybrid Memory Architectural Simulationæ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„ä»¿çœŸ"></a>6.1.1 Hybrid Memory Architectural Simulationæ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„ä»¿çœŸ</h3><p>æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„ä»¿çœŸæ˜¯ç ”ç©¶æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿçš„å…ˆå†³æ¡ä»¶ã€‚æˆ‘ä»¬å°†zsim[27]ä¸NVMain[20]é›†æˆ, ä»¥æ„å»ºå…¨ç³»ç»Ÿæ¶æ„æ¨¡æ‹Ÿå™¨ã€‚Zsimæ˜¯ç”¨äºx86-64å¤šæ ¸æ¶æ„çš„å¿«é€Ÿå¤„ç†å™¨æ¨¡æ‹Ÿå™¨ã€‚å®ƒèƒ½å¤Ÿå¯¹å¤šæ ¸ã€ç‰‡ä¸Šç¼“å­˜å±‚æ¬¡ç»“æ„ã€ç¼“å­˜-è‡´æ€§åè®®(å¦‚MESI)ã€ç‰‡ä¸Šäº’è¿æ‹“æ‰‘ç½‘ç»œå’Œç‰©ç†å†…å­˜æ¥å£è¿›è¡Œå»ºæ¨¡ã€‚<strong>Zsim</strong>ä½¿ç”¨Intel Pinå·¥å…·åŒ…æ”¶é›†è¿›ç¨‹çš„å†…å­˜è·Ÿè¸ª,ç„¶åå›æ”¾å†…å­˜è·Ÿè¸ªä»¥è¡¨å¾å†…å­˜è®¿é—®è¡Œä¸ºã€‚<strong>NVMain</strong>æ˜¯ç”¨äºNVMMçš„æ¶æ„çº§ä¸»å­˜å‚¨å™¨æ¨¡æ‹Ÿå™¨ã€‚å®ƒèƒ½å¤Ÿæ¨¡æ‹Ÿä¸åŒçš„å†…å­˜é…ç½®æ–‡ä»¶, å¦‚è¯»/å†™å»¶è¿Ÿã€å¸¦å®½ã€åŠŸè€—ç­‰ã€‚å®ƒè¿˜æ”¯æŒå­é˜µåˆ—çº§å†…å­˜å¹¶è¡Œæ€§å’Œä¸åŒçš„å†…å­˜åœ°å€ç¼–ç æ–¹æ¡ˆã€‚æ­¤å¤–ï¼ŒNVMainè¿˜å¯ä»¥å¯¹æ··åˆå­˜å‚¨å™¨ï¼ˆå¦‚DRAMå’Œå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ä¸­çš„ä¸åŒNVMMï¼‰è¿›è¡Œå»ºæ¨¡ã€‚ç”±äºæ“ä½œç³»ç»Ÿçº§å†…å­˜ç®¡ç†ä¸æ˜¯ç”±zsimæ¨¡æ‹Ÿçš„,å› æ­¤æˆ‘ä»¬é€šè¿‡æ·»åŠ Translation Lookaside Bufferï¼ˆTLBï¼‰å’Œå†…å­˜ç®¡ç†æ¨¡å—ï¼ˆå¦‚ä¼™ä¼´å†…å­˜åˆ†é…å™¨å’Œé¡µè¡¨ï¼‰æ¥æ‰©å±•zsim , ä»¥æ”¯æŒå…¨ç³»ç»Ÿæ¨¡æ‹Ÿã€‚å®æ–½ç»†èŠ‚å‚è€ƒæˆ‘ä»¬çš„å¼€æºè½¯ä»¶ã€‚æˆ‘ä»¬çš„å·¥ä½œä¸ºç ”ç©¶ç•Œæä¾›äº†ä¸€ä¸ªå¿«é€Ÿã€å®Œæ•´çš„ä½“ç³»ç»“æ„ä»¿çœŸæ¡†æ¶ã€‚å®ƒå¯ä»¥å¸®åŠ©ç ”ç©¶äººå‘˜äº†è§£ä¸åŒçš„NVMMç‰¹æ€§,è®¾è®¡æ··åˆå­˜å‚¨ç³»ç»Ÿ,å¹¶ä»¥ç®€å•é«˜æ•ˆçš„æ–¹å¼è¯„ä¼°å„ç§ç³»ç»Ÿè®¾è®¡å¯¹åº”ç”¨ç¨‹åºæ€§èƒ½çš„å½±å“ã€‚</p><h3 id="6-1-2-Lightweight-NVMM-Performance-Emulatorè½»é‡çº§NVMMæ€§èƒ½ä»¿çœŸå™¨"><a href="#6-1-2-Lightweight-NVMM-Performance-Emulatorè½»é‡çº§NVMMæ€§èƒ½ä»¿çœŸå™¨" class="headerlink" title="6.1.2 Lightweight NVMM Performance Emulatorè½»é‡çº§NVMMæ€§èƒ½ä»¿çœŸå™¨"></a>6.1.2 Lightweight NVMM Performance Emulatorè½»é‡çº§NVMMæ€§èƒ½ä»¿çœŸå™¨</h3><p>å½“å‰åŸºäºä»¿çœŸçš„NVMMæŠ€æœ¯ç ”ç©¶æ–¹æ³•å¤ªæ…¢,æˆ–è€…æ— æ³•è¿è¡Œå¤æ‚çš„å·¥ä½œè´Ÿè½½,ä¾‹å¦‚å¹¶è¡Œå’Œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬æå‡ºHME[28]ï¼Œä¸€ç§è½»é‡çº§NVMMä½¿ç”¨éç»Ÿä¸€å†…å­˜è®¿é—®ï¼ˆNUMAï¼‰æ¶æ„çš„æ€§èƒ½ä»¿çœŸå™¨ã€‚HMEåˆ©ç”¨å•†å“Intel CPUä¸­å¯ç”¨çš„ç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨æ¥æ¨¡æ‹Ÿè¾ƒæ…¢NVMMçš„æ€§èƒ½ç‰¹æ€§ã€‚ä¸ºäº†æ¨¡æ‹ŸNVMMçš„è®¿é—®å»¶è¿Ÿ,HMEå®šæœŸå‘è¿œç¨‹NUMAèŠ‚ç‚¹ä¸Šçš„DRAMè®¿é—®æ³¨å…¥è½¯ä»¶ç”Ÿæˆçš„å»¶è¿Ÿã€‚ä¸ºäº†æ¨¡æ‹ŸNVMMå¸¦å®½,HMEåˆ©ç”¨DRAMçƒ­æ§åˆ¶æ¥å£åœ¨çŸ­æ—¶é—´å†…é™åˆ¶å¯¹DRAMé€šé“çš„å†…å­˜è¯·æ±‚é‡ã€‚ä¸åŒäºå¦ä¸€ä¸ªNVMMä»¿çœŸå™¨Quartz[29] ,å®ƒä¸æ¨¡æ‹ŸNVMMçš„å†™å…¥å»¶è¿Ÿ,HMEè¯†åˆ«å†™ç›´é€šå’Œå†™å›ç¼“å­˜é€å‡ºæ“ä½œ, ä»¥åˆ†åˆ«æ¨¡æ‹Ÿå®ƒä»¬çš„å»¶è¿Ÿã€‚é€šè¿‡è¿™ç§æ–¹å¼,ä¸Quartzç›¸æ¯”, HMEèƒ½å¤Ÿæ˜¾è‘—å‡å°‘NVMMè®¿é—®å»¶è¿Ÿçš„å¹³å‡ä»¿çœŸè¯¯å·®[29]ã€‚åœ¨çœŸæ­£çš„NVMMè®¾å¤‡Intel Optane DCPMMé—®ä¸–ä¹‹å‰, è¿™é¡¹å·¥ä½œå¯ä»¥å¸®åŠ©ç ”ç©¶äººå‘˜å’Œç¨‹åºå‘˜è¯„ä¼°NVMMæ€§èƒ½ç‰¹æ€§å¯¹åº”ç”¨ç¨‹åºçš„å½±å“, å¹¶æŒ‡å¯¼æ··åˆå†…å­˜ç³»ç»Ÿçš„ç³»ç»Ÿè®¾è®¡å’Œä¼˜åŒ–ã€‚</p><h3 id="6-1-3-Hardware-Software-Cooperative-Cachingç¡¬ä»¶-è½¯ä»¶ååŒç¼“å­˜"><a href="#6-1-3-Hardware-Software-Cooperative-Cachingç¡¬ä»¶-è½¯ä»¶ååŒç¼“å­˜" class="headerlink" title="6.1.3 Hardware/Software Cooperative Cachingç¡¬ä»¶/è½¯ä»¶ååŒç¼“å­˜"></a>6.1.3 Hardware/Software Cooperative Cachingç¡¬ä»¶/è½¯ä»¶ååŒç¼“å­˜</h3><p>åŸºäºæˆ‘ä»¬çš„æ··åˆå­˜å‚¨å™¨æ¨¡æ‹Ÿå™¨ï¼Œ æˆ‘ä»¬æå‡ºäº†ä¸€ç§ç§°ä¸ºHSCC[18]çš„ç¡¬ä»¶/è½¯ä»¶ååŒæ··åˆå­˜å‚¨å™¨æ¶æ„ã€‚åœ¨HSCCä¸­,DRAMå’ŒNVMMåœ¨ç‰©ç†ä¸Šç»„ç»‡åœ¨å•ä¸ªå­˜å‚¨å™¨åœ°å€ç©ºé—´ä¸­ï¼Œå¹¶ä¸”éƒ½ç”¨ä½œä¸»å­˜å‚¨å™¨ã€‚ç„¶è€Œ,DRAMåœ¨é€»è¾‘ä¸Šå¯ä»¥ç”¨ä½œNVMMçš„ç¼“å­˜,ä¹Ÿå¯ä»¥ç”±OSç®¡ç†ã€‚å›¾6æ˜¾ç¤ºäº†HSCCçš„ç³»ç»Ÿæ¶æ„ã€‚æˆ‘ä»¬æ‰©å±•äº†é¡µè¡¨å’ŒTLBï¼Œä»¥ç»´æŠ¤NVMMåˆ°DRAMçš„ç‰©ç†åœ°å€æ˜ å°„, ä»è€Œä»¥ç¼“å­˜/å†…å­˜å±‚æ¬¡ç»“æ„çš„å½¢å¼ç®¡ç†DRAMNVMMã€‚é€šè¿‡è¿™ç§æ–¹å¼, HSCCèƒ½å¤Ÿåƒè™šæ‹Ÿåˆ°NVMMåœ°å€è½¬æ¢ä¸€æ ·é«˜æ•ˆåœ°æ‰§è¡ŒNVMMåˆ°DRAMåœ°å€è½¬æ¢ã€‚æ­¤å¤–, æˆ‘ä»¬åœ¨æ¯ä¸ªTLBæ¡ç›®å’Œé¡µè¡¨æ¡ç›®ä¸­.æ·»åŠ ä¸€ä¸ªè®¿é—®è®¡æ•°å™¨ï¼Œä»¥ç›‘è§†å†…å­˜å¼•ç”¨ã€‚ä¸ä»¥å‰åœ¨å†…å­˜æ§åˆ¶å™¨æˆ–æ“ä½œç³»ç»Ÿä¸­ç›‘è§†å†…å­˜è®¿é—®çš„æ–¹æ³•ä¸åŒ,æˆ‘ä»¬çš„è®¾è®¡å¯ä»¥ç²¾ç¡®åœ°è·Ÿè¸ªæ‰€æœ‰æ•°æ®è®¿é—®, è€Œæ— éœ€é¢å¤–çš„å­˜å‚¨(SRAM)å’Œæ€§èƒ½å¼€é”€ã€‚æˆ‘ä»¬é€šè¿‡åŠ¨æ€é˜ˆå€¼è°ƒæ•´ç­–ç•¥è¯†åˆ«é¢‘ç¹è®¿é—®çš„(çƒ­)é¡µé¢ï¼Œä»¥é€‚åº”ä¸åŒçš„åº”ç”¨ç¨‹åº,ç„¶åå°†NVMMä¸­çš„çƒ­é¡µé¢è¿ç§»åˆ°DRAMç¼“å­˜ï¼Œä»¥è·å¾—æ›´é«˜çš„æ€§èƒ½å’Œèƒ½æ•ˆã€‚æ­¤å¤–,æˆ‘ä»¬å¼€å‘äº†ä¸€ç§åŸºäºå®ç”¨ç¨‹åºçš„DRAMç¼“å­˜å¡«å……æ–¹æ¡ˆ,ä»¥å¹³è¡¡DRAMç¼“å­˜çš„æ•ˆç‡å’ŒDRAMåˆ©ç”¨ç‡ã€‚ç”±äºè½¯ä»¶ç®¡ç†çš„DRAMé¡¶é¢èƒ½å¤Ÿæ˜ å°„åˆ°ä»»ä½•NVMMé¡µé¢,å› æ­¤DRAMå®é™….ä¸Šç”¨ä½œå®Œå…¨å…³è”çš„ç¼“å­˜ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ˜¾è‘—æé«˜DRAMç¼“å­˜çš„åˆ©ç”¨ç‡,å¹¶ä¸”è¿˜æä¾›äº†æ ¹æ®åº”ç”¨ç¨‹åºçš„åŠ¨æ€å†…å­˜è®¿é—®è¡Œä¸ºé‡æ–°é…ç½®æ··åˆå†…å­˜æ¶æ„çš„æœºä¼šã€‚ç”±äºCPUå¯ä»¥ç»•è¿‡DRAMç¼“å­˜ç›´æ¥è®¿é—®NVMMä¸­çš„å†·æ•°æ®ï¼Œå› æ­¤DRAMæ—¢å¯ä»¥ç”¨ä½œå¹³é¢å¯å¯»å€æ··åˆå­˜å‚¨å™¨æ¶æ„ä¸­çš„ä¸»å­˜å‚¨å™¨,ä¹Ÿå¯ä»¥ç”¨ä½œåˆ†å±‚æ··åˆå­˜å‚¨å™¨æ¶æ„ã€‚å› æ­¤,ä¸æœ€å…ˆè¿›çš„å·¥ä½œç›¸æ¯”,HSCCå¯ä»¥å°†ç³»ç»Ÿæ€§èƒ½æ˜¾è‘—æé«˜9.6å€ï¼Œèƒ½è€—é™ä½34.3%[16]ã€‚æˆ‘ä»¬çš„å·¥ä½œä¸ºå®ç°å¯é‡æ„æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿæä¾›äº†ç¬¬ä¸€ä¸ªæ¶æ„è§£å†³æ–¹æ¡ˆ,è¯¥ç³»ç»Ÿå¯ä»¥åœ¨æ°´å¹³å’Œåˆ†å±‚å­˜å‚¨å™¨æ¶æ„ä¹‹é—´åŠ¨æ€æ”¹å˜DRAMNVMMç®¡ç†ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/c8216069dd1e4b42b6526c54ad69b35c.png"></p><p>æˆ‘ä»¬è¿›ä¸€æ­¥åœ¨HSCCä¸Šæå‡ºäº†ä»¥ä¸‹æŠ€æœ¯,ä»¥æé«˜ç¼“å­˜æ€§èƒ½å¹¶æ”¹è¿›ç£¨æŸå‡è¡¡æœºåˆ¶ã€‚</p><p>ç”±äºNVMMå—çš„ç¼“å­˜æœªå‘½ä¸­æƒ©ç½šæ˜¯DRAMå—çš„å‡ å€,å› æ­¤åœ¨å¹³é¢å¯å¯»å€æ··åˆå­˜å‚¨å™¨ä½“ç³»ç»“æ„ä¸­ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸æ˜¯å”¯ä¸€éœ€è¦æ”¹è¿›çš„æ€§èƒ½æŒ‡æ ‡ã€‚ä¸ºäº†æœ€å¥½åœ°åˆ©ç”¨æ˜‚è´µçš„LLCï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„åº¦é‡ï¼Œå³å¹³å‡å­˜å‚¨å™¨è®¿é—®æ—¶é—´ï¼ˆAMATï¼‰,ä»¥è¯„ä¼°æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿçš„æ€»ä½“æ€§èƒ½ã€‚æˆ‘ä»¬è€ƒè™‘äº†DRAMå—å’ŒNVMMå—çš„éå¯¹ç§°ç¼“å­˜æœªå‘½ä¸­æƒ©ç½šï¼Œå¹¶æå‡ºäº†ä¸€ç§LLCæœªå‘½ä¸­æƒ©ç½šæ„ŸçŸ¥æ›¿æ¢ç®—æ³•,ç§°ä¸ºMALRU[36,37] ,ä»¥æ”¹è¿›æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­çš„AMATã€‚MALRUåŠ¨æ€åœ°å°†LLCåˆ’åˆ†ä¸ºä¿ç•™åŒºåŸŸå’Œæ­£å¸¸æ›¿æ¢åŒºåŸŸã€‚MALRUä¼˜å…ˆæ›¿æ¢LLCä¸­çš„æ­»DRAMå—å’Œå†·DRAMå—ï¼Œä½¿å¾—NVMMå—å’Œçƒ­DRAMå—ä¿æŒåœ¨ä¿ç•™åŒºåŸŸä¸­ã€‚é€šè¿‡è¿™ç§æ–¹å¼, ä¸LRUç®—æ³•ç›¸æ¯”,MALRUå®ç°äº†é«˜è¾¾228%çš„åº”ç”¨ç¨‹åºæ€§èƒ½æ”¹è¿›ã€‚è¿™é¡¹å·¥ä½œå±•ç¤ºäº†æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿå¦‚ä½•å½±å“ç‰‡ä¸Šç¼“å­˜çš„æ¶æ„è®¾è®¡ã€‚</p><p>ä¸ºäº†æé«˜NVMMçš„å†™å…¥è€ä¹…æ€§ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„NVMMæ¶æ„,ä»¥æ”¯æŒç©ºé—´æ— å…³æ•°æ®å‹ç¼©å’Œç£¨æŸå‡è¡¡[119]ã€‚ç”±äºè®¸å¤šåº”ç”¨ç¨‹åºçš„å†…å­˜å—é€šå¸¸åŒ…å«å¤§é‡é›¶å­—èŠ‚å’Œé¢‘ç¹å€¼, æˆ‘ä»¬æå‡ºäº†é›¶é‡å¤æ•°æ®æ¶ˆé™¤å’Œé¢‘ç¹å€¼å‹ç¼©æœºåˆ¶ï¼ˆç§°ä¸ºZD-FVC[119]ï¼‰, ä»¥å‡å°‘NVMMä¸Šçš„ä½å†™å…¥ã€‚ZD-FVCå¯ä»¥é›†æˆåˆ°NVMMæ¨¡å—ä¸­ï¼Œå¹¶å®Œå…¨ç”±ç¡¬ä»¶å®ç°, æ— éœ€ä»»ä½•æ“ä½œç³»ç»Ÿçš„å¹²é¢„ã€‚æˆ‘ä»¬åœ¨Gem5å’ŒNVMainæ¨¡æ‹Ÿå™¨ä¸­å®ç°äº†ZD-FVC[119]ï¼Œå¹¶ä½¿ç”¨SPEC CPU2006ä¸­çš„å‡ ä¸ªç¨‹åºå¯¹å…¶è¿›è¡Œäº†è¯„ä¼°ã€‚å®éªŒç»“æœè¡¨æ˜,ZD-FVCæ¯”å‡ ç§æœ€å…ˆè¿›çš„æ–¹æ³•è¦å¥½å¾—å¤šã€‚ç‰¹åˆ«æ˜¯, ä¸é¢‘ç¹å€¼å‹ç¼©ç›¸æ¯”, DZ-FVCå¯ä»¥å°†æ•°æ®å‹ç¼©æ¯”æé«˜1.5å€ã€‚ä¸æ•°æ®æ¯”è¾ƒå†™å…¥ç›¸æ¯”ï¼ŒZD-FVCèƒ½å¤Ÿå°†NVMMä¸Šçš„ä½å†™å…¥å‡å°‘30%ï¼Œå¹¶å°†NVMMçš„å¯¿å‘½å¹³å‡æé«˜5.8å€ã€‚ç›¸åº”åœ°, ZD-FVCè¿˜å¹³å‡å‡å°‘äº†43%çš„NVMMå†™å…¥å»¶è¿Ÿå’Œ21%çš„èƒ½è€—ã€‚æˆ‘ä»¬çš„è®¾è®¡ä»¥ç®€å•é«˜æ•ˆçš„æ–¹å¼ä¸ºNVMMæä¾›äº†ç»†ç²’åº¦æ•°æ®å‹ç¼©å’Œç£¨æŸå‡è¡¡è§£å†³æ–¹æ¡ˆã€‚å®ƒæ˜¯å…¶ä»–ç£¨æŸå‡è¡¡æ–¹æ¡ˆçš„è¡¥å……ï¼Œä»¥è¿›ä¸€æ­¥æé«˜NVMMå¯¿å‘½ã€‚</p><h1 id="6-2-System-Software-for-Hybrid-Memoriesæ··åˆå­˜å‚¨å™¨çš„ç³»ç»Ÿè½¯ä»¶"><a href="#6-2-System-Software-for-Hybrid-Memoriesæ··åˆå­˜å‚¨å™¨çš„ç³»ç»Ÿè½¯ä»¶" class="headerlink" title="6.2 System Software for Hybrid Memoriesæ··åˆå­˜å‚¨å™¨çš„ç³»ç»Ÿè½¯ä»¶"></a>6.2 System Software for Hybrid Memoriesæ··åˆå­˜å‚¨å™¨çš„ç³»ç»Ÿè½¯ä»¶</h1><p>åœ¨æœ¬å°èŠ‚ä¸­,æˆ‘ä»¬ä»‹ç»äº†è½¯ä»¶å±‚æ··åˆå†…å­˜ç³»ç»Ÿçš„å®è·µï¼ŒåŒ…æ‹¬å¯¹è±¡çº§æ··åˆå†…å­˜åˆ†é…å’Œè¿ç§»ã€NUMAæ„ŸçŸ¥é¡µé¢è¿ç§»ã€è¶…çº§é¡µé¢æ”¯æŒå’ŒNVMMè™šæ‹ŸåŒ–æœºåˆ¶ã€‚</p><h3 id="6-2-1-Object-Migration-in-Hybrid-Memory-Systemsæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„å¯¹è±¡è¿ç§»"><a href="#6-2-1-Object-Migration-in-Hybrid-Memory-Systemsæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„å¯¹è±¡è¿ç§»" class="headerlink" title="6.2.1 Object Migration in Hybrid Memory Systemsæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„å¯¹è±¡è¿ç§»"></a>6.2.1 Object Migration in Hybrid Memory Systemsæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„å¯¹è±¡è¿ç§»</h3><p>é¡µé¢è¿ç§»æŠ€æœ¯å·²è¢«å¹¿æ³›ç”¨äºæ”¹å–„æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­çš„ç³»ç»Ÿæ€§èƒ½å’Œèƒ½é‡æ•ˆç‡ã€‚ç„¶è€Œ,ä»¥å‰çš„é¡µé¢è¿ç§»æ–¹æ¡ˆéƒ½ä¾èµ–äºOSå±‚ä¸­æ˜‚è´µçš„åœ¨çº¿é¡µé¢è®¿é—®ç›‘æ§æ–¹æ¡ˆæ¥è·Ÿè¸ªé¡µé¢è®¿é—®çš„æœ€è¿‘æ€§æˆ–é¢‘ç‡ã€‚æ­¤å¤–,ç”±äºé¢å¤–çš„å†…å­˜å¸¦å®½æ¶ˆè€—å’Œç¼“å­˜/TLBä¸€è‡´æ€§ä¿è¯æœºåˆ¶,é¡µé¢ç²’åº¦ä¸Šçš„æ•°æ®è¿ç§»é€šå¸¸ä¼šå¯¼è‡´éå¹³å‡¡çš„æ€§èƒ½å¼€é”€ã€‚</p><p>ä¸ºäº†å‡è½»æ··åˆå†…å­˜ç³»ç»Ÿä¸­æ•°æ®è¿ç§»çš„æ€§èƒ½å¼€é”€ï¼Œæˆ‘ä»¬æå‡ºäº†æ›´è½»é‡çº§çš„é¢å‘å¯¹è±¡å†…å­˜åˆ†é…å’Œè¿ç§»æœºåˆ¶,ç§°ä¸ºOAM[120]ã€‚OAMçš„æ¡†æ¶å¦‚å›¾7æ‰€ç¤ºã€‚ä¸ä¹‹å‰çš„ç ”ç©¶[44 ,121]ä¸åŒ, æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æäº†ç»†ç²’åº¦æ—¶éš™ä¸­çš„å¯¹è±¡è®¿é—®æ¨¡å¼, è¿™äº›ç ”ç©¶ä»…åœ¨é™æ€å¯¹è±¡æ”¾ç½®çš„å…¨å±€è§†å›¾ä¸­æè¿°äº†å†…å­˜è®¿é—®è¡Œä¸ºã€‚OAMåˆ©ç”¨ç¼–è¯‘æ¡†æ¶LLVMä»¥å¯¹è±¡ç²’åº¦æè¿°åº”ç”¨ç¨‹åºå†…å­˜è®¿é—®æ¨¡å¼ï¼Œç„¶åå°†åº”ç”¨ç¨‹åºçš„æ‰§è¡Œåˆ†ä¸ºä¸åŒé˜¶æ®µã€‚OAMåˆ©ç”¨æ€§èƒ½èƒ½é‡é›†æˆæ¨¡å‹æ¥æŒ‡å¯¼ä¸åŒæ‰§è¡Œé˜¶æ®µçš„åˆå§‹å†…å­˜åˆ†é…å’Œè¿è¡Œæ—¶å¯¹è±¡è¿ç§», è€Œæ— éœ€å¯¹ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿè¿›è¡Œä¾µå…¥æ€§ä¿®æ”¹ä»¥è¿›è¡Œåœ¨çº¿é¡µé¢è®¿é—®ç›‘æ§ã€‚æˆ‘ä»¬é€šè¿‡æ‰©å±•Glibcåº“å’ŒLinuxå†…æ ¸å¼€å‘äº†æ–°çš„å†…å­˜åˆ†é…å’Œè¿ç§»APIã€‚åŸºäºè¿™äº›API ,ç¨‹åºå‘˜èƒ½å¤Ÿå°†DRAMæˆ–NVMMæ˜¾å¼åˆ†é…ç»™ä¸åŒçš„å¯¹è±¡, ç„¶åè¿ç§»è®¿é—®æ¨¡å¼åœ¨DRAMå’ŒNVMMã€‚æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªé™æ€ä»£ç æ’å…¥å·¥å…·,å¯ä»¥è‡ªåŠ¨ä¿®æ”¹é—ç•™åº”ç”¨ç¨‹åºçš„æºä»£ç ,è€Œæ— éœ€ç¨‹åºå‘˜é‡æ–°è®¾è®¡åº”ç”¨ç¨‹åºã€‚ä¸æœ€å…ˆè¿›çš„é¡µé¢è¿ç§»æ–¹æ³•CLOCK-DWF[33]å’Œ2PP[44]ç›¸æ¯”, å®éªŒç»“æœè¡¨æ˜,OAMå¯ä»¥åˆ†åˆ«æ˜¾è‘—é™ä½83%å’Œ69%çš„æ•°æ®è¿ç§»æˆæœ¬,å¹¶å®ç°çº¦22%å’Œ10%çš„åº”ç”¨ç¨‹åºæ€§èƒ½æ”¹è¿›ã€‚ä»¥å‰çš„æŒä¹…å†…å­˜ç®¡ç†æ–¹æ¡ˆé€šå¸¸ä¾èµ–å†…å­˜è®¿é—®è¯„æµ‹æ¥æŒ‡å¯¼é™æ€æ•°æ®æ”¾ç½®,ä»¥åŠé¡µé¢è¿ç§»ï¼ˆä»£ä»·é«˜æ˜‚ï¼‰æŠ€æœ¯æ¥é€‚åº”è¿è¡Œæ—¶çš„åŠ¨æ€å†…å­˜è®¿é—®æ¨¡å¼ã€‚OAMæä¾›äº†ä¸€ç§æ›´è½»é‡çº§çš„æ··åˆå†…å­˜ç®¡ç†æ–¹æ¡ˆ,æ”¯æŒç»†ç²’åº¦å¯¹è±¡çº§å†…å­˜åˆ†é…å’Œè¿ç§»ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/257cf52418304fce863269f59094a936.png"></p><h3 id="6-2-2-NUMA-Aware-Hybrid-Memory-Management-NUMAæ„ŸçŸ¥æ··åˆå†…å­˜ç®¡ç†"><a href="#6-2-2-NUMA-Aware-Hybrid-Memory-Management-NUMAæ„ŸçŸ¥æ··åˆå†…å­˜ç®¡ç†" class="headerlink" title="6.2.2 NUMA-Aware Hybrid Memory Management NUMAæ„ŸçŸ¥æ··åˆå†…å­˜ç®¡ç†"></a>6.2.2 NUMA-Aware Hybrid Memory Management NUMAæ„ŸçŸ¥æ··åˆå†…å­˜ç®¡ç†</h3><p>åœ¨éç»Ÿä¸€å†…å­˜è®¿é—®ï¼ˆNUMAï¼‰æ¶æ„ä¸­ï¼Œä¸åŒNUMAèŠ‚ç‚¹ä¸­åº”ç”¨ç¨‹åºè§‚å¯Ÿåˆ°çš„å†…å­˜è®¿é—®å»¶è¿Ÿé€šå¸¸æ˜¯ä¸å¯¹ç§°çš„ã€‚ç”±äºNVMMæ¯”DRAMæ…¢å‡ å€ï¼Œæ··åˆå­˜å‚¨å™¨ç³»ç»Ÿå¯ä»¥è¿›ä¸€æ­¥æ‰©å¤§ä¸åŒNUMAèŠ‚ç‚¹ä¹‹é—´çš„æ€§èƒ½å·®è·ã€‚NUMAç³»ç»Ÿçš„ä¼ ç»Ÿå†…å­˜ç®¡ç†æœºåˆ¶åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­ä¸å†æœ‰æ•ˆ,ç”šè‡³å¯èƒ½é™ä½åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚ä¾‹å¦‚,è‡ªåŠ¨NUMAå¹³è¡¡ï¼ˆANBï¼‰ç­–ç•¥æ€»æ˜¯å°†è¿œç¨‹NUMAèŠ‚ç‚¹ä¸­çš„åº”ç”¨ç¨‹åºæ•°æ®è¿ç§»åˆ°è¿è¡Œåº”ç”¨ç¨‹åºçº¿ç¨‹æˆ–è¿›ç¨‹çš„NUMAèŠ‚ç‚¹ã€‚ç„¶è€Œï¼Œç”±äºè¿œç¨‹DRAMçš„è®¿é—®æ€§èƒ½å¯èƒ½ç”šè‡³é«˜äºæœ¬åœ°NVMM,ANBå¯èƒ½ä¼šé”™è¯¯åœ°å°†åº”ç”¨æ•°æ®ç§»åŠ¨åˆ°è¾ƒæ…¢çš„ä½ç½®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†HiNUMA[60]ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºæ··åˆå†…å­˜ç®¡ç†çš„æ–°NUMAæŠ½è±¡ã€‚å½“åº”ç”¨ç¨‹åºæ•°æ®é¦–æ¬¡æ”¾ç½®åœ¨æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­æ—¶ï¼ŒHiNUMAå°†åº”ç”¨ç¨‹åºæ•°æ®æ”¾ç½®åœ¨NVMMå’ŒDRAMä¸Šï¼Œä»¥åˆ†åˆ«å¹³è¡¡å¸¦å®½æ•æ„Ÿåº”ç”¨ç¨‹åºå’Œå»¶è¿Ÿæ•æ„Ÿåº”ç”¨ç¨‹åºçš„å†…å­˜å¸¦å®½åˆ©ç”¨ç‡ã€‚æ€»è®¿é—®å»¶è¿Ÿã€‚åˆå§‹æ•°æ®æ”¾ç½®åŸºäºNUMAæ‹“æ‰‘å’Œæ··åˆå†…å­˜è®¿é—®æ€§èƒ½ã€‚å¯¹äºè¿è¡Œæ—¶æ··åˆå†…å­˜ç®¡ç†,æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæ–°çš„NUMAå¹³è¡¡ç­–ç•¥,åä¸ºHANB[60]ï¼Œç”¨äºé¡µé¢è¿ç§»ã€‚HANBèƒ½å¤Ÿé€šè¿‡è€ƒè™‘æ•°æ®è®¿é—®é¢‘ç‡å’Œå†…å­˜å¸¦å®½åˆ©ç”¨ç‡æ¥é™ä½æ··åˆå†…å­˜è®¿é—®çš„æ€»æˆæœ¬ã€‚æˆ‘ä»¬åœ¨Linuxå†…æ ¸ä¸­å®ç°HiNUMA ,æ— éœ€å¯¹ç¡¬ä»¶å’Œåº”ç”¨ç¨‹åºè¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚ä¸NUMAæ¶æ„ä¸­çš„ä¼ ç»Ÿå†…å­˜ç®¡ç†ç­–ç•¥å’Œå…¶ä»–æœ€å…ˆè¿›çš„å·¥ä½œç›¸æ¯”, HiNUMAå¯ä»¥é€šè¿‡æœ‰æ•ˆåˆ©ç”¨æ··åˆå†…å­˜æ¥æ˜¾è‘—æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚ä»HiNUMA[60]ä¸­å­¦åˆ°çš„ç»éªŒæ•™è®­ä¹Ÿé€‚ç”¨äºé…å¤‡çœŸæ­£IntelOptaneDCPMMè®¾å¤‡çš„æ··åˆå†…å­˜ç³»ç»Ÿã€‚</p><h3 id="6-2-3-Supporting-Superpages-in-Hybrid-Memory-Systemsæ”¯æŒæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„è¶…çº§é¡µå­˜å‚¨"><a href="#6-2-3-Supporting-Superpages-in-Hybrid-Memory-Systemsæ”¯æŒæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„è¶…çº§é¡µå­˜å‚¨" class="headerlink" title="6.2.3 Supporting Superpages in Hybrid Memory Systemsæ”¯æŒæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„è¶…çº§é¡µå­˜å‚¨"></a>6.2.3 Supporting Superpages in Hybrid Memory Systemsæ”¯æŒæ··åˆå­˜å‚¨ç³»ç»Ÿä¸­çš„è¶…çº§é¡µå­˜å‚¨</h3><p>éšç€åº”ç”¨ç¨‹åºå åœ°é¢ç§¯å’Œç›¸åº”å†…å­˜å®¹é‡çš„å¿«é€Ÿå¢é•¿,è™šæ‹Ÿåˆ°ç‰©ç†åœ°å€è½¬æ¢å·²æˆä¸ºæ··åˆå†…å­˜ç³»ç»Ÿçš„æ–°çš„æ€§èƒ½ç“¶é¢ˆã€‚åœ¨å¤§å†…å­˜ç³»ç»Ÿä¸­, è¶…é¡µå·²è¢«å¹¿æ³›ç”¨äºå‡è½»åœ°å€è½¬æ¢å¼€é”€ã€‚ç„¶è€Œ,ä½¿ç”¨è¶…çº§é¡µé¢çš„å‰¯ä½œç”¨æ˜¯ï¼Œå®ƒä»¬é€šå¸¸ä¼šé˜»ç¢è½»é‡çº§å†…å­˜ç®¡ç†,ä¾‹å¦‚é¡µé¢è¿ç§»,è€Œé¡µé¢è¿ç§»åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­è¢«å¹¿æ³›ç”¨äºæé«˜ç³»ç»Ÿæ€§èƒ½å’Œèƒ½æ•ˆã€‚ä¸å¹¸çš„æ˜¯,åŒæ—¶æ‹¥æœ‰è¶…çº§é¡µé¢å’Œè½»é‡çº§é¡µé¢è¿ç§»æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„æ··åˆå†…å­˜ç®¡ç†ç³»ç»ŸRainbow[41]ä»¥å¼¥åˆè¶…çº§é¡µé¢å’Œè½»é‡çº§é¡µé¢è¿ç§»ä¹‹é—´çš„æ ¹æœ¬å†²çªã€‚å¦‚å›¾8æ‰€ç¤ºï¼ŒRainbowä»¥è¶…é¡µï¼ˆ2MBï¼‰çš„ç²’åº¦ç®¡ç†NVMM,å¹¶å°†DRAMä½œä¸ºç¼“å­˜ç®¡ç†ä»¥åŸºæœ¬é¡µçš„ç²’åº¦ï¼ˆ4KBï¼‰å°†çƒ­æ•°æ®å—å­˜å‚¨åœ¨è¶…çº§é¡µä¸­ã€‚ä¸ºäº†åŠ å¿«åœ°å€è½¬æ¢, Rainbowä½¿ç”¨äº†æ‹†åˆ†TLBçš„ç°æœ‰ç¡¬ä»¶åŠŸèƒ½æ¥æ”¯æŒè¶…çº§é¡µé¢å’Œæ™®é€šé¡µé¢ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/13d8d4f2c76f4dc28be42a4424d5faee.png"></p><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§ä¸¤é˜¶æ®µé¡µé¢è®¿é—®ç›‘æ§æœºåˆ¶æ¥è¯†åˆ«è¶…çº§é¡µé¢ä¸­çš„çƒ­åŸºé¡µé¢ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼ŒRainbowè®°å½•æ‰€æœ‰è¶…çº§é¡µé¢çš„è®¿é—®è®¡æ•°ä»¥è¯†åˆ«å‰Nä¸ªçƒ­è¶…çº§é¡µé¢ã€‚åœ¨ç¬¬äºŒé˜¶æ®µ,æˆ‘ä»¬é€»è¾‘ä¸Šå°†è¿™äº›çƒ­è¶…é¡µåˆ†å‰²æˆåŸºæœ¬é¡µï¼ˆ4KBï¼‰ , å¹¶è¿›ä¸€æ­¥ç›‘è§†å®ƒä»¬ä»¥è¯†åˆ«çƒ­åŸºæœ¬é¡µã€‚è¿™äº›æ–¹æ¡ˆæ˜¾è‘—å‡å°‘äº†é¡µè®¿é—®è®¡æ•°å™¨çš„SRAMå­˜å‚¨å¼€é”€å’Œç”±äºå¯¹çƒ­åŸºé¡µè¿›è¡Œæ’åºè€Œå¯¼è‡´çš„è¿è¡Œæ—¶æ€§èƒ½å¼€é”€ã€‚é€šè¿‡æ–°çš„NVMMåˆ°DRAMåœ°å€é‡æ–°æ˜ å°„æœºåˆ¶, Rainbowèƒ½å¤Ÿå°†çƒ­åŸºé¡µè¿ç§»åˆ°DRAM,åŒæ—¶ä»èƒ½ä¿è¯è¶…çº§é¡µTLBçš„å®Œæ•´æ€§ã€‚æ‹†åˆ†çš„è¶…é¡µTLBå’ŒåŸºæœ¬é¡µTLBæ˜¯å¹¶è¡ŒæŸ¥é˜…çš„ã€‚æˆ‘ä»¬çš„åœ°å€é‡æ˜ å°„æœºåˆ¶åœ¨é€»è¾‘ä¸Šä½¿ç”¨è¶…é¡µTLBä½œä¸ºåŸºæœ¬é¡µTLBçš„ç¼“å­˜ã€‚ç”±äºè¶…çº§é¡µTLBçš„å‘½ä¸­ç‡é€šå¸¸å¾ˆé«˜,Rainbowèƒ½å¤Ÿæ˜¾è‘—åŠ å¿«åŸºæœ¬é¡µåœ°å€è½¬æ¢ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜TLBå‘½ä¸­ç‡, æˆ‘ä»¬è¿˜æ‰©å±•Rainbowä»¥æ”¯æŒå¤šä¸ªé¡µé¢å¤§å°,å¹¶ä¸€èµ·è¿ç§»ç›¸é‚»çš„çƒ­åŸºé¡µé¢[42]ã€‚ä¸ä¸æ”¯æŒè¶…çº§é¡µé¢çš„æœ€å…ˆè¿›æ··åˆå†…å­˜ç³»ç»Ÿ[18]ç›¸æ¯”,Rainbowé€šè¿‡åŒæ—¶ä½¿ç”¨è¶…çº§é¡µé¢å’Œè½»é‡çº§é¡µé¢è¿ç§»çš„ä¼˜åŠ¿ï¼Œå¯ä»¥å°†åº”ç”¨ç¨‹åºæ€§èƒ½æ˜¾è‘—æé«˜æœ€å¤š2.9å€ã€‚</p><p>è¿™é¡¹å·¥ä½œæä¾›äº†ç¡¬ä»¶/è½¯ä»¶ååŒè®¾è®¡ï¼Œä»¥å¼¥åˆè¶…çº§é¡µé¢å’Œè½»é‡çº§é¡µé¢è¿ç§»æŠ€æœ¯ä¹‹é—´çš„æ ¹æœ¬å†²çªã€‚è¿™å¯èƒ½æ˜¯å‡è½»å¤§å®¹é‡æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­ä¸æ–­å¢åŠ çš„è™šæ‹Ÿåˆ°ç‰©ç†åœ°å€è½¬æ¢å¼€é”€çš„ä¸€ä¸ªæœ‰å‰é€”çš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="6-2-4-NVMM-Management-in-Virtual-Machinesè™šæ‹Ÿæœºä¸­çš„NVMMç®¡ç†"><a href="#6-2-4-NVMM-Management-in-Virtual-Machinesè™šæ‹Ÿæœºä¸­çš„NVMMç®¡ç†" class="headerlink" title="6.2.4 NVMM Management in Virtual Machinesè™šæ‹Ÿæœºä¸­çš„NVMMç®¡ç†"></a>6.2.4 NVMM Management in Virtual Machinesè™šæ‹Ÿæœºä¸­çš„NVMMç®¡ç†</h3><p>NVMMæœ‰æœ›åœ¨äº‘å’Œæ•°æ®ä¸­å¿ƒç¯å¢ƒä¸­æ›´å—æ¬¢è¿ã€‚ç„¶è€Œ,å…³äºå°†NVMMç”¨äºè™šæ‹Ÿæœºï¼ˆVMï¼‰çš„ç ”ç©¶å¾ˆå°‘ã€‚æˆ‘ä»¬æå‡ºäº†HMvisor[61],ä¸€ç§ç®¡ç†ç¨‹åº/è™šæ‹ŸæœºååŒæ··åˆå†…å­˜ç®¡ç†ç³»ç»Ÿ, ä»¥æœ‰æ•ˆåˆ©ç”¨DRAMå’ŒNVMMã€‚å¦‚å›¾9æ‰€ç¤º, HMvisoråˆ©ç”¨ä¼ªNUMAæœºåˆ¶æ¥æ”¯æŒVMä¸­çš„æ··åˆå†…å­˜åˆ†é…ã€‚ç”±äºVMä¸­çš„è™šæ‹ŸNUMAèŠ‚ç‚¹å¯ä»¥æ˜ å°„åˆ°ä¸åŒçš„ç‰©ç†NUMAèŠ‚ç‚¹, HMvisorå¯ä»¥å°†ä¸åŒçš„å†…å­˜åŒºåŸŸæ˜ å°„åˆ°å•ä¸ªVM ,ä»è€Œå‘VMæš´éœ²å†…å­˜å¼‚è´¨æ€§ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/1402aec0f84e49268d98793dc3a37f4c.png"></p><p>ä¸ºäº†æ”¯æŒVMä¸­çš„è½»é‡çº§é¡µé¢è¿ç§»,HMvisorç›‘æ§é¡µé¢è®¿é—®è®¡æ•°å¹¶è¿›è¡Œè™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¸­çš„çƒ­é¡µå’Œå†·é¡µåˆ†ç±»ï¼Œç„¶åVMé€šè¿‡åŸŸé—´é€šä¿¡æœºåˆ¶å‘¨æœŸæ€§åœ°æ”¶é›†çƒ­é¡µé¢çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åœ¨VMä¸­å®ç°äº†ä¸€ä¸ªå¯åŠ è½½çš„é©±åŠ¨ç¨‹åº,ä»¥åœ¨DRAMå’ŒNVMMä¹‹é—´æ‰§è¡Œè¿›ç¨‹çº§é¡µé¢è¿ç§»ã€‚ç”±äºHMvisorç”±VMæœ¬èº«æ‰§è¡Œé¡µé¢è¿ç§»,å› æ­¤HMvisoræ— éœ€æš‚åœVMè¿›è¡Œé¡µé¢è¿ç§»ã€‚HMvisorè¿˜æå€¡æ··åˆå†…å­˜èµ„æºäº¤æ˜“ç­–ç•¥,ä»¥åŠ¨æ€è°ƒæ•´VMä¸­NVMMå’ŒDRAMçš„å¤§å°ã€‚é€šè¿‡è¿™ç§æ–¹å¼,HMvisorå¯ä»¥æ»¡è¶³å¤šæ ·åŒ–åº”ç”¨ç¨‹åºçš„ä¸åŒå†…å­˜éœ€æ±‚ï¼ˆå®¹é‡æˆ–æ€§èƒ½ï¼‰ ,åŒæ—¶ä¿æŒVMçš„æ€»è´§å¸æˆæœ¬ä¸å˜ã€‚</p><p>HMvisorçš„åŸå‹åœ¨QEMU/KVMå¹³å°ä¸Šå®ç°ã€‚æˆ‘ä»¬çš„è¯„ä¼°è¡¨æ˜,HMvisorèƒ½å¤Ÿä»¥ä»…5%çš„æ€§èƒ½å¼€é”€ä¸ºä»£ä»·å°†NVMMå†™å…¥æµé‡å‡å°‘50%ã€‚æ­¤å¤–, åŠ¨æ€å†…å­˜è°ƒæ•´ç­–ç•¥å¯ä»¥åœ¨VMæ‰¿å—é«˜å†…å­˜å‹åŠ›æ—¶æ˜¾è‘—å‡å°‘VMä¸­çš„ä¸»è¦é¡µé¢é”™è¯¯,å› æ­¤ç”šè‡³å¯ä»¥å°†åº”ç”¨ç¨‹åºæ€§èƒ½æé«˜30å€ã€‚</p><p>è¿™æ˜¯ä¸€é¡¹åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ç®¡ç†æ··åˆå†…å­˜çš„æ—©æœŸç³»ç»Ÿå·¥ä½œã€‚æ‰€æå‡ºçš„æ–¹æ¡ˆå®Œå…¨ç”±è½¯ä»¶å®ç°, å› æ­¤ä¹Ÿé€‚ç”¨äºæ–°Intel Optane DCPMMè®¾å¤‡çš„æ··åˆå­˜å‚¨ç³»ç»Ÿã€‚</p><h2 id="6-3-NVMM-Supported-Applications-NVMMæ”¯æŒçš„åº”ç”¨ç¨‹åº"><a href="#6-3-NVMM-Supported-Applications-NVMMæ”¯æŒçš„åº”ç”¨ç¨‹åº" class="headerlink" title="6.3 NVMM-Supported Applications NVMMæ”¯æŒçš„åº”ç”¨ç¨‹åº"></a>6.3 NVMM-Supported Applications NVMMæ”¯æŒçš„åº”ç”¨ç¨‹åº</h2><p>ç”±äºæ··åˆå­˜å‚¨å™¨ç³»ç»Ÿå¯ä»¥æä¾›éå¸¸å¤§å®¹é‡çš„ä¸»å­˜å‚¨å™¨,å› æ­¤å®ƒä»¬å·²è¢«å¹¿æ³›ç”¨äºå¤§æ•°æ®åº”ç”¨,ä¾‹å¦‚å†…å­˜ä¸­çš„å…³é”®å€¼KVå­˜å‚¨å’Œå›¾å½¢è®¡ç®—ã€‚åœ¨æœ¬å°èŠ‚ä¸­,æˆ‘ä»¬ä»‹ç»äº†NVMMæ”¯æŒçš„é’ˆå¯¹è¿™äº›åº”ç”¨ç¨‹åºçš„ç³»ç»Ÿä¼˜åŒ–å®è·µã€‚</p><p>å…·æœ‰å¤§å®¹é‡å†…å­˜çš„å†…å­˜KVå­˜å‚¨å¯ä»¥åœ¨ä¸»å†…å­˜ä¸­ç¼“å­˜æ›´å¤šçš„çƒ­æ•°æ®,ä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›æ›´é«˜çš„æ€§èƒ½ã€‚ç„¶è€Œ,åœ¨æ··åˆå†…å­˜ç³»ç»Ÿä¸­ç›´æ¥éƒ¨ç½²ä¼ ç»Ÿçš„KVå­˜å‚¨ï¼ˆå¦‚memcachedï¼‰å­˜åœ¨è‹¥å¹²æŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œå¦‚ä½•æœ‰æ•ˆåœ°è¯†åˆ«çƒ­KVå¯¹è±¡?å¦‚ä½•é‡æ–°è®¾è®¡NVMMå‹å¥½çš„KVç´¢å¼•ä»¥å‡å°‘NVMMå†™å…¥?å¦‚ä½•é‡æ–°è®¾è®¡ç¼“å­˜æ›¿æ¢ç®—æ³•ä»¥å¹³è¡¡æ··åˆå†…å­˜ç³»ç»Ÿä¸­çš„å¯¹è±¡è®¿é—®é¢‘ç‡å’Œæœ€è¿‘æ€§?å¦‚ä½•è§£å†³slab calcificationé—®é¢˜[122] ,ä»¥åœ¨æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­æœ€ä½³åœ°åˆ©ç”¨DRAMèµ„æº?</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºHMCached[80] ,è¿™æ˜¯æ··åˆDRAM/NVMMç³»ç»Ÿçš„KVç¼“å­˜ï¼ˆmemcachedï¼‰çš„æ‰©å±•ã€‚å›¾10æ˜¾ç¤ºäº†HMCachedçš„ç³»ç»Ÿæ¶æ„ã€‚HMç¼“å­˜è·Ÿè¸ªKVå¯¹è±¡è®¿é—®å¹¶è®°å½•æ¯ä¸ªKVå¯¹çš„å…ƒæ•°æ®ç»“æ„ä¸­çš„è¿›ç¨‹è®¡æ•°, å› æ­¤HMCachedå¯ä»¥è½»æ¾è¯†åˆ«NVMMä¸­é¢‘ç¹è®¿é—®çš„å¯¹è±¡,å¹¶å°†å®ƒä»¬è¿ç§»åˆ°DRAMã€‚è¿™æ ·, æˆ‘ä»¬é€»è¾‘ä¸Šå°†DRAMç”¨ä½œNVMMçš„ä¸“ç”¨ç¼“å­˜,ä»¥é¿å…æ›´æ˜‚è´µçš„NVMMè®¿é—®ã€‚æ­¤å¤–, æˆ‘ä»¬é€šè¿‡æ‹†åˆ†åŸºäºå“ˆå¸Œçš„KVç´¢å¼•æ¥é‡æ–°è®¾è®¡NVMMå‹å¥½çš„KVæ•°æ®ç»“æ„, ä»¥è¿›ä¸€æ­¥å‡å°‘NVMMè®¿é—®ã€‚æˆ‘ä»¬å°†KVå¯¹è±¡çš„é¢‘ç¹æ›´æ–°å…ƒæ•°æ®ï¼ˆä¾‹å¦‚,å¼•ç”¨è®¡æ•°ã€æ—¶é—´æˆ³å’Œè®¿é—®è®¡æ•°ï¼‰æ”¾åœ¨DRAMä¸­,å…¶ä½™éƒ¨åˆ†ï¼ˆä¾‹å¦‚ï¼Œé”®å’Œå€¼ï¼‰æ”¾åœ¨NVMMä¸­ã€‚æˆ‘ä»¬åˆ©ç”¨å¤šé˜Ÿåˆ—ç®—æ³•[118]æ¥è€ƒè™‘DRAMç¼“å­˜æ›¿æ¢çš„å¯¹è±¡è®¿é—®é¢‘ç‡å’Œæœ€è¿‘æ€§ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªåŸºäºæ•ˆç”¨çš„æ€§èƒ½æ¨¡å‹æ¥è¯„ä¼°æ¿ç±»é‡æ–°åˆ†é…çš„æ•ˆç›Šã€‚æˆ‘ä»¬çš„åŠ¨æ€slabé‡æ–°åˆ†é…ç­–ç•¥èƒ½å¤Ÿæœ‰æ•ˆè§£å†³slab calcificationé—®é¢˜,å¹¶åœ¨æ•°æ®è®¿é—®æ¨¡å¼å‘ç”Ÿå˜åŒ–æ—¶æ˜¾è‘—æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚ä¸æ™®é€šmemcachedç›¸æ¯”HMCachedå¯ä»¥æ˜¾è‘—å‡å°‘70%çš„NVMMè®¿é—®, å¹¶å®ç°å¤§çº¦50%çš„æ€§èƒ½æ”¹è¿›ã€‚æ­¤å¤–ï¼ŒHMCachedèƒ½å¤Ÿé™ä½75%çš„DRAMæˆæœ¬,åŒæ—¶æ€§èƒ½ä¸‹é™ä¸åˆ°10%ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/76462968db584a9c8136d9c88d89346e.png"></p><p>æ®æˆ‘ä»¬æ‰€çŸ¥,æˆ‘ä»¬æ˜¯ç¬¬ä¸€ä¸ªæ¢ç´¢æ··åˆå­˜å‚¨ç³»ç»Ÿä¸­KVå­˜å‚¨çš„å¯¹è±¡çº§æ•°æ®ç®¡ç†çš„ã€‚æˆ‘ä»¬åŸºäºMemcachedå®ç°HMCachedå¹¶å¼€æ”¾æºä»£ç ã€‚æˆ‘ä»¬å‘ç°ï¼Œåæ¥çš„ç ”ç©¶ï¼ˆå¦‚flatstore[90]ï¼‰ä¹Ÿæœ‰ç±»ä¼¼çš„æƒ³æ³•æ¥è§£è€¦KVå­˜å‚¨çš„æ•°æ®ç»“æ„ã€‚</p><p>ä»Šå¤©,æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†è®¸å¤šå†…å­˜ä¸­çš„å›¾å½¢å¤„ç†ç³»ç»Ÿ,å…¶ä¸­åº”ç”¨ç¨‹åºçš„æ€§èƒ½ä¸ä¸»å†…å­˜çš„å®¹é‡é«˜åº¦ç›¸å…³ã€‚é«˜å¯†åº¦å’Œä½æˆæœ¬NVMMæŠ€æœ¯å¯¹äºé™ä½å›¾å½¢å¤„ç†çš„I/Oæˆæœ¬è‡³å…³é‡è¦ã€‚å¦‚å›¾11æ‰€ç¤º, ä¸åŸºäºSSDçš„å­˜å‚¨ç³»ç»Ÿç›¸æ¯”,æ··åˆå­˜å‚¨ç³»ç»Ÿå¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚å›¾12æ˜¾ç¤ºäº†æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿå’Œä»…DRAMç³»ç»Ÿä¹‹é—´çš„åº”ç”¨ç¨‹åºæ€§èƒ½å·®è·ã€‚æˆ‘ä»¬æå‡ºäº†NGraphï¼Œä¸€ç§æ–°çš„å›¾å½¢å¤„ç†æ¡†æ¶ï¼Œä¸“é—¨è®¾è®¡ç”¨äºæ›´å¥½åœ°åˆ©ç”¨æ··åˆå­˜å‚¨å™¨ã€‚æˆ‘ä»¬åŸºäºä¸åŒå›¾å½¢æ•°æ®çš„è®¿é—®æ¨¡å¼å¼€å‘æ··åˆå†…å­˜æ„ŸçŸ¥æ•°æ®æ”¾ç½®ç­–ç•¥,ä»¥å‡è½»å¯¹NVMMçš„éšæœºå’Œé¢‘ç¹è®¿é—®ã€‚é€šå¸¸ï¼Œå›¾å½¢ç»“æ„æ•°æ®å æ€»å›¾å½¢æ•°æ®çš„å¤§éƒ¨åˆ†ã€‚NGraphæ ¹æ®ç›®æ ‡é¡¶ç‚¹åˆ’åˆ†å›¾å½¢æ•°æ®,å¹¶é‡‡ç”¨ä»»åŠ¡åˆ†è§£æœºåˆ¶æ¥é¿å…å¤šä¸ªå¤„ç†å™¨ä¹‹é—´çš„æ•°æ®äº‰ç”¨ã€‚æ­¤å¤–,NGraphé‡‡ç”¨äº†å·¥ä½œçªƒå–æœºåˆ¶ï¼Œä»¥æœ€å°åŒ–å¤šæ ¸ç³»ç»Ÿä¸Šå¹¶è¡Œå›¾å½¢æ•°æ®å¤„ç†çš„æœ€å¤§æ—¶é—´ã€‚æˆ‘ä»¬ç§°ä¸ºReRAMæŠ€æœ¯çš„ã€‚</p><p>åŸºäºå›¾å½¢å¤„ç†æ¡†æ¶Ligra[123]å®ç°NGraphã€‚ä¸æœ€å…ˆè¿›çš„Ligraç›¸æ¯”,NGraphå¯ä»¥å°†åº”ç”¨ç¨‹åºæ€§èƒ½æé«˜48%ã€‚ä»è¿™é¡¹å·¥ä½œä¸­è·å¾—çš„ç»éªŒæ•™è®­[91]å¯ç”¨äºåœ¨é…å¤‡çœŸå®PMè®¾å¤‡çš„å›¾å½¢å¤„ç†å¹³å°ä¸­è¿›ä¸€æ­¥æé«˜å¤§è§„æ¨¡å›¾å½¢åˆ†æçš„æ€§èƒ½ã€‚</p><div class="note info no-icon"> åç§‘çš„å·¥ä½œå…³æ³¨çš„é—®é¢˜æ–¹å‘æœ‰çš„è¿˜æŒºå°çš„ï¼Œå¦‚æœä¸“æ³¨äºæŸä¸ªé—®é¢˜çš„è¯ï¼Œæœ€åç³»ç»Ÿè®¾è®¡å‡ºæ¥ä¹Ÿæ˜¯æ¯”è¾ƒåå‘äºé€‚åˆæŸä¸ªåœºæ™¯çš„ã€‚ä»åé¢ç¬¬7ç« èŠ‚æ¥çœ‹ï¼Œè¿™ä¸ªå‘å±•å¥½åƒæ˜¯èµ°å‘è¶Šæ¥è¶Šä¸“ä¸šåŒ–çš„ï¼Œä¸åŒçš„éœ€æ±‚ä¸åŒçš„æ¶æ„å’Œç³»ç»Ÿè®¾è®¡ã€‚ </div> <h1 id="7-Research-Directionsç ”ç©¶æ–¹å‘"><a href="#7-Research-Directionsç ”ç©¶æ–¹å‘" class="headerlink" title="7 Research Directionsç ”ç©¶æ–¹å‘"></a>7 Research Directionsç ”ç©¶æ–¹å‘</h1><p>NVMMæŠ€æœ¯çš„å‡ºç°åœ¨ææ–™ã€å¾®ç”µå­ã€è®¡ç®—æœºæ¶æ„ã€ç³»ç»Ÿè½¯ä»¶ã€ç¼–ç¨‹æ¨¡å‹å’Œå¤§æ•°æ®åº”ç”¨é¢†åŸŸå¼•èµ·äº†è®¸å¤šæœ‰è¶£çš„ç ”ç©¶è¯¾é¢˜ã€‚éšç€IntelOptaneDCPMMç­‰çœŸæ­£çš„NVMMè®¾å¤‡è¶Šæ¥è¶Šå¤šåœ°åº”ç”¨äºæ•°æ®ä¸­å¿ƒç¯å¢ƒ,NVMMå¯èƒ½ä¼šæ”¹å˜æ•°æ®ä¸­å¿ƒçš„å­˜å‚¨ç¯å¢ƒã€‚æˆ‘ä»¬çš„ç»<br>éªŒå’Œåšæ³•è¿›è¡Œäº†ä¸€äº›åˆæ­¥å’Œæœ‰è¶£çš„ç ”ç©¶ã€‚åœ¨ä¸‹æ–‡ä¸­,æˆ‘ä»¬åˆ†äº«äº†NVMMæœªæ¥ç ”ç©¶æ–¹å‘çš„æ„¿æ™¯,å¹¶åˆ†æäº†ç ”ç©¶æŒ‘æˆ˜å’Œæ–°æœºé‡ã€‚å›¾13è¯´æ˜äº†ä¸åŒç»´åº¦NVMMæŠ€æœ¯çš„æœªæ¥è¶‹åŠ¿ã€‚</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/21935e2720af4afeae966b3ce6e3724d.png"></p><ol><li><p>3Då †å NVMMæŠ€æœ¯çš„å‘å±•ä»åœ¨ç»§ç»­ã€‚NVMMæœ‰æœ›æä¾›æ›´é«˜çš„é›†æˆå¯†åº¦ä»¥é™ä½æˆæœ¬ã€‚ç›®å‰, é«˜ç«¯NVDIMMå¯¹äºä¼ä¸šåº”ç”¨æ¥è¯´ä»ç„¶è¿‡äºæ˜‚è´µã€‚NVMMä¸ä¼ ç»ŸDRAMå’ŒNANDé—ªå­˜ç«äº‰çš„å…³é”®æŒ‘æˆ˜æ˜¯å­˜å‚¨å¯†åº¦æˆ–æ¯å­—èŠ‚æˆæœ¬ã€‚NVMMæŠ€æœ¯ä¸»è¦æœ‰ä¸¤ç§å•ç‰‡3Dé›†æˆæœºåˆ¶[124]ã€‚ä¸€ç§æ˜¯å°†ä¾‹å¦‚Intel/Micron 3DXç‚¹ã€‚å¦ä¸€ç§æ˜¯å‚ç›´3Då †å ç»“æ„ã€‚ç„¶è€Œ, 3Dé›†æˆæŠ€æœ¯å°šæœªæˆç†Ÿã€‚ä»ç„¶å­˜åœ¨è®¸å¤šæŒ‘æˆ˜,å¦‚åˆ¶é€ æˆæœ¬ã€æŸ±ç”µæç”µé˜»å’Œæ½œè·¯å¾„é—®é¢˜ã€‚</p></li><li><p>NVMMè¶Šæ¥è¶Šå¤šåœ°ç”¨äºåˆ†å¸ƒå¼å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿã€‚éšç€NVMMçš„å¯†åº¦ä¸æ–­å¢åŠ ï¼Œå•ä¸ªæœåŠ¡å™¨ä¸­çš„ä¸»å†…å­˜å®¹é‡å¯ä»¥è¾¾åˆ°æ•°ç™¾TBã€‚ä¸ºäº†æé«˜å¤§å®¹é‡NVMMçš„åˆ©ç”¨ç‡,å¿…é¡»é€šè¿‡è¿œç¨‹ç›´æ¥å†…å­˜è®¿é—®ï¼ˆRDMAï¼‰æŠ€æœ¯åœ¨å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´å…±äº«å®ƒä»¬ã€‚ä½¿ç”¨NVMMçš„å…¸å‹æ–¹æ³•æ˜¯å°†æ¥è‡ªå¤šä¸ªæœåŠ¡å™¨çš„æ‰€æœ‰å¯å…±äº«å†…å­˜èšåˆåˆ°æ··åˆå…±äº«å†…å­˜èµ„æºæ± ä¸­, ä¾‹å¦‚Hotpot[49,125,126]ã€‚æ‰€æœ‰å†…å­˜èµ„æºåœ¨å…¨å±€å†…å­˜ç©ºé—´ä¸­å…±äº«ã€‚æœ‰ä¸€äº›å…³äºåœ¨æ•°æ®ä¸­å¿ƒå’Œäº‘ç¯å¢ƒä¸­ä½¿ç”¨NVMMçš„åˆæ­¥ç ”ç©¶[49,126,127]ã€‚ä½¿ç”¨PMçš„ä¸€ä¸ªæ–°è¶‹åŠ¿æ˜¯å°†å…¶ä½œä¸ºåˆ†ç±»å†…å­˜è¿›è¡Œç®¡ç†,å°±åƒä¼ ç»Ÿçš„åˆ†ç±»å­˜å‚¨ç³»ç»Ÿä¸€æ ·ã€‚æ­¤å‹å·ä¸ä»¥å‰çš„å…±äº«PMç³»ç»Ÿä¸åŒ, åœ¨è¯¥ç³»ç»Ÿä¸­ï¼ŒPMDIMMåˆ†å¸ƒåœ¨å¤šä¸ªæœåŠ¡å™¨ä¸­ï¼Œç”±ç”¨æˆ·çº§åº”ç”¨ç¨‹åºå…±äº«ã€‚è¿™äº›è®¡ç®—å†…å­˜ç´§å¯†è€¦åˆçš„ä½“ç³»ç»“æ„åœ¨å¯ç®¡ç†æ€§ã€å¯æ‰©å±•æ€§å’Œèµ„æºåˆ©ç”¨ç‡æ–¹é¢æœ‰å‡ ä¸ªç¼ºç‚¹ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨å°‘æ•°å­˜å‚¨å™¨èŠ‚ç‚¹ä¸­é…å¤‡æœ‰å¤§é‡PMçš„åˆ†è§£PMç³»ç»Ÿå¯ä»¥ç”±è®¡ç®—èŠ‚ç‚¹é€šè¿‡é«˜é€Ÿç»“æ„è¿æ¥ã€‚è¿™ç§è®¡ç®—/å†…å­˜åˆ†ç±»æ¶æ„å¯ä»¥æ›´å®¹æ˜“åœ°å‡è½»æ•°æ®ä¸­å¿ƒç¯å¢ƒä¸­çš„ä¸Šè¿°æŒ‘æˆ˜ã€‚ç„¶è€Œ,ä»ç„¶å­˜åœ¨è®¸å¤šæŒ‘æˆ˜ã€‚ä¾‹å¦‚,NVMMçš„æŒä¹…æ€§ç‰¹æ€§ä¹Ÿåº”åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­å¾—åˆ°ä¿è¯ã€‚ä¼ ç»Ÿçš„PMç®¡ç†æŒ‡ä»¤ï¼ˆå¦‚clflushå’Œmfenceï¼‰ åªèƒ½ä¿è¯æ•°æ®åœ¨å•ä¸ªæœåŠ¡å™¨ä¸­æŒä¹…åŒ–ï¼Œä½†ä¸èƒ½ä¿è¯æ•°æ®é€šè¿‡RDMAç½‘ç»œæŒä¹…åŒ–åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚å¯¹äºæ¯ä¸ªRDMAæ“ä½œ,ä¸€æ—¦æ•°æ®åˆ°è¾¾è¿œç¨‹æœåŠ¡å™¨ä¸­çš„ç½‘ç»œæ¥å£å¡ï¼ˆNICï¼‰ï¼Œå®ƒå°±ä¼šå‘æ•°æ®å‘é€æ–¹å‘å‡ºç¡®è®¤ã€‚ç”±äºNICä¸­æœ‰æ•°æ®ç¼“å†²åŒºï¼Œæ•°æ®ä¸ä¼šç«‹å³å­˜å‚¨åˆ°è¿œç¨‹NVMMã€‚å¦‚æœæ­¤æ—¶å‘ç”Ÿç”µæºæ•…éšœ,åˆ™æ— æ³•ä¿è¯æ•°æ®æŒä¹…æ€§ã€‚å› æ­¤,å¿…é¡»é‡æ–°è®¾è®¡RDMAåè®®ä»¥æ”¯æŒflushingåŸè¯­ã€‚æ­¤å¤–,è®¡ç®—èŠ‚ç‚¹åº”æ”¯æŒå¯¹ç”¨æˆ·çº§åº”ç”¨ç¨‹åºé€æ˜çš„è¿œç¨‹é¡µé¢äº¤æ¢ã€‚ä¸ºäº†æ”¯æŒè¿™ç§æœºåˆ¶åº”è¯¥é‡æ–°è®¾è®¡ä¼ ç»Ÿçš„è™šæ‹Ÿå†…å­˜ç®¡ç†ç­–ç•¥ã€‚å¦ä¸€æ–¹é¢,ç”±äºPMè¡¨ç°å‡ºç±»ä¼¼å†…å­˜çš„æ€§èƒ½, å¹¶ä¸”æ˜¯å­—èŠ‚å¯å¯»å€çš„ï¼Œå› æ­¤éœ€è¦å¯¹å†…å­˜è°ƒåº¦å’Œç®¡ç†è¿›è¡Œæ–°çš„è®¾è®¡ï¼Œä»¥é€‚åº”åˆ†è§£çš„PMã€‚</p></li></ol><p>3)åŸºäºNVMMçš„è®¡ç®—å­˜å‚¨å™¨é›†æˆè®¡ç®—æœºä½“ç³»ç»“æ„æ­£åœ¨å…´èµ·ã€‚ä¾‹å¦‚,æ–°å…´NVMMåœ¨å­˜å‚¨å™¨å†…å¤„ç†ï¼ˆPIMï¼‰[95,96]å’Œè¿‘æ•°æ®å¤„ç†ï¼ˆNDPï¼‰[128,129]æ¶æ„ä¸­çš„åº”ç”¨æ­£åœ¨å…´èµ·ã€‚PIMå’ŒNDPè¿‘å¹´æ¥å·²æˆä¸ºæ–°çš„è®¡ç®—èŒƒå¼ã€‚NDPæ˜¯æŒ‡å°†å¤„ç†å™¨ä¸å­˜å‚¨å™¨é›†æˆåœ¨å•ä¸ªèŠ¯ç‰‡ä¸Š,ä»¥ä¾¿è®¡ç®—èƒ½å¤Ÿå°½å¯èƒ½æ¥è¿‘åœ°è®¿é—®å­˜å‚¨å™¨ä¸­çš„æ•°æ®ã€‚NDPèƒ½å¤Ÿæ˜¾è‘—é™ä½æ•°æ®ç§»åŠ¨çš„æˆæœ¬ã€‚å®ç°è¿™ä¸€ç›®æ ‡ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯å°†å°å‹è®¡ç®—é€»è¾‘ï¼ˆå¦‚FPGA/ASICï¼‰é›†æˆåˆ°å­˜å‚¨å™¨èŠ¯ç‰‡ä¸­ï¼Œä»¥ä¾¿åœ¨æ•°æ®æœ€ç»ˆè¢«æå–åˆ°CPUä¹‹å‰å¯¹å…¶è¿›è¡Œé¢„å¤„ç†ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯å°†å†…å­˜å•å…ƒï¼ˆHBM/HMCï¼‰é›†æˆåˆ°è®¡ç®—ï¼ˆCPU/GPGPU/FPGAï¼‰ä¸­ã€‚è¯¥æ¨¡å‹é€šå¸¸ç”¨äºè®¸å¤šå¤„ç†å™¨æ¶æ„, å¦‚IntelO Xeon PhiTM Knights Landingç³»åˆ—ã€NVIDIAO tesla V100å’ŒGoogle Tensorå¤„ç†å•å…ƒï¼ˆTPUï¼‰ã€‚PIMæŒ‡çš„æ˜¯å®Œå…¨åœ¨è®¡ç®—æœºå†…å­˜ä¸­å¤„ç†æ•°æ®ã€‚å®ƒé€šè¿‡åœ¨ä¸»å­˜å‚¨å™¨ä¸­æ‰§è¡Œè®¡ç®—,æä¾›äº†é«˜å¸¦å®½ã€å¤§è§„æ¨¡å¹¶è¡Œæ€§å’Œé«˜èƒ½é‡æ•ˆç‡ã€‚ä½¿ç”¨NVMMï¼ˆå¦‚ReRAMï¼‰çš„PIMé€šå¸¸å¯ä»¥å¹¶è¡Œè®¡ç®—ä¸¤ä¸ªæˆ–å¤šä¸ªå†…å­˜è¡Œçš„ä½é€»è¾‘, å¹¶æ”¯æŒä¸€æ­¥å¤šè¡Œæ“ä½œã€‚è¯¥èŒƒä¾‹å¯¹äºæ¨¡æ‹Ÿè®¡ç®—æ–¹å¼ä¸­çš„çŸ©é˜µå‘é‡ä¹˜æ³•ç‰¹åˆ«æœ‰æ•ˆï¼Œå¹¶ä¸”å¯ä»¥å®ç°æå¤§ç¨‹åº¦çš„æ€§èƒ½åŠ é€Ÿå’ŒèŠ‚èƒ½ã€‚å› æ­¤, PIMåœ¨åŠ é€Ÿæœºå™¨å­¦ä¹ ç®—æ³•ï¼ˆå¦‚å·ç§¯ç¥ç»ç½‘ç»œï¼‰ä¸­å¾—åˆ°äº†å¹¿æ³›çš„ç ”ç©¶ï¼ˆCNNï¼‰å’Œæ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰ã€‚å°½ç®¡åœ¨PIMæ¶æ„ä¸­.ä½¿ç”¨NVMMæŠ€æœ¯çš„å…´è¶£è¶Šæ¥è¶Šå¤§[94-96 ,130]ï¼Œ ä½†ç›®å‰çš„ç ”ç©¶ä¸»è¦åŸºäºç”µæ¨¡æ‹Ÿ,æ²¡æœ‰ä¸€é¡¹ç ”ç©¶å¯ç”¨äºä¸­å‹åŸå‹è®¾è®¡ã€‚</p><p>4)é™¤äº†ä¼ ç»Ÿåº”ç”¨ä¹‹å¤–, ä¸€äº›ä½¿ç”¨NVMMçš„æ–°åº”ç”¨æ­£åœ¨å‡ºç°ã€‚å°½ç®¡NVMMæŠ€æœ¯å·²åˆæ­¥åº”ç”¨äºè®¸å¤šå¤§æ•°æ®åº”ç”¨, å¦‚KVå­˜å‚¨ã€å›¾å½¢è®¡ç®—å’Œæœºå™¨å­¦ä¹ ,ä½†å¤§å¤šæ•°ç¼–ç¨‹æ¡†æ¶/æ¨¡å‹å’Œè¿è¡Œæ—¶ç³»ç»Ÿéƒ½æ˜¯ä¸ºç£ç›˜è®¾å¤‡å’ŒåŸºäºDRAMçš„ä¸»å­˜å‚¨å™¨è€Œè®¾è®¡çš„, å®ƒä»¬åœ¨æ··åˆå­˜å‚¨ç³»ç»Ÿä¸­å¹¶ä¸æœ‰æ•ˆã€‚ä¾‹å¦‚, è¿™äº›ç³»ç»Ÿä¸­å¹¿æ³›ä½¿ç”¨ç¼“å†²å’Œå»¶è¿Ÿå†™å…¥æœºåˆ¶æ¥éšè—I/Oæ“ä½œçš„é«˜å»¶è¿Ÿã€‚ç„¶è€Œ,æ··åˆå­˜å‚¨å™¨ç³»ç»Ÿä¸­å¯èƒ½ä¸éœ€è¦è¿™äº›æœºåˆ¶,ç”šè‡³å¯èƒ½ä¼šæŸå®³åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚åº”é‡æ–°è®¾è®¡Hadoop/Spark/GraphChi/Tensorflowç­‰å¤§æ•°æ®å¤„ç†å¹³å°,ä»¥é€‚åº”NVMMæŠ€æœ¯çš„ç‰¹ç‚¹ã€‚é™¤äº†è¿™äº›ä¼ ç»Ÿåº”ç”¨ä¹‹å¤–,ä¸€äº›åŸºäºNVMMçš„æ–°å‹åº”ç”¨æ­£åœ¨å‡ºç°ã€‚ä¾‹å¦‚,æœ‰ä¸€äº›å»ºè®®é€šè¿‡åˆ©ç”¨NVMMçš„åˆ‡æ¢è¿‡ç¨‹çš„å†…åœ¨å˜åŒ–,å°†NVMMç”¨ä½œç¡¬ä»¶å®‰å…¨åŸè¯­, å¦‚ç‰©ç†ä¸å¯å…‹éš†å‡½æ•°ï¼ˆPUFï¼‰[131]ã€‚ PUFé€šå¸¸ç”¨äºå…·æœ‰é«˜å®‰å…¨æ€§è¦æ±‚çš„åº”ç”¨,ä¾‹å¦‚å¯†ç å­¦ã€‚æœ€è¿‘,å·²ç»æå‡ºäº†è®¸å¤šåŸºäºNVMMæŠ€æœ¯çš„é€»è¾‘ç”µè·¯å¹¶å°†å…¶åŸå‹åŒ–[132-134]ã€‚ä¾‹å¦‚ï¼ŒReRAMæŠ€æœ¯è¢«æè®®ç”¨ä½œåŸºäºReRAMçš„FPGAçš„å¯é‡æ„å¼€å…³[133]ã€‚æ­¤å¤–ï¼ŒSTT-RAMæŠ€æœ¯è¢«æå‡ºç”¨äºè®¾è®¡éæ˜“å¤±æ€§ç¼“å­˜æˆ–å¯„å­˜å™¨[135]ã€‚</p><h1 id="8-Conclusionsç»“è®º"><a href="#8-Conclusionsç»“è®º" class="headerlink" title="8 Conclusionsç»“è®º"></a>8 Conclusionsç»“è®º</h1><p>ä¸ä¼ ç»ŸDRAMæŠ€æœ¯ç›¸æ¯”, æ–°å…´çš„NVMMæŠ€æœ¯å…·æœ‰è®¸å¤šè‰¯å¥½çš„ç‰¹æ€§ã€‚å®ƒä»¬æœ‰å¯èƒ½ä»æ ¹æœ¬ä¸Šæ”¹å˜å­˜å‚¨ç³»ç»Ÿçš„é¢è²Œï¼Œç”šè‡³ä¸ºè®¡ç®—æœºç³»ç»Ÿæ·»åŠ æ–°çš„åŠŸèƒ½å’Œç‰¹æ€§ã€‚ç°åœ¨æœ‰å¾ˆå¤šæœºä¼šé‡æ–°æ€è€ƒå½“ä»Šè®¡ç®—æœºç³»ç»Ÿçš„è®¾è®¡,ä»¥å®ç°ç³»ç»Ÿæ€§èƒ½å’Œèƒ½è€—çš„æ•°é‡çº§æ”¹è¿›ã€‚æœ¬æ–‡ä»å†…å­˜ä½“ç³»ç»“æ„ã€æ“ä½œç³»ç»Ÿçº§å†…å­˜ç®¡ç†å’Œåº”ç”¨ç¨‹åºä¼˜åŒ–çš„è§’åº¦å…¨é¢ä»‹ç»äº†æœ€æ–°çš„å·¥ä½œå’Œæˆ‘ä»¬çš„å®è·µã€‚æˆ‘ä»¬è¿˜åˆ†äº«äº†æˆ‘ä»¬å¯¹NVMMæŠ€æœ¯æœªæ¥ç ”ç©¶æ–¹å‘çš„å±•æœ›ã€‚é€šè¿‡åˆ©ç”¨NVMMçš„ç‹¬ç‰¹ç‰¹æ€§, æœ‰å·¨å¤§çš„æœºä¼šæ¥åˆ›æ–°æœªæ¥çš„è®¡ç®—èŒƒå¼, å¼€å‘NVMMçš„å¤šç§æ–°é¢–åº”ç”¨ã€‚</p><h2 id="ç§¯ç´¯"><a href="#ç§¯ç´¯" class="headerlink" title="ç§¯ç´¯"></a>ç§¯ç´¯</h2><p>ä¸€äº›å¯ä»¥è¿›ä¸€æ­¥çœ‹ä¸€çœ‹çš„æ–‡çŒ®ï¼š</p><p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/519ae688bfd74036bb3b66ae451bbc86.png" alt="ä¸åŒå†…å­˜ç¡¬ä»¶æ€§èƒ½æ¯”è¾ƒ"></p><p>å¦‚è¡¨1æ‰€ç¤ºï¼ŒIntel Optane DCPMMçš„è¯»å–å»¶è¿Ÿæ¯”DRAMé«˜2å€-3å€,è€Œå…¶å†™å…¥å»¶è¿Ÿç”šè‡³ä½äºDRAMã€‚å•ä¸ªOptane DCPMM DIMMçš„æœ€å¤§è¯»å†™å¸¦å®½åˆ†åˆ«ä¸º6.6GB/så’Œ2.3 GB/sï¼Œè€ŒDRAMçš„è¯»å†™å¸¦å®½ä¹‹é—´çš„å·®è·è¦å°å¾—å¤š(1.3x)ã€‚æ­¤å¤–ï¼Œéšç€ç³»ç»Ÿä¸­å¹¶è¡Œçº¿ç¨‹æ•°é‡çš„å¢åŠ ï¼Œè¯»/å†™æ€§èƒ½æ˜¯éå•è°ƒçš„[25]ã€‚åœ¨ä»–ä»¬çš„å®éªŒä¸­ï¼Œ1ä¸ªåˆ°4ä¸ªçº¿ç¨‹ä¹‹é—´è¾¾åˆ°äº†å³°å€¼æ€§èƒ½ï¼Œç„¶åé€æ¸ä¸‹é™ã€‚</p><div class="note danger"> ä½†æ˜¯è¿™ä¸ªå¯èƒ½ä¸æ˜¯æˆ‘æƒ³è¦çš„CPUå’Œå†…å­˜çš„å»¶è¿Ÿå¸¦å®½ä¹‹ç±»çš„ï¼Œå¯èƒ½æ˜¯é’ˆå¯¹åšæŒä¹…æ€§æ—¶çš„æ•°æ® </div> <p>Salkhordehå’ŒAsadi[34]è€ƒè™‘äº†å†…å­˜å†™å…¥å’Œè¯»å–ï¼Œä»¥è¿ç§»æœ‰åˆ©äºæ€§èƒ½å’ŒèŠ‚èƒ½çš„çƒ­é¡µé¢ã€‚</p><p>Li[101]ç­‰äººæå‡ºäº†ä¸€ç§å®ç”¨æ¨¡å‹ï¼Œç”¨äºåŸºäºå®ç”¨ç¨‹åºå®šä¹‰æ¥æŒ‡å¯¼é¡µé¢è¿ç§»ï¼Œè¯¥å®ç”¨ç¨‹åºå®šä¹‰åŸºäºè®¸å¤šå› ç´ ï¼Œå¦‚é¡µé¢çƒ­åº¦ã€å†…å­˜çº§å¹¶è¡Œæ€§å’Œè¡Œç¼“å†²åŒºå±€éƒ¨æ€§.</p><p>â€œå¦‚æœä¸€ä¸ªå¯é‡æ–°é…ç½®çš„æ··åˆå†…å­˜ç³»ç»Ÿèƒ½å¤Ÿä»¥åŠæ—¶æœ‰æ•ˆçš„æ–¹å¼åŠ¨æ€åœ°é€‚åº”ä¸åŒçš„åœºæ™¯ï¼Œå¯¹äºåº”ç”¨ç¨‹åºæ¥è¯´å¯èƒ½æ˜¯æœ‰ç›Šçš„å’Œçµæ´»çš„ã€‚è¿™å¯èƒ½æ˜¯NVMMå™¨ä»¶çš„ä¸€ä¸ªæœ‰è¶£çš„ç ”ç©¶æ–¹å‘ã€‚â€çœ‹çœ‹åç§‘å»–å°é£å›¢é˜Ÿåœ¨è¿™ä¸ªæ–¹é¢æœ€è¿‘çš„å·¥ä½œã€‚</p><p>â€œç”±äºNVMMsæ˜¾ç¤ºå‡ºæ›´é«˜çš„è®¿é—®å»¶è¿Ÿå’Œå†™å…¥èƒ½è€—ï¼Œå·²ç»æœ‰å¾ˆå¤šå…³äºNVMMsçš„æ€§èƒ½æ”¹è¿›å’ŒèŠ‚èƒ½çš„ç ”ç©¶[32-34 ,63 ,65 ,66]ã€‚â€çœ‹ä¸€çœ‹è¿™äº›æœ‰æ²¡æœ‰åšå†…å­˜çš„å»¶è¿Ÿå’Œèƒ½è€—çš„ç»Ÿè®¡ã€‚</p><p>æ–‡ä¸­æåˆ°å’Œå†™å¯†é›†æœ‰å…³çš„ï¼ˆä½†æ˜¯è¿™ä¸ªæ˜¯storeè¿˜æ˜¯writeè¿˜æ˜¯è¦çœ‹çœ‹ï¼Œæœ‰çš„éœ€æ±‚writeæŒºå°‘çš„ï¼‰CLOCK-DWF[33]ï¼ŒPDRAM[15]ï¼ŒRaPP[14]</p><hr>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> B </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
            <tag> Review </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MULTI-CLOCK: Dynamic Tiering for Hybrid Memory Systems</title>
      <link href="/2023/02/06/MULTI-CLOCK-Dynamic-Tiering-for-Hybrid-Memory-Systems/"/>
      <url>/2023/02/06/MULTI-CLOCK-Dynamic-Tiering-for-Hybrid-Memory-Systems/</url>
      
        <content type="html"><![CDATA[<h2 id="1-è®ºæ–‡ä¿¡æ¯"><a href="#1-è®ºæ–‡ä¿¡æ¯" class="headerlink" title="1. è®ºæ–‡ä¿¡æ¯"></a>1. è®ºæ–‡ä¿¡æ¯</h2><div class="note primary"><ul><li>æ–‡ç« æ¥è‡ªIEEE International Symposium on High-Performance Computer Architecture, (HPCA), 2022</li><li>MULTI-CLOCK: Dynamic Tiering for Hybrid Memory Systems</li></ul></div> <h3 id="æ‰€æœ‰ä½œè€…åŠå•ä½"><a href="#æ‰€æœ‰ä½œè€…åŠå•ä½" class="headerlink" title="æ‰€æœ‰ä½œè€…åŠå•ä½"></a>æ‰€æœ‰ä½œè€…åŠå•ä½</h3><ul><li>Adnan Maruf, ä½›ç½—é‡Œè¾¾å›½é™…å¤§å­¦(FIU)å¥ˆç‰¹åŸºé‡‘ä¼šè®¡ç®—ä¸ä¿¡æ¯ç§‘å­¦å­¦é™¢</li><li>Ashikee Ghosh, ä½›ç½—é‡Œè¾¾å›½é™…å¤§å­¦(FIU)å¥ˆç‰¹åŸºé‡‘ä¼šè®¡ç®—ä¸ä¿¡æ¯ç§‘å­¦å­¦é™¢</li><li>Janki Bhimani, ä½›ç½—é‡Œè¾¾å›½é™…å¤§å­¦(FIU)å¥ˆç‰¹åŸºé‡‘ä¼šè®¡ç®—ä¸ä¿¡æ¯ç§‘å­¦å­¦é™¢</li><li>Daniel Campello, Google</li><li>Andy Rudoff, è‹±ç‰¹å°”å…¬å¸</li><li>Raju Rangaswami, ä½›ç½—é‡Œè¾¾å›½é™…å¤§å­¦(FIU)å¥ˆç‰¹åŸºé‡‘ä¼šè®¡ç®—ä¸ä¿¡æ¯ç§‘å­¦å­¦é™¢</li></ul><h2 id="2-Background"><a href="#2-Background" class="headerlink" title="2. Background"></a>2. Background</h2><p>å°†PMä½œä¸ºç¬¬äºŒçº§å†…å­˜ç›´æ¥æš´éœ²ç»™CPUæ˜¯ç›®å‰æ¯”è¾ƒæœ‰å¸Œæœ›çš„ä¸€ä¸ªåšæ³•ï¼šå¦‚ä½•æŠŠæ•°æ®åœ¨æ­£ç¡®æ—¶é—´æ”¾å…¥æ­£ç¡®åˆ†å±‚ä¸­å»ã€‚äºæ˜¯é¢ä¸´ä¸€ä¸ªæ˜¯å¤§å®¶å…³æ³¨çš„é—®é¢˜ã€‚</p><h2 id="3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#3-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>3. è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>åŠ¨æœºï¼šé€šè¿‡å››ä¸ªå·¥ä½œè´Ÿè½½ï¼Œç»Ÿè®¡å½’ç±»50ä¸ªé‡‡æ ·é¡µé¢çš„è®¿é—®æ¨¡å¼ï¼Œå¾—å‡ºå±‚çº§å‹å¥½é¡µé¢æ˜¯éœ€è¦è¿ç§»çš„å¯¹è±¡ï¼ˆç©ºé—´å±€éƒ¨æ€§ï¼‰ã€‚<img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/b9a6c5150a4c455c9eca0fbbcd1aaf99.png" alt="çƒ­åŠ›å›¾"><br>åŒæ—¶ä¸€æ®µæ—¶é—´è®¿é—®è¿‡çš„é¡µé¢åœ¨ä¸‹ä¸€æ®µæ—¶é—´è¢«è®¿é—®æ¦‚ç‡ä¹Ÿå¾ˆå¤§ï¼ˆæ—¶é—´å±€éƒ¨æ€§ï¼‰<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/cb7d1ef346b84032b6cae36568adf862.png" alt="ç›¸çº¿å›¾è¡¨ç¤ºè¢«è®¿é—®çš„æ¦‚ç‡åœ¨ä¸åŒæ—¶é—´çª—å£çš„å˜åŒ–"><br>ç„¶åè¯´æ˜äº†ç”¨frequency&amp;recencyè¯†åˆ«åˆ°çš„é¡µé¢ä¹Ÿå…·æœ‰å±‚çº§å‹å¥½çš„ç‰¹å¾ã€‚ç›¸æ¯”äºé™æ€åˆ†å±‚ï¼Œè¯´æ˜äº†åŠ¨æ€åˆ†å±‚çš„å¿…è¦ã€‚æœ€åæŠŠæ•´ä¸ªæ¯”è¾ƒæ¨¡ç³Šçš„å¤§é—®é¢˜è½¬åŒ–ä¸ºï¼šè¯•å›¾è§£å†³åˆ†å±‚ç³»ç»Ÿä¸­ï¼šå¦‚ä½•æ ¹æ®frequency&amp;recencyæ¥è¯†åˆ«å‡çº§çš„çƒ­ç‚¹é¡µ?å¦‚ä½•åœ¨å†…æ ¸ä¸­è®¾è®¡ä¸€ä¸ªç®€å•ã€ä½å¼€é”€è€Œåˆé«˜æ•ˆçš„ç³»ç»Ÿï¼Ÿ</p><h2 id="4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"><a href="#4-å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·" class="headerlink" title="4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·"></a>4. å…¶ä»–å­¦è€…è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å’Œç¼ºé™·</h2><p>è¿™äº›éƒ½æ˜¯åˆ†å±‚æŠ€æœ¯ä¸Šçš„å¯¹æ¯”ï¼š<br>é™æ€åˆ†å±‚å³ä¸€ä¸ªå†…å­˜é¡µä¸€æ—¦è¢«æ˜ å°„åˆ°ä¸€ä¸ªåˆ†å±‚ï¼Œåœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…å°±ä¸ä¼šè¢«é‡æ–°åˆ†é…åˆ°ä¸åŒçš„åˆ†å±‚ã€‚<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/9b9a94f135544a11a3dfdb7aca8ed615.png" alt="ç°æœ‰å†…å­˜åˆ†å±‚æŠ€æœ¯çš„æ¯”è¾ƒ"><br>[11]Nimbleï¼šåªæ ¹æ®recencyæ¥é€‰æ‹©é¡µé¢ï¼Œè¿™ç¯‡çš„ä½œè€…ä¸ºäº†è§£å†³frequencyå†³å®šæŠŠå·¥ä½œè´Ÿè½½æ‰§è¡ŒæœŸåˆ†ä¸ºè§‚å¯Ÿçª—å£å’Œæ€§èƒ½çª—å£ã€‚å¾—å‡ºè§‚å¯Ÿçª—å£é¢‘ç‡é«˜çš„ï¼Œåœ¨æ€§èƒ½çª—å£æ¦‚ç‡ä¹Ÿé«˜ã€‚ä¸“æ³¨äºé€æ˜å¤§é¡µï¼ˆTHPï¼‰è¿ç§»ã€‚åº”ç”¨ç¨‹åºéœ€è¦é€šè¿‡Nimbleçš„å¯åŠ¨å™¨è¿è¡Œä»¥åˆ©ç”¨å…¶é¡µé¢è¿ç§»æŠ€æœ¯ã€‚MCåœ¨å†…ç½®å†…æ ¸å®ç°çš„åŠŸèƒ½ã€‚Nimbleéœ€è¦ä¸€ä¸ªé¢å¤–çš„å¯åŠ¨å™¨æ¥è¿è¡Œå†…æ ¸ä¸Šçš„ä»»ä½•å·¥ä½œè´Ÿè½½ã€‚</p><p>[12]AutoTieringhint page faultçš„ç¼ºé¡µå¼‚å¸¸æ¥è·Ÿè¸ªé¡µé¢è®¿é—®ï¼Œå¹¶ä½¿ç”¨recencyæ¥è¯†åˆ«çƒ­ç‚¹é¡µè¿›è¡Œå‡çº§ã€‚å°½ç®¡ç¼ºé¡µå¼‚å¸¸å¯ä»¥æä¾›é«˜å‡†ç¡®åº¦çš„é¡µé¢è®¿é—®è·Ÿè¸ªï¼Œä½†è·Ÿè¸ªæ‰€æœ‰é¡µé¢çš„æˆæœ¬å¾ˆé«˜ï¼Œå› ä¸ºæ¯ä¸€ä¸ªé¡µé¢æ•…éšœéƒ½å¿…é¡»åœ¨è®¿é—®é¡µé¢ä¹‹å‰è¿›è¡Œå¤„ç†ã€‚è¿™æ˜¯å› ä¸ºåŸºäºç¼ºé¡µçš„è½¯ä»¶é¡µé¢è®¿é—®è·Ÿè¸ªæˆæœ¬å¾ˆé«˜ï¼Œè€Œä¸”è·Ÿè¸ªé¡µé¢å†å²ä½ä»¥è¯†åˆ«å†·é¡µé¢çš„å¼€é”€ä¹Ÿå¾ˆå¤§ã€‚æ‰€ä»¥åœ¨åé¢å·¥ä½œè´Ÿè½½æµ‹è¯•ä¸­è¡¨ç°å¾ˆå·®ã€‚</p><p>[19]Thermostatæºä»£ç ä¸å¯ç”¨æ²¡æœ‰è¯„ä¼°ï¼Œé€šè¿‡poisoningé¡µè¡¨é¡¹ï¼ˆPTEï¼‰å’Œè§¦å‘ç¼ºé¡µå¼‚å¸¸æ¥è·Ÿè¸ªå·¨å¤§çš„é¡µé¢ï¼Œå¹¶å°†å†·é¡µé¢è¿ç§»åˆ°è¾ƒä½çš„å†…å­˜å±‚ã€‚</p><p>[22]AMPï¼ˆéç»Ÿä¸€å†…å­˜è®¿é—®æ¶æ„NUMAï¼Œä¸»æ¿ä¼šåˆ†æˆä¸åŒçš„æ’æ§½ï¼Œæ¯ä¸€ä¸ªæ’æ§½ä¸€ç»„cpuï¼Œä»¥åŠå’Œè¿™ç»„cpuç¦»å¾—è¿‘çš„å†…å­˜ã€‚ï¼‰è¿™åœ¨ä¸¤ä¸ªæ’åº§çš„NUMAæœºå™¨ä¸­æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹é€šå¸¸æœ‰è‡ªå·±çš„DRAMã€PMå’ŒCPUã€‚AMPä½¿ç”¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåªç”¨äºDRAMçš„åˆ†é…ï¼Œå…¶ä»–èŠ‚ç‚¹åªç”¨äºPMçš„åˆ†é…ã€‚AMPæ˜¯åœ¨Linuxå†…æ ¸4.15ç‰ˆæœ¬ä¸Šå®ç°çš„ï¼Œå®ƒä¸æ”¯æŒæ‰€éœ€çš„KMEM DAXé©±åŠ¨ï¼ˆä»å†…æ ¸v5.1å¼€å§‹æä¾›ï¼‰ï¼Œä»¥ä¾¿PMä½œä¸ºä¸»å†…å­˜åœ¨åˆ†å±‚ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚AMPçš„æ ¸å¿ƒè®¾è®¡åŸåˆ™è¦æ±‚å®ƒæ‰«æå’Œå‰–ææ¥è‡ªDRAMå’ŒPMå±‚çš„æ‰€æœ‰å†…å­˜é¡µï¼Œè¿™åœ¨å®é™…ç³»ç»Ÿçš„å†…æ ¸ä¸­æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬è¯„ä¼°çš„å·¥ä½œè´Ÿè½½ä¸­ï¼Œå†…å­˜é¡µçš„æ•°é‡å¯ä»¥å¢é•¿åˆ°æ•°äº¿ã€‚<br>å¯¹æ¯”äºPMå½“å‰è¿™æ¬¾ç¡¬ä»¶çš„ä¸¤ç§ç”¨æ³•ã€‚</p><p>[7]Memory-modeï¼šæ•°æ®ä¸èƒ½æŒä¹…åŒ–ï¼Œdramä½œä¸ºç¼“å­˜ä¸é€æ˜ã€‚ç¼“å­˜æ˜¯éœ€è¦ä»é«˜å±‚è·å–æ•°æ®çš„ï¼Œè€Œè¿™é‡Œæå‡ºçš„åˆ†å±‚æ˜¯ä¸¤å±‚éƒ½èƒ½è¢«ç›´æ¥è®¿é—®çš„ã€‚</p><p>[44]å¯¹è±¡çº§éœ€è¦æ”¹å˜åº”ç”¨ç¨‹åºAPIï¼Œè€Œå†…æ ¸çº§åˆ«çš„ä¿®æ”¹ä¸éœ€è¦åº”ç”¨ç¨‹åºæœ‰ä½•å˜åŒ–ã€‚</p><p>[32]æå‡ºäº†ä¸€ç§æœ‰æ•ˆä½¿ç”¨æŒä¹…æ€§å†…å­˜ä½œä¸ºNUMAèŠ‚ç‚¹çš„è®¾è®¡ã€‚è¿™ä¸ªåˆ†å±‚è®¾è®¡åŒæ—¶æ„è¯†åˆ°äº†DRAMå’ŒPMèŠ‚ç‚¹ ,å¹¶ä¸”åªé€šè¿‡NUMAå¹³è¡¡å¤„ç†åŒ¿åé¡µé¢çš„å‡çº§/ç§»åŠ¨ã€‚</p><p>[33-36]ä¸éœ€è¦ç¡¬ä»¶ï¼Œè€Œä¸”éƒ½æ˜¯ä¸»å­˜æ²¡æœ‰ç¼“å†²ã€‚</p><h2 id="5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"><a href="#5-å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯" class="headerlink" title="5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯"></a>5. å›´ç»•è¯¥é—®é¢˜ä½œè€…å¦‚ä½•æ„å»ºè§£å†³æ€è·¯</h2><p>è®¾è®¡MULTI-CLOCKçš„ä¸»è¦å‡è®¾æ˜¯ï¼Œæœ€è¿‘è¢«è®¿é—®è¿‡ä¸€æ¬¡ä»¥ä¸Šçš„é¡µé¢ï¼Œåœ¨ä¸ä¹…çš„å°†æ¥æ›´æœ‰å¯èƒ½è¢«è®¿é—®ã€‚</p><p>å…·ä½“å‡çº§é™çº§è¦æ±‚é—¨æ§›å°±æ˜¯é‚£å¼ å›¾ã€‚ï¼ˆä½†æ˜¯é¢‘ç¹ç¨‹åº¦ä¸å¤Ÿå§ï¼Ÿï¼‰åŠæ—¶æ›´æ–°é¡µé¢å¼•ç”¨çŠ¶æ€çš„æ–¹å¼æ ¹æ®å¯¹å†…å­˜é¡µçš„è®¿é—®æ¨¡å¼ä¸åŒè€Œä¸åŒã€‚æ— ç›‘ç£å¼ï¼šCPUåœ¨è¿›ç¨‹çš„é¡µè¡¨å…¥å£ä¸­è®¾ç½®çš„é¡µé¢å¼•ç”¨ä½ã€‚ <img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/ca0046254e904f9991e9b0242696b89f.png" alt="æ–‡ç« çš„idea"></p><p>ä¸CLOCKç±»ä¼¼ï¼Œå‡çº§æ˜¯ç”±æ¯æ¬¡ç³»ç»Ÿå®ˆæŠ¤ç¨‹åºkpromotedå»å®Œæˆçš„ã€‚å®ƒå®šæœŸè¢«å”¤é†’ï¼Œä»¥æ‰«æåˆ—è¡¨ï¼Œæ›´æ–°å®ƒä»¬ï¼Œå¹¶å°†æœ€è¿‘ç”±æ— ç›‘ç£è®¿é—®äº§ç”Ÿçš„å‡çº§åˆ—è¡¨ä¸­é¡µè¿ç§»åˆ°æ›´é«˜å±‚çš„é¡µã€‚</p><p>é™çº§æœºåˆ¶åŸºäºä»Šå¤©çš„è™šæ‹Ÿå†…å­˜ç³»ç»Ÿä¸­çš„é¡µé¢é©±é€æŠ€æœ¯ã€‚å½“å†…å­˜è¾¾åˆ°å†…å­˜å‹åŠ›æ—¶ï¼ˆè¯¥å±‚ä¸ç³»ç»Ÿæ€»å†…å­˜é‡æ¥è®¡ç®—ï¼‰ä¼šå»æ‰«ææ¯ä¸ªåˆ—è¡¨ã€‚æ´»åŠ¨åˆ—è¡¨ä¸­çš„é¡µé¢ç›¸å¯¹äºéæ´»åŠ¨åˆ—è¡¨çš„æ¯”ä¾‹è¶…è¿‡äº†ä¸€ä¸ªä¸è¯¥å±‚å¯ç”¨å†…å­˜é‡ç›¸å…³çš„é˜ˆå€¼æ—¶ï¼Œé‚£ä¹ˆåœ¨æ´»åŠ¨åˆ—è¡¨ä¸­æ²¡æœ‰è¢«æ ‡è®°ä¸ºå¼•ç”¨çš„é¡µé¢å°†è¢«ç§»è‡³éæ´»åŠ¨åˆ—è¡¨ã€‚æœ€åï¼Œéæ´»åŠ¨åˆ—è¡¨è¢«æ‰«æï¼Œä»¥å¯»æ‰¾æœªè¢«æ ‡è®°ä¸ºå¼•ç”¨çš„é¡µé¢ï¼Œå¹¶å°†å…¶è¿ç§»åˆ°è¾ƒä½çš„å±‚çº§ã€‚å½“æ²¡æœ‰æ›´ä½å±‚çº§åˆ—è¡¨å¯ä»¥è¿ç§»ï¼Œå°±å†™å›å—å­˜å‚¨ã€‚</p><h2 id="6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"><a href="#6-ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜" class="headerlink" title="6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜"></a>6. ä»ç»“æœçœ‹ï¼Œä½œè€…å¦‚ä½•æœ‰åŠ›è¯æ˜ä»–è§£å†³äº†é—®é¢˜</h2><p>è¯„ä¼°çš„ç›®çš„æ˜¯ç¡®å®šMULTI-CLOCKæ˜¯å¦ã€ä½•æ—¶ä»¥åŠå¦‚ä½•èƒ½å¤Ÿæé«˜åº”ç”¨å·¥ä½œè´Ÿè½½çš„æ€§èƒ½ã€‚</p><p>ä½¿ç”¨é›…è™äº‘æœåŠ¡åŸºå‡†ï¼ˆYCSBï¼‰[13]çš„å…­ä¸ªä¸åŒçš„å·¥ä½œè´Ÿè½½å’ŒGAPåŸºå‡†å¥—ä»¶(GAPBS) [14] çš„å…­ä¸ªå·¥ä½œè´Ÿè½½æ¥è®¨è®ºæˆ‘ä»¬çš„ç»“æœã€‚Memcached[3]ï¼Œä¸€ä¸ªä½¿ç”¨å¤§é‡ä¸»å†…å­˜æ¥ç»´æŠ¤å…¶æ•°æ®çš„å†…å­˜ç¼“å­˜æœåŠ¡ï¼Œä½œä¸ºYCSBçš„é”®å€¼å­˜å‚¨åç«¯ã€‚ é…ç½®æ—¶å†…å­˜è¦è¢«å…¨éƒ¨æ¶ˆè€—ï¼Œå¹¶ä¸”æ¶ˆè€—ä¸€éƒ¨åˆ†PMã€‚</p><p>MULTI-CLOCkåœ¨æ‰€æœ‰YSCBå·¥ä½œè´Ÿè½½ä¸Šéƒ½ä¼˜äºé™æ€åˆ†å±‚ã€Nimbleã€AT-CPMå’ŒAT-OPMã€‚å¯¹GAPBSçš„æ‰§è¡Œæ—¶é—´ä¹Ÿæ¯”å…¶ä»–æ–¹æ¡ˆå‡å°‘ã€‚</p><p>åˆ†æäº†MULT-CLOCKå’ŒNimbleæ‰€å‡çº§çš„é¡µé¢æ•°é‡ã€‚MULTI-CLOCKæ¯æ¬¡æ‰«æå¹³å‡å‡çº§758é¡µï¼Œæœ€å¤šæ‰«æ1024ã€‚è€ŒNæ˜¯æŠŠ1024ä½œä¸ºå›ºå®šå€¼ã€‚å¦‚æœé‚£äº›å°†æ¥ä¸ä¼šå†è¢«é‡æ–°è®¿é—®çš„é¡µé¢è¢«æå‡åˆ°DRAMä¸­ï¼Œé‚£ä¹ˆæå‡è¿™äº›é¡µé¢çš„å¼€é”€ä¼šæŸå®³ç³»ç»Ÿæ€§èƒ½ã€‚ç¬¬äºŒæ¬¡å†æ¬¡è¢«è®¿é—®çš„ç™¾åˆ†æ¯”æ¯”Né«˜15%</p><p>å®ç°äº†ç›®æ ‡ï¼Œä½å¼€é”€ï¼Œç‰¹åˆ«æ˜¯å¯†é›†å‹åº”ç”¨ã€‚</p><h2 id="7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"><a href="#7-ç¼ºé™·å’Œæ”¹è¿›æ€è·¯" class="headerlink" title="7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯"></a>7. ç¼ºé™·å’Œæ”¹è¿›æ€è·¯</h2><ol><li>èƒ½è€—æ–¹é¢æ‘˜è¦æäº†ä¸€ä¸‹ï¼Œåé¢ä¹Ÿæ²¡è¯´å‘€ã€‚</li><li>ä½œè€…æºç æœ‰ä¸€äº›é—®é¢˜ï¼Œåœ¨è¿è¡Œé«˜æ€§èƒ½è®¡ç®—ç”¨MIPçš„æ—¶å€™ä¼šå†…æ ¸å´©æºƒã€‚</li><li>åé¢çš„æ€§èƒ½è¯„ä¼°å¯¹æ¯”äº†å‡ ç§ç›¸å…³çš„å·¥ä½œï¼Œä½†æ˜¯é€‰æ‹©çš„workloadä¹Ÿæ˜¯æ¯”è¾ƒå±€é™çš„ï¼ŒGAPBSçš„è®ºæ–‡éƒ½æ²¡æœ‰æ­£å¼å‘å‡ºæ¥ã€‚</li></ol><h2 id="8-åˆ›æ–°ç‚¹"><a href="#8-åˆ›æ–°ç‚¹" class="headerlink" title="8. åˆ›æ–°ç‚¹"></a>8. åˆ›æ–°ç‚¹</h2><ol><li>åœ¨å†…æ ¸ä¸Šä¿®æ”¹ä»£ç ï¼Œä¸éœ€è¦å…¶ä»–ç¨‹åºæœ‰ä»€ä¹ˆä¿®æ”¹ã€‚</li><li>ä½¿ç”¨å‡çº§åˆ—è¡¨å’Œé¢‘ç‡å¯ä»¥å¾ˆå¥½çš„åˆ©ç”¨å±‚çº§å‹å¥½é¡µé¢çš„å±€éƒ¨æ€§ã€‚</li></ol><h2 id="9-ç›¸å…³é“¾æ¥"><a href="#9-ç›¸å…³é“¾æ¥" class="headerlink" title="9. ç›¸å…³é“¾æ¥"></a>9. ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://github.com/sylab/multi-clock">ä½œè€…å…¬å¸ƒçš„æºç </a></li><li><a href="https://docs.pmem.io/ndctl-user-guide/">ndctlç”¨æˆ·æ‰‹å†Œ</a></li><li><a href="https://pmem.io/blog/2020/01/memkind-support-for-kmem-dax-option/">PMçš„ADæ¨¡å¼ä¸‹çš„kmemæ¨¡å¼è®¾ç½®</a></li><li><a href="https://github.com/brianfrankcooper/YCSB">YCSBå·¥ä½œè´Ÿè½½æºç </a></li><li><a href="https://cloud.tencent.com/developer/article/1004637">YCSBä»‹ç»ä¸ç›¸å…³è¿è¡Œé…ç½®ä»‹ç»</a></li><li><a href="https://github.com/pmem/ndctl/tree/main/Documentation/daxctl">ndctlä¸‹çš„daxctlå®‰è£…æºç ä¸‹è½½</a></li><li><a href="https://memark.io/index.php/2021/04/09/pmem_intro/">æŒä¹…å†…å­˜å¼€å‘èµ„æ–™æ±‡æ€»</a></li><li><a href="https://blog.csdn.net/qq_37858386/article/details/78444168">Linuxé©±åŠ¨ç¼–ç¨‹ä¸­EXPORT_SYMBOLä»‹ç»ï¼ˆå› ä¸ºä½œè€…å…¬å¸ƒçš„æºç é‡Œæœ‰è¿™ä¸ªæŠ¥é”™ï¼‰</a></li><li><a href="https://github.com/pmem/ndctl/issues/108">daxctl fails to reconfigure to system-ram when DAX modules built-in</a></li><li><a href="https://www.intel.com/content/www/us/en/developer/articles/guide/qsg-intro-to-provisioning-pmem.html">æŒä¹…å†…å­˜é…ç½®ç®€ä»‹ï¼Œå¿«é€Ÿå…¥é—¨</a></li><li><a href="https://github.com/sbeamer/gapbs">GAPBSå·¥ä½œè´Ÿè½½ä¸‹è½½å’Œä½¿ç”¨</a></li></ul><h2 id="10-ç§¯ç´¯"><a href="#10-ç§¯ç´¯" class="headerlink" title="10. ç§¯ç´¯"></a>10. ç§¯ç´¯</h2><p> å½“ä½¿ç”¨PMä½œä¸ºä¸»å­˜å‚¨å™¨æ—¶ï¼Œå…¶æŒä¹…æ€§èƒ½åŠ›å˜å¾—æ— å…³ç´§è¦ï¼ˆè¿™é‡Œä½œè€…éµå¾ªåŸå…ˆçš„ä¸»å­˜çš„è®¾è®¡ï¼Œå³æ˜“å¤±æ€§ï¼ŒæŠ›å¼ƒäº†NVMæ•°æ®æŒä¹…çš„ç‰¹ç‚¹ï¼Œåé¢æåˆ°çš„è¯¥äº§å“Memory Modeï¼Œå¹¶ä¸”æ–‡çŒ®[10]è¯´PMEPæƒ³è¦æŒä¹…æ€§é çš„æ˜¯<code>clflush</code>æŒ‡ä»¤ï¼Œè¿™ä¸ªæŒ‡ä»¤ç”±äºè¦æ’åºå¼€é”€å¾ˆå¤§ï¼‰ï¼Œä»è€Œå®Œå…¨é¿å…äº†å…¶æœ€å¤§çš„æ€§èƒ½å¼€é”€[10]</p><p> æœ‰å¼€æºå†…æ ¸å¥½åƒæœ‰ä¸€ä¸ªé€‰é¡¹å¯ä»¥è®¡æ•°éšæ—¶é—´å˜åŒ–é¡µé¢åœ¨å±‚çº§é—´è¿ç§»çš„æ•°é‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> A </tag>
            
            <tag> Hybrid Memory Systems </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Time Complexity Calculation</title>
      <link href="/2021/06/06/Time-Complexity-Calculation/"/>
      <url>/2021/06/06/Time-Complexity-Calculation/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å¸¸è§é˜¶å¤§å°æ¯”è¾ƒ"><a href="#ä¸€ã€å¸¸è§é˜¶å¤§å°æ¯”è¾ƒ" class="headerlink" title="ä¸€ã€å¸¸è§é˜¶å¤§å°æ¯”è¾ƒ"></a>ä¸€ã€å¸¸è§é˜¶å¤§å°æ¯”è¾ƒ</h2><p>ä»å¤§åˆ°å°ï¼š  </p><ul><li>è¶…æŒ‡æ•°é˜¶ï¼š$n^n$ï¼Œ$n!$</li><li>æŒ‡æ•°é˜¶ï¼š$9^{n/2}$,  $2^n$</li><li>å¤šé¡¹å¼é˜¶ï¼š$n^3$,   $n*log(n)$, $n^{1/2}$</li><li>å¯¹æ•°é˜¶ï¼š$log^2(n)$, $log(n)$, $log(log(n))$</li><li>å¸¸æ•°é˜¶ï¼š100, 1<br>ä¸‹é¢˜éœ€è¦ä¿ç•™é˜¶æœ€é«˜çš„éƒ¨åˆ†ï¼š<img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/20210605220748744.jpg"></li></ul><h2 id="äºŒã€ç®—æ³•å¤æ‚æ€§ä¼°è®¡å‡½æ•°"><a href="#äºŒã€ç®—æ³•å¤æ‚æ€§ä¼°è®¡å‡½æ•°" class="headerlink" title="äºŒã€ç®—æ³•å¤æ‚æ€§ä¼°è®¡å‡½æ•°"></a>äºŒã€ç®—æ³•å¤æ‚æ€§ä¼°è®¡å‡½æ•°</h2>$$\lim_{n \to \infty} \frac{f(n)}{g(n)}  =\begin{cases}(å¤§äº0çš„å¸¸æ•°æˆ–)0       &amp;&amp;&amp; f(n)=O(g(n))ä¸Šç•Œ&amp;-----f(n)\le cg(n)\\(å¤§äº0çš„å¸¸æ•°æˆ–)æ— ç©·    &amp;&amp;&amp; f(n)= \Omega(g(n))ä¸‹ç•Œ&amp;-----f(n)\ge cg(n)\\å¤§äº0çš„å¸¸æ•°            &amp;&amp;&amp; f(n)= \Theta(g(n))ç¡®åˆ‡ç•Œ&amp;-----f(n)=cg(n)\\0      &amp;&amp;&amp;f(n)=o(g(n))ä¸Šç•Œ&amp;-----f(n)&lt; cg(n)\end{cases}$$<p>å¯ä»¥å‘ç°éƒ½æ˜¯é’ˆå¯¹f(n)åœ¨è®¨è®ºï¼Œå¾ˆå®¹æ˜“å¾—å‡ºä¸‹é¢˜ç­”æ¡ˆï¼š<img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/20210605220628312.jpg"></p><h2 id="ä¸‰ã€å‡ ä¸ªå¸¸ç”¨æ›¿æ¢çš„å¼å­"><a href="#ä¸‰ã€å‡ ä¸ªå¸¸ç”¨æ›¿æ¢çš„å¼å­" class="headerlink" title="ä¸‰ã€å‡ ä¸ªå¸¸ç”¨æ›¿æ¢çš„å¼å­"></a>ä¸‰ã€å‡ ä¸ªå¸¸ç”¨æ›¿æ¢çš„å¼å­</h2><h3 id="1-Stirlingå…¬å¼ï¼š"><a href="#1-Stirlingå…¬å¼ï¼š" class="headerlink" title="1.Stirlingå…¬å¼ï¼š"></a>1.Stirlingå…¬å¼ï¼š</h3>$$n! \approx {(2 \pi n)}^{1/2}{(n/e)}^n$$<p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/20210605222019202.jpg"></p><h3 id="2-é˜¶ä¹˜å’ŒäºŒé¡¹å¼ç³»æ•°"><a href="#2-é˜¶ä¹˜å’ŒäºŒé¡¹å¼ç³»æ•°" class="headerlink" title="2.é˜¶ä¹˜å’ŒäºŒé¡¹å¼ç³»æ•°"></a>2.é˜¶ä¹˜å’ŒäºŒé¡¹å¼ç³»æ•°</h3>$$C_n^k = C_n^{n-k} \\ C_n^n = C_n^0 = 1 \\C_n^k = C_{n-1}^k +C_{n-1}^{k-1} $$<p>å¸•æ–¯å¡ä¸‰è§’å½¢å¯ä»¥è¾…åŠ©è®°äºŒé¡¹å¼ç³»æ•°ï¼š<img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/2021060522532381.jpg"></p>$$\sum_{j=0}^{n}{C_{n}^j}x^j= {(1+x)}^n $$<h3 id="3-å’Œå¼"><a href="#3-å’Œå¼" class="headerlink" title="3.å’Œå¼"></a>3.å’Œå¼</h3>$$\sum_{j=1}^{n}{a_{n-j}} = \sum_{j=0}^{n-1}{a_j} \\\sum_{j=0}^n{j \over 2^j} = \sum_{j=1}^n{j \over 2^j} = 2-{{(n+2)} \over {n^2}} = \Theta(1) \\\sum_{j=0}^njc^j = \sum_{j=1}^njc^j = \Theta(nc^n)$$<h3 id="4-å®šç§¯åˆ†ä¸å’Œå¼è½¬æ¢"><a href="#4-å®šç§¯åˆ†ä¸å’Œå¼è½¬æ¢" class="headerlink" title="4.å®šç§¯åˆ†ä¸å’Œå¼è½¬æ¢"></a>4.å®šç§¯åˆ†ä¸å’Œå¼è½¬æ¢</h3>$$\int_m^{n+1} f(x) dx  \le \sum_{j=m}^nf(j) \le \int_{m-1}^nf(x)dx é€’å‡å‡½æ•° \\\int_{m-1}^{n} f(x) dx  \le \sum_{j=m}^nf(j) \le \int_{m}^{n+1}f(x)dx  é€’å¢å‡½æ•°$$<p>å¯ä»¥é‡‡ç”¨ç”»å›¾çš„æ–¹æ³•è¾…åŠ©è®°å¿†å®ƒçš„ä¸Šä¸‹ç•Œï¼š<br>ä»¥ä¸€ä¸ªé€’å¢çš„å‡½æ•°ä¸ºä¾‹ï¼Œæˆ‘ä»¬è¦æ±‚1ï¼ˆmï¼‰~6ï¼ˆnï¼‰ä»–çš„é¢ç§¯ï¼Œæ¯ä¸€ä¸ªå°çŸ©å½¢$1*f(j)$å¦‚æœæˆ‘ä»¬ç§¯åˆ†æ¯ä¸ªç‚¹å·¦è¾¹çš„çŸ©å½¢ï¼Œé‚£ä¹ˆæ€»é¢ç§¯å°±æ˜¯åå°çš„ï¼Œç§¯åˆ†å³è¾¹çŸ©å½¢å°±ä¼šç¨å¾®åå¤§ï¼Œè¿™å°±æ‰¾åˆ°äº†ä¸Šä¸‹ç•Œï¼Œå½“å‡½æ•°å¹³è¡ŒäºXè½´æ—¶å°±ä¼šæœ‰ç­‰å·ã€‚é€’å‡ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ã€‚<img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/20210606094351964.jpg"><br>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯lognç­‰å‡½æ•°ä¼šé‡åˆ°å®šä¹‰åŸŸä¸å­˜åœ¨çš„æƒ…å†µã€‚æˆ‘ä»¬åº”è¯¥ä»å’Œå¼ä¸­æŠŠï¼ˆåœ¨ç§¯åˆ†ä¸­ï¼‰æ²¡æœ‰å®šä¹‰çš„ç‚¹å…ˆæ‹¿å‡ºæ¥ï¼Œå†å»ç§¯åˆ†ã€‚<img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/2021060610042349.jpg"></p><p>ç”¨ä»£æ•°æ–¹æ³•è¯æ˜å°±æ˜¯æ”¾å¤§ç¼©å°å»æ±‚ï¼Œç”¨ç§¯åˆ†æ–¹æ³•è¯æ˜å°±æ˜¯ç”¨ä¸Šé¢é‚£ä¸ªå…¬å¼ã€‚å¯ä»¥çœ‹åˆ°ç§¯åˆ†æ–¹æ³•æ±‚æ—¶ç­‰å¼å·¦è¾¹æŒ‰å…¬å¼åº”è¯¥ä¸º$\int_0^n jlogj !\ dj$å®šä¹‰åŸŸ<br>ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å¯¹äºå³è¾¹ï¼š</p>$$\sum_{j=1}^njlogj=\sum_{j=2}^njlogj+1log1=\int_{2-1}^njlogj \!\ dj+1log1$$<h2 id="å››ã€è®¡ç®—æ¬¡æ•°"><a href="#å››ã€è®¡ç®—æ¬¡æ•°" class="headerlink" title="å››ã€è®¡ç®—æ¬¡æ•°"></a>å››ã€è®¡ç®—æ¬¡æ•°</h2><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">ç®—æ³•:COUNTè¾“å…¥:n=2k,kä¸ºæ­£æ•´æ•°ã€‚è¾“å‡º: countçš„å€¼ ã€‚count=0while n&gt;=1for j=1 to ncount=count+1n=n/2return countend COUNT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>whileè¦æ‰§è¡Œk+1æ¬¡ï¼Œ$k=log_2n$.forå¾ªç¯åœ¨æ¯æ¬¡whileçš„åŸºç¡€ä¸Šæ‰§è¡Œnæ¬¡æ‰€ä»¥(k+1)nå³$nlog_2n$æ¬¡è®¡ç®—</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">ç®—æ³•: MERGEè¾“å…¥:æ•°ç»„A[1..m]å’Œå®ƒçš„ä¸‰ä¸ªç´¢å¼•p, q, r, 1&lt;=p&lt;=q&lt;r&lt;=mã€‚ä¸¤ä¸ªå­æ•°ç»„A[p..q]å’ŒA[q+1..r]å„è‡ªæŒ‰å‡åºæ’åˆ—ã€‚è¾“å‡º:åˆå¹¶ä¸¤ä¸ªå­æ•°ç»„A[p..q]å’ŒA[q+1..r]çš„å‡åºæ•°ç»„A[p..r]for(s=p, t=q+1, k=p; S&lt;=q and t&lt;=r; k++)if A[s]&lt;=A[t] //ä¸¤ä¸ªæŒ‡é’ˆä»ä¸¤ä¸ªå¤´å¼€å§‹æ’åºB[k]=A[s]; //B[p..r]æ˜¯ä¸ªè¾…åŠ©æ•°ç»„S=S+1;elseB[k]=A[t];t=t+1;if s=q+1 B[k..r]=A[q+1..r] elseB[k..r]=A[s..q]A[p..r]=B[p..r]end MERGE<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸¤æ®µç›¸é‚»æ•°ç»„åˆ†åˆ«æœ‰åºï¼Œä¸¤ä¸ªæŒ‡é’ˆå°†ä¸¤æ®µå˜ä¸ºæœ‰åºçš„ã€‚2(r-p+1)å…ˆéå†ä¸€æ¬¡æ’åºï¼Œåœ¨ä»æ’å¥½åºçš„è¾…åŠ©æ•°ç»„ç§»å›æ¥ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">void insertion_ sort(Type *a, int n){// ä»£ä»· æ¬¡æ•°// ti: forçš„ç¬¬iæ¬¡whileçš„å¾ªç¯æ¬¡æ•°for (int i=1; i&lt;n; i++){// c1   n(æ¯”è¾ƒè¯­å¥)key=a[i];// c2   n-1int j=i-1;// c3   n-1while( j&gt;=0 &amp;&amp; a[j]&gt;key ){  // c4   sum tia[j+1] = a[j];// c5   sum of (ti-1)j--;// c6sum of (ti-1)}a[j+1]=key; // c7   n-1}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ’å…¥æ’åºçš„æ€æƒ³æ˜¯å·¦æ‰‹ä¸ºç©ºï¼Œå³æ‰‹çš„ç‰ŒæŒ‰åºæ’å…¥ã€‚è¿™é‡Œtæ˜¯ä¸ªä¸ç¡®å®šçš„æ•°ï¼Œä½†æ˜¯è¿˜æ˜¯å¯ä»¥å¾—å‡ºè®¡ç®—æ¬¡æ•°ä¸ºï¼š</p><p>$$c_1n+c_2(n-1)+c_3(n-1)+c_4\sum_{i=1}^{n-1}{t_i}+c_5\sum_{i=1}^{n-1}{(t_i-1)}+c_6\sum_{i=1}^{n-1}{(t_i-1)}+c_7(n-1)$$</p><p>æœ€å¥½æƒ…å†µå°±æ˜¯å·²ç»æ’å¥½åºäº†ï¼Œc5ä¸c6éƒ½æ˜¯0ï¼Œæ¯æ¬¡forçš„whileéƒ½åªè·‘ä¸€æ¬¡ã€‚<br>$$c_1n+c_2(n-1)+c_3(n-1)+c_4(n-1)+c_7(n-1) = O(n)$$<br>æœ€åæƒ…å†µå°±æ˜¯å€’åºæ’çš„ï¼Œnå¼ ç‰Œæ¯æ¬¡éƒ½æ¯”ä¸Šä¸€æ¬¡å¤šæŸ¥æ‰¾ä¸€ä¸ªã€‚</p><p>$$\sum_{i=1}^{n-1}{(t_i-1)} = n(n-1)/2$$</p><p>å¤æ‚åº¦$O(n^2)$</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">1. COUNT42.count &lt;-- 03.for i â†- 1 to Llognã€4.for j â†- i to i+55.for k â†- 1 to i^26.         count â†- count +17.end for8.  end for9.end for(a)ç¬¬6æ­¥æ‰§è¡Œäº†å¤šå°‘æ¬¡?(b)è¦è¡¨ç¤ºç®—æ³•çš„æ—¶é—´å¤æ‚æ€§ï¼Œç”¨0å’ŒOå“ªä¸ªç¬¦å·æ›´åˆé€‚?ä¸ºä»€ä¹ˆ?(c)ç®—æ³•çš„æ—¶é—´å¤æ‚æ€§æ˜¯ä»€ä¹ˆ?<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>aï¼‰æ€è·¯æ˜¯æŠŠæ¯æ¬¡forå¾ªç¯ä¹˜èµ·æ¥ã€‚<br>$$\sum_{i=1}^{\lfloor logn \rfloor}\sum_{j=i}^{i+5}\sum_{k=1}^{i^2}{1}$$å†…å±‚æŒ‡çš„æ˜¯ä»1åˆ°$i^2$ä¸ª1ç›¸åŠ $=\sum_{i=1}^{\lfloor logn \rfloor}\sum_{j=i}^{i+5}{i^2} = 6\sum_{i=1}^{\lfloor logn \rfloor}{i^2}$<br>åˆ©ç”¨å¹³æ–¹å’Œæ±‚å’Œå…¬å¼$n(n+1)(2n+1)/6$è¿›ä¸€æ­¥åŒ–ç®€$=\lfloor logn \rfloor(\lfloor logn \rfloor +1)(2\lfloor logn \rfloor+1)$<br>bï¼‰ O å› ä¸ºå¯¹äºç®—å‡ºçš„ç¡®åˆ‡çš„è®¡ç®—æ¬¡æ•°ï¼Œè¿™ä¸ªç”¨äºè¡¨ç¤ºç®—æ³•æ—¶é—´å¤æ‚æ€§çš„å‡½æ•°æ˜¯å®ƒä¸Šç•Œã€‚<br>cï¼‰$O(log^3n)$</p><h2 id="äº”ã€è§£é€’å½’æ–¹ç¨‹å¼"><a href="#äº”ã€è§£é€’å½’æ–¹ç¨‹å¼" class="headerlink" title="äº”ã€è§£é€’å½’æ–¹ç¨‹å¼"></a>äº”ã€è§£é€’å½’æ–¹ç¨‹å¼</h2><h3 id="1-çº¿æ€§é½æ¬¡é€’æ¨å¼ï¼ˆäºŒé˜¶ï¼‰"><a href="#1-çº¿æ€§é½æ¬¡é€’æ¨å¼ï¼ˆäºŒé˜¶ï¼‰" class="headerlink" title="1.çº¿æ€§é½æ¬¡é€’æ¨å¼ï¼ˆäºŒé˜¶ï¼‰"></a>1.çº¿æ€§é½æ¬¡é€’æ¨å¼ï¼ˆäºŒé˜¶ï¼‰</h3><p>å¯¹äºé€’æ¨å¼:$$f(n)=a_1f(n-1)+a_2f(n-2)+â€¦+a_kf(n-k)$$æˆ‘ä»¬æƒ³è¦å¾—åˆ°$f(n)$çš„ç¡®åˆ‡è§£ï¼Œå®ƒçš„è§£å¾€å¾€æ˜¯$x^n$äºæ˜¯æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªé€’æ¨å¼çš„ç­‰ä»·äº:$$x_n=a_1x^{n-1}+a_2x^{n-2}+â€¦+a_kx^{n-k}$$å°†ä¸¤è¾¹åŒæ—¶é™¤ä»¥$x^{n-k}$å¹¶ä¸”ç§»é¡¹å¯ä»¥å¾—åˆ°ä¸næ— å…³è¿˜èƒ½è§£å‡ºxçš„å¼å­$$x^k-a_1x^{k-1}-a_2x^{k-2}-â€¦-a_k = 0$$è¿™ä¸ªå°±æ˜¯å¸¸è¯´çš„ç‰¹å¾æ–¹ç¨‹ã€‚</p><table><thead><tr><th align="center">æ­¥éª¤</th><th align="center">ä¾‹1</th><th align="center">ä¾‹2</th></tr></thead><tbody><tr><td align="center">åºåˆ—</td><td align="center">1,4,16,64,256</td><td align="center">1,1,2,3,5,8(æ–æ³¢æ‹‰å¥‘)</td></tr><tr><td align="center">é€’æ¨å…³ç³»</td><td align="center">f(n)=3f(n-1)+4f(n-2)</td><td align="center">f(n)=f(n-1)+f(n-2)</td></tr><tr><td align="center">ç‰¹å¾æ–¹ç¨‹</td><td align="center">$x^2-3x-4=0$</td><td align="center">$x^2-x-1=0$</td></tr><tr><td align="center">ç‰¹å¾æ ¹</td><td align="center">$x_1=-1,x_2=4$</td><td align="center">$x_1= { {1+\sqrt5} \over 2},x_2={ {1-\sqrt5} \over 2}$</td></tr><tr><td align="center">é€šè§£</td><td align="center">$f(n) = c_1{(-1)}^n+c_24^n$</td><td align="center">$f(n)=c_1\left( { {1+\sqrt5} \over 2} \right)^n+c_2\left( { {1-\sqrt5} \over 2} \right)^n$</td></tr><tr><td align="center">å¸¦å…¥åºåˆ—ä¸­çš„ç‚¹</td><td align="center">$c_1=0,c_2=1$</td><td align="center">$c_1={1\over {\sqrt5}},c_2=-{1\over {\sqrt5}}$</td></tr><tr><td align="center">æœ€ç»ˆè§£</td><td align="center">$f(n)=4^n$</td><td align="center">ç”±äºnæ— ç©·å¤§$c_2\left( { {1-\sqrt5} \over 2} \right)^n$è¶‹äº0,$f(n)={1\over {\sqrt5}}\left( { {1+\sqrt5} \over 2} \right)^n$</td></tr></tbody></table><p>è¿˜æœ‰ç§ç‰¹æ®Šæƒ…å†µï¼š$x_1=x_2=x$æ—¶$f(n)=c_1nx^n+c_2x^n$</p><h3 id="2-éé½æ¬¡é€’æ¨å¼"><a href="#2-éé½æ¬¡é€’æ¨å¼" class="headerlink" title="2.éé½æ¬¡é€’æ¨å¼"></a>2.éé½æ¬¡é€’æ¨å¼</h3><h4 id="2-1-f-n-f-n-1-g-n"><a href="#2-1-f-n-f-n-1-g-n" class="headerlink" title="2.1  f(n)=f(n-1)+g(n)"></a>2.1  f(n)=f(n-1)+g(n)</h4><p>å¯¹äºè¿™ä¸€ç±»g(n)æ˜¯ä¸€ä¸ªå·²çŸ¥çš„å‡½æ•°ï¼Œæ¨å¯¼å¯å¾—ï¼š<br>$$f(n) = f(n-1)+g(n) = \big(f(n-2)+g(n-1)\big)+g(n) = f(0)+ \sum_{j=1}^ng(j)$$<br><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/20210606120205290.jpg"><br>è¿™é“é¢˜éº»çƒ¦ç‚¹åœ¨äºæ€ä¹ˆæŠŠå‰é¢çš„ç³»æ•°3ææ²¡äº†ã€‚ç”±1æˆ‘ä»¬çŸ¥é“ï¼Œè¿™ç§é€’æ¨å¼æ˜¯$f(n)=x^n$å˜å½¢ä»¤$f(n)=3^nq(n), f(0)=q(0)=3$äºæ˜¯ä¹åŸå¼å˜ä¸ºï¼š</p>$$3^nq(n)=3*3^{n-1}q(n-1)+2^n \\ q(n)=q(n-1)+{(2/3)}^n\\ q(n)=q(0)+\sum_{j=1}^n{{(2/3)}^n}\\ f(n)=3^n*\big(3+{(2/3)(1-{(2/3)}^n) \over {1-(2/3)}}\big) \\ f(n)=5*3^n+2^{n+1}$$<h4 id="2-2-f-n-f-n-1-g-n"><a href="#2-2-f-n-f-n-1-g-n" class="headerlink" title="2.2  f(n)=f(n-1)*g(n)"></a>2.2  f(n)=f(n-1)*g(n)</h4><p>å¯¹äºè¿™ä¸€ç±»g(n)ä¹Ÿæ˜¯ä¸€ä¸ªå·²çŸ¥çš„å‡½æ•°ï¼Œæ¨å¯¼å¯å¾—ï¼š<br>$$f(n) = f(n-1)*g(n) = \big(f(n-2)*g(n-1)\big)+g(n) = f(0)\prod_{i=1}^ng(i)$$</p><h4 id="2-3-f-n-f-n-1-g-n-h-n"><a href="#2-3-f-n-f-n-1-g-n-h-n" class="headerlink" title="2.3  f(n)=f(n-1)*g(n)+h(n)"></a>2.3  f(n)=f(n-1)*g(n)+h(n)</h4><p>å¯ä»¥ç›´æ¥æ¨ï¼Œä¹Ÿå¯ä»¥å¸¦ç‚¹æŠ€å·§æ¨ã€‚ç»“æœï¼š$$=\prod_{i=1}^ng(i)\big( f(0)+\sum_{j=1}^n{h(j) \over{\prod_{i=1}^ng(i)} } \big)$$</p><h4 id="2-4-f-n-af-n-c-g-n"><a href="#2-4-f-n-af-n-c-g-n" class="headerlink" title="2.4 f(n)=af(n/c)+g(n)"></a>2.4 f(n)=af(n/c)+g(n)</h4>$$f(n)=\begin{cases} d&amp; \text{n=1}\\af({n\over c})+bn^x&amp; \text{n &gt;= 2} \end{cases}$$<p>å…¶ä¸­déè´Ÿå¸¸é‡ï¼Œg(n)éè´Ÿå‡½æ•°ï¼Œaï¼Œcæ­£æ•°ã€‚è®¾$n=c^k$</p>$$f(n)=\begin{cases} bn^x*log_cn^x+dn^x&amp;{a=c^x}\\ \big(d+{{bc^x}\over{a-c^x}}\big)n^{log_ca}-\big({{bc^x}\over{a-c^x}}\big)n^x&amp; {a\neq c^x} \end{cases}$$<p><img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/20210606123724891.jpg"><br>è¿™é“é¢˜å°±æ²¡æœ‰ä¸ºéš¾èœé¸¡ï¼Œç›´æ¥æŠŠæ–¹å‘ç»™äº†ã€‚è¿™ç§åšæ³•åœ¨é‡åˆ°f(n/2)çš„æƒ…å†µä¸‹å«åš<strong>æ›´æ¢å˜å…ƒæ³•</strong><br>$$f(2^k)=f(2^{k-1})+2^k=f(2^0)+\sum_{i=1}^k2^i=2^{k+1}-1 =2n-1\<br>g(2^k)=2g(2^{k-1})+1=\sum_{i=0}^k2^i=2^{k+1}-1=2n-1$$<br>ä¹Ÿå¯ä»¥ç›´æ¥å¥—å…¬å¼:<br>å¯¹äºf   $d=1,a=1,c=2,b=1$<br>å¯¹äºg  $a=2,c=2,b=1,d=1$<br>è¿™äº›å…¬å¼å¤ªæƒ¨ç»äººå¯°äº†ï¼Œå…¶ä»–è¿˜æœ‰ä¸€äº›å’Œ2.4ä¸€æ ·å¤æ‚çš„ï¼Œç­‰é‡åˆ°äº†å†è¡¥å……ä¸Šå»ã€‚</p><h2 id="å…­ã€pã€npã€np-hardã€np-completeé—®é¢˜"><a href="#å…­ã€pã€npã€np-hardã€np-completeé—®é¢˜" class="headerlink" title="å…­ã€pã€npã€np-hardã€np-completeé—®é¢˜"></a>å…­ã€pã€npã€np-hardã€np-completeé—®é¢˜</h2><p><a href="https://blog.csdn.net/birduncle/article/details/94646993">pã€npã€np-hardã€np-completeé—®é¢˜</a>è¿™ç¯‡æ–‡ç« è®²çš„å¾ˆæ¸…æ™°ï¼Œé™„ä¸Šä¸€å¼ ä»æ–‡ç« é‡Œæ‹¿çš„<img src="https://images.weserv.nl/?url=https://img-blog.csdnimg.cn/20210704092654261.png"></p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Advanced Mathematics </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
